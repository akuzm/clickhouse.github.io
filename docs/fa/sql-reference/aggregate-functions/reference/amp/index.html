










    



    



    



    
    






    <!doctype html>
<html ⚡ lang="fa">
  <head>
    <meta charset="utf-8">
    <script async src="https://cdn.ampproject.org/v0.js"></script>
    <title>مرجع | مستندات ClickHouse</title>
    <link rel="canonical" href="https://clickhouse.tech/docs/fa/sql-reference/aggregate-functions/reference/" />
    <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">
    
<script type="application/ld+json">[{
"@context": "http://schema.org",
"@type": "TechArticle",
"headline": "مرجع | مستندات ClickHouse",
"mainEntityOfPage": "https://clickhouse.tech/docs/fa/sql-reference/aggregate-functions/reference/",

"datePublished": "2020-04-04T12:15:31+03:00",
"dateModified": "2020-05-15T07:34:54+03:00",

"image": "https://clickhouse.tech/images/logo-209x60.png",
"author": {
  "@type": "Project",
  "name": "ClickHouse"
},
"publisher": {
  "@type": "Organization",
  "name": "Yandex LLC",
  "logo": {
    "@type": "ImageObject",
    "url": "https://clickhouse.tech/images/yandex.png",
    "width": 163,
    "height": 60
  }
}}, {
"@context": "http://schema.org",
"@type": "Episode",
"name": "مرجع | مستندات ClickHouse",
"aggregateRating": {
  "@type": "AggregateRating",
  "ratingValue": RATING_VALUE,
  "ratingCount": RATING_COUNT
}
}]</script>

    
    <style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>
    <style amp-custom>:root{--blue:#007bff;--indigo:#6610f2;--purple:#6f42c1;--pink:#e83e8c;--red:#dc3545;--orange:#fd7e14;--yellow:#ffc107;--green:#28a745;--teal:#20c997;--cyan:#17a2b8;--white:#fff;--gray:#6c757d;--gray-dark:#343a40;--primary:#007bff;--secondary:#6c757d;--success:#28a745;--info:#17a2b8;--warning:#ffc107;--danger:#dc3545;--light:#f8f9fa;--dark:#343a40;--breakpoint-xs:0;--breakpoint-sm:576px;--breakpoint-md:768px;--breakpoint-lg:992px;--breakpoint-xl:1200px;--font-family-sans-serif:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";--font-family-monospace:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace}*,::after,::before{box-sizing:border-box}html{font-family:sans-serif;line-height:1.15;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent}footer,section{display:block}body{margin:0;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-size:1rem;font-weight:400;line-height:1.5;color:#212529;text-align:left;background-color:#fff}[tabindex="-1"]:focus:not(:focus-visible){outline:0}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:.5rem}p{margin-top:0;margin-bottom:1rem}ol,ul{margin-top:0;margin-bottom:1rem}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}b,strong{font-weight:bolder}small{font-size:80%}a{color:#007bff;text-decoration:none;background-color:transparent}a:hover{color:#0056b3;text-decoration:underline}a:not([href]){color:inherit;text-decoration:none}a:not([href]):hover{color:inherit;text-decoration:none}code,pre{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:1em}pre{margin-top:0;margin-bottom:1rem;overflow:auto}img{vertical-align:middle;border-style:none}svg{overflow:hidden;vertical-align:middle}table{border-collapse:collapse}label{display:inline-block;margin-bottom:.5rem}select{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}select{text-transform:none}select{word-wrap:normal}[type=button],[type=reset],[type=submit]{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled){cursor:pointer}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner{padding:0;border-style:none}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:none}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}[hidden]{display:none}.h1,.h2,.h3,.h4,.h5,.h6,h1,h2,h3,h4,h5,h6{margin-bottom:.5rem;font-weight:500;line-height:1.2}.h1,h1{font-size:2.5rem}.h2,h2{font-size:2rem}.h3,h3{font-size:1.75rem}.h4,h4{font-size:1.5rem}.h5,h5{font-size:1.25rem}.h6,h6{font-size:1rem}.lead{font-size:1.25rem;font-weight:300}.display-1{font-size:6rem;font-weight:300;line-height:1.2}.display-2{font-size:5.5rem;font-weight:300;line-height:1.2}.display-3{font-size:4.5rem;font-weight:300;line-height:1.2}.display-4{font-size:3.5rem;font-weight:300;line-height:1.2}.small,small{font-size:80%;font-weight:400}.img-fluid{max-width:100%;height:auto}code{font-size:87.5%;color:#e83e8c;word-wrap:break-word}a>code{color:inherit}pre{display:block;font-size:87.5%;color:#212529}pre code{font-size:inherit;color:inherit;word-break:normal}.container{width:100%;padding-right:15px;padding-left:15px;margin-right:auto;margin-left:auto}@media(min-width:576px){.container{max-width:540px}}@media(min-width:768px){.container{max-width:720px}}@media(min-width:992px){.container{max-width:960px}}@media(min-width:1200px){.container{max-width:1140px}}.container-fluid,.container-lg,.container-md{width:100%;padding-right:15px;padding-left:15px;margin-right:auto;margin-left:auto}@media(min-width:576px){.container{max-width:540px}}@media(min-width:768px){.container,.container-md{max-width:720px}}@media(min-width:992px){.container,.container-lg,.container-md{max-width:960px}}@media(min-width:1200px){.container,.container-lg,.container-md{max-width:1140px}}.row{display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-right:-15px;margin-left:-15px}.col,.col-1,.col-10,.col-11,.col-12,.col-2,.col-3,.col-4,.col-5,.col-6,.col-7,.col-8,.col-9,.col-lg,.col-lg-1,.col-lg-10,.col-lg-11,.col-lg-12,.col-lg-2,.col-lg-3,.col-lg-4,.col-lg-5,.col-lg-6,.col-lg-7,.col-lg-8,.col-lg-9,.col-md,.col-md-1,.col-md-10,.col-md-11,.col-md-12,.col-md-2,.col-md-3,.col-md-4,.col-md-5,.col-md-6,.col-md-7,.col-md-8,.col-md-9{position:relative;width:100%;padding-right:15px;padding-left:15px}.col{-ms-flex-preferred-size:0;flex-basis:0;-ms-flex-positive:1;flex-grow:1;max-width:100%}.col-1{-ms-flex:0 0 8.333333%;flex:0 0 8.333333%;max-width:8.333333%}.col-2{-ms-flex:0 0 16.666667%;flex:0 0 16.666667%;max-width:16.666667%}.col-3{-ms-flex:0 0 25%;flex:0 0 25%;max-width:25%}.col-4{-ms-flex:0 0 33.333333%;flex:0 0 33.333333%;max-width:33.333333%}.col-5{-ms-flex:0 0 41.666667%;flex:0 0 41.666667%;max-width:41.666667%}.col-6{-ms-flex:0 0 50%;flex:0 0 50%;max-width:50%}.col-7{-ms-flex:0 0 58.333333%;flex:0 0 58.333333%;max-width:58.333333%}.col-8{-ms-flex:0 0 66.666667%;flex:0 0 66.666667%;max-width:66.666667%}.col-9{-ms-flex:0 0 75%;flex:0 0 75%;max-width:75%}.col-10{-ms-flex:0 0 83.333333%;flex:0 0 83.333333%;max-width:83.333333%}.col-11{-ms-flex:0 0 91.666667%;flex:0 0 91.666667%;max-width:91.666667%}.col-12{-ms-flex:0 0 100%;flex:0 0 100%;max-width:100%}.order-first{-ms-flex-order:-1;order:-1}.order-0{-ms-flex-order:0;order:0}.order-1{-ms-flex-order:1;order:1}.order-2{-ms-flex-order:2;order:2}.order-3{-ms-flex-order:3;order:3}.order-4{-ms-flex-order:4;order:4}.order-5{-ms-flex-order:5;order:5}.order-6{-ms-flex-order:6;order:6}.order-7{-ms-flex-order:7;order:7}.order-8{-ms-flex-order:8;order:8}.order-9{-ms-flex-order:9;order:9}.order-10{-ms-flex-order:10;order:10}.order-11{-ms-flex-order:11;order:11}.order-12{-ms-flex-order:12;order:12}@media(min-width:768px){.col-md{-ms-flex-preferred-size:0;flex-basis:0;-ms-flex-positive:1;flex-grow:1;max-width:100%}.col-md-1{-ms-flex:0 0 8.333333%;flex:0 0 8.333333%;max-width:8.333333%}.col-md-2{-ms-flex:0 0 16.666667%;flex:0 0 16.666667%;max-width:16.666667%}.col-md-3{-ms-flex:0 0 25%;flex:0 0 25%;max-width:25%}.col-md-4{-ms-flex:0 0 33.333333%;flex:0 0 33.333333%;max-width:33.333333%}.col-md-5{-ms-flex:0 0 41.666667%;flex:0 0 41.666667%;max-width:41.666667%}.col-md-6{-ms-flex:0 0 50%;flex:0 0 50%;max-width:50%}.col-md-7{-ms-flex:0 0 58.333333%;flex:0 0 58.333333%;max-width:58.333333%}.col-md-8{-ms-flex:0 0 66.666667%;flex:0 0 66.666667%;max-width:66.666667%}.col-md-9{-ms-flex:0 0 75%;flex:0 0 75%;max-width:75%}.col-md-10{-ms-flex:0 0 83.333333%;flex:0 0 83.333333%;max-width:83.333333%}.col-md-11{-ms-flex:0 0 91.666667%;flex:0 0 91.666667%;max-width:91.666667%}.col-md-12{-ms-flex:0 0 100%;flex:0 0 100%;max-width:100%}.order-md-first{-ms-flex-order:-1;order:-1}.order-md-0{-ms-flex-order:0;order:0}.order-md-1{-ms-flex-order:1;order:1}.order-md-2{-ms-flex-order:2;order:2}.order-md-3{-ms-flex-order:3;order:3}.order-md-4{-ms-flex-order:4;order:4}.order-md-5{-ms-flex-order:5;order:5}.order-md-6{-ms-flex-order:6;order:6}.order-md-7{-ms-flex-order:7;order:7}.order-md-8{-ms-flex-order:8;order:8}.order-md-9{-ms-flex-order:9;order:9}.order-md-10{-ms-flex-order:10;order:10}.order-md-11{-ms-flex-order:11;order:11}.order-md-12{-ms-flex-order:12;order:12}}@media(min-width:992px){.col-lg{-ms-flex-preferred-size:0;flex-basis:0;-ms-flex-positive:1;flex-grow:1;max-width:100%}.col-lg-1{-ms-flex:0 0 8.333333%;flex:0 0 8.333333%;max-width:8.333333%}.col-lg-2{-ms-flex:0 0 16.666667%;flex:0 0 16.666667%;max-width:16.666667%}.col-lg-3{-ms-flex:0 0 25%;flex:0 0 25%;max-width:25%}.col-lg-4{-ms-flex:0 0 33.333333%;flex:0 0 33.333333%;max-width:33.333333%}.col-lg-5{-ms-flex:0 0 41.666667%;flex:0 0 41.666667%;max-width:41.666667%}.col-lg-6{-ms-flex:0 0 50%;flex:0 0 50%;max-width:50%}.col-lg-7{-ms-flex:0 0 58.333333%;flex:0 0 58.333333%;max-width:58.333333%}.col-lg-8{-ms-flex:0 0 66.666667%;flex:0 0 66.666667%;max-width:66.666667%}.col-lg-9{-ms-flex:0 0 75%;flex:0 0 75%;max-width:75%}.col-lg-10{-ms-flex:0 0 83.333333%;flex:0 0 83.333333%;max-width:83.333333%}.col-lg-11{-ms-flex:0 0 91.666667%;flex:0 0 91.666667%;max-width:91.666667%}.col-lg-12{-ms-flex:0 0 100%;flex:0 0 100%;max-width:100%}.order-lg-first{-ms-flex-order:-1;order:-1}.order-lg-0{-ms-flex-order:0;order:0}.order-lg-1{-ms-flex-order:1;order:1}.order-lg-2{-ms-flex-order:2;order:2}.order-lg-3{-ms-flex-order:3;order:3}.order-lg-4{-ms-flex-order:4;order:4}.order-lg-5{-ms-flex-order:5;order:5}.order-lg-6{-ms-flex-order:6;order:6}.order-lg-7{-ms-flex-order:7;order:7}.order-lg-8{-ms-flex-order:8;order:8}.order-lg-9{-ms-flex-order:9;order:9}.order-lg-10{-ms-flex-order:10;order:10}.order-lg-11{-ms-flex-order:11;order:11}.order-lg-12{-ms-flex-order:12;order:12}}.table{width:100%;margin-bottom:1rem;color:#212529}.table-primary{background-color:#b8daff}.table-light{background-color:#fdfdfe}.table-dark{background-color:#c6c8ca}.table-dark{color:#fff;background-color:#343a40}.btn{display:inline-block;font-weight:400;color:#212529;text-align:center;vertical-align:middle;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-color:transparent;border:1px solid transparent;padding:.375rem .75rem;font-size:1rem;line-height:1.5;border-radius:.25rem;transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out}@media(prefers-reduced-motion:reduce){.btn{transition:none}}.btn:hover{color:#212529;text-decoration:none}.btn:focus{outline:0;box-shadow:0 0 0 .2rem rgba(0,123,255,.25)}.btn:disabled{opacity:.65}.btn-primary{color:#fff;background-color:#007bff;border-color:#007bff}.btn-primary:hover{color:#fff;background-color:#0069d9;border-color:#0062cc}.btn-primary:focus{color:#fff;background-color:#0069d9;border-color:#0062cc;box-shadow:0 0 0 .2rem rgba(38,143,255,.5)}.btn-primary:disabled{color:#fff;background-color:#007bff;border-color:#007bff}.btn-light{color:#212529;background-color:#f8f9fa;border-color:#f8f9fa}.btn-light:hover{color:#212529;background-color:#e2e6ea;border-color:#dae0e5}.btn-light:focus{color:#212529;background-color:#e2e6ea;border-color:#dae0e5;box-shadow:0 0 0 .2rem rgba(216,217,219,.5)}.btn-light:disabled{color:#212529;background-color:#f8f9fa;border-color:#f8f9fa}.btn-dark{color:#fff;background-color:#343a40;border-color:#343a40}.btn-dark:hover{color:#fff;background-color:#23272b;border-color:#1d2124}.btn-dark:focus{color:#fff;background-color:#23272b;border-color:#1d2124;box-shadow:0 0 0 .2rem rgba(82,88,93,.5)}.btn-dark:disabled{color:#fff;background-color:#343a40;border-color:#343a40}.btn-outline-primary{color:#007bff;border-color:#007bff}.btn-outline-primary:hover{color:#fff;background-color:#007bff;border-color:#007bff}.btn-outline-primary:focus{box-shadow:0 0 0 .2rem rgba(0,123,255,.5)}.btn-outline-primary:disabled{color:#007bff;background-color:transparent}.btn-outline-light{color:#f8f9fa;border-color:#f8f9fa}.btn-outline-light:hover{color:#212529;background-color:#f8f9fa;border-color:#f8f9fa}.btn-outline-light:focus{box-shadow:0 0 0 .2rem rgba(248,249,250,.5)}.btn-outline-light:disabled{color:#f8f9fa;background-color:transparent}.btn-outline-dark{color:#343a40;border-color:#343a40}.btn-outline-dark:hover{color:#fff;background-color:#343a40;border-color:#343a40}.btn-outline-dark:focus{box-shadow:0 0 0 .2rem rgba(52,58,64,.5)}.btn-outline-dark:disabled{color:#343a40;background-color:transparent}.btn-link{font-weight:400;color:#007bff;text-decoration:none}.btn-link:hover{color:#0056b3;text-decoration:underline}.btn-link:focus{text-decoration:underline;box-shadow:none}.btn-link:disabled{color:#6c757d;pointer-events:none}.btn-group-lg>.btn,.btn-lg{padding:.5rem 1rem;font-size:1.25rem;line-height:1.5;border-radius:.3rem}.btn-block{display:block;width:100%}.btn-block+.btn-block{margin-top:.5rem}.btn-group{position:relative;display:-ms-inline-flexbox;display:inline-flex;vertical-align:middle}.btn-group>.btn{position:relative;-ms-flex:1 1 auto;flex:1 1 auto}.btn-group>.btn:hover{z-index:1}.btn-group>.btn:active,.btn-group>.btn:focus{z-index:1}.btn-group>.btn-group:not(:first-child),.btn-group>.btn:not(:first-child){margin-left:-1px}.btn-group>.btn-group:not(:last-child)>.btn{border-top-right-radius:0;border-bottom-right-radius:0}.btn-group>.btn-group:not(:first-child)>.btn,.btn-group>.btn:not(:first-child){border-top-left-radius:0;border-bottom-left-radius:0}.custom-select{display:inline-block;width:100%;height:calc(1.5em+.75rem+2px);padding:.375rem 1.75rem .375rem .75rem;font-size:1rem;font-weight:400;line-height:1.5;color:#495057;vertical-align:middle;background:#fff url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='4' height='5' viewBox='0 0 4 5'%3e%3cpath fill='%23343a40' d='M2 0L0 2h4zm0 5L0 3h4z'/%3e%3c/svg%3e") no-repeat right .75rem center/8px 10px;border:1px solid #ced4da;border-radius:.25rem;-webkit-appearance:none;-moz-appearance:none;appearance:none}.custom-select:focus{border-color:#80bdff;outline:0;box-shadow:0 0 0 .2rem rgba(0,123,255,.25)}.custom-select:focus::-ms-value{color:#495057;background-color:#fff}.custom-select[multiple],.custom-select[size]:not([size="1"]){height:auto;padding-right:.75rem;background-image:none}.custom-select:disabled{color:#6c757d;background-color:#e9ecef}.custom-select::-ms-expand{display:none}.custom-select:-moz-focusring{color:transparent;text-shadow:0 0 0 #495057}.custom-select-lg{height:calc(1.5em+1rem+2px);padding-top:.5rem;padding-bottom:.5rem;padding-left:1rem;font-size:1.25rem}.custom-select{transition:background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out}@media(prefers-reduced-motion:reduce){.custom-select{transition:none}}.page-link{position:relative;display:block;padding:.5rem .75rem;margin-left:-1px;line-height:1.25;color:#007bff;background-color:#fff;border:1px solid #dee2e6}.page-link:hover{z-index:2;color:#0056b3;text-decoration:none;background-color:#e9ecef;border-color:#dee2e6}.page-link:focus{z-index:3;outline:0;box-shadow:0 0 0 .2rem rgba(0,123,255,.25)}.alert{position:relative;padding:.75rem 1.25rem;margin-bottom:1rem;border:1px solid transparent;border-radius:.25rem}.alert-heading{color:inherit}.alert-link{font-weight:700}.alert-primary{color:#004085;background-color:#cce5ff;border-color:#b8daff}.alert-primary .alert-link{color:#002752}.alert-light{color:#818182;background-color:#fefefe;border-color:#fdfdfe}.alert-light .alert-link{color:#686868}.alert-dark{color:#1b1e21;background-color:#d6d8d9;border-color:#c6c8ca}.alert-dark .alert-link{color:#040505}@-webkit-keyframes progress-bar-stripes{from{background-position:1rem 0}to{background-position:0 0}}@keyframes progress-bar-stripes{from{background-position:1rem 0}to{background-position:0 0}}@-webkit-keyframes spinner-border{to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes spinner-border{to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-webkit-keyframes spinner-grow{0%{-webkit-transform:scale(0);transform:scale(0)}50%{opacity:1}}@keyframes spinner-grow{0%{-webkit-transform:scale(0);transform:scale(0)}50%{opacity:1}}.bg-primary{background-color:#007bff}a.bg-primary:focus,a.bg-primary:hover{background-color:#0062cc}.bg-light{background-color:#f8f9fa}a.bg-light:focus,a.bg-light:hover{background-color:#dae0e5}.bg-dark{background-color:#343a40}a.bg-dark:focus,a.bg-dark:hover{background-color:#1d2124}.bg-white{background-color:#fff}.d-none{display:none}.d-inline{display:inline}.d-inline-block{display:inline-block}.d-block{display:block}.d-table{display:table}.d-table-row{display:table-row}@media(min-width:768px){.d-md-none{display:none}.d-md-inline{display:inline}.d-md-inline-block{display:inline-block}.d-md-block{display:block}.d-md-table{display:table}.d-md-table-row{display:table-row}}@media(min-width:992px){.d-lg-none{display:none}.d-lg-inline{display:inline}.d-lg-inline-block{display:inline-block}.d-lg-block{display:block}.d-lg-table{display:table}.d-lg-table-row{display:table-row}}.float-right{float:right}.float-none{float:none}@media(min-width:768px){.float-md-right{float:right}.float-md-none{float:none}}@media(min-width:992px){.float-lg-right{float:right}.float-lg-none{float:none}}.position-fixed{position:fixed}.fixed-bottom{position:fixed;right:0;bottom:0;left:0;z-index:1030}.w-25{width:25%}.w-50{width:50%}.w-75{width:75%}.w-100{width:100%}.h-25{height:25%}.h-50{height:50%}.h-75{height:75%}.h-100{height:100%}.m-0{margin:0}.mt-0,.my-0{margin-top:0}.mr-0{margin-right:0}.mb-0,.my-0{margin-bottom:0}.m-1{margin:.25rem}.mt-1,.my-1{margin-top:.25rem}.mr-1{margin-right:.25rem}.mb-1,.my-1{margin-bottom:.25rem}.m-2{margin:.5rem}.mt-2,.my-2{margin-top:.5rem}.mr-2{margin-right:.5rem}.mb-2,.my-2{margin-bottom:.5rem}.m-3{margin:1rem}.mt-3,.my-3{margin-top:1rem}.mr-3{margin-right:1rem}.mb-3,.my-3{margin-bottom:1rem}.m-4{margin:1.5rem}.mt-4,.my-4{margin-top:1.5rem}.mr-4{margin-right:1.5rem}.mb-4,.my-4{margin-bottom:1.5rem}.m-5{margin:3rem}.mt-5,.my-5{margin-top:3rem}.mr-5{margin-right:3rem}.mb-5,.my-5{margin-bottom:3rem}.p-0{padding:0}.pt-0,.py-0{padding-top:0}.pb-0,.py-0{padding-bottom:0}.p-1{padding:.25rem}.pt-1,.py-1{padding-top:.25rem}.pb-1,.py-1{padding-bottom:.25rem}.p-2{padding:.5rem}.pt-2,.py-2{padding-top:.5rem}.pb-2,.py-2{padding-bottom:.5rem}.p-3{padding:1rem}.pt-3,.py-3{padding-top:1rem}.pb-3,.py-3{padding-bottom:1rem}.p-4{padding:1.5rem}.pt-4,.py-4{padding-top:1.5rem}.pb-4,.py-4{padding-bottom:1.5rem}.p-5{padding:3rem}.pt-5,.py-5{padding-top:3rem}.pb-5,.py-5{padding-bottom:3rem}.m-n1{margin:-.25rem}.mt-n1,.my-n1{margin-top:-.25rem}.mr-n1{margin-right:-.25rem}.mb-n1,.my-n1{margin-bottom:-.25rem}.m-n2{margin:-.5rem}.mt-n2,.my-n2{margin-top:-.5rem}.mr-n2{margin-right:-.5rem}.mb-n2,.my-n2{margin-bottom:-.5rem}.m-n3{margin:-1rem}.mt-n3,.my-n3{margin-top:-1rem}.mr-n3{margin-right:-1rem}.mb-n3,.my-n3{margin-bottom:-1rem}.m-n4{margin:-1.5rem}.mt-n4,.my-n4{margin-top:-1.5rem}.mr-n4{margin-right:-1.5rem}.mb-n4,.my-n4{margin-bottom:-1.5rem}.m-n5{margin:-3rem}.mt-n5,.my-n5{margin-top:-3rem}.mr-n5{margin-right:-3rem}.mb-n5,.my-n5{margin-bottom:-3rem}@media(min-width:768px){.m-md-0{margin:0}.mt-md-0,.my-md-0{margin-top:0}.mr-md-0{margin-right:0}.mb-md-0,.my-md-0{margin-bottom:0}.m-md-1{margin:.25rem}.mt-md-1,.my-md-1{margin-top:.25rem}.mr-md-1{margin-right:.25rem}.mb-md-1,.my-md-1{margin-bottom:.25rem}.m-md-2{margin:.5rem}.mt-md-2,.my-md-2{margin-top:.5rem}.mr-md-2{margin-right:.5rem}.mb-md-2,.my-md-2{margin-bottom:.5rem}.m-md-3{margin:1rem}.mt-md-3,.my-md-3{margin-top:1rem}.mr-md-3{margin-right:1rem}.mb-md-3,.my-md-3{margin-bottom:1rem}.m-md-4{margin:1.5rem}.mt-md-4,.my-md-4{margin-top:1.5rem}.mr-md-4{margin-right:1.5rem}.mb-md-4,.my-md-4{margin-bottom:1.5rem}.m-md-5{margin:3rem}.mt-md-5,.my-md-5{margin-top:3rem}.mr-md-5{margin-right:3rem}.mb-md-5,.my-md-5{margin-bottom:3rem}.p-md-0{padding:0}.pt-md-0,.py-md-0{padding-top:0}.pb-md-0,.py-md-0{padding-bottom:0}.p-md-1{padding:.25rem}.pt-md-1,.py-md-1{padding-top:.25rem}.pb-md-1,.py-md-1{padding-bottom:.25rem}.p-md-2{padding:.5rem}.pt-md-2,.py-md-2{padding-top:.5rem}.pb-md-2,.py-md-2{padding-bottom:.5rem}.p-md-3{padding:1rem}.pt-md-3,.py-md-3{padding-top:1rem}.pb-md-3,.py-md-3{padding-bottom:1rem}.p-md-4{padding:1.5rem}.pt-md-4,.py-md-4{padding-top:1.5rem}.pb-md-4,.py-md-4{padding-bottom:1.5rem}.p-md-5{padding:3rem}.pt-md-5,.py-md-5{padding-top:3rem}.pb-md-5,.py-md-5{padding-bottom:3rem}.m-md-n1{margin:-.25rem}.mt-md-n1,.my-md-n1{margin-top:-.25rem}.mr-md-n1{margin-right:-.25rem}.mb-md-n1,.my-md-n1{margin-bottom:-.25rem}.m-md-n2{margin:-.5rem}.mt-md-n2,.my-md-n2{margin-top:-.5rem}.mr-md-n2{margin-right:-.5rem}.mb-md-n2,.my-md-n2{margin-bottom:-.5rem}.m-md-n3{margin:-1rem}.mt-md-n3,.my-md-n3{margin-top:-1rem}.mr-md-n3{margin-right:-1rem}.mb-md-n3,.my-md-n3{margin-bottom:-1rem}.m-md-n4{margin:-1.5rem}.mt-md-n4,.my-md-n4{margin-top:-1.5rem}.mr-md-n4{margin-right:-1.5rem}.mb-md-n4,.my-md-n4{margin-bottom:-1.5rem}.m-md-n5{margin:-3rem}.mt-md-n5,.my-md-n5{margin-top:-3rem}.mr-md-n5{margin-right:-3rem}.mb-md-n5,.my-md-n5{margin-bottom:-3rem}}@media(min-width:992px){.m-lg-0{margin:0}.mt-lg-0,.my-lg-0{margin-top:0}.mr-lg-0{margin-right:0}.mb-lg-0,.my-lg-0{margin-bottom:0}.m-lg-1{margin:.25rem}.mt-lg-1,.my-lg-1{margin-top:.25rem}.mr-lg-1{margin-right:.25rem}.mb-lg-1,.my-lg-1{margin-bottom:.25rem}.m-lg-2{margin:.5rem}.mt-lg-2,.my-lg-2{margin-top:.5rem}.mr-lg-2{margin-right:.5rem}.mb-lg-2,.my-lg-2{margin-bottom:.5rem}.m-lg-3{margin:1rem}.mt-lg-3,.my-lg-3{margin-top:1rem}.mr-lg-3{margin-right:1rem}.mb-lg-3,.my-lg-3{margin-bottom:1rem}.m-lg-4{margin:1.5rem}.mt-lg-4,.my-lg-4{margin-top:1.5rem}.mr-lg-4{margin-right:1.5rem}.mb-lg-4,.my-lg-4{margin-bottom:1.5rem}.m-lg-5{margin:3rem}.mt-lg-5,.my-lg-5{margin-top:3rem}.mr-lg-5{margin-right:3rem}.mb-lg-5,.my-lg-5{margin-bottom:3rem}.p-lg-0{padding:0}.pt-lg-0,.py-lg-0{padding-top:0}.pb-lg-0,.py-lg-0{padding-bottom:0}.p-lg-1{padding:.25rem}.pt-lg-1,.py-lg-1{padding-top:.25rem}.pb-lg-1,.py-lg-1{padding-bottom:.25rem}.p-lg-2{padding:.5rem}.pt-lg-2,.py-lg-2{padding-top:.5rem}.pb-lg-2,.py-lg-2{padding-bottom:.5rem}.p-lg-3{padding:1rem}.pt-lg-3,.py-lg-3{padding-top:1rem}.pb-lg-3,.py-lg-3{padding-bottom:1rem}.p-lg-4{padding:1.5rem}.pt-lg-4,.py-lg-4{padding-top:1.5rem}.pb-lg-4,.py-lg-4{padding-bottom:1.5rem}.p-lg-5{padding:3rem}.pt-lg-5,.py-lg-5{padding-top:3rem}.pb-lg-5,.py-lg-5{padding-bottom:3rem}.m-lg-n1{margin:-.25rem}.mt-lg-n1,.my-lg-n1{margin-top:-.25rem}.mr-lg-n1{margin-right:-.25rem}.mb-lg-n1,.my-lg-n1{margin-bottom:-.25rem}.m-lg-n2{margin:-.5rem}.mt-lg-n2,.my-lg-n2{margin-top:-.5rem}.mr-lg-n2{margin-right:-.5rem}.mb-lg-n2,.my-lg-n2{margin-bottom:-.5rem}.m-lg-n3{margin:-1rem}.mt-lg-n3,.my-lg-n3{margin-top:-1rem}.mr-lg-n3{margin-right:-1rem}.mb-lg-n3,.my-lg-n3{margin-bottom:-1rem}.m-lg-n4{margin:-1.5rem}.mt-lg-n4,.my-lg-n4{margin-top:-1.5rem}.mr-lg-n4{margin-right:-1.5rem}.mb-lg-n4,.my-lg-n4{margin-bottom:-1.5rem}.m-lg-n5{margin:-3rem}.mt-lg-n5,.my-lg-n5{margin-top:-3rem}.mr-lg-n5{margin-right:-3rem}.mb-lg-n5,.my-lg-n5{margin-bottom:-3rem}}.text-right{text-align:right}.text-center{text-align:center}@media(min-width:768px){.text-md-right{text-align:right}.text-md-center{text-align:center}}@media(min-width:992px){.text-lg-right{text-align:right}.text-lg-center{text-align:center}}.text-white{color:#fff}.text-primary{color:#007bff}a.text-primary:focus,a.text-primary:hover{color:#0056b3}.text-light{color:#f8f9fa}a.text-light:focus,a.text-light:hover{color:#cbd3da}.text-dark{color:#343a40}a.text-dark:focus,a.text-dark:hover{color:#121416}.text-body{color:#212529}.text-muted{color:#6c757d}.text-black-50{color:rgba(0,0,0,.5)}.text-white-50{color:rgba(255,255,255,.5)}.text-hide{font:0/0 a;color:transparent;text-shadow:none;background-color:transparent;border:0}.text-decoration-none{text-decoration:none}.text-reset{color:inherit}.visible{visibility:visible}@media print{*,::after,::before{text-shadow:none;box-shadow:none}a:not(.btn){text-decoration:underline}pre{white-space:pre-wrap}pre{border:1px solid #adb5bd;page-break-inside:avoid}img{page-break-inside:avoid}h2,h3,p{orphans:3;widows:3}h2,h3{page-break-after:avoid}@page{size:a3}body{min-width:992px}.container{min-width:992px}.table{border-collapse:collapse}.table-dark{color:inherit}}@-webkit-keyframes sbx-reset-in{0%{-webkit-transform:translate3d(-20%,0,0);transform:translate3d(-20%,0,0);opacity:0}100%{-webkit-transform:none;transform:none;opacity:1}}@keyframes sbx-reset-in{0%{-webkit-transform:translate3d(-20%,0,0);transform:translate3d(-20%,0,0);opacity:0}100%{-webkit-transform:none;transform:none;opacity:1}}body{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Noto Sans","Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji"}a:link,a:visited{color:#f14600;text-decoration:none}a:active,a:hover{text-decoration:underline}.btn:disabled{cursor:default;opacity:.4}#logo-text{width:180px;margin-left:12px}.display-5{font-size:2rem;font-weight:300;line-height:1.2}.display-6{font-size:1.75rem;font-weight:300;line-height:1.2}.bg-dark-alt,.bg-dark-alt:focus{background:#36363f}.bg-orange,.bg-orange:focus{background:#f14600}.text-dark-alt{color:#36363f}.btn-dark-alt{background:#36363f}.btn-dark-alt:focus{background:#36363f}.btn-outline-orange{border-color:#f14600;color:#f14600}.btn-orange,.btn-outline-orange:hover{background:#f14600;color:#fff}.btn:active,.btn:hover{text-decoration:none}.text-orange{color:#f14600}.bg-number{position:absolute;font-size:900%;font-weight:700;color:rgba(241,70,0,.1);line-height:1;margin-top:-1rem}.w-15{width:15%}.headerlink{text-decoration:none;margin-left:.5rem}body[data-spy] #content{overflow-x:scroll}#content table{border:1px solid #dee2e6;width:100%;margin-bottom:1rem;overflow-x:auto}#content code{color:#111;background:#eee}#content pre{background:#eee;padding:1rem}@media print{body{min-width:0}code,h1,h2,h3,h4,h5,h6,img,li,p,pre{page-break-inside:avoid}}@media(prefers-color-scheme:dark){#to-full-website,body.amp,body[data-spy]{background:#1c1c1c;color:#efefef}.invert-dark{filter:invert(100%)}#content table{border:1px solid #2a2b2c}#content code,#content pre{background:#444;color:#eee}}.syntax .hll{background-color:#b9b6b0}.syntax{background:#f8f9fa;color:#2f1e2e}.syntax .c{color:#8d8687}.syntax .err{color:#ef6155}.syntax .k{color:#815ba4}.syntax .l{color:#f99b15}.syntax .n{color:#2f1e2e}.syntax .o{color:#5bc4bf}.syntax .p{color:#2f1e2e}.syntax .c1{color:#8d8687}.syntax .cs{color:#8d8687}.syntax .kt{color:#fec418}.syntax .ld{color:#48b685}.syntax .m{color:#f99b15}.syntax .s{color:#48b685}.syntax .nb{color:#2f1e2e}.syntax .py{color:#2f1e2e}.syntax .w{color:#2f1e2e}.syntax .mi{color:#f99b15}.syntax .s2{color:#48b685}.syntax .s1{color:#48b685}.syntax .ss{color:#48b685}@media(prefers-color-scheme:dark){.syntax .k{color:#c78cff}.syntax .ld{color:#64ffbb}.syntax .s{color:#64ffbb}.syntax .s2{color:#64ffbb}.syntax .s1{color:#64ffbb}.syntax .ss{color:#64ffbb}.syntax .c{color:#64ffbb}.syntax .n{color:#f8f9fa}.syntax .p{color:#f8f9fa}.syntax .nb{color:#f8f9fa}.syntax .py{color:#f8f9fa}.syntax .w{color:#f8f9fa}}</style>
    <script async custom-element="amp-analytics" src="https://cdn.ampproject.org/v0/amp-analytics-0.1.js"></script>
    <script async custom-element="amp-iframe" src="https://cdn.ampproject.org/v0/amp-iframe-0.1.js"></script>
  </head>
  <body class="amp" dir="rtl">
    <div class="container-fluid container-lg pb-5">
      <div class="row pt-3 mb-3">
        <div class="col">
          <a href="/" class="text-decoration-none">
            <amp-img class="d-inline-block mr-3" layout="fixed" width="40" height="36" src="/images/logo.svg" alt="ClickHouse logo" title="ClickHouse logo"></amp-img><amp-img class="invert-dark d-inline-block" layout="fixed" width="238" height="36" src="/images/clickhouse-black.svg" alt="ClickHouse" title="ClickHouse"></amp-img>
          </a>
        </div>
      </div>
      <div class="row">
        <div id="content" class="col">
          
    <div class="alert alert-primary" role="alert">
      <p class="display-5 mb-2">راهنما می خواستم!</p>
      <p class="lead">محتوای زیر از این صفحه اسناد شده است ماشین ترجمه. اما بر خلاف وب سایت های دیگر, این است که در پرواز انجام نمی. این متن ترجمه شده در مخزن گیتهاب در کنار پایگاه داده اصلی خانه کلیک زندگی می کند و منتظر سخنرانان مادری همکار به انسان بیشتر قابل خواندن است. <a href="/docs/en/sql-reference/aggregate-functions/reference/" class="alert-link">شما همچنین می توانید نسخه اصلی انگلیسی به عنوان یک مرجع استفاده کنید.</a></p>
      <p class="lead">
          <a class="btn btn-lg btn-primary text-white" href="https://github.com/ClickHouse/ClickHouse/edit/master/docs/fa/sql-reference/aggregate-functions/reference.md" target="_blank" rel="external nofollow noreferrer">
              راهنما مستندات تاتر با ویرایش این صفحه
          </a>
      </p>
    </div>

          <h1 id=aggregate-functions-reference>مرجع عملکرد کامل<a class=headerlink href=../amp/#aggregate-functions-reference title="Permanent link"> </a></h1><h2 id=agg_function-count>شمارش<a class=headerlink href=../amp/#agg_function-count title="Permanent link"> </a></h2><p>شمارش تعداد ردیف یا نه تهی ارزش.</p><p>ClickHouse زیر پشتیبانی می کند syntaxes برای <code class=syntax>count</code>:<br> - <code class=syntax>count(expr)</code> یا <code class=syntax>COUNT(DISTINCT expr)</code>.<br> - <code class=syntax>count()</code> یا <code class=syntax>COUNT(*)</code>. این <code class=syntax>count()</code> نحو تاتر خاص است.</p><p><strong>پارامترها</strong></p><p>این تابع می تواند:</p><ul><li>صفر پارامتر.</li><li>یک <a href=../../../syntax/amp/#syntax-expressions>عبارت</a>.</li></ul><p><strong>مقدار بازگشتی</strong></p><ul><li>اگر تابع بدون پارامتر نامیده می شود تعداد ردیف شمارش.</li><li>اگر <a href=../../../syntax/amp/#syntax-expressions>عبارت</a> به تصویب می رسد, سپس تابع شمارش چند بار این عبارت بازگشت تهی نیست. اگر بیان می گرداند <a href=../../../data-types/nullable/amp/ >Nullable</a>- نوع ارزش و سپس نتیجه <code class=syntax>count</code> باقی نمی ماند <code class=syntax>Nullable</code>. تابع بازده 0 اگر بیان بازگشت <code class=syntax>NULL</code> برای تمام ردیف.</li></ul><p>در هر دو مورد نوع مقدار بازگشتی است <a href=../../../data-types/int-uint/amp/ >UInt64</a>.</p><p><strong>اطلاعات دقیق</strong></p><p>تاتر از <code class=syntax>COUNT(DISTINCT ...)</code> نحو. رفتار این ساخت و ساز بستگی به <a href=../../../../operations/settings/settings/amp/#settings-count_distinct_implementation>ا_فزونهها</a> تنظیمات. این تعریف می کند که کدام یک از <a href=../amp/#agg_function-uniq>دانشگاه*</a> توابع برای انجام عملیات استفاده می شود. به طور پیش فرض است <a href=../amp/#agg_function-uniqexact>قرارداد اتحادیه</a> تابع.</p><p>این <code class=syntax>SELECT count() FROM table</code> پرس و جو بهینه سازی شده نیست, چرا که تعداد ورودی در جدول به طور جداگانه ذخیره نمی. این ستون کوچک را از جدول انتخاب می کند و تعداد مقادیر موجود را شمارش می کند.</p><p><strong>مثالها</strong></p><p>مثال 1:</p><div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=k>count</span><span class=p>()</span> <span class=k>FROM</span> <span class=n>t</span>
</code></pre></div><div class=codehilite><pre><span></span><code class=syntax>┌─count()─┐
│       5 │
└─────────┘
</code></pre></div><p>مثال 2:</p><div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>name</span><span class=p>,</span> <span class=n>value</span> <span class=k>FROM</span> <span class=k>system</span><span class=p>.</span><span class=n>settings</span> <span class=k>WHERE</span> <span class=n>name</span> <span class=o>=</span> <span class=s1>'count_distinct_implementation'</span>
</code></pre></div><div class=codehilite><pre><span></span><code class=syntax>┌─name──────────────────────────┬─value─────┐
│ count_distinct_implementation │ uniqExact │
└───────────────────────────────┴───────────┘
</code></pre></div><div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=k>count</span><span class=p>(</span><span class=k>DISTINCT</span> <span class=n>num</span><span class=p>)</span> <span class=k>FROM</span> <span class=n>t</span>
</code></pre></div><div class=codehilite><pre><span></span><code class=syntax>┌─uniqExact(num)─┐
│              3 │
└────────────────┘
</code></pre></div><p>این مثال نشان می دهد که <code class=syntax>count(DISTINCT num)</code> توسط <code class=syntax>uniqExact</code> عملکرد با توجه به <code class=syntax>count_distinct_implementation</code> مقدار تنظیم.</p><h2 id=agg_function-any>هر)<a class=headerlink href=../amp/#agg_function-any title="Permanent link"> </a></h2><p>انتخاب اولین مقدار مواجه می شوند.<br> پرس و جو را می توان در هر سفارش و حتی در جهت های مختلف در هر زمان اجرا, بنابراین نتیجه این تابع نامشخص است.<br> برای دریافت یک نتیجه معین, شما می توانید با استفاده از ‘min’ یا ‘max’ تابع به جای ‘any’.</p><p>در بعضی موارد, شما می توانید در جهت اعدام تکیه. این امر در مورد مواردی که انتخاب می شود از یک زیرخاکی است که از سفارش استفاده می کند.</p><p>هنگامی که یک <code class=syntax>SELECT</code> پرسوجو دارد <code class=syntax>GROUP BY</code> بند و یا حداقل یک مجموع عملکرد ClickHouse (در مقایسه با MySQL) مستلزم آن است که تمام عبارات در <code class=syntax>SELECT</code>, <code class=syntax>HAVING</code> و <code class=syntax>ORDER BY</code> بند از کلید و یا از توابع کل محاسبه می شود. به عبارت دیگر, هر ستون انتخاب شده از جدول باید یا در کلید و یا در داخل توابع دانه استفاده می شود. برای دریافت رفتار مانند خروجی زیر, شما می توانید ستون های دیگر در قرار <code class=syntax>any</code> تابع جمع.</p><h2 id=anyheavyx>هشدار داده می شود)<a class=headerlink href=../amp/#anyheavyx title="Permanent link"> </a></h2><p>انتخاب یک مقدار اغلب اتفاق می افتد با استفاده از <a href=http://www.cs.umd.edu/~samir/498/karp.pdf rel="external nofollow noreferrer" target=_blank>بزرگان سنگین</a> الگوریتم. در صورتی که یک مقدار که بیش از در نیمی از موارد در هر یک از موضوعات اعدام پرس و جو رخ می دهد وجود دارد, این مقدار بازگشته است. به طور معمول نتیجه nondeterministic.</p><div class=codehilite><pre><span></span><code class=syntax><span class=n>anyHeavy</span><span class=p>(</span><span class=k>column</span><span class=p>)</span>
</code></pre></div><p><strong>نشانوندها</strong></p><ul><li><code class=syntax>column</code> – The column name.</li></ul><p><strong>مثال</strong></p><p>نگاهی به <a href=../../../../getting-started/example-datasets/ontime/amp/ >به موقع</a> مجموعه داده ها و انتخاب هر مقدار اغلب اتفاق می افتد در <code class=syntax>AirlineID</code> ستون.</p><div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>anyHeavy</span><span class=p>(</span><span class=n>AirlineID</span><span class=p>)</span> <span class=k>AS</span> <span class=n>res</span>
<span class=k>FROM</span> <span class=n>ontime</span>
</code></pre></div><div class=codehilite><pre><span></span><code class=syntax>┌───res─┐
│ 19690 │
└───────┘
</code></pre></div><h2 id=anylastx>حداقل صفحه نمایش:)<a class=headerlink href=../amp/#anylastx title="Permanent link"> </a></h2><p>ارزش گذشته مواجه می شوند را انتخاب می کند.<br> نتیجه این است که فقط به عنوان نامشخص به عنوان برای <code class=syntax>any</code> تابع.</p><h2 id=groupbitand>گروه بیتاند<a class=headerlink href=../amp/#groupbitand title="Permanent link"> </a></h2><p>اعمال بیتی <code class=syntax>AND</code> برای مجموعه ای از اعداد.</p><div class=codehilite><pre><span></span><code class=syntax><span class=n>groupBitAnd</span><span class=p>(</span><span class=n>expr</span><span class=p>)</span>
</code></pre></div><p><strong>پارامترها</strong></p><p><code class=syntax>expr</code> – An expression that results in <code class=syntax>UInt*</code> نوع.</p><p><strong>مقدار بازگشتی</strong></p><p>ارزش <code class=syntax>UInt*</code> نوع.</p><p><strong>مثال</strong></p><p>داده های تست:</p><div class=codehilite><pre><span></span><code class=syntax>binary     decimal
00101100 = 44
00011100 = 28
00001101 = 13
01010101 = 85
</code></pre></div><p>پرسوجو:</p><div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>groupBitAnd</span><span class=p>(</span><span class=n>num</span><span class=p>)</span> <span class=k>FROM</span> <span class=n>t</span>
</code></pre></div><p>کجا <code class=syntax>num</code> ستون با داده های تست است.</p><p>نتیجه:</p><div class=codehilite><pre><span></span><code class=syntax>binary     decimal
00000100 = 4
</code></pre></div><h2 id=groupbitor>ویرایشگر گروه<a class=headerlink href=../amp/#groupbitor title="Permanent link"> </a></h2><p>اعمال بیتی <code class=syntax>OR</code> برای مجموعه ای از اعداد.</p><div class=codehilite><pre><span></span><code class=syntax><span class=n>groupBitOr</span><span class=p>(</span><span class=n>expr</span><span class=p>)</span>
</code></pre></div><p><strong>پارامترها</strong></p><p><code class=syntax>expr</code> – An expression that results in <code class=syntax>UInt*</code> نوع.</p><p><strong>مقدار بازگشتی</strong></p><p>ارزش <code class=syntax>UInt*</code> نوع.</p><p><strong>مثال</strong></p><p>داده های تست:</p><div class=codehilite><pre><span></span><code class=syntax>binary     decimal
00101100 = 44
00011100 = 28
00001101 = 13
01010101 = 85
</code></pre></div><p>پرسوجو:</p><div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>groupBitOr</span><span class=p>(</span><span class=n>num</span><span class=p>)</span> <span class=k>FROM</span> <span class=n>t</span>
</code></pre></div><p>کجا <code class=syntax>num</code> ستون با داده های تست است.</p><p>نتیجه:</p><div class=codehilite><pre><span></span><code class=syntax>binary     decimal
01111101 = 125
</code></pre></div><h2 id=groupbitxor>گروهبیتکسور<a class=headerlink href=../amp/#groupbitxor title="Permanent link"> </a></h2><p>اعمال بیتی <code class=syntax>XOR</code> برای مجموعه ای از اعداد.</p><div class=codehilite><pre><span></span><code class=syntax><span class=n>groupBitXor</span><span class=p>(</span><span class=n>expr</span><span class=p>)</span>
</code></pre></div><p><strong>پارامترها</strong></p><p><code class=syntax>expr</code> – An expression that results in <code class=syntax>UInt*</code> نوع.</p><p><strong>مقدار بازگشتی</strong></p><p>ارزش <code class=syntax>UInt*</code> نوع.</p><p><strong>مثال</strong></p><p>داده های تست:</p><div class=codehilite><pre><span></span><code class=syntax>binary     decimal
00101100 = 44
00011100 = 28
00001101 = 13
01010101 = 85
</code></pre></div><p>پرسوجو:</p><div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>groupBitXor</span><span class=p>(</span><span class=n>num</span><span class=p>)</span> <span class=k>FROM</span> <span class=n>t</span>
</code></pre></div><p>کجا <code class=syntax>num</code> ستون با داده های تست است.</p><p>نتیجه:</p><div class=codehilite><pre><span></span><code class=syntax>binary     decimal
01101000 = 104
</code></pre></div><h2 id=groupbitmap>نگاشت گروهی<a class=headerlink href=../amp/#groupbitmap title="Permanent link"> </a></h2><p>بیت مپ و یا کل محاسبات از یک unsigned integer ستون بازگشت cardinality از نوع UInt64 اگر اضافه کردن پسوند -دولت بازگشت <a href=../../../functions/bitmap-functions/amp/ >شی نگاشت بیت</a>.</p><div class=codehilite><pre><span></span><code class=syntax><span class=n>groupBitmap</span><span class=p>(</span><span class=n>expr</span><span class=p>)</span>
</code></pre></div><p><strong>پارامترها</strong></p><p><code class=syntax>expr</code> – An expression that results in <code class=syntax>UInt*</code> نوع.</p><p><strong>مقدار بازگشتی</strong></p><p>ارزش <code class=syntax>UInt64</code> نوع.</p><p><strong>مثال</strong></p><p>داده های تست:</p><div class=codehilite><pre><span></span><code class=syntax>UserID
1
1
2
3
</code></pre></div><p>پرسوجو:</p><div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>groupBitmap</span><span class=p>(</span><span class=n>UserID</span><span class=p>)</span> <span class=k>as</span> <span class=n>num</span> <span class=k>FROM</span> <span class=n>t</span>
</code></pre></div><p>نتیجه:</p><div class=codehilite><pre><span></span><code class=syntax>num
3
</code></pre></div><h2 id=agg_function-min>کمینه)<a class=headerlink href=../amp/#agg_function-min title="Permanent link"> </a></h2><p>محاسبه حداقل.</p><h2 id=agg_function-max>بیشینه)<a class=headerlink href=../amp/#agg_function-max title="Permanent link"> </a></h2><p>محاسبه حداکثر.</p><h2 id=agg-function-argmin>هشدار داده می شود)<a class=headerlink href=../amp/#agg-function-argmin title="Permanent link"> </a></h2><p>محاسبه ‘arg’ ارزش برای حداقل ‘val’ ارزش. اگر چندین مقدار مختلف وجود دارد ‘arg’ برای مقادیر حداقل ‘val’ اولین بار از این مقادیر مواجه خروجی است.</p><p><strong>مثال:</strong></p><div class=codehilite><pre><span></span><code class=syntax>┌─user─────┬─salary─┐
│ director │   5000 │
│ manager  │   3000 │
│ worker   │   1000 │
└──────────┴────────┘
</code></pre></div><div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>argMin</span><span class=p>(</span><span class=k>user</span><span class=p>,</span> <span class=n>salary</span><span class=p>)</span> <span class=k>FROM</span> <span class=n>salary</span>
</code></pre></div><div class=codehilite><pre><span></span><code class=syntax>┌─argMin(user, salary)─┐
│ worker               │
└──────────────────────┘
</code></pre></div><h2 id=agg-function-argmax>هشدار داده می شود)<a class=headerlink href=../amp/#agg-function-argmax title="Permanent link"> </a></h2><p>محاسبه ‘arg’ مقدار برای حداکثر ‘val’ ارزش. اگر چندین مقدار مختلف وجود دارد ‘arg’ برای حداکثر مقادیر ‘val’ اولین بار از این مقادیر مواجه خروجی است.</p><h2 id=agg_function-sum>جمع)<a class=headerlink href=../amp/#agg_function-sum title="Permanent link"> </a></h2><p>محاسبه مجموع.<br> فقط برای اعداد کار می کند.</p><h2 id=sumwithoverflowx>ورود به سیستم)<a class=headerlink href=../amp/#sumwithoverflowx title="Permanent link"> </a></h2><p>محاسبه مجموع اعداد, با استفاده از همان نوع داده برای نتیجه به عنوان پارامترهای ورودی. اگر مجموع بیش از حداکثر مقدار برای این نوع داده, تابع یک خطا می گرداند.</p><p>فقط برای اعداد کار می کند.</p><h2 id=agg_functions-summap>sumMap(key, value), sumMap(تاپل(key, value))<a class=headerlink href=../amp/#agg_functions-summap title="Permanent link"> </a></h2><p>مجموع ‘value’ تنظیم با توجه به کلید های مشخص شده در ‘key’ صف کردن.<br> عبور تاپل از کلید ها و ارزش های عرریس مترادف به عبور از دو مجموعه از کلید ها و ارزش است.<br> تعداد عناصر در ‘key’ و ‘value’ باید همین کار را برای هر سطر است که بالغ بر شود.<br> Returns a tuple of two arrays: keys in sorted order, and values ​​summed for the corresponding keys.</p><p>مثال:</p><div class=codehilite><pre><span></span><code class=syntax><span class=k>CREATE</span> <span class=k>TABLE</span> <span class=n>sum_map</span><span class=p>(</span>
    <span class=nb>date</span> <span class=nb>Date</span><span class=p>,</span>
    <span class=n>timeslot</span> <span class=n>DateTime</span><span class=p>,</span>
    <span class=n>statusMap</span> <span class=n>Nested</span><span class=p>(</span>
        <span class=n>status</span> <span class=n>UInt16</span><span class=p>,</span>
        <span class=n>requests</span> <span class=n>UInt64</span>
    <span class=p>),</span>
    <span class=n>statusMapTuple</span> <span class=n>Tuple</span><span class=p>(</span><span class=nb>Array</span><span class=p>(</span><span class=n>Int32</span><span class=p>),</span> <span class=nb>Array</span><span class=p>(</span><span class=n>Int32</span><span class=p>))</span>
<span class=p>)</span> <span class=n>ENGINE</span> <span class=o>=</span> <span class=n>Log</span><span class=p>;</span>
<span class=k>INSERT</span> <span class=k>INTO</span> <span class=n>sum_map</span> <span class=k>VALUES</span>
    <span class=p>(</span><span class=s1>'2000-01-01'</span><span class=p>,</span> <span class=s1>'2000-01-01 00:00:00'</span><span class=p>,</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>],</span> <span class=p>[</span><span class=mi>10</span><span class=p>,</span> <span class=mi>10</span><span class=p>,</span> <span class=mi>10</span><span class=p>],</span> <span class=p>([</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>],</span> <span class=p>[</span><span class=mi>10</span><span class=p>,</span> <span class=mi>10</span><span class=p>,</span> <span class=mi>10</span><span class=p>])),</span>
    <span class=p>(</span><span class=s1>'2000-01-01'</span><span class=p>,</span> <span class=s1>'2000-01-01 00:00:00'</span><span class=p>,</span> <span class=p>[</span><span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>5</span><span class=p>],</span> <span class=p>[</span><span class=mi>10</span><span class=p>,</span> <span class=mi>10</span><span class=p>,</span> <span class=mi>10</span><span class=p>],</span> <span class=p>([</span><span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>5</span><span class=p>],</span> <span class=p>[</span><span class=mi>10</span><span class=p>,</span> <span class=mi>10</span><span class=p>,</span> <span class=mi>10</span><span class=p>])),</span>
    <span class=p>(</span><span class=s1>'2000-01-01'</span><span class=p>,</span> <span class=s1>'2000-01-01 00:01:00'</span><span class=p>,</span> <span class=p>[</span><span class=mi>4</span><span class=p>,</span> <span class=mi>5</span><span class=p>,</span> <span class=mi>6</span><span class=p>],</span> <span class=p>[</span><span class=mi>10</span><span class=p>,</span> <span class=mi>10</span><span class=p>,</span> <span class=mi>10</span><span class=p>],</span> <span class=p>([</span><span class=mi>4</span><span class=p>,</span> <span class=mi>5</span><span class=p>,</span> <span class=mi>6</span><span class=p>],</span> <span class=p>[</span><span class=mi>10</span><span class=p>,</span> <span class=mi>10</span><span class=p>,</span> <span class=mi>10</span><span class=p>])),</span>
    <span class=p>(</span><span class=s1>'2000-01-01'</span><span class=p>,</span> <span class=s1>'2000-01-01 00:01:00'</span><span class=p>,</span> <span class=p>[</span><span class=mi>6</span><span class=p>,</span> <span class=mi>7</span><span class=p>,</span> <span class=mi>8</span><span class=p>],</span> <span class=p>[</span><span class=mi>10</span><span class=p>,</span> <span class=mi>10</span><span class=p>,</span> <span class=mi>10</span><span class=p>],</span> <span class=p>([</span><span class=mi>6</span><span class=p>,</span> <span class=mi>7</span><span class=p>,</span> <span class=mi>8</span><span class=p>],</span> <span class=p>[</span><span class=mi>10</span><span class=p>,</span> <span class=mi>10</span><span class=p>,</span> <span class=mi>10</span><span class=p>]));</span>

<span class=k>SELECT</span>
    <span class=n>timeslot</span><span class=p>,</span>
    <span class=n>sumMap</span><span class=p>(</span><span class=n>statusMap</span><span class=p>.</span><span class=n>status</span><span class=p>,</span> <span class=n>statusMap</span><span class=p>.</span><span class=n>requests</span><span class=p>),</span>
    <span class=n>sumMap</span><span class=p>(</span><span class=n>statusMapTuple</span><span class=p>)</span>
<span class=k>FROM</span> <span class=n>sum_map</span>
<span class=k>GROUP</span> <span class=k>BY</span> <span class=n>timeslot</span>
</code></pre></div><div class=codehilite><pre><span></span><code class=syntax>┌────────────timeslot─┬─sumMap(statusMap.status, statusMap.requests)─┬─sumMap(statusMapTuple)─────────┐
│ 2000-01-01 00:00:00 │ ([1,2,3,4,5],[10,10,20,10,10])               │ ([1,2,3,4,5],[10,10,20,10,10]) │
│ 2000-01-01 00:01:00 │ ([4,5,6,7,8],[10,10,20,10,10])               │ ([4,5,6,7,8],[10,10,20,10,10]) │
└─────────────────────┴──────────────────────────────────────────────┴────────────────────────────────┘
</code></pre></div><h2 id=skewpop>سیخ کباب<a class=headerlink href=../amp/#skewpop title="Permanent link"> </a></h2><p>محاسبه <a href=https://en.wikipedia.org/wiki/Skewness rel="external nofollow noreferrer" target=_blank>skewness</a> از یک توالی.</p><div class=codehilite><pre><span></span><code class=syntax><span class=n>skewPop</span><span class=p>(</span><span class=n>expr</span><span class=p>)</span>
</code></pre></div><p><strong>پارامترها</strong></p><p><code class=syntax>expr</code> — <a href=../../../syntax/amp/#syntax-expressions>عبارت</a> بازگشت یک عدد.</p><p><strong>مقدار بازگشتی</strong></p><p>The skewness of the given distribution. Type — <a href=../../../data-types/float/amp/ >جسم شناور64</a></p><p><strong>مثال</strong></p><div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>skewPop</span><span class=p>(</span><span class=n>value</span><span class=p>)</span> <span class=k>FROM</span> <span class=n>series_with_value_column</span>
</code></pre></div><h2 id=skewsamp>سیخ<a class=headerlink href=../amp/#skewsamp title="Permanent link"> </a></h2><p>محاسبه <a href=https://en.wikipedia.org/wiki/Skewness rel="external nofollow noreferrer" target=_blank>نمونه skewness</a> از یک توالی.</p><p>این نشان دهنده یک تخمین بی طرفانه از اریب یک متغیر تصادفی اگر ارزش گذشت نمونه خود را تشکیل می دهند.</p><div class=codehilite><pre><span></span><code class=syntax><span class=n>skewSamp</span><span class=p>(</span><span class=n>expr</span><span class=p>)</span>
</code></pre></div><p><strong>پارامترها</strong></p><p><code class=syntax>expr</code> — <a href=../../../syntax/amp/#syntax-expressions>عبارت</a> بازگشت یک عدد.</p><p><strong>مقدار بازگشتی</strong></p><p>The skewness of the given distribution. Type — <a href=../../../data-types/float/amp/ >جسم شناور64</a>. اگر <code class=syntax>n &lt;= 1</code> (<code class=syntax>n</code> اندازه نمونه است), سپس بازده تابع <code class=syntax>nan</code>.</p><p><strong>مثال</strong></p><div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>skewSamp</span><span class=p>(</span><span class=n>value</span><span class=p>)</span> <span class=k>FROM</span> <span class=n>series_with_value_column</span>
</code></pre></div><h2 id=kurtpop>کورتپ<a class=headerlink href=../amp/#kurtpop title="Permanent link"> </a></h2><p>محاسبه <a href=https://en.wikipedia.org/wiki/Kurtosis rel="external nofollow noreferrer" target=_blank>kurtosis</a> از یک توالی.</p><div class=codehilite><pre><span></span><code class=syntax><span class=n>kurtPop</span><span class=p>(</span><span class=n>expr</span><span class=p>)</span>
</code></pre></div><p><strong>پارامترها</strong></p><p><code class=syntax>expr</code> — <a href=../../../syntax/amp/#syntax-expressions>عبارت</a> بازگشت یک عدد.</p><p><strong>مقدار بازگشتی</strong></p><p>The kurtosis of the given distribution. Type — <a href=../../../data-types/float/amp/ >جسم شناور64</a></p><p><strong>مثال</strong></p><div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>kurtPop</span><span class=p>(</span><span class=n>value</span><span class=p>)</span> <span class=k>FROM</span> <span class=n>series_with_value_column</span>
</code></pre></div><h2 id=kurtsamp>کردها<a class=headerlink href=../amp/#kurtsamp title="Permanent link"> </a></h2><p>محاسبه <a href=https://en.wikipedia.org/wiki/Kurtosis rel="external nofollow noreferrer" target=_blank>نمونه kurtosis</a> از یک توالی.</p><p>این نشان دهنده یک تخمین بی طرفانه از کورتوز یک متغیر تصادفی اگر ارزش گذشت نمونه خود را تشکیل می دهند.</p><div class=codehilite><pre><span></span><code class=syntax><span class=n>kurtSamp</span><span class=p>(</span><span class=n>expr</span><span class=p>)</span>
</code></pre></div><p><strong>پارامترها</strong></p><p><code class=syntax>expr</code> — <a href=../../../syntax/amp/#syntax-expressions>عبارت</a> بازگشت یک عدد.</p><p><strong>مقدار بازگشتی</strong></p><p>The kurtosis of the given distribution. Type — <a href=../../../data-types/float/amp/ >جسم شناور64</a>. اگر <code class=syntax>n &lt;= 1</code> (<code class=syntax>n</code> اندازه نمونه است) و سپس تابع بازده <code class=syntax>nan</code>.</p><p><strong>مثال</strong></p><div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>kurtSamp</span><span class=p>(</span><span class=n>value</span><span class=p>)</span> <span class=k>FROM</span> <span class=n>series_with_value_column</span>
</code></pre></div><h2 id=agg-function-timeseriesgroupsum>هشدار داده می شود)<a class=headerlink href=../amp/#agg-function-timeseriesgroupsum title="Permanent link"> </a></h2><p><code class=syntax>timeSeriesGroupSum</code> می توانید سری های زمانی مختلف که برچسب زمان نمونه هم ترازی جمع نمی.<br> این برون یابی خطی بین دو برچسب زمان نمونه و سپس مجموع زمان سری با هم استفاده کنید.</p><ul><li><code class=syntax>uid</code> سری زمان شناسه منحصر به فرد است, <code class=syntax>UInt64</code>.</li><li><code class=syntax>timestamp</code> است نوع درون64 به منظور حمایت میلی ثانیه یا میکروثانیه.</li><li><code class=syntax>value</code> متریک است.</li></ul><p>تابع گرداند مجموعه ای از تاپل با <code class=syntax>(timestamp, aggregated_value)</code> جفت</p><p>قبل از استفاده از این تابع اطمینان حاصل کنید <code class=syntax>timestamp</code> به ترتیب صعودی است.</p><p>مثال:</p><div class=codehilite><pre><span></span><code class=syntax>┌─uid─┬─timestamp─┬─value─┐
│ 1   │     2     │   0.2 │
│ 1   │     7     │   0.7 │
│ 1   │    12     │   1.2 │
│ 1   │    17     │   1.7 │
│ 1   │    25     │   2.5 │
│ 2   │     3     │   0.6 │
│ 2   │     8     │   1.6 │
│ 2   │    12     │   2.4 │
│ 2   │    18     │   3.6 │
│ 2   │    24     │   4.8 │
└─────┴───────────┴───────┘
</code></pre></div><div class=codehilite><pre><span></span><code class=syntax><span class=k>CREATE</span> <span class=k>TABLE</span> <span class=n>time_series</span><span class=p>(</span>
    <span class=n>uid</span>       <span class=n>UInt64</span><span class=p>,</span>
    <span class=k>timestamp</span> <span class=n>Int64</span><span class=p>,</span>
    <span class=n>value</span>     <span class=n>Float64</span>
<span class=p>)</span> <span class=n>ENGINE</span> <span class=o>=</span> <span class=n>Memory</span><span class=p>;</span>
<span class=k>INSERT</span> <span class=k>INTO</span> <span class=n>time_series</span> <span class=k>VALUES</span>
    <span class=p>(</span><span class=mi>1</span><span class=p>,</span><span class=mi>2</span><span class=p>,</span><span class=mi>0</span><span class=p>.</span><span class=mi>2</span><span class=p>),(</span><span class=mi>1</span><span class=p>,</span><span class=mi>7</span><span class=p>,</span><span class=mi>0</span><span class=p>.</span><span class=mi>7</span><span class=p>),(</span><span class=mi>1</span><span class=p>,</span><span class=mi>12</span><span class=p>,</span><span class=mi>1</span><span class=p>.</span><span class=mi>2</span><span class=p>),(</span><span class=mi>1</span><span class=p>,</span><span class=mi>17</span><span class=p>,</span><span class=mi>1</span><span class=p>.</span><span class=mi>7</span><span class=p>),(</span><span class=mi>1</span><span class=p>,</span><span class=mi>25</span><span class=p>,</span><span class=mi>2</span><span class=p>.</span><span class=mi>5</span><span class=p>),</span>
    <span class=p>(</span><span class=mi>2</span><span class=p>,</span><span class=mi>3</span><span class=p>,</span><span class=mi>0</span><span class=p>.</span><span class=mi>6</span><span class=p>),(</span><span class=mi>2</span><span class=p>,</span><span class=mi>8</span><span class=p>,</span><span class=mi>1</span><span class=p>.</span><span class=mi>6</span><span class=p>),(</span><span class=mi>2</span><span class=p>,</span><span class=mi>12</span><span class=p>,</span><span class=mi>2</span><span class=p>.</span><span class=mi>4</span><span class=p>),(</span><span class=mi>2</span><span class=p>,</span><span class=mi>18</span><span class=p>,</span><span class=mi>3</span><span class=p>.</span><span class=mi>6</span><span class=p>),(</span><span class=mi>2</span><span class=p>,</span><span class=mi>24</span><span class=p>,</span><span class=mi>4</span><span class=p>.</span><span class=mi>8</span><span class=p>);</span>

<span class=k>SELECT</span> <span class=n>timeSeriesGroupSum</span><span class=p>(</span><span class=n>uid</span><span class=p>,</span> <span class=k>timestamp</span><span class=p>,</span> <span class=n>value</span><span class=p>)</span>
<span class=k>FROM</span> <span class=p>(</span>
    <span class=k>SELECT</span> <span class=o>*</span> <span class=k>FROM</span> <span class=n>time_series</span> <span class=k>order</span> <span class=k>by</span> <span class=k>timestamp</span> <span class=k>ASC</span>
<span class=p>);</span>
</code></pre></div><p>و نتیجه خواهد بود:</p><div class=codehilite><pre><span></span><code class=syntax>[(2,0.2),(3,0.9),(7,2.1),(8,2.4),(12,3.6),(17,5.1),(18,5.4),(24,7.2),(25,2.5)]
</code></pre></div><h2 id=agg-function-timeseriesgroupratesum>هشدار داده می شود)<a class=headerlink href=../amp/#agg-function-timeseriesgroupratesum title="Permanent link"> </a></h2><p>به طور مشابه به <code class=syntax>timeSeriesGroupSum</code>, <code class=syntax>timeSeriesGroupRateSum</code> محاسبه نرخ زمان سری و سپس مجموع نرخ با هم.<br> همچنین, برچسب زمان باید در جهت صعود قبل از استفاده از این تابع باشد.</p><p>استفاده از این تابع به داده ها از <code class=syntax>timeSeriesGroupSum</code> مثال, شما نتیجه زیر را دریافت کنید:</p><div class=codehilite><pre><span></span><code class=syntax>[(2,0),(3,0.1),(7,0.3),(8,0.3),(12,0.3),(17,0.3),(18,0.3),(24,0.3),(25,0.1)]
</code></pre></div><h2 id=agg_function-avg>میانگین)<a class=headerlink href=../amp/#agg_function-avg title="Permanent link"> </a></h2><p>محاسبه متوسط.<br> فقط برای اعداد کار می کند.<br> نتیجه این است که همیشه شناور64.</p><h2 id=avgweighted>کشتی کج<a class=headerlink href=../amp/#avgweighted title="Permanent link"> </a></h2><p>محاسبه <a href=https://en.wikipedia.org/wiki/Weighted_arithmetic_mean rel="external nofollow noreferrer" target=_blank>میانگین ریاضی وزنی</a>.</p><p><strong>نحو</strong></p><div class=codehilite><pre><span></span><code class=syntax><span class=n>avgWeighted</span><span class=p>(</span><span class=n>x</span><span class=p>,</span> <span class=n>weight</span><span class=p>)</span>
</code></pre></div><p><strong>پارامترها</strong></p><ul><li><code class=syntax>x</code> — Values. <a href=../../../data-types/int-uint/amp/ >عدد صحیح</a> یا <a href=../../../data-types/float/amp/ >شناور نقطه</a>.</li><li><code class=syntax>weight</code> — Weights of the values. <a href=../../../data-types/int-uint/amp/ >عدد صحیح</a> یا <a href=../../../data-types/float/amp/ >شناور نقطه</a>.</li></ul><p>نوع <code class=syntax>x</code> و <code class=syntax>weight</code> باید مثل قبل باشه</p><p><strong>مقدار بازگشتی</strong></p><ul><li>وزن متوسط.</li><li><code class=syntax>NaN</code>. اگر تمام وزن به برابر هستند 0.</li></ul><p>نوع: <a href=../../../data-types/float/amp/ >جسم شناور64</a>.</p><p><strong>مثال</strong></p><p>پرسوجو:</p><div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>avgWeighted</span><span class=p>(</span><span class=n>x</span><span class=p>,</span> <span class=n>w</span><span class=p>)</span>
<span class=k>FROM</span> <span class=k>values</span><span class=p>(</span><span class=s1>'x Int8, w Int8'</span><span class=p>,</span> <span class=p>(</span><span class=mi>4</span><span class=p>,</span> <span class=mi>1</span><span class=p>),</span> <span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>0</span><span class=p>),</span> <span class=p>(</span><span class=mi>10</span><span class=p>,</span> <span class=mi>2</span><span class=p>))</span>
</code></pre></div><p>نتیجه:</p><div class=codehilite><pre><span></span><code class=syntax>┌─avgWeighted(x, weight)─┐
│                      8 │
└────────────────────────┘
</code></pre></div><h2 id=agg_function-uniq>دانشگاه<a class=headerlink href=../amp/#agg_function-uniq title="Permanent link"> </a></h2><p>محاسبه تعداد تقریبی مقادیر مختلف استدلال.</p><div class=codehilite><pre><span></span><code class=syntax><span class=n>uniq</span><span class=p>(</span><span class=n>x</span><span class=p>[,</span> <span class=p>...])</span>
</code></pre></div><p><strong>پارامترها</strong></p><p>تابع طول می کشد تعداد متغیر از پارامترهای. پارامترها می توانند باشند <code class=syntax>Tuple</code>, <code class=syntax>Array</code>, <code class=syntax>Date</code>, <code class=syntax>DateTime</code>, <code class=syntax>String</code>, یا انواع عددی.</p><p><strong>مقدار بازگشتی</strong></p><ul><li>A <a href=../../../data-types/int-uint/amp/ >UInt64</a>- نوع شماره .</li></ul><p><strong>پیاده سازی اطلاعات</strong></p><p>تابع:</p><ul><li><p>هش را برای تمام پارامترها در مجموع محاسبه می کند و سپس در محاسبات استفاده می شود.</p></li><li><p>با استفاده از یک الگوریتم نمونه تطبیقی. برای محاسبه دولت تابع با استفاده از یک نمونه از عناصر هش ارزش تا 65536.</p><div class=codehilite><pre><span></span><code class=syntax><span class=n>This</span> <span class=n>algorithm</span> <span class=k>is</span> <span class=n>very</span> <span class=n>accurate</span> <span class=k>and</span> <span class=n>very</span> <span class=n>efficient</span> <span class=k>on</span> <span class=n>the</span> <span class=n>CPU</span><span class=p>.</span> <span class=k>When</span> <span class=n>the</span> <span class=n>query</span> <span class=n>contains</span> <span class=n>several</span> <span class=n>of</span> <span class=n>these</span> <span class=n>functions</span><span class=p>,</span> <span class=k>using</span> <span class=ss>`uniq`</span> <span class=k>is</span> <span class=n>almost</span> <span class=k>as</span> <span class=n>fast</span> <span class=k>as</span> <span class=k>using</span> <span class=n>other</span> <span class=n>aggregate</span> <span class=n>functions</span><span class=p>.</span>
</code></pre></div></li><li><p>نتیجه را تعیین می کند (به سفارش پردازش پرس و جو بستگی ندارد).</p></li></ul><p>ما توصیه می کنیم با استفاده از این تابع تقریبا در تمام حالات.</p><p><strong>همچنین نگاه کنید به</strong></p><ul><li><a href=../amp/#agg_function-uniqcombined>مخلوط نشده</a></li><li><a href=../amp/#agg_function-uniqcombined64>نیم قرن 64</a></li><li><a href=../amp/#agg_function-uniqhll12>یونقلل12</a></li><li><a href=../amp/#agg_function-uniqexact>قرارداد اتحادیه</a></li></ul><h2 id=agg_function-uniqcombined>مخلوط نشده<a class=headerlink href=../amp/#agg_function-uniqcombined title="Permanent link"> </a></h2><p>محاسبه تعداد تقریبی مقادیر استدلال های مختلف.</p><div class=codehilite><pre><span></span><code class=syntax><span class=n>uniqCombined</span><span class=p>(</span><span class=n>HLL_precision</span><span class=p>)(</span><span class=n>x</span><span class=p>[,</span> <span class=p>...])</span>
</code></pre></div><p>این <code class=syntax>uniqCombined</code> تابع یک انتخاب خوب برای محاسبه تعداد مقادیر مختلف است.</p><p><strong>پارامترها</strong></p><p>تابع طول می کشد تعداد متغیر از پارامترهای. پارامترها می توانند باشند <code class=syntax>Tuple</code>, <code class=syntax>Array</code>, <code class=syntax>Date</code>, <code class=syntax>DateTime</code>, <code class=syntax>String</code>, یا انواع عددی.</p><p><code class=syntax>HLL_precision</code> پایه 2 لگاریتم تعداد سلول ها در است <a href=https://en.wikipedia.org/wiki/HyperLogLog rel="external nofollow noreferrer" target=_blank>جمع شدن</a>. اختیاری, شما می توانید تابع به عنوان استفاده <code class=syntax>uniqCombined(x[, ...])</code>. مقدار پیش فرض برای <code class=syntax>HLL_precision</code> است 17, که به طور موثر 96 کیلوبایت فضا (2^17 سلول ها, 6 بیت در هر).</p><p><strong>مقدار بازگشتی</strong></p><ul><li>یک عدد <a href=../../../data-types/int-uint/amp/ >UInt64</a>- نوع شماره .</li></ul><p><strong>پیاده سازی اطلاعات</strong></p><p>تابع:</p><ul><li><p>محاسبه هش (هش 64 بیتی برای <code class=syntax>String</code> و در غیر این صورت 32 بیتی) برای تمام پارامترها در مجموع و سپس در محاسبات استفاده می شود.</p></li><li><p>با استفاده از ترکیبی از سه الگوریتم: مجموعه, جدول هش, و جمع شدن با جدول تصحیح خطا.</p><div class=codehilite><pre><span></span><code class=syntax><span class=err>For a small number of distinct elements, an array is used. When the set size is larger, a hash table is used. For a larger number of elements, HyperLogLog is used, which will occupy a fixed amount of memory.</span>
</code></pre></div></li><li><p>نتیجه را تعیین می کند (به سفارش پردازش پرس و جو بستگی ندارد).</p></li></ul><div class="admonition note alert pb-0 mb-4 alert-primary" role=alert><p class="admonition-title alert-heading display-6 mb-2">یادداشت</p><p>از هش 32 بیتی برای غیر استفاده می کند-<code class=syntax>String</code> نوع, نتیجه خطا بسیار بالا برای کاریت به طور قابل توجهی بزرگتر از اند <code class=syntax>UINT_MAX</code> (خطا به سرعت پس از چند ده میلیارد ارزش متمایز افزایش خواهد یافت), از این رو در این مورد شما باید استفاده کنید <a class=alert-link href=../amp/#agg_function-uniqcombined64>نیم قرن 64</a></p></div><p>در مقایسه با <a href=../amp/#agg_function-uniq>دانشگاه</a> عملکرد <code class=syntax>uniqCombined</code>:</p><ul><li>مصرف چندین بار حافظه کمتر.</li><li>محاسبه با دقت چند بار بالاتر است.</li><li>معمولا عملکرد کمی پایین تر است. در برخی از حالات, <code class=syntax>uniqCombined</code> می توانید بهتر از انجام <code class=syntax>uniq</code> برای مثال با توزیع نمایش داده شد که انتقال تعداد زیادی از جمع متحده بر روی شبکه.</li></ul><p><strong>همچنین نگاه کنید به</strong></p><ul><li><a href=../amp/#agg_function-uniq>دانشگاه</a></li><li><a href=../amp/#agg_function-uniqcombined64>نیم قرن 64</a></li><li><a href=../amp/#agg_function-uniqhll12>یونقلل12</a></li><li><a href=../amp/#agg_function-uniqexact>قرارداد اتحادیه</a></li></ul><h2 id=agg_function-uniqcombined64>نیم قرن 64<a class=headerlink href=../amp/#agg_function-uniqcombined64 title="Permanent link"> </a></h2><p>مثل <a href=../amp/#agg_function-uniqcombined>مخلوط نشده</a>, اما با استفاده از هش 64 بیتی برای تمام انواع داده ها.</p><h2 id=agg_function-uniqhll12>یونقلل12<a class=headerlink href=../amp/#agg_function-uniqhll12 title="Permanent link"> </a></h2><p>محاسبه تعداد تقریبی مقادیر استدلال های مختلف, با استفاده از <a href=https://en.wikipedia.org/wiki/HyperLogLog rel="external nofollow noreferrer" target=_blank>جمع شدن</a> الگوریتم.</p><div class=codehilite><pre><span></span><code class=syntax><span class=n>uniqHLL12</span><span class=p>(</span><span class=n>x</span><span class=p>[,</span> <span class=p>...])</span>
</code></pre></div><p><strong>پارامترها</strong></p><p>تابع طول می کشد تعداد متغیر از پارامترهای. پارامترها می توانند باشند <code class=syntax>Tuple</code>, <code class=syntax>Array</code>, <code class=syntax>Date</code>, <code class=syntax>DateTime</code>, <code class=syntax>String</code>, یا انواع عددی.</p><p><strong>مقدار بازگشتی</strong></p><ul><li>A <a href=../../../data-types/int-uint/amp/ >UInt64</a>- نوع شماره .</li></ul><p><strong>پیاده سازی اطلاعات</strong></p><p>تابع:</p><ul><li><p>هش را برای تمام پارامترها در مجموع محاسبه می کند و سپس در محاسبات استفاده می شود.</p></li><li><p>با استفاده از الگوریتم جمع شدن تقریبی تعداد مقادیر استدلال های مختلف.</p><div class=codehilite><pre><span></span><code class=syntax><span class=err>212 5-bit cells are used. The size of the state is slightly more than 2.5 KB. The result is not very accurate (up to ~10% error) for small data sets (&lt;10K elements). However, the result is fairly accurate for high-cardinality data sets (10K-100M), with a maximum error of ~1.6%. Starting from 100M, the estimation error increases, and the function will return very inaccurate results for data sets with extremely high cardinality (1B+ elements).</span>
</code></pre></div></li><li><p>نتیجه تعیین شده را فراهم می کند (به سفارش پردازش پرس و جو بستگی ندارد).</p></li></ul><p>ما توصیه نمی کنیم با استفاده از این تابع. در اغلب موارد از <a href=../amp/#agg_function-uniq>دانشگاه</a> یا <a href=../amp/#agg_function-uniqcombined>مخلوط نشده</a> تابع.</p><p><strong>همچنین نگاه کنید به</strong></p><ul><li><a href=../amp/#agg_function-uniq>دانشگاه</a></li><li><a href=../amp/#agg_function-uniqcombined>مخلوط نشده</a></li><li><a href=../amp/#agg_function-uniqexact>قرارداد اتحادیه</a></li></ul><h2 id=agg_function-uniqexact>قرارداد اتحادیه<a class=headerlink href=../amp/#agg_function-uniqexact title="Permanent link"> </a></h2><p>محاسبه تعداد دقیق ارزش استدلال های مختلف.</p><div class=codehilite><pre><span></span><code class=syntax><span class=n>uniqExact</span><span class=p>(</span><span class=n>x</span><span class=p>[,</span> <span class=p>...])</span>
</code></pre></div><p>استفاده از <code class=syntax>uniqExact</code> تابع اگر شما کاملا نیاز به یک نتیجه دقیق. در غیر این صورت استفاده از <a href=../amp/#agg_function-uniq>دانشگاه</a> تابع.</p><p>این <code class=syntax>uniqExact</code> تابع با استفاده از حافظه بیش از <code class=syntax>uniq</code>, چرا که اندازه دولت رشد گشوده است به عنوان تعدادی از ارزش های مختلف را افزایش می دهد.</p><p><strong>پارامترها</strong></p><p>تابع طول می کشد تعداد متغیر از پارامترهای. پارامترها می توانند باشند <code class=syntax>Tuple</code>, <code class=syntax>Array</code>, <code class=syntax>Date</code>, <code class=syntax>DateTime</code>, <code class=syntax>String</code>, یا انواع عددی.</p><p><strong>همچنین نگاه کنید به</strong></p><ul><li><a href=../amp/#agg_function-uniq>دانشگاه</a></li><li><a href=../amp/#agg_function-uniqcombined>مخلوط نشده</a></li><li><a href=../amp/#agg_function-uniqhll12>یونقلل12</a></li></ul><h2 id=agg_function-grouparray>groupArray(x) groupArray(max_size)(x)<a class=headerlink href=../amp/#agg_function-grouparray title="Permanent link"> </a></h2><p>مجموعه ای از مقادیر استدلال را ایجاد می کند.<br> مقادیر را می توان به ترتیب در هر (نامعین) اضافه کرد.</p><p>نسخه دوم (با <code class=syntax>max_size</code> پارامتر) اندازه مجموعه حاصل را محدود می کند <code class=syntax>max_size</code> عناصر.<br> به عنوان مثال, <code class=syntax>groupArray (1) (x)</code> معادل است <code class=syntax>[any (x)]</code>.</p><p>در بعضی موارد, شما هنوز هم می توانید در جهت اعدام تکیه. این امر در مورد مواردی که <code class=syntax>SELECT</code> همراه از یک خرده فروشی که با استفاده از <code class=syntax>ORDER BY</code>.</p><h2 id=grouparrayinsertat>هشدار داده می شود<a class=headerlink href=../amp/#grouparrayinsertat title="Permanent link"> </a></h2><p>مقدار را به مجموعه ای در موقعیت مشخص شده وارد می کند.</p><p><strong>نحو</strong></p><div class=codehilite><pre><span></span><code class=syntax><span class=n>groupArrayInsertAt</span><span class=p>(</span><span class=n>default_x</span><span class=p>,</span> <span class=k>size</span><span class=p>)(</span><span class=n>x</span><span class=p>,</span> <span class=n>pos</span><span class=p>);</span>
</code></pre></div><p>اگر در یک پرس و جو چند مقدار به همان موقعیت قرار داده, تابع رفتار در روش های زیر:</p><ul><li>اگر پرس و جو در یک موضوع اجرا, یکی از اولین از مقادیر درج شده استفاده شده است.</li><li>اگر یک پرس و جو در موضوعات مختلف اجرا, ارزش حاصل یکی نامشخص از مقادیر درج شده است.</li></ul><p><strong>پارامترها</strong></p><ul><li><code class=syntax>x</code> — Value to be inserted. <a href=../../../syntax/amp/#syntax-expressions>عبارت</a> در نتیجه یکی از <a href=../../../data-types/amp/ >انواع داده های پشتیبانی شده</a>.</li><li><code class=syntax>pos</code> — Position at which the specified element <code class=syntax>x</code> قرار داده می شود. شماره شاخص در مجموعه از صفر شروع می شود. <a href=../../../data-types/int-uint/amp/#uint-ranges>UInt32</a>.</li><li><code class=syntax>default_x</code>— Default value for substituting in empty positions. Optional parameter. <a href=../../../syntax/amp/#syntax-expressions>عبارت</a> در نتیجه نوع داده پیکربندی شده برای <code class=syntax>x</code> پارامتر. اگر <code class=syntax>default_x</code> تعریف نشده است <a href=../../../statements/create/amp/#create-default-values>مقادیر پیشفرض</a> استفاده می شود.</li><li><code class=syntax>size</code>— Length of the resulting array. Optional parameter. When using this parameter, the default value <code class=syntax>default_x</code> باید مشخص شود. <a href=../../../data-types/int-uint/amp/#uint-ranges>UInt32</a>.</li></ul><p><strong>مقدار بازگشتی</strong></p><ul><li>مجموعه ای با مقادیر درج شده.</li></ul><p>نوع: <a href=../../../data-types/array/amp/#data-type-array>&amp; حذف</a>.</p><p><strong>مثال</strong></p><p>پرسوجو:</p><div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>groupArrayInsertAt</span><span class=p>(</span><span class=n>toString</span><span class=p>(</span><span class=nb>number</span><span class=p>),</span> <span class=nb>number</span> <span class=o>*</span> <span class=mi>2</span><span class=p>)</span> <span class=k>FROM</span> <span class=n>numbers</span><span class=p>(</span><span class=mi>5</span><span class=p>);</span>
</code></pre></div><p>نتیجه:</p><div class=codehilite><pre><span></span><code class=syntax>┌─groupArrayInsertAt(toString(number), multiply(number, 2))─┐
│ ['0','','1','','2','','3','','4']                         │
└───────────────────────────────────────────────────────────┘
</code></pre></div><p>پرسوجو:</p><div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>groupArrayInsertAt</span><span class=p>(</span><span class=s1>'-'</span><span class=p>)(</span><span class=n>toString</span><span class=p>(</span><span class=nb>number</span><span class=p>),</span> <span class=nb>number</span> <span class=o>*</span> <span class=mi>2</span><span class=p>)</span> <span class=k>FROM</span> <span class=n>numbers</span><span class=p>(</span><span class=mi>5</span><span class=p>);</span>
</code></pre></div><p>نتیجه:</p><div class=codehilite><pre><span></span><code class=syntax>┌─groupArrayInsertAt('-')(toString(number), multiply(number, 2))─┐
│ ['0','-','1','-','2','-','3','-','4']                          │
└────────────────────────────────────────────────────────────────┘
</code></pre></div><p>پرسوجو:</p><div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>groupArrayInsertAt</span><span class=p>(</span><span class=s1>'-'</span><span class=p>,</span> <span class=mi>5</span><span class=p>)(</span><span class=n>toString</span><span class=p>(</span><span class=nb>number</span><span class=p>),</span> <span class=nb>number</span> <span class=o>*</span> <span class=mi>2</span><span class=p>)</span> <span class=k>FROM</span> <span class=n>numbers</span><span class=p>(</span><span class=mi>5</span><span class=p>);</span>
</code></pre></div><p>نتیجه:</p><div class=codehilite><pre><span></span><code class=syntax>┌─groupArrayInsertAt('-', 5)(toString(number), multiply(number, 2))─┐
│ ['0','-','1','-','2']                                             │
└───────────────────────────────────────────────────────────────────┘
</code></pre></div><p>درج چند رشته ای از عناصر را به یک موقعیت.</p><p>پرسوجو:</p><div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>groupArrayInsertAt</span><span class=p>(</span><span class=nb>number</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span> <span class=k>FROM</span> <span class=n>numbers_mt</span><span class=p>(</span><span class=mi>10</span><span class=p>)</span> <span class=n>SETTINGS</span> <span class=n>max_block_size</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span>
</code></pre></div><p>به عنوان یک نتیجه از این پرس و جو شما عدد صحیح تصادفی در <code class=syntax>[0,9]</code> محدوده. به عنوان مثال:</p><div class=codehilite><pre><span></span><code class=syntax>┌─groupArrayInsertAt(number, 0)─┐
│ [7]                           │
└───────────────────────────────┘
</code></pre></div><h2 id=agg_function-grouparraymovingsum>هشدار داده می شود<a class=headerlink href=../amp/#agg_function-grouparraymovingsum title="Permanent link"> </a></h2><p>محاسبه مجموع در حال حرکت از ارزش های ورودی.</p><div class=codehilite><pre><span></span><code class=syntax><span class=n>groupArrayMovingSum</span><span class=p>(</span><span class=n>numbers_for_summing</span><span class=p>)</span>
<span class=n>groupArrayMovingSum</span><span class=p>(</span><span class=n>window_size</span><span class=p>)(</span><span class=n>numbers_for_summing</span><span class=p>)</span>
</code></pre></div><p>این تابع می تواند اندازه پنجره به عنوان یک پارامتر را. اگر سمت چپ نامشخص, تابع طول می کشد اندازه پنجره به تعداد ردیف در ستون برابر.</p><p><strong>پارامترها</strong></p><ul><li><code class=syntax>numbers_for_summing</code> — <a href=../../../syntax/amp/#syntax-expressions>عبارت</a> در نتیجه یک مقدار نوع داده عددی.</li><li><code class=syntax>window_size</code> — Size of the calculation window.</li></ul><p><strong>مقادیر بازگشتی</strong></p><ul><li>مجموعه ای از همان اندازه و نوع به عنوان داده های ورودی.</li></ul><p><strong>مثال</strong></p><p>جدول نمونه:</p><div class=codehilite><pre><span></span><code class=syntax><span class=k>CREATE</span> <span class=k>TABLE</span> <span class=n>t</span>
<span class=p>(</span>
    <span class=o>`</span><span class=nb>int</span><span class=o>`</span> <span class=n>UInt8</span><span class=p>,</span>
    <span class=o>`</span><span class=nb>float</span><span class=o>`</span> <span class=n>Float32</span><span class=p>,</span>
    <span class=o>`</span><span class=nb>dec</span><span class=o>`</span> <span class=n>Decimal32</span><span class=p>(</span><span class=mi>2</span><span class=p>)</span>
<span class=p>)</span>
<span class=n>ENGINE</span> <span class=o>=</span> <span class=n>TinyLog</span>
</code></pre></div><div class=codehilite><pre><span></span><code class=syntax>┌─int─┬─float─┬──dec─┐
│   1 │   1.1 │ 1.10 │
│   2 │   2.2 │ 2.20 │
│   4 │   4.4 │ 4.40 │
│   7 │  7.77 │ 7.77 │
└─────┴───────┴──────┘
</code></pre></div><p>نمایش داده شد:</p><div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span>
    <span class=n>groupArrayMovingSum</span><span class=p>(</span><span class=nb>int</span><span class=p>)</span> <span class=k>AS</span> <span class=n>I</span><span class=p>,</span>
    <span class=n>groupArrayMovingSum</span><span class=p>(</span><span class=nb>float</span><span class=p>)</span> <span class=k>AS</span> <span class=n>F</span><span class=p>,</span>
    <span class=n>groupArrayMovingSum</span><span class=p>(</span><span class=nb>dec</span><span class=p>)</span> <span class=k>AS</span> <span class=n>D</span>
<span class=k>FROM</span> <span class=n>t</span>
</code></pre></div><div class=codehilite><pre><span></span><code class=syntax>┌─I──────────┬─F───────────────────────────────┬─D──────────────────────┐
│ [1,3,7,14] │ [1.1,3.3000002,7.7000003,15.47] │ [1.10,3.30,7.70,15.47] │
└────────────┴─────────────────────────────────┴────────────────────────┘
</code></pre></div><div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span>
    <span class=n>groupArrayMovingSum</span><span class=p>(</span><span class=mi>2</span><span class=p>)(</span><span class=nb>int</span><span class=p>)</span> <span class=k>AS</span> <span class=n>I</span><span class=p>,</span>
    <span class=n>groupArrayMovingSum</span><span class=p>(</span><span class=mi>2</span><span class=p>)(</span><span class=nb>float</span><span class=p>)</span> <span class=k>AS</span> <span class=n>F</span><span class=p>,</span>
    <span class=n>groupArrayMovingSum</span><span class=p>(</span><span class=mi>2</span><span class=p>)(</span><span class=nb>dec</span><span class=p>)</span> <span class=k>AS</span> <span class=n>D</span>
<span class=k>FROM</span> <span class=n>t</span>
</code></pre></div><div class=codehilite><pre><span></span><code class=syntax>┌─I──────────┬─F───────────────────────────────┬─D──────────────────────┐
│ [1,3,6,11] │ [1.1,3.3000002,6.6000004,12.17] │ [1.10,3.30,6.60,12.17] │
└────────────┴─────────────────────────────────┴────────────────────────┘
</code></pre></div><h2 id=agg_function-grouparraymovingavg>گروهاریموینگاوگ<a class=headerlink href=../amp/#agg_function-grouparraymovingavg title="Permanent link"> </a></h2><p>محاسبه میانگین متحرک از ارزش های ورودی.</p><div class=codehilite><pre><span></span><code class=syntax><span class=n>groupArrayMovingAvg</span><span class=p>(</span><span class=n>numbers_for_summing</span><span class=p>)</span>
<span class=n>groupArrayMovingAvg</span><span class=p>(</span><span class=n>window_size</span><span class=p>)(</span><span class=n>numbers_for_summing</span><span class=p>)</span>
</code></pre></div><p>این تابع می تواند اندازه پنجره به عنوان یک پارامتر را. اگر سمت چپ نامشخص, تابع طول می کشد اندازه پنجره به تعداد ردیف در ستون برابر.</p><p><strong>پارامترها</strong></p><ul><li><code class=syntax>numbers_for_summing</code> — <a href=../../../syntax/amp/#syntax-expressions>عبارت</a> در نتیجه یک مقدار نوع داده عددی.</li><li><code class=syntax>window_size</code> — Size of the calculation window.</li></ul><p><strong>مقادیر بازگشتی</strong></p><ul><li>مجموعه ای از همان اندازه و نوع به عنوان داده های ورودی.</li></ul><p>تابع استفاده می کند <a href=https://en.wikipedia.org/wiki/Rounding#Rounding_towards_zero rel="external nofollow noreferrer" target=_blank>گرد کردن به سمت صفر</a>. این کوتاه رقم اعشار ناچیز برای نوع داده و در نتیجه.</p><p><strong>مثال</strong></p><p>جدول نمونه <code class=syntax>b</code>:</p><div class=codehilite><pre><span></span><code class=syntax><span class=k>CREATE</span> <span class=k>TABLE</span> <span class=n>t</span>
<span class=p>(</span>
    <span class=o>`</span><span class=nb>int</span><span class=o>`</span> <span class=n>UInt8</span><span class=p>,</span>
    <span class=o>`</span><span class=nb>float</span><span class=o>`</span> <span class=n>Float32</span><span class=p>,</span>
    <span class=o>`</span><span class=nb>dec</span><span class=o>`</span> <span class=n>Decimal32</span><span class=p>(</span><span class=mi>2</span><span class=p>)</span>
<span class=p>)</span>
<span class=n>ENGINE</span> <span class=o>=</span> <span class=n>TinyLog</span>
</code></pre></div><div class=codehilite><pre><span></span><code class=syntax>┌─int─┬─float─┬──dec─┐
│   1 │   1.1 │ 1.10 │
│   2 │   2.2 │ 2.20 │
│   4 │   4.4 │ 4.40 │
│   7 │  7.77 │ 7.77 │
└─────┴───────┴──────┘
</code></pre></div><p>نمایش داده شد:</p><div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span>
    <span class=n>groupArrayMovingAvg</span><span class=p>(</span><span class=nb>int</span><span class=p>)</span> <span class=k>AS</span> <span class=n>I</span><span class=p>,</span>
    <span class=n>groupArrayMovingAvg</span><span class=p>(</span><span class=nb>float</span><span class=p>)</span> <span class=k>AS</span> <span class=n>F</span><span class=p>,</span>
    <span class=n>groupArrayMovingAvg</span><span class=p>(</span><span class=nb>dec</span><span class=p>)</span> <span class=k>AS</span> <span class=n>D</span>
<span class=k>FROM</span> <span class=n>t</span>
</code></pre></div><div class=codehilite><pre><span></span><code class=syntax>┌─I─────────┬─F───────────────────────────────────┬─D─────────────────────┐
│ [0,0,1,3] │ [0.275,0.82500005,1.9250001,3.8675] │ [0.27,0.82,1.92,3.86] │
└───────────┴─────────────────────────────────────┴───────────────────────┘
</code></pre></div><div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span>
    <span class=n>groupArrayMovingAvg</span><span class=p>(</span><span class=mi>2</span><span class=p>)(</span><span class=nb>int</span><span class=p>)</span> <span class=k>AS</span> <span class=n>I</span><span class=p>,</span>
    <span class=n>groupArrayMovingAvg</span><span class=p>(</span><span class=mi>2</span><span class=p>)(</span><span class=nb>float</span><span class=p>)</span> <span class=k>AS</span> <span class=n>F</span><span class=p>,</span>
    <span class=n>groupArrayMovingAvg</span><span class=p>(</span><span class=mi>2</span><span class=p>)(</span><span class=nb>dec</span><span class=p>)</span> <span class=k>AS</span> <span class=n>D</span>
<span class=k>FROM</span> <span class=n>t</span>
</code></pre></div><div class=codehilite><pre><span></span><code class=syntax>┌─I─────────┬─F────────────────────────────────┬─D─────────────────────┐
│ [0,1,3,5] │ [0.55,1.6500001,3.3000002,6.085] │ [0.55,1.65,3.30,6.08] │
└───────────┴──────────────────────────────────┴───────────────────────┘
</code></pre></div><h2 id=groupuniqarrayx-groupuniqarraymax-sizex>groupUniqArray(x) groupUniqArray(max_size)(x)<a class=headerlink href=../amp/#groupuniqarrayx-groupuniqarraymax-sizex title="Permanent link"> </a></h2><p>مجموعه ای از مقادیر مختلف استدلال ایجاد می کند. مصرف حافظه همان است که برای <code class=syntax>uniqExact</code> تابع.</p><p>نسخه دوم (با <code class=syntax>max_size</code> پارامتر) اندازه مجموعه حاصل را محدود می کند <code class=syntax>max_size</code> عناصر.<br> به عنوان مثال, <code class=syntax>groupUniqArray(1)(x)</code> معادل است <code class=syntax>[any(x)]</code>.</p><h2 id=quantile>quantile<a class=headerlink href=../amp/#quantile title="Permanent link"> </a></h2><p>محاسبه تقریبی <a href=https://en.wikipedia.org/wiki/Quantile rel="external nofollow noreferrer" target=_blank>quantile</a> از یک توالی داده های عددی.</p><p>این تابع اعمال می شود <a href=https://en.wikipedia.org/wiki/Reservoir_sampling rel="external nofollow noreferrer" target=_blank>نمونه برداری مخزن</a> با اندازه مخزن تا 8192 و یک مولد عدد تصادفی برای نمونه برداری. نتیجه غیر قطعی است. برای دریافت یک کمی دقیق, استفاده از <a href=../amp/#quantileexact>کوانتوم</a> تابع.</p><p>هنگام استفاده از چندین <code class=syntax>quantile*</code> توابع با سطوح مختلف در پرس و جو, کشورهای داخلی در ترکیب نیست (به این معنا که, پرس و جو کار می کند موثر کمتر از می تواند). در این مورد از <a href=../amp/#quantiles>quantiles</a> تابع.</p><p><strong>نحو</strong></p><div class=codehilite><pre><span></span><code class=syntax><span class=n>quantile</span><span class=p>(</span><span class=k>level</span><span class=p>)(</span><span class=n>expr</span><span class=p>)</span>
</code></pre></div><p>نام مستعار: <code class=syntax>median</code>.</p><p><strong>پارامترها</strong></p><ul><li><code class=syntax>level</code> — Level of quantile. Optional parameter. Constant floating-point number from 0 to 1. We recommend using a <code class=syntax>level</code> مقدار در محدوده <code class=syntax>[0.01, 0.99]</code>. مقدار پیش فرض: 0.5. در <code class=syntax>level=0.5</code> تابع محاسبه می کند <a href=https://en.wikipedia.org/wiki/Median rel="external nofollow noreferrer" target=_blank>میانه</a>.</li><li><code class=syntax>expr</code> — Expression over the column values resulting in numeric <a href=../../../data-types/amp/#data_types>انواع داده ها</a>, <a href=../../../data-types/date/amp/ >تاریخ</a> یا <a href=../../../data-types/datetime/amp/ >DateTime</a>.</li></ul><p><strong>مقدار بازگشتی</strong></p><ul><li>کمی تقریبی از سطح مشخص شده است.</li></ul><p>نوع:</p><ul><li><a href=../../../data-types/float/amp/ >جسم شناور64</a> برای ورودی نوع داده عددی.</li><li><a href=../../../data-types/date/amp/ >تاریخ</a> اگر مقادیر ورودی <code class=syntax>Date</code> نوع.</li><li><a href=../../../data-types/datetime/amp/ >DateTime</a> اگر مقادیر ورودی <code class=syntax>DateTime</code> نوع.</li></ul><p><strong>مثال</strong></p><p>جدول ورودی:</p><div class=codehilite><pre><span></span><code class=syntax>┌─val─┐
│   1 │
│   1 │
│   2 │
│   3 │
└─────┘
</code></pre></div><p>پرسوجو:</p><div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>quantile</span><span class=p>(</span><span class=n>val</span><span class=p>)</span> <span class=k>FROM</span> <span class=n>t</span>
</code></pre></div><p>نتیجه:</p><div class=codehilite><pre><span></span><code class=syntax>┌─quantile(val)─┐
│           1.5 │
└───────────────┘
</code></pre></div><p><strong>همچنین نگاه کنید به</strong></p><ul><li><a href=../amp/#median>میانه</a></li><li><a href=../amp/#quantiles>quantiles</a></li></ul><h2 id=quantiledeterministic>نامعینیهای کوانتی<a class=headerlink href=../amp/#quantiledeterministic title="Permanent link"> </a></h2><p>محاسبه تقریبی <a href=https://en.wikipedia.org/wiki/Quantile rel="external nofollow noreferrer" target=_blank>quantile</a> از یک توالی داده های عددی.</p><p>این تابع اعمال می شود <a href=https://en.wikipedia.org/wiki/Reservoir_sampling rel="external nofollow noreferrer" target=_blank>نمونه برداری مخزن</a> با اندازه مخزن تا 8192 و الگوریتم قطعی نمونه گیری. نتیجه قطعی است. برای دریافت یک کمی دقیق, استفاده از <a href=../amp/#quantileexact>کوانتوم</a> تابع.</p><p>هنگام استفاده از چندین <code class=syntax>quantile*</code> توابع با سطوح مختلف در پرس و جو, کشورهای داخلی در ترکیب نیست (به این معنا که, پرس و جو کار می کند موثر کمتر از می تواند). در این مورد از <a href=../amp/#quantiles>quantiles</a> تابع.</p><p><strong>نحو</strong></p><div class=codehilite><pre><span></span><code class=syntax><span class=n>quantileDeterministic</span><span class=p>(</span><span class=k>level</span><span class=p>)(</span><span class=n>expr</span><span class=p>,</span> <span class=n>determinator</span><span class=p>)</span>
</code></pre></div><p>نام مستعار: <code class=syntax>medianDeterministic</code>.</p><p><strong>پارامترها</strong></p><ul><li><code class=syntax>level</code> — Level of quantile. Optional parameter. Constant floating-point number from 0 to 1. We recommend using a <code class=syntax>level</code> مقدار در محدوده <code class=syntax>[0.01, 0.99]</code>. مقدار پیش فرض: 0.5. در <code class=syntax>level=0.5</code> تابع محاسبه می کند <a href=https://en.wikipedia.org/wiki/Median rel="external nofollow noreferrer" target=_blank>میانه</a>.</li><li><code class=syntax>expr</code> — Expression over the column values resulting in numeric <a href=../../../data-types/amp/#data_types>انواع داده ها</a>, <a href=../../../data-types/date/amp/ >تاریخ</a> یا <a href=../../../data-types/datetime/amp/ >DateTime</a>.</li><li><code class=syntax>determinator</code> — Number whose hash is used instead of a random number generator in the reservoir sampling algorithm to make the result of sampling deterministic. As a determinator you can use any deterministic positive number, for example, a user id or an event id. If the same determinator value occures too often, the function works incorrectly.</li></ul><p><strong>مقدار بازگشتی</strong></p><ul><li>کمی تقریبی از سطح مشخص شده است.</li></ul><p>نوع:</p><ul><li><a href=../../../data-types/float/amp/ >جسم شناور64</a> برای ورودی نوع داده عددی.</li><li><a href=../../../data-types/date/amp/ >تاریخ</a> اگر مقادیر ورودی <code class=syntax>Date</code> نوع.</li><li><a href=../../../data-types/datetime/amp/ >DateTime</a> اگر مقادیر ورودی <code class=syntax>DateTime</code> نوع.</li></ul><p><strong>مثال</strong></p><p>جدول ورودی:</p><div class=codehilite><pre><span></span><code class=syntax>┌─val─┐
│   1 │
│   1 │
│   2 │
│   3 │
└─────┘
</code></pre></div><p>پرسوجو:</p><div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>quantileDeterministic</span><span class=p>(</span><span class=n>val</span><span class=p>,</span> <span class=mi>1</span><span class=p>)</span> <span class=k>FROM</span> <span class=n>t</span>
</code></pre></div><p>نتیجه:</p><div class=codehilite><pre><span></span><code class=syntax>┌─quantileDeterministic(val, 1)─┐
│                           1.5 │
└───────────────────────────────┘
</code></pre></div><p><strong>همچنین نگاه کنید به</strong></p><ul><li><a href=../amp/#median>میانه</a></li><li><a href=../amp/#quantiles>quantiles</a></li></ul><h2 id=quantileexact>کوانتوم<a class=headerlink href=../amp/#quantileexact title="Permanent link"> </a></h2><p>دقیقا محاسبه می کند <a href=https://en.wikipedia.org/wiki/Quantile rel="external nofollow noreferrer" target=_blank>quantile</a> از یک توالی داده های عددی.</p><p>To get exact value, all the passed values ​​are combined into an array, which is then partially sorted. Therefore, the function consumes <code class=syntax>O(n)</code> حافظه, جایی که <code class=syntax>n</code> تعدادی از ارزش هایی که تصویب شد. اما, برای تعداد کمی از ارزش, تابع بسیار موثر است.</p><p>هنگام استفاده از چندین <code class=syntax>quantile*</code> توابع با سطوح مختلف در پرس و جو, کشورهای داخلی در ترکیب نیست (به این معنا که, پرس و جو کار می کند موثر کمتر از می تواند). در این مورد از <a href=../amp/#quantiles>quantiles</a> تابع.</p><p><strong>نحو</strong></p><div class=codehilite><pre><span></span><code class=syntax><span class=n>quantileExact</span><span class=p>(</span><span class=k>level</span><span class=p>)(</span><span class=n>expr</span><span class=p>)</span>
</code></pre></div><p>نام مستعار: <code class=syntax>medianExact</code>.</p><p><strong>پارامترها</strong></p><ul><li><code class=syntax>level</code> — Level of quantile. Optional parameter. Constant floating-point number from 0 to 1. We recommend using a <code class=syntax>level</code> مقدار در محدوده <code class=syntax>[0.01, 0.99]</code>. مقدار پیش فرض: 0.5. در <code class=syntax>level=0.5</code> تابع محاسبه می کند <a href=https://en.wikipedia.org/wiki/Median rel="external nofollow noreferrer" target=_blank>میانه</a>.</li><li><code class=syntax>expr</code> — Expression over the column values resulting in numeric <a href=../../../data-types/amp/#data_types>انواع داده ها</a>, <a href=../../../data-types/date/amp/ >تاریخ</a> یا <a href=../../../data-types/datetime/amp/ >DateTime</a>.</li></ul><p><strong>مقدار بازگشتی</strong></p><ul><li>Quantile از سطح مشخص شده.</li></ul><p>نوع:</p><ul><li><a href=../../../data-types/float/amp/ >جسم شناور64</a> برای ورودی نوع داده عددی.</li><li><a href=../../../data-types/date/amp/ >تاریخ</a> اگر مقادیر ورودی <code class=syntax>Date</code> نوع.</li><li><a href=../../../data-types/datetime/amp/ >DateTime</a> اگر مقادیر ورودی <code class=syntax>DateTime</code> نوع.</li></ul><p><strong>مثال</strong></p><p>پرسوجو:</p><div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>quantileExact</span><span class=p>(</span><span class=nb>number</span><span class=p>)</span> <span class=k>FROM</span> <span class=n>numbers</span><span class=p>(</span><span class=mi>10</span><span class=p>)</span>
</code></pre></div><p>نتیجه:</p><div class=codehilite><pre><span></span><code class=syntax>┌─quantileExact(number)─┐
│                     5 │
└───────────────────────┘
</code></pre></div><p><strong>همچنین نگاه کنید به</strong></p><ul><li><a href=../amp/#median>میانه</a></li><li><a href=../amp/#quantiles>quantiles</a></li></ul><h2 id=quantileexactweighted>نمایش سایت<a class=headerlink href=../amp/#quantileexactweighted title="Permanent link"> </a></h2><p>دقیقا محاسبه می کند <a href=https://en.wikipedia.org/wiki/Quantile rel="external nofollow noreferrer" target=_blank>quantile</a> از یک توالی داده های عددی, با در نظر گرفتن وزن هر عنصر.</p><p>To get exact value, all the passed values ​​are combined into an array, which is then partially sorted. Each value is counted with its weight, as if it is present <code class=syntax>weight</code> times. A hash table is used in the algorithm. Because of this, if the passed values ​​are frequently repeated, the function consumes less RAM than <a href=../amp/#quantileexact>کوانتوم</a>. شما می توانید این تابع به جای استفاده از <code class=syntax>quantileExact</code> و وزن 1 را مشخص کنید.</p><p>هنگام استفاده از چندین <code class=syntax>quantile*</code> توابع با سطوح مختلف در پرس و جو, کشورهای داخلی در ترکیب نیست (به این معنا که, پرس و جو کار می کند موثر کمتر از می تواند). در این مورد از <a href=../amp/#quantiles>quantiles</a> تابع.</p><p><strong>نحو</strong></p><div class=codehilite><pre><span></span><code class=syntax><span class=n>quantileExactWeighted</span><span class=p>(</span><span class=k>level</span><span class=p>)(</span><span class=n>expr</span><span class=p>,</span> <span class=n>weight</span><span class=p>)</span>
</code></pre></div><p>نام مستعار: <code class=syntax>medianExactWeighted</code>.</p><p><strong>پارامترها</strong></p><ul><li><code class=syntax>level</code> — Level of quantile. Optional parameter. Constant floating-point number from 0 to 1. We recommend using a <code class=syntax>level</code> مقدار در محدوده <code class=syntax>[0.01, 0.99]</code>. مقدار پیش فرض: 0.5. در <code class=syntax>level=0.5</code> تابع محاسبه می کند <a href=https://en.wikipedia.org/wiki/Median rel="external nofollow noreferrer" target=_blank>میانه</a>.</li><li><code class=syntax>expr</code> — Expression over the column values resulting in numeric <a href=../../../data-types/amp/#data_types>انواع داده ها</a>, <a href=../../../data-types/date/amp/ >تاریخ</a> یا <a href=../../../data-types/datetime/amp/ >DateTime</a>.</li><li><code class=syntax>weight</code> — Column with weights of sequence members. Weight is a number of value occurrences.</li></ul><p><strong>مقدار بازگشتی</strong></p><ul><li>Quantile از سطح مشخص شده.</li></ul><p>نوع:</p><ul><li><a href=../../../data-types/float/amp/ >جسم شناور64</a> برای ورودی نوع داده عددی.</li><li><a href=../../../data-types/date/amp/ >تاریخ</a> اگر مقادیر ورودی <code class=syntax>Date</code> نوع.</li><li><a href=../../../data-types/datetime/amp/ >DateTime</a> اگر مقادیر ورودی <code class=syntax>DateTime</code> نوع.</li></ul><p><strong>مثال</strong></p><p>جدول ورودی:</p><div class=codehilite><pre><span></span><code class=syntax>┌─n─┬─val─┐
│ 0 │   3 │
│ 1 │   2 │
│ 2 │   1 │
│ 5 │   4 │
└───┴─────┘
</code></pre></div><p>پرسوجو:</p><div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>quantileExactWeighted</span><span class=p>(</span><span class=n>n</span><span class=p>,</span> <span class=n>val</span><span class=p>)</span> <span class=k>FROM</span> <span class=n>t</span>
</code></pre></div><p>نتیجه:</p><div class=codehilite><pre><span></span><code class=syntax>┌─quantileExactWeighted(n, val)─┐
│                             1 │
└───────────────────────────────┘
</code></pre></div><p><strong>همچنین نگاه کنید به</strong></p><ul><li><a href=../amp/#median>میانه</a></li><li><a href=../amp/#quantiles>quantiles</a></li></ul><h2 id=quantiletiming>زمان کمی<a class=headerlink href=../amp/#quantiletiming title="Permanent link"> </a></h2><p>با دقت تعیین شده محاسبه می شود <a href=https://en.wikipedia.org/wiki/Quantile rel="external nofollow noreferrer" target=_blank>quantile</a> از یک توالی داده های عددی.</p><p>نتیجه قطعی است(به سفارش پردازش پرس و جو بستگی ندارد). این تابع برای کار با توالی هایی که توزیع هایی مانند بارگذاری صفحات وب بار یا زمان پاسخ باطن را توصیف می کنند بهینه شده است.</p><p>هنگام استفاده از چندین <code class=syntax>quantile*</code> توابع با سطوح مختلف در پرس و جو, کشورهای داخلی در ترکیب نیست (به این معنا که, پرس و جو کار می کند موثر کمتر از می تواند). در این مورد از <a href=../amp/#quantiles>quantiles</a> تابع.</p><p><strong>نحو</strong></p><div class=codehilite><pre><span></span><code class=syntax><span class=n>quantileTiming</span><span class=p>(</span><span class=k>level</span><span class=p>)(</span><span class=n>expr</span><span class=p>)</span>
</code></pre></div><p>نام مستعار: <code class=syntax>medianTiming</code>.</p><p><strong>پارامترها</strong></p><ul><li><p><code class=syntax>level</code> — Level of quantile. Optional parameter. Constant floating-point number from 0 to 1. We recommend using a <code class=syntax>level</code> مقدار در محدوده <code class=syntax>[0.01, 0.99]</code>. مقدار پیش فرض: 0.5. در <code class=syntax>level=0.5</code> تابع محاسبه می کند <a href=https://en.wikipedia.org/wiki/Median rel="external nofollow noreferrer" target=_blank>میانه</a>.</p></li><li><p><code class=syntax>expr</code> — <a href=../../../syntax/amp/#syntax-expressions>عبارت</a> بیش از یک مقادیر ستون بازگشت <a href=../../../data-types/float/amp/ >شناور*</a>- نوع شماره .</p><div class=codehilite><pre><span></span><code class=syntax><span class=err>- If negative values are passed to the function, the behavior is undefined.</span>
<span class=err>- If the value is greater than 30,000 (a page loading time of more than 30 seconds), it is assumed to be 30,000.</span>
</code></pre></div></li></ul><p><strong>دقت</strong></p><p>محاسبه دقیق است اگر:</p><ul><li>تعداد کل مقادیر 5670 تجاوز نمی کند.</li><li>تعداد کل مقادیر بیش از 5670, اما زمان بارگذاری صفحه کمتر از است 1024خانم.</li></ul><p>در غیر این صورت, نتیجه محاسبه به نزدیکترین چند از گرد 16 خانم.</p><div class="admonition note alert pb-0 mb-4 alert-primary" role=alert><p class="admonition-title alert-heading display-6 mb-2">یادداشت</p><p>برای محاسبه زمان بارگذاری صفحه quantiles این تابع این است که موثر تر و دقیق تر از <a class=alert-link href=../amp/#quantile>quantile</a>.</p></div><p><strong>مقدار بازگشتی</strong></p><ul><li>Quantile از سطح مشخص شده.</li></ul><p>نوع: <code class=syntax>Float32</code>.</p><div class="admonition note alert pb-0 mb-4 alert-primary" role=alert><p class="admonition-title alert-heading display-6 mb-2">یادداشت</p><p>اگر هیچ ارزش به تابع منتقل می شود (هنگام استفاده از <code class=syntax>quantileTimingIf</code>), <a class=alert-link href=../../../data-types/float/amp/#data_type-float-nan-inf>نان</a> بازگشته است. هدف از این است که افتراق این موارد از مواردی که منجر به صفر. ببینید <a class=alert-link href=../../../statements/select/order-by/amp/#select-order-by>ORDER BY</a> برای یادداشت ها در مرتب سازی <code class=syntax>NaN</code> ارزشهای خبری عبارتند از:</p></div><p><strong>مثال</strong></p><p>جدول ورودی:</p><div class=codehilite><pre><span></span><code class=syntax>┌─response_time─┐
│            72 │
│           112 │
│           126 │
│           145 │
│           104 │
│           242 │
│           313 │
│           168 │
│           108 │
└───────────────┘
</code></pre></div><p>پرسوجو:</p><div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>quantileTiming</span><span class=p>(</span><span class=n>response_time</span><span class=p>)</span> <span class=k>FROM</span> <span class=n>t</span>
</code></pre></div><p>نتیجه:</p><div class=codehilite><pre><span></span><code class=syntax>┌─quantileTiming(response_time)─┐
│                           126 │
└───────────────────────────────┘
</code></pre></div><p><strong>همچنین نگاه کنید به</strong></p><ul><li><a href=../amp/#median>میانه</a></li><li><a href=../amp/#quantiles>quantiles</a></li></ul><h2 id=quantiletimingweighted>زمان کمی<a class=headerlink href=../amp/#quantiletimingweighted title="Permanent link"> </a></h2><p>با دقت تعیین شده محاسبه می شود <a href=https://en.wikipedia.org/wiki/Quantile rel="external nofollow noreferrer" target=_blank>quantile</a> از یک توالی داده های عددی با توجه به وزن هر یک از اعضای دنباله.</p><p>نتیجه قطعی است(به سفارش پردازش پرس و جو بستگی ندارد). این تابع برای کار با توالی هایی که توزیع هایی مانند بارگذاری صفحات وب بار یا زمان پاسخ باطن را توصیف می کنند بهینه شده است.</p><p>هنگام استفاده از چندین <code class=syntax>quantile*</code> توابع با سطوح مختلف در پرس و جو, کشورهای داخلی در ترکیب نیست (به این معنا که, پرس و جو کار می کند موثر کمتر از می تواند). در این مورد از <a href=../amp/#quantiles>quantiles</a> تابع.</p><p><strong>نحو</strong></p><div class=codehilite><pre><span></span><code class=syntax><span class=n>quantileTimingWeighted</span><span class=p>(</span><span class=k>level</span><span class=p>)(</span><span class=n>expr</span><span class=p>,</span> <span class=n>weight</span><span class=p>)</span>
</code></pre></div><p>نام مستعار: <code class=syntax>medianTimingWeighted</code>.</p><p><strong>پارامترها</strong></p><ul><li><p><code class=syntax>level</code> — Level of quantile. Optional parameter. Constant floating-point number from 0 to 1. We recommend using a <code class=syntax>level</code> مقدار در محدوده <code class=syntax>[0.01, 0.99]</code>. مقدار پیش فرض: 0.5. در <code class=syntax>level=0.5</code> تابع محاسبه می کند <a href=https://en.wikipedia.org/wiki/Median rel="external nofollow noreferrer" target=_blank>میانه</a>.</p></li><li><p><code class=syntax>expr</code> — <a href=../../../syntax/amp/#syntax-expressions>عبارت</a> بیش از یک مقادیر ستون بازگشت <a href=../../../data-types/float/amp/ >شناور*</a>- نوع شماره .</p><div class=codehilite><pre><span></span><code class=syntax><span class=err>- If negative values are passed to the function, the behavior is undefined.</span>
<span class=err>- If the value is greater than 30,000 (a page loading time of more than 30 seconds), it is assumed to be 30,000.</span>
</code></pre></div></li><li><p><code class=syntax>weight</code> — Column with weights of sequence elements. Weight is a number of value occurrences.</p></li></ul><p><strong>دقت</strong></p><p>محاسبه دقیق است اگر:</p><ul><li>تعداد کل مقادیر 5670 تجاوز نمی کند.</li><li>تعداد کل مقادیر بیش از 5670, اما زمان بارگذاری صفحه کمتر از است 1024خانم.</li></ul><p>در غیر این صورت, نتیجه محاسبه به نزدیکترین چند از گرد 16 خانم.</p><div class="admonition note alert pb-0 mb-4 alert-primary" role=alert><p class="admonition-title alert-heading display-6 mb-2">یادداشت</p><p>برای محاسبه زمان بارگذاری صفحه quantiles این تابع این است که موثر تر و دقیق تر از <a class=alert-link href=../amp/#quantile>quantile</a>.</p></div><p><strong>مقدار بازگشتی</strong></p><ul><li>Quantile از سطح مشخص شده.</li></ul><p>نوع: <code class=syntax>Float32</code>.</p><div class="admonition note alert pb-0 mb-4 alert-primary" role=alert><p class="admonition-title alert-heading display-6 mb-2">یادداشت</p><p>اگر هیچ ارزش به تابع منتقل می شود (هنگام استفاده از <code class=syntax>quantileTimingIf</code>), <a class=alert-link href=../../../data-types/float/amp/#data_type-float-nan-inf>نان</a> بازگشته است. هدف از این است که افتراق این موارد از مواردی که منجر به صفر. ببینید <a class=alert-link href=../../../statements/select/order-by/amp/#select-order-by>ORDER BY</a> برای یادداشت ها در مرتب سازی <code class=syntax>NaN</code> ارزشهای خبری عبارتند از:</p></div><p><strong>مثال</strong></p><p>جدول ورودی:</p><div class=codehilite><pre><span></span><code class=syntax>┌─response_time─┬─weight─┐
│            68 │      1 │
│           104 │      2 │
│           112 │      3 │
│           126 │      2 │
│           138 │      1 │
│           162 │      1 │
└───────────────┴────────┘
</code></pre></div><p>پرسوجو:</p><div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>quantileTimingWeighted</span><span class=p>(</span><span class=n>response_time</span><span class=p>,</span> <span class=n>weight</span><span class=p>)</span> <span class=k>FROM</span> <span class=n>t</span>
</code></pre></div><p>نتیجه:</p><div class=codehilite><pre><span></span><code class=syntax>┌─quantileTimingWeighted(response_time, weight)─┐
│                                           112 │
└───────────────────────────────────────────────┘
</code></pre></div><p><strong>همچنین نگاه کنید به</strong></p><ul><li><a href=../amp/#median>میانه</a></li><li><a href=../amp/#quantiles>quantiles</a></li></ul><h2 id=quantiletdigest>مقدار کمی<a class=headerlink href=../amp/#quantiletdigest title="Permanent link"> </a></h2><p>محاسبه تقریبی <a href=https://en.wikipedia.org/wiki/Quantile rel="external nofollow noreferrer" target=_blank>quantile</a> از یک توالی داده های عددی با استفاده از <a href=https://github.com/tdunning/t-digest/blob/master/docs/t-digest-paper/histo.pdf rel="external nofollow noreferrer" target=_blank>خلاصه</a> الگوریتم.</p><p>حداکثر خطا است 1%. مصرف حافظه است <code class=syntax>log(n)</code> کجا <code class=syntax>n</code> تعدادی از ارزش است. نتیجه بستگی دارد منظور از در حال اجرا پرس و جو و nondeterministic.</p><p>عملکرد تابع کمتر از عملکرد است <a href=../amp/#quantile>quantile</a> یا <a href=../amp/#quantiletiming>زمان کمی</a>. از لحاظ نسبت اندازه دولت به دقت, این تابع بسیار بهتر از <code class=syntax>quantile</code>.</p><p>هنگام استفاده از چندین <code class=syntax>quantile*</code> توابع با سطوح مختلف در پرس و جو, کشورهای داخلی در ترکیب نیست (به این معنا که, پرس و جو کار می کند موثر کمتر از می تواند). در این مورد از <a href=../amp/#quantiles>quantiles</a> تابع.</p><p><strong>نحو</strong></p><div class=codehilite><pre><span></span><code class=syntax><span class=n>quantileTDigest</span><span class=p>(</span><span class=k>level</span><span class=p>)(</span><span class=n>expr</span><span class=p>)</span>
</code></pre></div><p>نام مستعار: <code class=syntax>medianTDigest</code>.</p><p><strong>پارامترها</strong></p><ul><li><code class=syntax>level</code> — Level of quantile. Optional parameter. Constant floating-point number from 0 to 1. We recommend using a <code class=syntax>level</code> مقدار در محدوده <code class=syntax>[0.01, 0.99]</code>. مقدار پیش فرض: 0.5. در <code class=syntax>level=0.5</code> تابع محاسبه می کند <a href=https://en.wikipedia.org/wiki/Median rel="external nofollow noreferrer" target=_blank>میانه</a>.</li><li><code class=syntax>expr</code> — Expression over the column values resulting in numeric <a href=../../../data-types/amp/#data_types>انواع داده ها</a>, <a href=../../../data-types/date/amp/ >تاریخ</a> یا <a href=../../../data-types/datetime/amp/ >DateTime</a>.</li></ul><p><strong>مقدار بازگشتی</strong></p><ul><li>کمی تقریبی از سطح مشخص شده است.</li></ul><p>نوع:</p><ul><li><a href=../../../data-types/float/amp/ >جسم شناور64</a> برای ورودی نوع داده عددی.</li><li><a href=../../../data-types/date/amp/ >تاریخ</a> اگر مقادیر ورودی <code class=syntax>Date</code> نوع.</li><li><a href=../../../data-types/datetime/amp/ >DateTime</a> اگر مقادیر ورودی <code class=syntax>DateTime</code> نوع.</li></ul><p><strong>مثال</strong></p><p>پرسوجو:</p><div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>quantileTDigest</span><span class=p>(</span><span class=nb>number</span><span class=p>)</span> <span class=k>FROM</span> <span class=n>numbers</span><span class=p>(</span><span class=mi>10</span><span class=p>)</span>
</code></pre></div><p>نتیجه:</p><div class=codehilite><pre><span></span><code class=syntax>┌─quantileTDigest(number)─┐
│                     4.5 │
└─────────────────────────┘
</code></pre></div><p><strong>همچنین نگاه کنید به</strong></p><ul><li><a href=../amp/#median>میانه</a></li><li><a href=../amp/#quantiles>quantiles</a></li></ul><h2 id=quantiletdigestweighted>نمایش سایت<a class=headerlink href=../amp/#quantiletdigestweighted title="Permanent link"> </a></h2><p>محاسبه تقریبی <a href=https://en.wikipedia.org/wiki/Quantile rel="external nofollow noreferrer" target=_blank>quantile</a> از یک توالی داده های عددی با استفاده از <a href=https://github.com/tdunning/t-digest/blob/master/docs/t-digest-paper/histo.pdf rel="external nofollow noreferrer" target=_blank>خلاصه</a> الگوریتم. تابع طول می کشد را به حساب وزن هر یک از اعضای دنباله. حداکثر خطا است 1%. مصرف حافظه است <code class=syntax>log(n)</code> کجا <code class=syntax>n</code> تعدادی از ارزش است.</p><p>عملکرد تابع کمتر از عملکرد است <a href=../amp/#quantile>quantile</a> یا <a href=../amp/#quantiletiming>زمان کمی</a>. از لحاظ نسبت اندازه دولت به دقت, این تابع بسیار بهتر از <code class=syntax>quantile</code>.</p><p>نتیجه بستگی دارد منظور از در حال اجرا پرس و جو و nondeterministic.</p><p>هنگام استفاده از چندین <code class=syntax>quantile*</code> توابع با سطوح مختلف در پرس و جو, کشورهای داخلی در ترکیب نیست (به این معنا که, پرس و جو کار می کند موثر کمتر از می تواند). در این مورد از <a href=../amp/#quantiles>quantiles</a> تابع.</p><p><strong>نحو</strong></p><div class=codehilite><pre><span></span><code class=syntax><span class=n>quantileTDigest</span><span class=p>(</span><span class=k>level</span><span class=p>)(</span><span class=n>expr</span><span class=p>)</span>
</code></pre></div><p>نام مستعار: <code class=syntax>medianTDigest</code>.</p><p><strong>پارامترها</strong></p><ul><li><code class=syntax>level</code> — Level of quantile. Optional parameter. Constant floating-point number from 0 to 1. We recommend using a <code class=syntax>level</code> مقدار در محدوده <code class=syntax>[0.01, 0.99]</code>. مقدار پیش فرض: 0.5. در <code class=syntax>level=0.5</code> تابع محاسبه می کند <a href=https://en.wikipedia.org/wiki/Median rel="external nofollow noreferrer" target=_blank>میانه</a>.</li><li><code class=syntax>expr</code> — Expression over the column values resulting in numeric <a href=../../../data-types/amp/#data_types>انواع داده ها</a>, <a href=../../../data-types/date/amp/ >تاریخ</a> یا <a href=../../../data-types/datetime/amp/ >DateTime</a>.</li><li><code class=syntax>weight</code> — Column with weights of sequence elements. Weight is a number of value occurrences.</li></ul><p><strong>مقدار بازگشتی</strong></p><ul><li>کمی تقریبی از سطح مشخص شده است.</li></ul><p>نوع:</p><ul><li><a href=../../../data-types/float/amp/ >جسم شناور64</a> برای ورودی نوع داده عددی.</li><li><a href=../../../data-types/date/amp/ >تاریخ</a> اگر مقادیر ورودی <code class=syntax>Date</code> نوع.</li><li><a href=../../../data-types/datetime/amp/ >DateTime</a> اگر مقادیر ورودی <code class=syntax>DateTime</code> نوع.</li></ul><p><strong>مثال</strong></p><p>پرسوجو:</p><div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>quantileTDigestWeighted</span><span class=p>(</span><span class=nb>number</span><span class=p>,</span> <span class=mi>1</span><span class=p>)</span> <span class=k>FROM</span> <span class=n>numbers</span><span class=p>(</span><span class=mi>10</span><span class=p>)</span>
</code></pre></div><p>نتیجه:</p><div class=codehilite><pre><span></span><code class=syntax>┌─quantileTDigestWeighted(number, 1)─┐
│                                4.5 │
└────────────────────────────────────┘
</code></pre></div><p><strong>همچنین نگاه کنید به</strong></p><ul><li><a href=../amp/#median>میانه</a></li><li><a href=../amp/#quantiles>quantiles</a></li></ul><h2 id=median>میانه<a class=headerlink href=../amp/#median title="Permanent link"> </a></h2><p>این <code class=syntax>median*</code> توابع نام مستعار برای مربوطه <code class=syntax>quantile*</code> توابع. متوسط یک نمونه داده عددی را محاسبه می کنند.</p><p>توابع:</p><ul><li><code class=syntax>median</code> — Alias for <a href=../amp/#quantile>quantile</a>.</li><li><code class=syntax>medianDeterministic</code> — Alias for <a href=../amp/#quantiledeterministic>نامعینیهای کوانتی</a>.</li><li><code class=syntax>medianExact</code> — Alias for <a href=../amp/#quantileexact>کوانتوم</a>.</li><li><code class=syntax>medianExactWeighted</code> — Alias for <a href=../amp/#quantileexactweighted>نمایش سایت</a>.</li><li><code class=syntax>medianTiming</code> — Alias for <a href=../amp/#quantiletiming>زمان کمی</a>.</li><li><code class=syntax>medianTimingWeighted</code> — Alias for <a href=../amp/#quantiletimingweighted>زمان کمی</a>.</li><li><code class=syntax>medianTDigest</code> — Alias for <a href=../amp/#quantiletdigest>مقدار کمی</a>.</li><li><code class=syntax>medianTDigestWeighted</code> — Alias for <a href=../amp/#quantiletdigestweighted>نمایش سایت</a>.</li></ul><p><strong>مثال</strong></p><p>جدول ورودی:</p><div class=codehilite><pre><span></span><code class=syntax>┌─val─┐
│   1 │
│   1 │
│   2 │
│   3 │
└─────┘
</code></pre></div><p>پرسوجو:</p><div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>medianDeterministic</span><span class=p>(</span><span class=n>val</span><span class=p>,</span> <span class=mi>1</span><span class=p>)</span> <span class=k>FROM</span> <span class=n>t</span>
</code></pre></div><p>نتیجه:</p><div class=codehilite><pre><span></span><code class=syntax>┌─medianDeterministic(val, 1)─┐
│                         1.5 │
└─────────────────────────────┘
</code></pre></div><h2 id=quantiles>quantiles(level1, level2, …)(x)<a class=headerlink href=../amp/#quantiles title="Permanent link"> </a></h2><p>تمام quantile توابع نیز مربوط quantiles توابع: <code class=syntax>quantiles</code>, <code class=syntax>quantilesDeterministic</code>, <code class=syntax>quantilesTiming</code>, <code class=syntax>quantilesTimingWeighted</code>, <code class=syntax>quantilesExact</code>, <code class=syntax>quantilesExactWeighted</code>, <code class=syntax>quantilesTDigest</code>. این توابع محاسبه تمام کوانتوم از سطوح ذکر شده در یک پاس, و بازگشت مجموعه ای از مقادیر حاصل.</p><h2 id=varsampx>اطلاعات دقیق)<a class=headerlink href=../amp/#varsampx title="Permanent link"> </a></h2><p>محاسبه مقدار <code class=syntax>Σ((x - x̅)^2) / (n - 1)</code> کجا <code class=syntax>n</code> اندازه نمونه است و <code class=syntax>x̅</code>مقدار متوسط است <code class=syntax>x</code>.</p><p>این نشان دهنده یک تخمین بی طرفانه از واریانس یک متغیر تصادفی اگر ارزش گذشت نمونه خود را تشکیل می دهند.</p><p>بازگشت <code class=syntax>Float64</code>. چه زمانی <code class=syntax>n &lt;= 1</code>, بازگشت <code class=syntax>+∞</code>.</p><div class="admonition note alert pb-0 mb-4 alert-primary" role=alert><p class="admonition-title alert-heading display-6 mb-2">یادداشت</p><p>این تابع با استفاده از الگوریتم عددی ناپایدار. اگر شما نیاز دارید <a class=alert-link href=https://en.wikipedia.org/wiki/Numerical_stability rel="external nofollow noreferrer" target=_blank>پایداری عددی</a> در محاسبات, استفاده از <code class=syntax>varSampStable</code> تابع. این کار کندتر, فراهم می کند اما خطای محاسباتی کمتر.</p></div><h2 id=varpopx>هشدار داده می شود)<a class=headerlink href=../amp/#varpopx title="Permanent link"> </a></h2><p>محاسبه مقدار <code class=syntax>Σ((x - x̅)^2) / n</code> کجا <code class=syntax>n</code> اندازه نمونه است و <code class=syntax>x̅</code>مقدار متوسط است <code class=syntax>x</code>.</p><p>به عبارت دیگر, پراکندگی برای مجموعه ای از ارزش. بازگشت <code class=syntax>Float64</code>.</p><div class="admonition note alert pb-0 mb-4 alert-primary" role=alert><p class="admonition-title alert-heading display-6 mb-2">یادداشت</p><p>این تابع با استفاده از الگوریتم عددی ناپایدار. اگر شما نیاز دارید <a class=alert-link href=https://en.wikipedia.org/wiki/Numerical_stability rel="external nofollow noreferrer" target=_blank>پایداری عددی</a> در محاسبات, استفاده از <code class=syntax>varPopStable</code> تابع. این کار کندتر, فراهم می کند اما خطای محاسباتی کمتر.</p></div><h2 id=stddevsampx>اطلاعات دقیق)<a class=headerlink href=../amp/#stddevsampx title="Permanent link"> </a></h2><p>نتیجه برابر با ریشه مربع است <code class=syntax>varSamp(x)</code>.</p><div class="admonition note alert pb-0 mb-4 alert-primary" role=alert><p class="admonition-title alert-heading display-6 mb-2">یادداشت</p><p>این تابع با استفاده از الگوریتم عددی ناپایدار. اگر شما نیاز دارید <a class=alert-link href=https://en.wikipedia.org/wiki/Numerical_stability rel="external nofollow noreferrer" target=_blank>پایداری عددی</a> در محاسبات, استفاده از <code class=syntax>stddevSampStable</code> تابع. این کار کندتر, فراهم می کند اما خطای محاسباتی کمتر.</p></div><h2 id=stddevpopx>اطلاعات دقیق)<a class=headerlink href=../amp/#stddevpopx title="Permanent link"> </a></h2><p>نتیجه برابر با ریشه مربع است <code class=syntax>varPop(x)</code>.</p><div class="admonition note alert pb-0 mb-4 alert-primary" role=alert><p class="admonition-title alert-heading display-6 mb-2">یادداشت</p><p>این تابع با استفاده از الگوریتم عددی ناپایدار. اگر شما نیاز دارید <a class=alert-link href=https://en.wikipedia.org/wiki/Numerical_stability rel="external nofollow noreferrer" target=_blank>پایداری عددی</a> در محاسبات, استفاده از <code class=syntax>stddevPopStable</code> تابع. این کار کندتر, فراهم می کند اما خطای محاسباتی کمتر.</p></div><h2 id=topknx>topK(N)(x)<a class=headerlink href=../amp/#topknx title="Permanent link"> </a></h2><p>بازگرداندن مجموعه ای از مقادیر تقریبا شایع ترین در ستون مشخص. مجموعه حاصل به ترتیب نزولی فرکانس تقریبی ارزش ها (نه با ارزش های خود) طبقه بندی شده اند.</p><p>پیاده سازی <a href=http://www.l2f.inesc-id.pt/~fmmb/wiki/uploads/Work/misnis.ref0a.pdf rel="external nofollow noreferrer" target=_blank>فیلتر صرفه جویی در فضا</a> الگوریتم برای تجزیه و تحلیل توپک, بر اساس الگوریتم کاهش و ترکیب از <a href=https://arxiv.org/pdf/1401.0702.pdf rel="external nofollow noreferrer" target=_blank>صرفه جویی در فضای موازی</a>.</p><div class=codehilite><pre><span></span><code class=syntax><span class=n>topK</span><span class=p>(</span><span class=n>N</span><span class=p>)(</span><span class=k>column</span><span class=p>)</span>
</code></pre></div><p>این تابع یک نتیجه تضمین شده را فراهم نمی کند. در شرایط خاص, اشتباهات ممکن است رخ دهد و ممکن است مقادیر مکرر که مقادیر شایع ترین نیست بازگشت.</p><p>ما توصیه می کنیم با استفاده از <code class=syntax>N &lt; 10</code> عملکرد با بزرگ کاهش می یابد <code class=syntax>N</code> ارزشهای خبری عبارتند از: حداکثر مقدار <code class=syntax>N = 65536</code>.</p><p><strong>پارامترها</strong></p><ul><li>‘N’ است تعدادی از عناصر به بازگشت.</li></ul><p>اگر پارامتر حذف شده است, مقدار پیش فرض 10 استفاده شده است.</p><p><strong>نشانوندها</strong></p><ul><li>' x ' – The value to calculate frequency.</li></ul><p><strong>مثال</strong></p><p>نگاهی به <a href=../../../../getting-started/example-datasets/ontime/amp/ >به موقع</a> مجموعه داده ها و انتخاب سه ارزش اغلب اتفاق می افتد در <code class=syntax>AirlineID</code> ستون.</p><div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>topK</span><span class=p>(</span><span class=mi>3</span><span class=p>)(</span><span class=n>AirlineID</span><span class=p>)</span> <span class=k>AS</span> <span class=n>res</span>
<span class=k>FROM</span> <span class=n>ontime</span>
</code></pre></div><div class=codehilite><pre><span></span><code class=syntax>┌─res─────────────────┐
│ [19393,19790,19805] │
└─────────────────────┘
</code></pre></div><h2 id=topkweighted>کشتی کج<a class=headerlink href=../amp/#topkweighted title="Permanent link"> </a></h2><p>مشابه به <code class=syntax>topK</code> اما طول می کشد یک استدلال اضافی از نوع صحیح - <code class=syntax>weight</code>. هر مقدار به حساب <code class=syntax>weight</code> بار برای محاسبه فرکانس.</p><p><strong>نحو</strong></p><div class=codehilite><pre><span></span><code class=syntax><span class=n>topKWeighted</span><span class=p>(</span><span class=n>N</span><span class=p>)(</span><span class=n>x</span><span class=p>,</span> <span class=n>weight</span><span class=p>)</span>
</code></pre></div><p><strong>پارامترها</strong></p><ul><li><code class=syntax>N</code> — The number of elements to return.</li></ul><p><strong>نشانوندها</strong></p><ul><li><code class=syntax>x</code> – The value.</li><li><code class=syntax>weight</code> — The weight. <a href=../../../data-types/int-uint/amp/ >UInt8</a>.</li></ul><p><strong>مقدار بازگشتی</strong></p><p>بازگرداندن مجموعه ای از مقادیر با حداکثر مجموع تقریبی وزن.</p><p><strong>مثال</strong></p><p>پرسوجو:</p><div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>topKWeighted</span><span class=p>(</span><span class=mi>10</span><span class=p>)(</span><span class=nb>number</span><span class=p>,</span> <span class=nb>number</span><span class=p>)</span> <span class=k>FROM</span> <span class=n>numbers</span><span class=p>(</span><span class=mi>1000</span><span class=p>)</span>
</code></pre></div><p>نتیجه:</p><div class=codehilite><pre><span></span><code class=syntax>┌─topKWeighted(10)(number, number)──────────┐
│ [999,998,997,996,995,994,993,992,991,990] │
└───────────────────────────────────────────┘
</code></pre></div><h2 id=covarsampx-y>هشدار داده می شود)<a class=headerlink href=../amp/#covarsampx-y title="Permanent link"> </a></h2><p>محاسبه ارزش <code class=syntax>Σ((x - x̅)(y - y̅)) / (n - 1)</code>.</p><p>را برمی گرداند شناور64. چه زمانی <code class=syntax>n &lt;= 1</code>, returns +∞.</p><div class="admonition note alert pb-0 mb-4 alert-primary" role=alert><p class="admonition-title alert-heading display-6 mb-2">یادداشت</p><p>این تابع با استفاده از الگوریتم عددی ناپایدار. اگر شما نیاز دارید <a class=alert-link href=https://en.wikipedia.org/wiki/Numerical_stability rel="external nofollow noreferrer" target=_blank>پایداری عددی</a> در محاسبات, استفاده از <code class=syntax>covarSampStable</code> تابع. این کار کندتر, فراهم می کند اما خطای محاسباتی کمتر.</p></div><h2 id=covarpopx-y>نمایش سایت)<a class=headerlink href=../amp/#covarpopx-y title="Permanent link"> </a></h2><p>محاسبه ارزش <code class=syntax>Σ((x - x̅)(y - y̅)) / n</code>.</p><div class="admonition note alert pb-0 mb-4 alert-primary" role=alert><p class="admonition-title alert-heading display-6 mb-2">یادداشت</p><p>این تابع با استفاده از الگوریتم عددی ناپایدار. اگر شما نیاز دارید <a class=alert-link href=https://en.wikipedia.org/wiki/Numerical_stability rel="external nofollow noreferrer" target=_blank>پایداری عددی</a> در محاسبات, استفاده از <code class=syntax>covarPopStable</code> تابع. این کار کندتر فراهم می کند اما یک خطای محاسباتی کمتر.</p></div><h2 id=corrx-y>هشدار داده می شود)<a class=headerlink href=../amp/#corrx-y title="Permanent link"> </a></h2><p>محاسبه ضریب همبستگی پیرسون: <code class=syntax>Σ((x - x̅)(y - y̅)) / sqrt(Σ((x - x̅)^2) * Σ((y - y̅)^2))</code>.</p><div class="admonition note alert pb-0 mb-4 alert-primary" role=alert><p class="admonition-title alert-heading display-6 mb-2">یادداشت</p><p>این تابع با استفاده از الگوریتم عددی ناپایدار. اگر شما نیاز دارید <a class=alert-link href=https://en.wikipedia.org/wiki/Numerical_stability rel="external nofollow noreferrer" target=_blank>پایداری عددی</a> در محاسبات, استفاده از <code class=syntax>corrStable</code> تابع. این کار کندتر, فراهم می کند اما خطای محاسباتی کمتر.</p></div><h2 id=categoricalinformationvalue>طبقه بندی فرمول بندی<a class=headerlink href=../amp/#categoricalinformationvalue title="Permanent link"> </a></h2><p>محاسبه ارزش <code class=syntax>(P(tag = 1) - P(tag = 0))(log(P(tag = 1)) - log(P(tag = 0)))</code> برای هر دسته.</p><div class=codehilite><pre><span></span><code class=syntax><span class=n>categoricalInformationValue</span><span class=p>(</span><span class=n>category1</span><span class=p>,</span> <span class=n>category2</span><span class=p>,</span> <span class=p>...,</span> <span class=n>tag</span><span class=p>)</span>
</code></pre></div><p>نتیجه نشان می دهد که چگونه یک ویژگی گسسته (قطعی) <code class=syntax>[category1, category2, ...]</code> کمک به یک مدل یادگیری که پیش بینی ارزش <code class=syntax>tag</code>.</p><h2 id=simplelinearregression>ساده سازی مقررات<a class=headerlink href=../amp/#simplelinearregression title="Permanent link"> </a></h2><p>انجام ساده (unidimensional) رگرسیون خطی.</p><div class=codehilite><pre><span></span><code class=syntax><span class=n>simpleLinearRegression</span><span class=p>(</span><span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>)</span>
</code></pre></div><p>پارامترها:</p><ul><li><code class=syntax>x</code> — Column with dependent variable values.</li><li><code class=syntax>y</code> — Column with explanatory variable values.</li></ul><p>مقادیر بازگشتی:</p><p>ثابتها <code class=syntax>(a, b)</code> از خط نتیجه <code class=syntax>y = a*x + b</code>.</p><p><strong>مثالها</strong></p><div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>arrayReduce</span><span class=p>(</span><span class=s1>'simpleLinearRegression'</span><span class=p>,</span> <span class=p>[</span><span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>],</span> <span class=p>[</span><span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>])</span>
</code></pre></div><div class=codehilite><pre><span></span><code class=syntax>┌─arrayReduce('simpleLinearRegression', [0, 1, 2, 3], [0, 1, 2, 3])─┐
│ (1,0)                                                             │
└───────────────────────────────────────────────────────────────────┘
</code></pre></div><div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>arrayReduce</span><span class=p>(</span><span class=s1>'simpleLinearRegression'</span><span class=p>,</span> <span class=p>[</span><span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=mi>3</span><span class=p>],</span> <span class=p>[</span><span class=mi>3</span><span class=p>,</span> <span class=mi>4</span><span class=p>,</span> <span class=mi>5</span><span class=p>,</span> <span class=mi>6</span><span class=p>])</span>
</code></pre></div><div class=codehilite><pre><span></span><code class=syntax>┌─arrayReduce('simpleLinearRegression', [0, 1, 2, 3], [3, 4, 5, 6])─┐
│ (1,3)                                                             │
└───────────────────────────────────────────────────────────────────┘
</code></pre></div><h2 id=agg_functions-stochasticlinearregression>تنظیم مقررات<a class=headerlink href=../amp/#agg_functions-stochasticlinearregression title="Permanent link"> </a></h2><p>این تابع پیاده سازی رگرسیون خطی تصادفی. این پشتیبانی از پارامترهای سفارشی برای نرخ یادگیری, ل2 ضریب منظم, اندازه مینی دسته ای و دارای چند روش برای به روز رسانی وزن (<a href=https://en.wikipedia.org/wiki/Stochastic_gradient_descent#Adam rel="external nofollow noreferrer" target=_blank>ادام</a> (به طور پیش فرض استفاده می شود), <a href=https://en.wikipedia.org/wiki/Stochastic_gradient_descent rel="external nofollow noreferrer" target=_blank>اطلاعات دقیق</a>, <a href=https://en.wikipedia.org/wiki/Stochastic_gradient_descent#Momentum rel="external nofollow noreferrer" target=_blank>شتاب</a>, <a href=https://mipt.ru/upload/medialibrary/d7e/41-91.pdf rel="external nofollow noreferrer" target=_blank>نستروف</a>).</p><h3 id=agg_functions-stochasticlinearregression-parameters>پارامترها<a class=headerlink href=../amp/#agg_functions-stochasticlinearregression-parameters title="Permanent link"> </a></h3><p>4 پارامتر قابل تنظیم وجود دارد. به ترتیب تابع منتقل می شود اما بدون نیاز به تصویب تمام مقادیر چهار پیش فرض استفاده می شود با این حال مدل خوب مورد نیاز برخی از تنظیم پارامتر وجود دارد.</p><div class=codehilite><pre><span></span><code class=syntax>stochasticLinearRegression(1.0, 1.0, 10, 'SGD')
</code></pre></div><ol><li><code class=syntax>learning rate</code> ضریب در طول گام است, زمانی که گام گرادیان تبار انجام شده است. نرخ یادگیری بیش از حد بزرگ ممکن است وزن بی نهایت از مدل شود. پیشفرض <code class=syntax>0.00001</code>.</li><li><code class=syntax>l2 regularization coefficient</code> که ممکن است کمک به جلوگیری از سوراخ سوراخ شدن بیش از حد. پیشفرض <code class=syntax>0.1</code>.</li><li><code class=syntax>mini-batch size</code> مجموعه تعدادی از عناصر که شیب محاسبه خواهد شد و خلاصه به انجام یک مرحله از گرادیان تبار. تبار تصادفی خالص با استفاده از یک عنصر, با این حال داشتن دسته های کوچک(در باره 10 عناصر) را گام شیب پایدار تر. پیشفرض <code class=syntax>15</code>.</li><li><code class=syntax>method for updating weights</code> اونا: <code class=syntax>Adam</code> (به طور پیش فرض), <code class=syntax>SGD</code>, <code class=syntax>Momentum</code>, <code class=syntax>Nesterov</code>. <code class=syntax>Momentum</code> و <code class=syntax>Nesterov</code> نیاز به کمی بیشتر محاسبات و حافظه, اما آنها به اتفاق مفید از نظر سرعت convergance و ثبات stochastic gradient روش.</li></ol><h3 id=agg_functions-stochasticlinearregression-usage>استفاده<a class=headerlink href=../amp/#agg_functions-stochasticlinearregression-usage title="Permanent link"> </a></h3><p><code class=syntax>stochasticLinearRegression</code> در دو مرحله استفاده می شود: اتصالات مدل و پیش بینی بر روی داده های جدید. به منظور متناسب با مدل و صرفه جویی در دولت خود را برای استفاده های بعدی استفاده می کنیم <code class=syntax>-State</code> ترکیب کننده, که اساسا موجب صرفه جویی در دولت (وزن مدل, و غیره).<br> برای پیش بینی ما با استفاده از تابع <a href=../../../functions/machine-learning-functions/amp/#machine_learning_methods-evalmlmethod>ارزیابی</a>, که طول می کشد یک دولت به عنوان یک استدلال و همچنین ویژگی های به پیش بینی در.</p><p><a name=stochasticlinearregression-usage-fitting></a></p><p><strong>1.</strong> اتصالات</p><p>چنین پرس و جو ممکن است مورد استفاده قرار گیرد.</p><div class=codehilite><pre><span></span><code class=syntax><span class=k>CREATE</span> <span class=k>TABLE</span> <span class=k>IF</span> <span class=k>NOT</span> <span class=k>EXISTS</span> <span class=n>train_data</span>
<span class=p>(</span>
    <span class=n>param1</span> <span class=n>Float64</span><span class=p>,</span>
    <span class=n>param2</span> <span class=n>Float64</span><span class=p>,</span>
    <span class=n>target</span> <span class=n>Float64</span>
<span class=p>)</span> <span class=n>ENGINE</span> <span class=o>=</span> <span class=n>Memory</span><span class=p>;</span>

<span class=k>CREATE</span> <span class=k>TABLE</span> <span class=n>your_model</span> <span class=n>ENGINE</span> <span class=o>=</span> <span class=n>Memory</span> <span class=k>AS</span> <span class=k>SELECT</span>
<span class=n>stochasticLinearRegressionState</span><span class=p>(</span><span class=mi>0</span><span class=p>.</span><span class=mi>1</span><span class=p>,</span> <span class=mi>0</span><span class=p>.</span><span class=mi>0</span><span class=p>,</span> <span class=mi>5</span><span class=p>,</span> <span class=s1>'SGD'</span><span class=p>)(</span><span class=n>target</span><span class=p>,</span> <span class=n>param1</span><span class=p>,</span> <span class=n>param2</span><span class=p>)</span>
<span class=k>AS</span> <span class=k>state</span> <span class=k>FROM</span> <span class=n>train_data</span><span class=p>;</span>
</code></pre></div><p>در اینجا ما همچنین نیاز به وارد کردن داده ها به <code class=syntax>train_data</code> جدول تعداد پارامترهای ثابت نیست, این تنها در تعدادی از استدلال بستگی دارد, گذشت به <code class=syntax>linearRegressionState</code>. همه باید مقادیر عددی باشد.<br> توجه داشته باشید که ستون با ارزش هدف(که ما می خواهم برای یادگیری به پیش بینی) به عنوان اولین استدلال قرار داده شده است.</p><p><strong>2.</strong> پیش بینی</p><p>پس از ذخیره یک دولت به جدول, ما ممکن است چندین بار برای پیش بینی استفاده, و یا حتی با کشورهای دیگر ادغام و ایجاد مدل های جدید و حتی بهتر.</p><div class=codehilite><pre><span></span><code class=syntax><span class=k>WITH</span> <span class=p>(</span><span class=k>SELECT</span> <span class=k>state</span> <span class=k>FROM</span> <span class=n>your_model</span><span class=p>)</span> <span class=k>AS</span> <span class=n>model</span> <span class=k>SELECT</span>
<span class=n>evalMLMethod</span><span class=p>(</span><span class=n>model</span><span class=p>,</span> <span class=n>param1</span><span class=p>,</span> <span class=n>param2</span><span class=p>)</span> <span class=k>FROM</span> <span class=n>test_data</span>
</code></pre></div><p>پرس و جو یک ستون از مقادیر پیش بینی شده بازگشت. توجه داشته باشید که استدلال اول <code class=syntax>evalMLMethod</code> هست <code class=syntax>AggregateFunctionState</code> هدف, بعدی ستون از ویژگی های هستند.</p><p><code class=syntax>test_data</code> یک جدول مانند <code class=syntax>train_data</code> اما ممکن است حاوی ارزش هدف نیست.</p><h3 id=agg_functions-stochasticlinearregression-notes>یادداشتها<a class=headerlink href=../amp/#agg_functions-stochasticlinearregression-notes title="Permanent link"> </a></h3><ol><li><p>برای ادغام دو مدل کاربر ممکن است چنین پرس و جو ایجاد کنید:<br><code class=syntax>sql SELECT state1 + state2 FROM your_models</code><br> کجا <code class=syntax>your_models</code> جدول شامل هر دو مدل. این پرس و جو جدید باز خواهد گشت <code class=syntax>AggregateFunctionState</code> اعتراض.</p></li><li><p>کاربر ممکن است وزن مدل ایجاد شده برای اهداف خود را بدون صرفه جویی در مدل اگر هیچ واکشی <code class=syntax>-State</code> ترکیب استفاده شده است.<br><code class=syntax>sql SELECT stochasticLinearRegression(0.01)(target, param1, param2) FROM train_data</code><br> چنین پرس و جو خواهد مدل مناسب و بازگشت وزن خود را - برای اولین بار وزن هستند, که به پارامترهای مدل مطابقت, یکی از گذشته تعصب است. بنابراین در مثال بالا پرس و جو یک ستون با 3 مقدار بازگشت.</p></li></ol><p><strong>همچنین نگاه کنید به</strong></p><ul><li><a href=../amp/#agg_functions-stochasticlogisticregression>سرکوب مقررات عمومی</a></li><li><a href=https://stackoverflow.com/questions/12146914/what-is-the-difference-between-linear-regression-and-logistic-regression rel="external nofollow noreferrer" target=_blank>تفاوت رگرسیون خطی و لجستیک</a></li></ul><h2 id=agg_functions-stochasticlogisticregression>سرکوب مقررات عمومی<a class=headerlink href=../amp/#agg_functions-stochasticlogisticregression title="Permanent link"> </a></h2><p>این تابع پیاده سازی رگرسیون لجستیک تصادفی. این را می توان برای مشکل طبقه بندی دودویی استفاده, پشتیبانی از پارامترهای سفارشی به عنوان مقررات زدایی و کار به همان شیوه.</p><h3 id=agg_functions-stochasticlogisticregression-parameters>پارامترها<a class=headerlink href=../amp/#agg_functions-stochasticlogisticregression-parameters title="Permanent link"> </a></h3><p>پارامترها دقیقا مشابه در تنظیم مقررات است:<br><code class=syntax>learning rate</code>, <code class=syntax>l2 regularization coefficient</code>, <code class=syntax>mini-batch size</code>, <code class=syntax>method for updating weights</code>.<br> برای اطلاعات بیشتر نگاه کنید به <a href=../amp/#agg_functions-stochasticlinearregression-parameters>پارامترها</a>.</p><div class=codehilite><pre><span></span><code class=syntax>stochasticLogisticRegression(1.0, 1.0, 10, 'SGD')
</code></pre></div><ol><li>اتصالات</li></ol><!-- --><div class=codehilite><pre><span></span><code class=syntax><span class=n>See</span> <span class=n>the</span> <span class=ss>`Fitting`</span> <span class=n>section</span> <span class=k>in</span> <span class=n>the</span> <span class=p>[</span><span class=n>stochasticLinearRegression</span><span class=p>](</span><span class=c1>#stochasticlinearregression-usage-fitting) description.</span>

<span class=n>Predicted</span> <span class=n>labels</span> <span class=n>have</span> <span class=k>to</span> <span class=n>be</span> <span class=k>in</span> <span class=err>\</span><span class=p>[</span><span class=o>-</span><span class=mi>1</span><span class=p>,</span> <span class=mi>1</span><span class=err>\</span><span class=p>].</span>
</code></pre></div><ol><li>پیش بینی</li></ol><!-- --><div class=codehilite><pre><span></span><code class=syntax><span class=k>Using</span> <span class=n>saved</span> <span class=n>state</span> <span class=n>we</span> <span class=n>can</span> <span class=n>predict</span> <span class=n>probability</span> <span class=n>of</span> <span class=n>object</span> <span class=k>having</span> <span class=n>label</span> <span class=ss>`1`</span><span class=p>.</span>

<span class=ss>``` sql</span>
<span class=ss>WITH (SELECT state FROM your_model) AS model SELECT</span>
<span class=ss>evalMLMethod(model, param1, param2) FROM test_data</span>
<span class=ss>```</span>

<span class=n>The</span> <span class=n>query</span> <span class=n>will</span> <span class=k>return</span> <span class=n>a</span> <span class=k>column</span> <span class=n>of</span> <span class=n>probabilities</span><span class=p>.</span> <span class=n>Note</span> <span class=n>that</span> <span class=n>first</span> <span class=n>argument</span> <span class=n>of</span> <span class=ss>`evalMLMethod`</span> <span class=k>is</span> <span class=ss>`AggregateFunctionState`</span> <span class=n>object</span><span class=p>,</span> <span class=n>next</span> <span class=n>are</span> <span class=n>columns</span> <span class=n>of</span> <span class=n>features</span><span class=p>.</span>

<span class=n>We</span> <span class=n>can</span> <span class=n>also</span> <span class=kt>set</span> <span class=n>a</span> <span class=n>bound</span> <span class=n>of</span> <span class=n>probability</span><span class=p>,</span> <span class=n>which</span> <span class=n>assigns</span> <span class=n>elements</span> <span class=k>to</span> <span class=n>different</span> <span class=n>labels</span><span class=p>.</span>

<span class=ss>``` sql</span>
<span class=ss>SELECT ans &lt; 1.1 AND ans &gt; 0.5 FROM</span>
<span class=ss>(WITH (SELECT state FROM your_model) AS model SELECT</span>
<span class=ss>evalMLMethod(model, param1, param2) AS ans FROM test_data)</span>
<span class=ss>```</span>

<span class=k>Then</span> <span class=n>the</span> <span class=n>result</span> <span class=n>will</span> <span class=n>be</span> <span class=n>labels</span><span class=p>.</span>

<span class=ss>`test_data`</span> <span class=k>is</span> <span class=n>a</span> <span class=k>table</span> <span class=k>like</span> <span class=ss>`train_data`</span> <span class=n>but</span> <span class=n>may</span> <span class=k>not</span> <span class=n>contain</span> <span class=n>target</span> <span class=n>value</span><span class=p>.</span>
</code></pre></div><p><strong>همچنین نگاه کنید به</strong></p><ul><li><a href=../amp/#agg_functions-stochasticlinearregression>تنظیم مقررات</a></li><li><a href=https://stackoverflow.com/questions/12146914/what-is-the-difference-between-linear-regression-and-logistic-regression rel="external nofollow noreferrer" target=_blank>تفاوت بین رگرسیون خطی و لجستیک.</a></li></ul><h2 id=groupbitmapand>گروهبیتمافند<a class=headerlink href=../amp/#groupbitmapand title="Permanent link"> </a></h2><p>محاسبات و یک بیت مپ ستون بازگشت cardinality از نوع UInt64 اگر اضافه کردن پسوند -دولت بازگشت <a href=../../../functions/bitmap-functions/amp/ >شی نگاشت بیت</a>.</p><div class=codehilite><pre><span></span><code class=syntax><span class=n>groupBitmapAnd</span><span class=p>(</span><span class=n>expr</span><span class=p>)</span>
</code></pre></div><p><strong>پارامترها</strong></p><p><code class=syntax>expr</code> – An expression that results in <code class=syntax>AggregateFunction(groupBitmap, UInt*)</code> نوع.</p><p><strong>مقدار بازگشتی</strong></p><p>ارزش <code class=syntax>UInt64</code> نوع.</p><p><strong>مثال</strong></p><div class=codehilite><pre><span></span><code class=syntax><span class=k>DROP</span> <span class=k>TABLE</span> <span class=k>IF</span> <span class=k>EXISTS</span> <span class=n>bitmap_column_expr_test2</span><span class=p>;</span>
<span class=k>CREATE</span> <span class=k>TABLE</span> <span class=n>bitmap_column_expr_test2</span>
<span class=p>(</span>
    <span class=n>tag_id</span> <span class=n>String</span><span class=p>,</span>
    <span class=n>z</span> <span class=n>AggregateFunction</span><span class=p>(</span><span class=n>groupBitmap</span><span class=p>,</span> <span class=n>UInt32</span><span class=p>)</span>
<span class=p>)</span>
<span class=n>ENGINE</span> <span class=o>=</span> <span class=n>MergeTree</span>
<span class=k>ORDER</span> <span class=k>BY</span> <span class=n>tag_id</span><span class=p>;</span>

<span class=k>INSERT</span> <span class=k>INTO</span> <span class=n>bitmap_column_expr_test2</span> <span class=k>VALUES</span> <span class=p>(</span><span class=s1>'tag1'</span><span class=p>,</span> <span class=n>bitmapBuild</span><span class=p>(</span><span class=k>cast</span><span class=p>([</span><span class=mi>1</span><span class=p>,</span><span class=mi>2</span><span class=p>,</span><span class=mi>3</span><span class=p>,</span><span class=mi>4</span><span class=p>,</span><span class=mi>5</span><span class=p>,</span><span class=mi>6</span><span class=p>,</span><span class=mi>7</span><span class=p>,</span><span class=mi>8</span><span class=p>,</span><span class=mi>9</span><span class=p>,</span><span class=mi>10</span><span class=p>]</span> <span class=k>as</span> <span class=nb>Array</span><span class=p>(</span><span class=n>UInt32</span><span class=p>))));</span>
<span class=k>INSERT</span> <span class=k>INTO</span> <span class=n>bitmap_column_expr_test2</span> <span class=k>VALUES</span> <span class=p>(</span><span class=s1>'tag2'</span><span class=p>,</span> <span class=n>bitmapBuild</span><span class=p>(</span><span class=k>cast</span><span class=p>([</span><span class=mi>6</span><span class=p>,</span><span class=mi>7</span><span class=p>,</span><span class=mi>8</span><span class=p>,</span><span class=mi>9</span><span class=p>,</span><span class=mi>10</span><span class=p>,</span><span class=mi>11</span><span class=p>,</span><span class=mi>12</span><span class=p>,</span><span class=mi>13</span><span class=p>,</span><span class=mi>14</span><span class=p>,</span><span class=mi>15</span><span class=p>]</span> <span class=k>as</span> <span class=nb>Array</span><span class=p>(</span><span class=n>UInt32</span><span class=p>))));</span>
<span class=k>INSERT</span> <span class=k>INTO</span> <span class=n>bitmap_column_expr_test2</span> <span class=k>VALUES</span> <span class=p>(</span><span class=s1>'tag3'</span><span class=p>,</span> <span class=n>bitmapBuild</span><span class=p>(</span><span class=k>cast</span><span class=p>([</span><span class=mi>2</span><span class=p>,</span><span class=mi>4</span><span class=p>,</span><span class=mi>6</span><span class=p>,</span><span class=mi>8</span><span class=p>,</span><span class=mi>10</span><span class=p>,</span><span class=mi>12</span><span class=p>]</span> <span class=k>as</span> <span class=nb>Array</span><span class=p>(</span><span class=n>UInt32</span><span class=p>))));</span>

<span class=k>SELECT</span> <span class=n>groupBitmapAnd</span><span class=p>(</span><span class=n>z</span><span class=p>)</span> <span class=k>FROM</span> <span class=n>bitmap_column_expr_test2</span> <span class=k>WHERE</span> <span class=k>like</span><span class=p>(</span><span class=n>tag_id</span><span class=p>,</span> <span class=s1>'tag%'</span><span class=p>);</span>
<span class=err>┌─</span><span class=n>groupBitmapAnd</span><span class=p>(</span><span class=n>z</span><span class=p>)</span><span class=err>─┐</span>
<span class=err>│</span>               <span class=mi>3</span>   <span class=err>│</span>
<span class=err>└───────────────────┘</span>

<span class=k>SELECT</span> <span class=n>arraySort</span><span class=p>(</span><span class=n>bitmapToArray</span><span class=p>(</span><span class=n>groupBitmapAndState</span><span class=p>(</span><span class=n>z</span><span class=p>)))</span> <span class=k>FROM</span> <span class=n>bitmap_column_expr_test2</span> <span class=k>WHERE</span> <span class=k>like</span><span class=p>(</span><span class=n>tag_id</span><span class=p>,</span> <span class=s1>'tag%'</span><span class=p>);</span>
<span class=err>┌─</span><span class=n>arraySort</span><span class=p>(</span><span class=n>bitmapToArray</span><span class=p>(</span><span class=n>groupBitmapAndState</span><span class=p>(</span><span class=n>z</span><span class=p>)))</span><span class=err>─┐</span>
<span class=err>│</span> <span class=p>[</span><span class=mi>6</span><span class=p>,</span><span class=mi>8</span><span class=p>,</span><span class=mi>10</span><span class=p>]</span>                                         <span class=err>│</span>
<span class=err>└──────────────────────────────────────────────────┘</span>
</code></pre></div><h2 id=groupbitmapor>گروهبیتمافور<a class=headerlink href=../amp/#groupbitmapor title="Permanent link"> </a></h2><p>محاسبات و یا یک بیت مپ ستون بازگشت cardinality از نوع UInt64 اگر اضافه کردن پسوند -دولت بازگشت <a href=../../../functions/bitmap-functions/amp/ >شی نگاشت بیت</a>. این معادل است <code class=syntax>groupBitmapMerge</code>.</p><div class=codehilite><pre><span></span><code class=syntax><span class=n>groupBitmapOr</span><span class=p>(</span><span class=n>expr</span><span class=p>)</span>
</code></pre></div><p><strong>پارامترها</strong></p><p><code class=syntax>expr</code> – An expression that results in <code class=syntax>AggregateFunction(groupBitmap, UInt*)</code> نوع.</p><p><strong>مقدار بازگشتی</strong></p><p>ارزش <code class=syntax>UInt64</code> نوع.</p><p><strong>مثال</strong></p><div class=codehilite><pre><span></span><code class=syntax><span class=k>DROP</span> <span class=k>TABLE</span> <span class=k>IF</span> <span class=k>EXISTS</span> <span class=n>bitmap_column_expr_test2</span><span class=p>;</span>
<span class=k>CREATE</span> <span class=k>TABLE</span> <span class=n>bitmap_column_expr_test2</span>
<span class=p>(</span>
    <span class=n>tag_id</span> <span class=n>String</span><span class=p>,</span>
    <span class=n>z</span> <span class=n>AggregateFunction</span><span class=p>(</span><span class=n>groupBitmap</span><span class=p>,</span> <span class=n>UInt32</span><span class=p>)</span>
<span class=p>)</span>
<span class=n>ENGINE</span> <span class=o>=</span> <span class=n>MergeTree</span>
<span class=k>ORDER</span> <span class=k>BY</span> <span class=n>tag_id</span><span class=p>;</span>

<span class=k>INSERT</span> <span class=k>INTO</span> <span class=n>bitmap_column_expr_test2</span> <span class=k>VALUES</span> <span class=p>(</span><span class=s1>'tag1'</span><span class=p>,</span> <span class=n>bitmapBuild</span><span class=p>(</span><span class=k>cast</span><span class=p>([</span><span class=mi>1</span><span class=p>,</span><span class=mi>2</span><span class=p>,</span><span class=mi>3</span><span class=p>,</span><span class=mi>4</span><span class=p>,</span><span class=mi>5</span><span class=p>,</span><span class=mi>6</span><span class=p>,</span><span class=mi>7</span><span class=p>,</span><span class=mi>8</span><span class=p>,</span><span class=mi>9</span><span class=p>,</span><span class=mi>10</span><span class=p>]</span> <span class=k>as</span> <span class=nb>Array</span><span class=p>(</span><span class=n>UInt32</span><span class=p>))));</span>
<span class=k>INSERT</span> <span class=k>INTO</span> <span class=n>bitmap_column_expr_test2</span> <span class=k>VALUES</span> <span class=p>(</span><span class=s1>'tag2'</span><span class=p>,</span> <span class=n>bitmapBuild</span><span class=p>(</span><span class=k>cast</span><span class=p>([</span><span class=mi>6</span><span class=p>,</span><span class=mi>7</span><span class=p>,</span><span class=mi>8</span><span class=p>,</span><span class=mi>9</span><span class=p>,</span><span class=mi>10</span><span class=p>,</span><span class=mi>11</span><span class=p>,</span><span class=mi>12</span><span class=p>,</span><span class=mi>13</span><span class=p>,</span><span class=mi>14</span><span class=p>,</span><span class=mi>15</span><span class=p>]</span> <span class=k>as</span> <span class=nb>Array</span><span class=p>(</span><span class=n>UInt32</span><span class=p>))));</span>
<span class=k>INSERT</span> <span class=k>INTO</span> <span class=n>bitmap_column_expr_test2</span> <span class=k>VALUES</span> <span class=p>(</span><span class=s1>'tag3'</span><span class=p>,</span> <span class=n>bitmapBuild</span><span class=p>(</span><span class=k>cast</span><span class=p>([</span><span class=mi>2</span><span class=p>,</span><span class=mi>4</span><span class=p>,</span><span class=mi>6</span><span class=p>,</span><span class=mi>8</span><span class=p>,</span><span class=mi>10</span><span class=p>,</span><span class=mi>12</span><span class=p>]</span> <span class=k>as</span> <span class=nb>Array</span><span class=p>(</span><span class=n>UInt32</span><span class=p>))));</span>

<span class=k>SELECT</span> <span class=n>groupBitmapOr</span><span class=p>(</span><span class=n>z</span><span class=p>)</span> <span class=k>FROM</span> <span class=n>bitmap_column_expr_test2</span> <span class=k>WHERE</span> <span class=k>like</span><span class=p>(</span><span class=n>tag_id</span><span class=p>,</span> <span class=s1>'tag%'</span><span class=p>);</span>
<span class=err>┌─</span><span class=n>groupBitmapOr</span><span class=p>(</span><span class=n>z</span><span class=p>)</span><span class=err>─┐</span>
<span class=err>│</span>             <span class=mi>15</span>   <span class=err>│</span>
<span class=err>└──────────────────┘</span>

<span class=k>SELECT</span> <span class=n>arraySort</span><span class=p>(</span><span class=n>bitmapToArray</span><span class=p>(</span><span class=n>groupBitmapOrState</span><span class=p>(</span><span class=n>z</span><span class=p>)))</span> <span class=k>FROM</span> <span class=n>bitmap_column_expr_test2</span> <span class=k>WHERE</span> <span class=k>like</span><span class=p>(</span><span class=n>tag_id</span><span class=p>,</span> <span class=s1>'tag%'</span><span class=p>);</span>
<span class=err>┌─</span><span class=n>arraySort</span><span class=p>(</span><span class=n>bitmapToArray</span><span class=p>(</span><span class=n>groupBitmapOrState</span><span class=p>(</span><span class=n>z</span><span class=p>)))</span><span class=err>─┐</span>
<span class=err>│</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span><span class=mi>2</span><span class=p>,</span><span class=mi>3</span><span class=p>,</span><span class=mi>4</span><span class=p>,</span><span class=mi>5</span><span class=p>,</span><span class=mi>6</span><span class=p>,</span><span class=mi>7</span><span class=p>,</span><span class=mi>8</span><span class=p>,</span><span class=mi>9</span><span class=p>,</span><span class=mi>10</span><span class=p>,</span><span class=mi>11</span><span class=p>,</span><span class=mi>12</span><span class=p>,</span><span class=mi>13</span><span class=p>,</span><span class=mi>14</span><span class=p>,</span><span class=mi>15</span><span class=p>]</span>           <span class=err>│</span>
<span class=err>└─────────────────────────────────────────────────┘</span>
</code></pre></div><h2 id=groupbitmapxor>گروهبیتمافکر<a class=headerlink href=../amp/#groupbitmapxor title="Permanent link"> </a></h2><p>محاسبات XOR یک بیت مپ ستون بازگشت cardinality از نوع UInt64 اگر اضافه کردن پسوند -دولت بازگشت <a href=../../../functions/bitmap-functions/amp/ >شی نگاشت بیت</a>.</p><div class=codehilite><pre><span></span><code class=syntax><span class=n>groupBitmapOr</span><span class=p>(</span><span class=n>expr</span><span class=p>)</span>
</code></pre></div><p><strong>پارامترها</strong></p><p><code class=syntax>expr</code> – An expression that results in <code class=syntax>AggregateFunction(groupBitmap, UInt*)</code> نوع.</p><p><strong>مقدار بازگشتی</strong></p><p>ارزش <code class=syntax>UInt64</code> نوع.</p><p><strong>مثال</strong></p><div class=codehilite><pre><span></span><code class=syntax><span class=k>DROP</span> <span class=k>TABLE</span> <span class=k>IF</span> <span class=k>EXISTS</span> <span class=n>bitmap_column_expr_test2</span><span class=p>;</span>
<span class=k>CREATE</span> <span class=k>TABLE</span> <span class=n>bitmap_column_expr_test2</span>
<span class=p>(</span>
    <span class=n>tag_id</span> <span class=n>String</span><span class=p>,</span>
    <span class=n>z</span> <span class=n>AggregateFunction</span><span class=p>(</span><span class=n>groupBitmap</span><span class=p>,</span> <span class=n>UInt32</span><span class=p>)</span>
<span class=p>)</span>
<span class=n>ENGINE</span> <span class=o>=</span> <span class=n>MergeTree</span>
<span class=k>ORDER</span> <span class=k>BY</span> <span class=n>tag_id</span><span class=p>;</span>

<span class=k>INSERT</span> <span class=k>INTO</span> <span class=n>bitmap_column_expr_test2</span> <span class=k>VALUES</span> <span class=p>(</span><span class=s1>'tag1'</span><span class=p>,</span> <span class=n>bitmapBuild</span><span class=p>(</span><span class=k>cast</span><span class=p>([</span><span class=mi>1</span><span class=p>,</span><span class=mi>2</span><span class=p>,</span><span class=mi>3</span><span class=p>,</span><span class=mi>4</span><span class=p>,</span><span class=mi>5</span><span class=p>,</span><span class=mi>6</span><span class=p>,</span><span class=mi>7</span><span class=p>,</span><span class=mi>8</span><span class=p>,</span><span class=mi>9</span><span class=p>,</span><span class=mi>10</span><span class=p>]</span> <span class=k>as</span> <span class=nb>Array</span><span class=p>(</span><span class=n>UInt32</span><span class=p>))));</span>
<span class=k>INSERT</span> <span class=k>INTO</span> <span class=n>bitmap_column_expr_test2</span> <span class=k>VALUES</span> <span class=p>(</span><span class=s1>'tag2'</span><span class=p>,</span> <span class=n>bitmapBuild</span><span class=p>(</span><span class=k>cast</span><span class=p>([</span><span class=mi>6</span><span class=p>,</span><span class=mi>7</span><span class=p>,</span><span class=mi>8</span><span class=p>,</span><span class=mi>9</span><span class=p>,</span><span class=mi>10</span><span class=p>,</span><span class=mi>11</span><span class=p>,</span><span class=mi>12</span><span class=p>,</span><span class=mi>13</span><span class=p>,</span><span class=mi>14</span><span class=p>,</span><span class=mi>15</span><span class=p>]</span> <span class=k>as</span> <span class=nb>Array</span><span class=p>(</span><span class=n>UInt32</span><span class=p>))));</span>
<span class=k>INSERT</span> <span class=k>INTO</span> <span class=n>bitmap_column_expr_test2</span> <span class=k>VALUES</span> <span class=p>(</span><span class=s1>'tag3'</span><span class=p>,</span> <span class=n>bitmapBuild</span><span class=p>(</span><span class=k>cast</span><span class=p>([</span><span class=mi>2</span><span class=p>,</span><span class=mi>4</span><span class=p>,</span><span class=mi>6</span><span class=p>,</span><span class=mi>8</span><span class=p>,</span><span class=mi>10</span><span class=p>,</span><span class=mi>12</span><span class=p>]</span> <span class=k>as</span> <span class=nb>Array</span><span class=p>(</span><span class=n>UInt32</span><span class=p>))));</span>

<span class=k>SELECT</span> <span class=n>groupBitmapXor</span><span class=p>(</span><span class=n>z</span><span class=p>)</span> <span class=k>FROM</span> <span class=n>bitmap_column_expr_test2</span> <span class=k>WHERE</span> <span class=k>like</span><span class=p>(</span><span class=n>tag_id</span><span class=p>,</span> <span class=s1>'tag%'</span><span class=p>);</span>
<span class=err>┌─</span><span class=n>groupBitmapXor</span><span class=p>(</span><span class=n>z</span><span class=p>)</span><span class=err>─┐</span>
<span class=err>│</span>              <span class=mi>10</span>   <span class=err>│</span>
<span class=err>└───────────────────┘</span>

<span class=k>SELECT</span> <span class=n>arraySort</span><span class=p>(</span><span class=n>bitmapToArray</span><span class=p>(</span><span class=n>groupBitmapXorState</span><span class=p>(</span><span class=n>z</span><span class=p>)))</span> <span class=k>FROM</span> <span class=n>bitmap_column_expr_test2</span> <span class=k>WHERE</span> <span class=k>like</span><span class=p>(</span><span class=n>tag_id</span><span class=p>,</span> <span class=s1>'tag%'</span><span class=p>);</span>
<span class=err>┌─</span><span class=n>arraySort</span><span class=p>(</span><span class=n>bitmapToArray</span><span class=p>(</span><span class=n>groupBitmapXorState</span><span class=p>(</span><span class=n>z</span><span class=p>)))</span><span class=err>─┐</span>
<span class=err>│</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span><span class=mi>3</span><span class=p>,</span><span class=mi>5</span><span class=p>,</span><span class=mi>6</span><span class=p>,</span><span class=mi>8</span><span class=p>,</span><span class=mi>10</span><span class=p>,</span><span class=mi>11</span><span class=p>,</span><span class=mi>13</span><span class=p>,</span><span class=mi>14</span><span class=p>,</span><span class=mi>15</span><span class=p>]</span>                       <span class=err>│</span>
<span class=err>└──────────────────────────────────────────────────┘</span>
</code></pre></div><p><a href=https://clickhouse.tech/docs/en/query_language/agg_functions/reference/ target=_blank>مقاله اصلی</a> <!--hide--></p>
        </div>
      </div>
      <div class="row">
        <div class="col">
          
<div class="alert alert-light my-3">
  <p class="float-right mb-0">درجهبندی: RATING_VALUE - RATING_COUNT رای</p>
  <span class="alert-heading display-6">رتبه مقاله</span>
  <div id="rating-stars" class="display-6 mb-0"
     
  >RATING_STARS</div>
</div>

<div id="content-footer" class="text-muted pt-3 mb-5">
    <div class="float-md-right">©2016–2020 Yandex LLC</div>
    <div>ساخته شده از <a href="https://github.com/ClickHouse/ClickHouse/commit/782f2179ce4ad0b9a9c898a5f32557555b59e4d0" rel="external nofollow noreferrer" target="_blank" class="text-reset">782f2179ce</a>, منتشر شده در <span title="2020-04-04T12:15:31+03:00">2020-04-04</span>, تغییریافته <span title="2020-05-15T07:34:54+03:00">2020-05-15</span>
    
    </div>
</div>

        </div>
      </div>
      <div id="to-full-website" class="row fixed-bottom text-center bg-white py-3">
        <div class="col">
          <a class="btn btn-lg btn-outline-orange" href="https://clickhouse.tech/docs/fa/sql-reference/aggregate-functions/reference/">To full website</a>
        </div>
      </div>
    </div>
    <amp-analytics type="metrika">
      <script type="application/json">{
"vars": {
  "counterId": "18343495",
  "triggers": {
    "notBounce": {
      "on": "timer",
      "timerSpec": {
        "immediate": false,
        "interval": 15,
        "maxTimerLength": 16
      },
      "request": "notBounce"
    }
  }
}
}</script>
  </amp-analytics>
  </body>
</html>
