










    



    



    



    
    






    
        
        
    
    <!DOCTYPE html>
<html lang="ru" data-version="master" data-single-page="false">
<head>
    
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width,initial-scale=1" />

<title>Справочник функций | Документация ClickHouse</title>

<link rel="shortcut icon" href="/favicon.ico" />
<link rel="apple-touch-icon" sizes="180x180" href="/images/logo-180x180.png" />

<meta property="og:title" content="Справочник функций | Документация ClickHouse"/>
<meta property="og:description" content="Справочник функций count Вычисляет количество строк или не NULL значений . ClickHouse поддерживает следующие виды синтак" />
<meta property="og:type" content="article" />

<meta property="og:image" content="https://clickhouse.tech/images/logo.png" />

<meta property="og:url" content="https://clickhouse.tech/docs/ru/sql-reference/aggregate-functions/reference/"/>
<link rel="canonical" href="https://clickhouse.tech/docs/ru/sql-reference/aggregate-functions/reference/" />

<link rel="amphtml" href="https://clickhouse.tech/docs/ru/sql-reference/aggregate-functions/reference/amp/" />

<link rel="search" href="/opensearch.xml" title="ClickHouse" type="application/opensearchdescription+xml" />

<script type="application/ld+json">[{
"@context": "http://schema.org",
"@type": "TechArticle",
"headline": "Справочник функций | Документация ClickHouse",
"mainEntityOfPage": "https://clickhouse.tech/docs/ru/sql-reference/aggregate-functions/reference/",

"datePublished": "2017-10-25T08:27:09+03:00",
"dateModified": "2020-05-20T08:35:51+03:00",

"image": "https://clickhouse.tech/images/logo-209x60.png",
"author": {
  "@type": "Project",
  "name": "ClickHouse"
},
"publisher": {
  "@type": "Organization",
  "name": "Yandex LLC",
  "logo": {
    "@type": "ImageObject",
    "url": "https://clickhouse.tech/images/yandex.png",
    "width": 163,
    "height": 60
  }
}}, {
"@context": "http://schema.org",
"@type": "Episode",
"name": "Справочник функций | Документация ClickHouse",
"aggregateRating": {
  "@type": "AggregateRating",
  "ratingValue": RATING_VALUE,
  "ratingCount": RATING_COUNT
}
}]</script>


<meta name="description" content="Справочник функций count Вычисляет количество строк или не NULL значений . ClickHouse поддерживает следующие виды синтак" />

<meta name="keywords"
      content="ClickHouse, DBMS, OLAP, SQL, открытый исходный код, реляционный, аналитика, аналитический, большие данные, веб-аналитика" />




    
    <link rel="alternate" hreflang="en" href="https://clickhouse.tech/docs/en/sql-reference/aggregate-functions/reference/" />
    
    <link rel="alternate" hreflang="zh" href="https://clickhouse.tech/docs/zh/sql-reference/aggregate-functions/reference/" />
    
    <link rel="alternate" hreflang="es" href="https://clickhouse.tech/docs/es/sql-reference/aggregate-functions/reference/" />
    
    <link rel="alternate" hreflang="fr" href="https://clickhouse.tech/docs/fr/sql-reference/aggregate-functions/reference/" />
    
    <link rel="alternate" hreflang="ru" href="https://clickhouse.tech/docs/ru/sql-reference/aggregate-functions/reference/" />
    
    <link rel="alternate" hreflang="ja" href="https://clickhouse.tech/docs/ja/sql-reference/aggregate-functions/reference/" />
    
    <link rel="alternate" hreflang="tr" href="https://clickhouse.tech/docs/tr/sql-reference/aggregate-functions/reference/" />
    
    <link rel="alternate" hreflang="fa" href="https://clickhouse.tech/docs/fa/sql-reference/aggregate-functions/reference/" />
    
    <link rel="alternate" hreflang="x-default" href="https://clickhouse.tech/docs/en/sql-reference/aggregate-functions/reference/" />





    
    <link href="/css/base.css?css_digest" media="all" rel="stylesheet" />


</head>
<body dir="ltr" data-spy="scroll" data-target="#toc" data-offset="80">

    
        <nav id="top-nav" class="navbar navbar-dark navbar-expand-md bg-dark-alt text-white sticky-top">
    <div class="container-fluid justify-content-between">
        <a class="d-block navbar-brand mr-3" href="/">
            <img id="docs-logo-icon" src="/images/logo.svg" alt="ClickHouse logo" title="ClickHouse logo"/>
        </a>
        <div class="w-100 navbar-text text-left d-none d-md-block">
            <h1 class="h3 m-0 p-0 d-inline">
                <a href="#" class="text-white text-decoration-none">
                    
                        Справочник функций
                    
                </a>
            </h1>
        </div>

        <div class="d-none d-md-block">
            <ul class="navbar-nav ml-auto mt-2 mt-lg-0 justify-content-end">
                
                    
                
                
                <li id="edit-wrapper" class="nav-item">
                    <a id="edit-link" href="https://github.com/ClickHouse/ClickHouse/edit/master/docs/ru/sql-reference/aggregate-functions/reference.md" title="Edit this article" class="nav-link" rel="external nofollow noreferrer" target="_blank"><img src="/images/mkdocs/edit.svg" alt="Edit this article" class="mt-1" height="22" /></a>
                </li>
                
                <li class="nav-item">
                     <a class="nav-link" href="https://github.com/ClickHouse/ClickHouse" rel="external nofollow noreferrer">
                        <img src="/images/index/github.svg" alt="GitHub repository" title="Go to GitHub" height="32" />
                    </a>
                </li>
                <li id="languages-wrapper" class="nav-item dropdown">
                    <div id="languages-dropdown">
                        <a class="nav-link dropdown-toggle d-inline-block mt-1 text-muted" href="#" id="lang-dropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            <img src="/images/flags/ru.svg" alt="Русский" title="Русский" width="32" class="d-inline-block mt-n1" />
                        </a>
                        <div class="dropdown-menu bg-dark" aria-labelledby="lang-dropdown">
                            
                            <a class="dropdown-item"
                               href="/docs/en/sql-reference/aggregate-functions/reference/">
                                <img src="/images/flags/en.svg" alt="" title="" width="32" class="d-inline-block mr-2" />English
                            </a>
                            
                            <a class="dropdown-item"
                               href="/docs/zh/sql-reference/aggregate-functions/reference/">
                                <img src="/images/flags/zh.svg" alt="" title="" width="32" class="d-inline-block mr-2" />中文
                            </a>
                            
                            <a class="dropdown-item"
                               href="/docs/es/sql-reference/aggregate-functions/reference/">
                                <img src="/images/flags/es.svg" alt="" title="" width="32" class="d-inline-block mr-2" />Español
                            </a>
                            
                            <a class="dropdown-item"
                               href="/docs/fr/sql-reference/aggregate-functions/reference/">
                                <img src="/images/flags/fr.svg" alt="" title="" width="32" class="d-inline-block mr-2" />Français
                            </a>
                            
                            <a class="dropdown-item disabled"
                               href="/docs/ru/sql-reference/aggregate-functions/reference/">
                                <img src="/images/flags/ru.svg" alt="" title="" width="32" class="d-inline-block mr-2" />Русский
                            </a>
                            
                            <a class="dropdown-item"
                               href="/docs/ja/sql-reference/aggregate-functions/reference/">
                                <img src="/images/flags/ja.svg" alt="" title="" width="32" class="d-inline-block mr-2" />日本語
                            </a>
                            
                            <a class="dropdown-item"
                               href="/docs/tr/sql-reference/aggregate-functions/reference/">
                                <img src="/images/flags/tr.svg" alt="" title="" width="32" class="d-inline-block mr-2" />Türkçe
                            </a>
                            
                            <a class="dropdown-item"
                               href="/docs/fa/sql-reference/aggregate-functions/reference/">
                                <img src="/images/flags/fa.svg" alt="" title="" width="32" class="d-inline-block mr-2" />فارسی
                            </a>
                            
                        </div>
                    </div>
                </li>
            </ul>
        </div>

        <form id="search-form" class="form-inline m-0">
            <div class="input-group">
                <div class="input-group-prepend w-100">
                    <span class="input-group-text bg-secondary-alt text-muted border-0 mr-n1" id="search-icon">
                        <img src="/images/mkdocs/search.svg" />
                    </span>
                    <input id="docsearch-input" class="form-control bg-secondary-alt text-muted border-0 pl-1" type="search" placeholder="Search" aria-label="Search">
                </div>
            </div>
        </form>

        <button id="navbar-toggler" class="navbar-toggler border-0" type="button" data-toggle="collapse" data-target="#sidebar" aria-controls="sidebar" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
    </div>
</nav>
        <div class="container-fluid">
            <div class="row justify-content-end justify-content-xl-center">
                <div id="sidebar" class="col-xl-2 col-md-4 bg-secondary-alt p-3 d-print-none min-vh-100 overflow-auto">
    <div class="overflow-auto">
        <div id="single-page-switch" class="btn-group mb-2 float-right" role="group" aria-label="Многостраничный или одностраничный">
            <a href="../../.." role="button" class="btn btn-dark active" aria-pressed="true">
                <img src="/images/mkdocs/multi.svg" alt="Многостраничная версия" title="Многостраничная версия" />
            </a>
            <a href="../../../single/" role="button" class="btn btn-dark-alt active" aria-pressed="true">
                <img src="/images/mkdocs/single.svg" alt="Одностраничная версия" title="Одностраничная версия" />
            </a>
        </div>
        <div class="dropdown mb-3">
            <a class="btn btn-dark dropdown-toggle text-muted" href="#" role="button" id="select-version" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Версия: <span class="text-light">последняя</span>
            </a>

            <div class="dropdown-menu bg-dark text-muted p-1" aria-labelledby="select-version">
                <a class="dropdown-item disable"
                   href="/docs/ru/">
                    <span class="text-light">последняя</span>
                </a>

                
            </div>
        </div>
        
        <nav id="sidebar-nav" class="nav flex-column mb-5">
            
                
                
                


<a href="#sidebar-sidebar-1" data-toggle="collapse" aria-expanded="false" aria-controls="sidebar-sidebar-1" title="Введение" class="nav-link text-light text-wrap dropdown-toggle px-0">Введение</a>
<div id="sidebar-sidebar-1" class="nav flex-column collapse">
    <nav class="nav flex-column pl-2">
    
    
        
        
        


<a href="../../../" title="Обзор" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Обзор</a>


    
        
        
        

    
        
        
        


<a href="../../../introduction/adopters/" title="Adopters" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Adopters</a>


    
        
        
        


<a href="../../../introduction/info/" title="Информационная поддержка" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Информационная поддержка</a>


    
        
        
        


<a href="../../../introduction/history/" title="История ClickHouse" class="nav-link text-light text-wrap d-inline-block w-100 px-0">История ClickHouse</a>


    
        
        
        


<a href="../../../introduction/distinctive-features/" title="Отличительные возможности ClickHouse" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Отличительные возможности ClickHouse</a>


    
        
        
        


<a href="../../../introduction/performance/" title="Производительность" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Производительность</a>


    
    </nav>
</div>


            
                
                
                


<a href="#sidebar-sidebar-2" data-toggle="collapse" aria-expanded="false" aria-controls="sidebar-sidebar-2" title="Начало работы" class="nav-link text-light text-wrap dropdown-toggle px-0">Начало работы</a>
<div id="sidebar-sidebar-2" class="nav flex-column collapse">
    <nav class="nav flex-column pl-2">
    
    
        
        
        

    
        
        
        


<a href="../../../getting-started/tutorial/" title="Tutorial" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Tutorial</a>


    
        
        
        


<a href="#sidebar-sidebar-2-3" data-toggle="collapse" aria-expanded="false" aria-controls="sidebar-sidebar-2-3" title="Тестовые массивы данных" class="nav-link text-light text-wrap dropdown-toggle px-0">Тестовые массивы данных</a>
<div id="sidebar-sidebar-2-3" class="nav flex-column collapse">
    <nav class="nav flex-column pl-2">
    
    
        
        
        


<a href="../../../getting-started/example-datasets/" title="Обзор" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Обзор</a>


    
        
        
        


<a href="../../../getting-started/example-datasets/amplab-benchmark/" title="AMPLab Big Data Benchmark" class="nav-link text-light text-wrap d-inline-block w-100 px-0">AMPLab Big Data Benchmark</a>


    
        
        
        


<a href="../../../getting-started/example-datasets/ontime/" title="OnTime" class="nav-link text-light text-wrap d-inline-block w-100 px-0">OnTime</a>


    
        
        
        


<a href="../../../getting-started/example-datasets/star-schema/" title="Star Schema Benchmark" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Star Schema Benchmark</a>


    
        
        
        


<a href="../../../getting-started/example-datasets/wikistat/" title="WikiStat" class="nav-link text-light text-wrap d-inline-block w-100 px-0">WikiStat</a>


    
        
        
        


<a href="../../../getting-started/example-datasets/metrica/" title="Анонимизированные данные Яндекс.Метрики" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Анонимизированные данные Яндекс.Метрики</a>


    
        
        
        


<a href="../../../getting-started/example-datasets/nyc-taxi/" title="Данные о такси в Нью-Йорке" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Данные о такси в Нью-Йорке</a>


    
        
        
        


<a href="../../../getting-started/example-datasets/criteo/" title="Терабайт логов кликов от Criteo" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Терабайт логов кликов от Criteo</a>


    
    </nav>
</div>


    
        
        
        


<a href="../../../getting-started/playground/" title="ClickHouse Playground" class="nav-link text-light text-wrap d-inline-block w-100 px-0">ClickHouse Playground</a>


    
        
        
        


<a href="../../../getting-started/install/" title="Установка" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Установка</a>


    
    </nav>
</div>


            
                
                
                


<a href="#sidebar-sidebar-3" data-toggle="collapse" aria-expanded="false" aria-controls="sidebar-sidebar-3" title="Интерфейсы" class="nav-link text-light text-wrap dropdown-toggle px-0">Интерфейсы</a>
<div id="sidebar-sidebar-3" class="nav flex-column collapse">
    <nav class="nav flex-column pl-2">
    
    
        
        
        


<a href="../../../interfaces/" title="Введение" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Введение</a>


    
        
        
        


<a href="#sidebar-sidebar-3-2" data-toggle="collapse" aria-expanded="false" aria-controls="sidebar-sidebar-3-2" title="От сторонних разработчиков" class="nav-link text-light text-wrap dropdown-toggle px-0">От сторонних разработчиков</a>
<div id="sidebar-sidebar-3-2" class="nav flex-column collapse">
    <nav class="nav flex-column pl-2">
    
    
        
        
        

    
        
        
        


<a href="../../../interfaces/third-party/integrations/" title="Библиотеки для интеграции от сторонних разработчиков" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Библиотеки для интеграции от сторонних разработчиков</a>


    
        
        
        


<a href="../../../interfaces/third-party/gui/" title="Визуальные интерфейсы от сторонних разработчиков" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Визуальные интерфейсы от сторонних разработчиков</a>


    
        
        
        


<a href="../../../interfaces/third-party/client-libraries/" title="Клиентские библиотеки от сторонних разработчиков" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Клиентские библиотеки от сторонних разработчиков</a>


    
        
        
        


<a href="../../../interfaces/third-party/proxy/" title="Прокси-серверы от сторонних разработчиков" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Прокси-серверы от сторонних разработчиков</a>


    
    </nav>
</div>


    
        
        
        


<a href="../../../interfaces/cpp/" title="C++ клиентская библиотека" class="nav-link text-light text-wrap d-inline-block w-100 px-0">C++ клиентская библиотека</a>


    
        
        
        


<a href="../../../interfaces/http/" title="HTTP-интерфейс" class="nav-link text-light text-wrap d-inline-block w-100 px-0">HTTP-интерфейс</a>


    
        
        
        


<a href="../../../interfaces/jdbc/" title="JDBC-драйвер" class="nav-link text-light text-wrap d-inline-block w-100 px-0">JDBC-драйвер</a>


    
        
        
        


<a href="../../../interfaces/mysql/" title="MySQL-интерфейс" class="nav-link text-light text-wrap d-inline-block w-100 px-0">MySQL-интерфейс</a>


    
        
        
        


<a href="../../../interfaces/odbc/" title="ODBC-драйвер" class="nav-link text-light text-wrap d-inline-block w-100 px-0">ODBC-драйвер</a>


    
        
        
        


<a href="../../../interfaces/cli/" title="Клиент командной строки" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Клиент командной строки</a>


    
        
        
        


<a href="../../../interfaces/tcp/" title="Родной интерфейс (TCP)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Родной интерфейс (TCP)</a>


    
        
        
        


<a href="../../../interfaces/formats/" title="Форматы входных и выходных данных" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Форматы входных и выходных данных</a>


    
    </nav>
</div>


            
                
                
                


<a href="#sidebar-sidebar-4" data-toggle="collapse" aria-expanded="false" aria-controls="sidebar-sidebar-4" title="Движки" class="nav-link text-light text-wrap dropdown-toggle px-0">Движки</a>
<div id="sidebar-sidebar-4" class="nav flex-column collapse">
    <nav class="nav flex-column pl-2">
    
    
        
        
        

    
        
        
        


<a href="#sidebar-sidebar-4-2" data-toggle="collapse" aria-expanded="false" aria-controls="sidebar-sidebar-4-2" title="Движки баз данных" class="nav-link text-light text-wrap dropdown-toggle px-0">Движки баз данных</a>
<div id="sidebar-sidebar-4-2" class="nav flex-column collapse">
    <nav class="nav flex-column pl-2">
    
    
        
        
        


<a href="../../../engines/database-engines/lazy/" title="Lazy" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Lazy</a>


    
        
        
        


<a href="../../../engines/database-engines/mysql/" title="MySQL" class="nav-link text-light text-wrap d-inline-block w-100 px-0">MySQL</a>


    
        
        
        


<a href="../../../engines/database-engines/" title="Движки баз данных" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Движки баз данных</a>


    
    </nav>
</div>


    
        
        
        


<a href="#sidebar-sidebar-4-3" data-toggle="collapse" aria-expanded="false" aria-controls="sidebar-sidebar-4-3" title="Движки таблиц" class="nav-link text-light text-wrap dropdown-toggle px-0">Движки таблиц</a>
<div id="sidebar-sidebar-4-3" class="nav flex-column collapse">
    <nav class="nav flex-column pl-2">
    
    
        
        
        


<a href="#sidebar-sidebar-4-3-1" data-toggle="collapse" aria-expanded="false" aria-controls="sidebar-sidebar-4-3-1" title="MergeTree Family" class="nav-link text-light text-wrap dropdown-toggle px-0">MergeTree Family</a>
<div id="sidebar-sidebar-4-3-1" class="nav flex-column collapse">
    <nav class="nav flex-column pl-2">
    
    
        
        
        

    
        
        
        


<a href="../../../engines/table-engines/mergetree-family/aggregatingmergetree/" title="AggregatingMergeTree" class="nav-link text-light text-wrap d-inline-block w-100 px-0">AggregatingMergeTree</a>


    
        
        
        


<a href="../../../engines/table-engines/mergetree-family/collapsingmergetree/" title="CollapsingMergeTree" class="nav-link text-light text-wrap d-inline-block w-100 px-0">CollapsingMergeTree</a>


    
        
        
        


<a href="../../../engines/table-engines/mergetree-family/graphitemergetree/" title="GraphiteMergeTree" class="nav-link text-light text-wrap d-inline-block w-100 px-0">GraphiteMergeTree</a>


    
        
        
        


<a href="../../../engines/table-engines/mergetree-family/mergetree/" title="MergeTree" class="nav-link text-light text-wrap d-inline-block w-100 px-0">MergeTree</a>


    
        
        
        


<a href="../../../engines/table-engines/mergetree-family/replacingmergetree/" title="ReplacingMergeTree" class="nav-link text-light text-wrap d-inline-block w-100 px-0">ReplacingMergeTree</a>


    
        
        
        


<a href="../../../engines/table-engines/mergetree-family/summingmergetree/" title="SummingMergeTree" class="nav-link text-light text-wrap d-inline-block w-100 px-0">SummingMergeTree</a>


    
        
        
        


<a href="../../../engines/table-engines/mergetree-family/versionedcollapsingmergetree/" title="VersionedCollapsingMergeTree" class="nav-link text-light text-wrap d-inline-block w-100 px-0">VersionedCollapsingMergeTree</a>


    
        
        
        


<a href="../../../engines/table-engines/mergetree-family/custom-partitioning-key/" title="Произвольный ключ партиционирования" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Произвольный ключ партиционирования</a>


    
        
        
        


<a href="../../../engines/table-engines/mergetree-family/replication/" title="Репликация данных" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Репликация данных</a>


    
    </nav>
</div>


    
        
        
        


<a href="#sidebar-sidebar-4-3-2" data-toggle="collapse" aria-expanded="false" aria-controls="sidebar-sidebar-4-3-2" title="Семейство Log" class="nav-link text-light text-wrap dropdown-toggle px-0">Семейство Log</a>
<div id="sidebar-sidebar-4-3-2" class="nav flex-column collapse">
    <nav class="nav flex-column pl-2">
    
    
        
        
        


<a href="../../../engines/table-engines/log-family/" title="Введение" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Введение</a>


    
        
        
        


<a href="../../../engines/table-engines/log-family/log/" title="Log" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Log</a>


    
        
        
        


<a href="../../../engines/table-engines/log-family/stripelog/" title="StripeLog" class="nav-link text-light text-wrap d-inline-block w-100 px-0">StripeLog</a>


    
        
        
        


<a href="../../../engines/table-engines/log-family/tinylog/" title="TinyLog" class="nav-link text-light text-wrap d-inline-block w-100 px-0">TinyLog</a>


    
    </nav>
</div>


    
        
        
        


<a href="#sidebar-sidebar-4-3-3" data-toggle="collapse" aria-expanded="false" aria-controls="sidebar-sidebar-4-3-3" title="Integrations" class="nav-link text-light text-wrap dropdown-toggle px-0">Integrations</a>
<div id="sidebar-sidebar-4-3-3" class="nav flex-column collapse">
    <nav class="nav flex-column pl-2">
    
    
        
        
        

    
        
        
        


<a href="../../../engines/table-engines/integrations/hdfs/" title="HDFS" class="nav-link text-light text-wrap d-inline-block w-100 px-0">HDFS</a>


    
        
        
        


<a href="../../../engines/table-engines/integrations/jdbc/" title="JDBC" class="nav-link text-light text-wrap d-inline-block w-100 px-0">JDBC</a>


    
        
        
        


<a href="../../../engines/table-engines/integrations/kafka/" title="Kafka" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Kafka</a>


    
        
        
        


<a href="../../../engines/table-engines/integrations/mysql/" title="MySQL" class="nav-link text-light text-wrap d-inline-block w-100 px-0">MySQL</a>


    
        
        
        


<a href="../../../engines/table-engines/integrations/odbc/" title="ODBC" class="nav-link text-light text-wrap d-inline-block w-100 px-0">ODBC</a>


    
    </nav>
</div>


    
        
        
        


<a href="#sidebar-sidebar-4-3-4" data-toggle="collapse" aria-expanded="false" aria-controls="sidebar-sidebar-4-3-4" title="Special" class="nav-link text-light text-wrap dropdown-toggle px-0">Special</a>
<div id="sidebar-sidebar-4-3-4" class="nav flex-column collapse">
    <nav class="nav flex-column pl-2">
    
    
        
        
        

    
        
        
        


<a href="../../../engines/table-engines/special/generate/" title="GenerateRandom" class="nav-link text-light text-wrap d-inline-block w-100 px-0">GenerateRandom</a>


    
        
        
        


<a href="../../../engines/table-engines/special/buffer/" title="Buffer" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Buffer</a>


    
        
        
        


<a href="../../../engines/table-engines/special/dictionary/" title="Dictionary" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Dictionary</a>


    
        
        
        


<a href="../../../engines/table-engines/special/distributed/" title="Distributed" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Distributed</a>


    
        
        
        


<a href="../../../engines/table-engines/special/file/" title="File(Format)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">File(Format)</a>


    
        
        
        


<a href="../../../engines/table-engines/special/join/" title="Join" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Join</a>


    
        
        
        


<a href="../../../engines/table-engines/special/materializedview/" title="MaterializedView" class="nav-link text-light text-wrap d-inline-block w-100 px-0">MaterializedView</a>


    
        
        
        


<a href="../../../engines/table-engines/special/memory/" title="Memory" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Memory</a>


    
        
        
        


<a href="../../../engines/table-engines/special/merge/" title="Merge" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Merge</a>


    
        
        
        


<a href="../../../engines/table-engines/special/null/" title="Null" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Null</a>


    
        
        
        


<a href="../../../engines/table-engines/special/set/" title="Set" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Set</a>


    
        
        
        


<a href="../../../engines/table-engines/special/url/" title="URL(URL, Format)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">URL(URL, Format)</a>


    
        
        
        


<a href="../../../engines/table-engines/special/view/" title="View" class="nav-link text-light text-wrap d-inline-block w-100 px-0">View</a>


    
        
        
        


<a href="../../../engines/table-engines/special/external-data/" title="Внешние данные для обработки запроса" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Внешние данные для обработки запроса</a>


    
    </nav>
</div>


    
        
        
        


<a href="../../../engines/table-engines/" title="Движки таблиц" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Движки таблиц</a>


    
    </nav>
</div>


    
    </nav>
</div>


            
                
                
                


<a href="#sidebar-sidebar-5" data-toggle="collapse" aria-expanded="false" aria-controls="sidebar-sidebar-5" title="Справка по SQL" class="nav-link text-light text-wrap dropdown-toggle px-0">Справка по SQL</a>
<div id="sidebar-sidebar-5" class="nav flex-column collapse">
    <nav class="nav flex-column pl-2">
    
    
        
        
        

    
        
        
        


<a href="#sidebar-sidebar-5-2" data-toggle="collapse" aria-expanded="false" aria-controls="sidebar-sidebar-5-2" title="Выражения" class="nav-link text-light text-wrap dropdown-toggle px-0">Выражения</a>
<div id="sidebar-sidebar-5-2" class="nav flex-column collapse">
    <nav class="nav flex-column pl-2">
    
    
        
        
        

    
        
        
        


<a href="#sidebar-sidebar-5-2-2" data-toggle="collapse" aria-expanded="false" aria-controls="sidebar-sidebar-5-2-2" title="SELECT" class="nav-link text-light text-wrap dropdown-toggle px-0">SELECT</a>
<div id="sidebar-sidebar-5-2-2" class="nav flex-column collapse">
    <nav class="nav flex-column pl-2">
    
    
        
        
        


<a href="../../../sql-reference/statements/select/" title="SELECT" class="nav-link text-light text-wrap d-inline-block w-100 px-0">SELECT</a>


    
        
        
        


<a href="../../../sql-reference/statements/select/limit/" title="LIMIT" class="nav-link text-light text-wrap d-inline-block w-100 px-0">LIMIT</a>


    
        
        
        


<a href="../../../sql-reference/statements/select/order-by/" title="ORDER BY" class="nav-link text-light text-wrap d-inline-block w-100 px-0">ORDER BY</a>


    
        
        
        


<a href="../../../sql-reference/statements/select/array-join/" title="Секция ARRAY JOIN" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Секция ARRAY JOIN</a>


    
        
        
        


<a href="../../../sql-reference/statements/select/distinct/" title="Секция DISTINCT" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Секция DISTINCT</a>


    
        
        
        


<a href="../../../sql-reference/statements/select/format/" title="Секция FORMAT" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Секция FORMAT</a>


    
        
        
        


<a href="../../../sql-reference/statements/select/from/" title="Секция FROM" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Секция FROM</a>


    
        
        
        


<a href="../../../sql-reference/statements/select/group-by/" title="Секция GROUP BY" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Секция GROUP BY</a>


    
        
        
        


<a href="../../../sql-reference/statements/select/having/" title="Секция HAVING" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Секция HAVING</a>


    
        
        
        


<a href="../../../sql-reference/statements/select/into-outfile/" title="Секция INTO OUTFILE" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Секция INTO OUTFILE</a>


    
        
        
        


<a href="../../../sql-reference/statements/select/join/" title="Секция JOIN" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Секция JOIN</a>


    
        
        
        


<a href="../../../sql-reference/statements/select/limit-by/" title="Секция LIMIT BY" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Секция LIMIT BY</a>


    
        
        
        


<a href="../../../sql-reference/statements/select/prewhere/" title="Секция PREWHERE" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Секция PREWHERE</a>


    
        
        
        


<a href="../../../sql-reference/statements/select/sample/" title="Секция SAMPLE" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Секция SAMPLE</a>


    
        
        
        


<a href="../../../sql-reference/statements/select/union-all/" title="Секция UNION ALL" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Секция UNION ALL</a>


    
        
        
        


<a href="../../../sql-reference/statements/select/where/" title="Секция WHERE" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Секция WHERE</a>


    
        
        
        


<a href="../../../sql-reference/statements/select/with/" title="Секция WITH" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Секция WITH</a>


    
    </nav>
</div>


    
        
        
        


<a href="../../../sql-reference/statements/insert-into/" title="INSERT INTO" class="nav-link text-light text-wrap d-inline-block w-100 px-0">INSERT INTO</a>


    
        
        
        


<a href="../../../sql-reference/statements/create/" title="CREATE" class="nav-link text-light text-wrap d-inline-block w-100 px-0">CREATE</a>


    
        
        
        


<a href="../../../sql-reference/statements/alter/" title="ALTER" class="nav-link text-light text-wrap d-inline-block w-100 px-0">ALTER</a>


    
        
        
        


<a href="../../../sql-reference/statements/grant/" title="GRANT" class="nav-link text-light text-wrap d-inline-block w-100 px-0">GRANT</a>


    
        
        
        


<a href="../../../sql-reference/statements/revoke/" title="REVOKE" class="nav-link text-light text-wrap d-inline-block w-100 px-0">REVOKE</a>


    
        
        
        


<a href="../../../sql-reference/statements/show/" title="SHOW Queries" class="nav-link text-light text-wrap d-inline-block w-100 px-0">SHOW Queries</a>


    
        
        
        


<a href="../../../sql-reference/statements/system/" title="Запросы SYSTEM" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Запросы SYSTEM</a>


    
        
        
        


<a href="../../../sql-reference/statements/misc/" title="Прочие виды запросов" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Прочие виды запросов</a>


    
    </nav>
</div>


    
        
        
        


<a href="#sidebar-sidebar-5-3" data-toggle="collapse" aria-expanded="false" aria-controls="sidebar-sidebar-5-3" title="Агрегатные функции" class="nav-link text-light text-wrap dropdown-toggle px-0">Агрегатные функции</a>
<div id="sidebar-sidebar-5-3" class="nav flex-column collapse">
    <nav class="nav flex-column pl-2">
    
    
        
        
        


<a href="../../../sql-reference/aggregate-functions/" title="Введение" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Введение</a>


    
        
        
        


<a href="../../../sql-reference/aggregate-functions/combinators/" title="Комбинаторы агрегатных функций" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Комбинаторы агрегатных функций</a>


    
        
        
        


<a href="../../../sql-reference/aggregate-functions/parametric-functions/" title="Параметрические агрегатные функции" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Параметрические агрегатные функции</a>


    
        
        
        


<a href="../../../sql-reference/aggregate-functions/reference/" title="Справочник функций" class="nav-link text-white active text-wrap d-inline-block w-100 px-0">Справочник функций</a>


    
    </nav>
</div>


    
        
        
        


<a href="#sidebar-sidebar-5-4" data-toggle="collapse" aria-expanded="false" aria-controls="sidebar-sidebar-5-4" title="Табличные функции" class="nav-link text-light text-wrap dropdown-toggle px-0">Табличные функции</a>
<div id="sidebar-sidebar-5-4" class="nav flex-column collapse">
    <nav class="nav flex-column pl-2">
    
    
        
        
        


<a href="../../../sql-reference/table-functions/" title="Введение" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Введение</a>


    
        
        
        


<a href="../../../sql-reference/table-functions/cluster/" title="cluster" class="nav-link text-light text-wrap d-inline-block w-100 px-0">cluster</a>


    
        
        
        


<a href="../../../sql-reference/table-functions/file/" title="file" class="nav-link text-light text-wrap d-inline-block w-100 px-0">file</a>


    
        
        
        


<a href="../../../sql-reference/table-functions/generate/" title="generateRandom" class="nav-link text-light text-wrap d-inline-block w-100 px-0">generateRandom</a>


    
        
        
        


<a href="../../../sql-reference/table-functions/hdfs/" title="hdfs" class="nav-link text-light text-wrap d-inline-block w-100 px-0">hdfs</a>


    
        
        
        


<a href="../../../sql-reference/table-functions/input/" title="input" class="nav-link text-light text-wrap d-inline-block w-100 px-0">input</a>


    
        
        
        


<a href="../../../sql-reference/table-functions/jdbc/" title="jdbc" class="nav-link text-light text-wrap d-inline-block w-100 px-0">jdbc</a>


    
        
        
        


<a href="../../../sql-reference/table-functions/merge/" title="merge" class="nav-link text-light text-wrap d-inline-block w-100 px-0">merge</a>


    
        
        
        


<a href="../../../sql-reference/table-functions/mysql/" title="mysql" class="nav-link text-light text-wrap d-inline-block w-100 px-0">mysql</a>


    
        
        
        


<a href="../../../sql-reference/table-functions/numbers/" title="numbers" class="nav-link text-light text-wrap d-inline-block w-100 px-0">numbers</a>


    
        
        
        


<a href="../../../sql-reference/table-functions/odbc/" title="odbc" class="nav-link text-light text-wrap d-inline-block w-100 px-0">odbc</a>


    
        
        
        


<a href="../../../sql-reference/table-functions/remote/" title="remote, remoteSecure" class="nav-link text-light text-wrap d-inline-block w-100 px-0">remote, remoteSecure</a>


    
        
        
        


<a href="../../../sql-reference/table-functions/url/" title="url" class="nav-link text-light text-wrap d-inline-block w-100 px-0">url</a>


    
    </nav>
</div>


    
        
        
        


<a href="#sidebar-sidebar-5-5" data-toggle="collapse" aria-expanded="false" aria-controls="sidebar-sidebar-5-5" title="Типы данных" class="nav-link text-light text-wrap dropdown-toggle px-0">Типы данных</a>
<div id="sidebar-sidebar-5-5" class="nav flex-column collapse">
    <nav class="nav flex-column pl-2">
    
    
        
        
        


<a href="../../../sql-reference/data-types/" title="Введение" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Введение</a>


    
        
        
        


<a href="#sidebar-sidebar-5-5-2" data-toggle="collapse" aria-expanded="false" aria-controls="sidebar-sidebar-5-5-2" title="Домены" class="nav-link text-light text-wrap dropdown-toggle px-0">Домены</a>
<div id="sidebar-sidebar-5-5-2" class="nav flex-column collapse">
    <nav class="nav flex-column pl-2">
    
    
        
        
        


<a href="../../../sql-reference/data-types/domains/" title="Домены" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Домены</a>


    
        
        
        


<a href="../../../sql-reference/data-types/domains/ipv4/" title="IPv4" class="nav-link text-light text-wrap d-inline-block w-100 px-0">IPv4</a>


    
        
        
        


<a href="../../../sql-reference/data-types/domains/ipv6/" title="IPv6" class="nav-link text-light text-wrap d-inline-block w-100 px-0">IPv6</a>


    
    </nav>
</div>


    
        
        
        


<a href="../../../sql-reference/data-types/aggregatefunction/" title="AggregateFunction" class="nav-link text-light text-wrap d-inline-block w-100 px-0">AggregateFunction</a>


    
        
        
        


<a href="../../../sql-reference/data-types/array/" title="Array(T)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Array(T)</a>


    
        
        
        


<a href="../../../sql-reference/data-types/date/" title="Date" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Date</a>


    
        
        
        


<a href="../../../sql-reference/data-types/datetime/" title="DateTime" class="nav-link text-light text-wrap d-inline-block w-100 px-0">DateTime</a>


    
        
        
        


<a href="../../../sql-reference/data-types/datetime64/" title="DateTime64" class="nav-link text-light text-wrap d-inline-block w-100 px-0">DateTime64</a>


    
        
        
        


<a href="../../../sql-reference/data-types/decimal/" title="Decimal(P, S), Decimal32(S), Decimal64(S), Decimal128(S)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Decimal(P, S), Decimal32(S), Decimal64(S), Decimal128(S)</a>


    
        
        
        


<a href="../../../sql-reference/data-types/enum/" title="Enum" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Enum</a>


    
        
        
        


<a href="../../../sql-reference/data-types/fixedstring/" title="FixedString" class="nav-link text-light text-wrap d-inline-block w-100 px-0">FixedString</a>


    
        
        
        


<a href="../../../sql-reference/data-types/float/" title="Float32, Float64" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Float32, Float64</a>


    
        
        
        


<a href="../../../sql-reference/data-types/nullable/" title="Nullable(TypeName)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Nullable(TypeName)</a>


    
        
        
        


<a href="../../../sql-reference/data-types/simpleaggregatefunction/" title="SimpleAggregateFunction" class="nav-link text-light text-wrap d-inline-block w-100 px-0">SimpleAggregateFunction</a>


    
        
        
        


<a href="../../../sql-reference/data-types/string/" title="String" class="nav-link text-light text-wrap d-inline-block w-100 px-0">String</a>


    
        
        
        


<a href="../../../sql-reference/data-types/tuple/" title="Tuple(T1, T2, …)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Tuple(T1, T2, …)</a>


    
        
        
        


<a href="../../../sql-reference/data-types/int-uint/" title="UInt8, UInt16, UInt32, UInt64, Int8, Int16, Int32, Int64" class="nav-link text-light text-wrap d-inline-block w-100 px-0">UInt8, UInt16, UInt32, UInt64, Int8, Int16, Int32, Int64</a>


    
        
        
        


<a href="../../../sql-reference/data-types/uuid/" title="UUID" class="nav-link text-light text-wrap d-inline-block w-100 px-0">UUID</a>


    
        
        
        


<a href="../../../sql-reference/data-types/boolean/" title="Булевы значения" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Булевы значения</a>


    
        
        
        


<a href="#sidebar-sidebar-5-5-19" data-toggle="collapse" aria-expanded="false" aria-controls="sidebar-sidebar-5-5-19" title="Вложенные структуры данных" class="nav-link text-light text-wrap dropdown-toggle px-0">Вложенные структуры данных</a>
<div id="sidebar-sidebar-5-5-19" class="nav flex-column collapse">
    <nav class="nav flex-column pl-2">
    
    
        
        
        


<a href="../../../sql-reference/data-types/nested-data-structures/nested/" title="Nested(Name1 Type1, Name2 Type2, …)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Nested(Name1 Type1, Name2 Type2, …)</a>


    
        
        
        


<a href="../../../sql-reference/data-types/nested-data-structures/" title="Вложенные структуры данных" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Вложенные структуры данных</a>


    
    </nav>
</div>


    
        
        
        


<a href="#sidebar-sidebar-5-5-20" data-toggle="collapse" aria-expanded="false" aria-controls="sidebar-sidebar-5-5-20" title="Служебные типы данных" class="nav-link text-light text-wrap dropdown-toggle px-0">Служебные типы данных</a>
<div id="sidebar-sidebar-5-5-20" class="nav flex-column collapse">
    <nav class="nav flex-column pl-2">
    
    
        
        
        


<a href="../../../sql-reference/data-types/special-data-types/expression/" title="Expression" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Expression</a>


    
        
        
        


<a href="../../../sql-reference/data-types/special-data-types/interval/" title="Interval" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Interval</a>


    
        
        
        


<a href="../../../sql-reference/data-types/special-data-types/nothing/" title="Nothing" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Nothing</a>


    
        
        
        


<a href="../../../sql-reference/data-types/special-data-types/set/" title="Set" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Set</a>


    
        
        
        


<a href="../../../sql-reference/data-types/special-data-types/" title="Служебные типы данных" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Служебные типы данных</a>


    
    </nav>
</div>


    
    </nav>
</div>


    
        
        
        


<a href="../../../sql-reference/ansi/" title="ANSI Compatibility" class="nav-link text-light text-wrap d-inline-block w-100 px-0">ANSI Compatibility</a>


    
        
        
        


<a href="../../../sql-reference/syntax/" title="Синтаксис" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Синтаксис</a>


    
        
        
        


<a href="#sidebar-sidebar-5-8" data-toggle="collapse" aria-expanded="false" aria-controls="sidebar-sidebar-5-8" title="Операторы" class="nav-link text-light text-wrap dropdown-toggle px-0">Операторы</a>
<div id="sidebar-sidebar-5-8" class="nav flex-column collapse">
    <nav class="nav flex-column pl-2">
    
    
        
        
        


<a href="../../../sql-reference/operators/" title="Операторы" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Операторы</a>


    
        
        
        


<a href="../../../sql-reference/operators/in/" title="Операторы IN" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Операторы IN</a>


    
    </nav>
</div>


    
        
        
        


<a href="#sidebar-sidebar-5-9" data-toggle="collapse" aria-expanded="false" aria-controls="sidebar-sidebar-5-9" title="Словари" class="nav-link text-light text-wrap dropdown-toggle px-0">Словари</a>
<div id="sidebar-sidebar-5-9" class="nav flex-column collapse">
    <nav class="nav flex-column pl-2">
    
    
        
        
        


<a href="#sidebar-sidebar-5-9-1" data-toggle="collapse" aria-expanded="false" aria-controls="sidebar-sidebar-5-9-1" title="External Dictionaries" class="nav-link text-light text-wrap dropdown-toggle px-0">External Dictionaries</a>
<div id="sidebar-sidebar-5-9-1" class="nav flex-column collapse">
    <nav class="nav flex-column pl-2">
    
    
        
        
        

    
        
        
        


<a href="../../../sql-reference/dictionaries/external-dictionaries/external-dicts/" title="Внешние словари" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Внешние словари</a>


    
        
        
        


<a href="../../../sql-reference/dictionaries/external-dictionaries/external-dicts-dict-hierarchical/" title="Иерархические словари" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Иерархические словари</a>


    
        
        
        


<a href="../../../sql-reference/dictionaries/external-dictionaries/external-dicts-dict-sources/" title="Источники внешних словарей" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Источники внешних словарей</a>


    
        
        
        


<a href="../../../sql-reference/dictionaries/external-dictionaries/external-dicts-dict-structure/" title="Ключ и поля словаря" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Ключ и поля словаря</a>


    
        
        
        


<a href="../../../sql-reference/dictionaries/external-dictionaries/external-dicts-dict/" title="Настройка внешнего словаря" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Настройка внешнего словаря</a>


    
        
        
        


<a href="../../../sql-reference/dictionaries/external-dictionaries/external-dicts-dict-lifetime/" title="Обновление словарей" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Обновление словарей</a>


    
        
        
        


<a href="../../../sql-reference/dictionaries/external-dictionaries/external-dicts-dict-layout/" title="Хранение словарей в памяти" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Хранение словарей в памяти</a>


    
    </nav>
</div>


    
        
        
        


<a href="../../../sql-reference/dictionaries/internal-dicts/" title="Встроенные словари" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Встроенные словари</a>


    
        
        
        


<a href="../../../sql-reference/dictionaries/" title="Словари" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Словари</a>


    
    </nav>
</div>


    
        
        
        


<a href="#sidebar-sidebar-5-10" data-toggle="collapse" aria-expanded="false" aria-controls="sidebar-sidebar-5-10" title="Функции" class="nav-link text-light text-wrap dropdown-toggle px-0">Функции</a>
<div id="sidebar-sidebar-5-10" class="nav flex-column collapse">
    <nav class="nav flex-column pl-2">
    
    
        
        
        


<a href="../../../sql-reference/functions/arithmetic-functions/" title="Арифметические функции" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Арифметические функции</a>


    
        
        
        


<a href="../../../sql-reference/functions/bit-functions/" title="Битовые функции" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Битовые функции</a>


    
        
        
        


<a href="../../../sql-reference/functions/logical-functions/" title="Логические функции" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Логические функции</a>


    
        
        
        


<a href="../../../sql-reference/functions/math-functions/" title="Математические функции" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Математические функции</a>


    
        
        
        


<a href="../../../sql-reference/functions/other-functions/" title="Прочие функции" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Прочие функции</a>


    
        
        
        


<a href="../../../sql-reference/functions/conditional-functions/" title="Условные функции" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Условные функции</a>


    
        
        
        


<a href="../../../sql-reference/functions/" title="Функции" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции</a>


    
        
        
        


<a href="../../../sql-reference/functions/higher-order-functions/" title="Функции высшего порядка" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции высшего порядка</a>


    
        
        
        


<a href="../../../sql-reference/functions/random-functions/" title="Функции генерации псевдослучайных чисел" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции генерации псевдослучайных чисел</a>


    
        
        
        


<a href="../../../sql-reference/functions/bitmap-functions/" title="Функции для битмапов" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции для битмапов</a>


    
        
        
        


<a href="../../../sql-reference/functions/ip-address-functions/" title="Функции для работы с IP-адресами" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции для работы с IP-адресами</a>


    
        
        
        


<a href="../../../sql-reference/functions/json-functions/" title="Функции для работы с JSON" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции для работы с JSON</a>


    
        
        
        


<a href="../../../sql-reference/functions/functions-for-nulls/" title="Функции для работы с Nullable-аргументами" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции для работы с Nullable-аргументами</a>


    
        
        
        


<a href="../../../sql-reference/functions/url-functions/" title="Функции для работы с URL" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции для работы с URL</a>


    
        
        
        


<a href="../../../sql-reference/functions/uuid-functions/" title="Функции для работы с UUID" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции для работы с UUID</a>


    
        
        
        


<a href="../../../sql-reference/functions/ext-dict-functions/" title="Функции для работы с внешними словарями" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции для работы с внешними словарями</a>


    
        
        
        


<a href="../../../sql-reference/functions/geo/" title="Функции для работы с географическими координатами" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции для работы с географическими координатами</a>


    
        
        
        


<a href="../../../sql-reference/functions/date-time-functions/" title="Функции для работы с датами и временем" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции для работы с датами и временем</a>


    
        
        
        


<a href="../../../sql-reference/functions/ym-dict-functions/" title="Функции для работы со словарями Яндекс.Метрики" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции для работы со словарями Яндекс.Метрики</a>


    
        
        
        


<a href="../../../sql-reference/functions/string-functions/" title="Функции для работы со строками" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции для работы со строками</a>


    
        
        
        


<a href="../../../sql-reference/functions/in-functions/" title="Функции для реализации оператора IN" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции для реализации оператора IN</a>


    
        
        
        


<a href="../../../sql-reference/functions/introspection/" title="Функции интроспекции" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции интроспекции</a>


    
        
        
        


<a href="../../../sql-reference/functions/encoding-functions/" title="Функции кодирования" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции кодирования</a>


    
        
        
        


<a href="../../../sql-reference/functions/machine-learning-functions/" title="Функции машинного обучения" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции машинного обучения</a>


    
        
        
        


<a href="../../../sql-reference/functions/rounding-functions/" title="Функции округления" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции округления</a>


    
        
        
        


<a href="../../../sql-reference/functions/array-functions/" title="Функции по работе с массивами" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции по работе с массивами</a>


    
        
        
        


<a href="../../../sql-reference/functions/string-search-functions/" title="Функции поиска в строках" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции поиска в строках</a>


    
        
        
        


<a href="../../../sql-reference/functions/string-replace-functions/" title="Функции поиска и замены в строках" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции поиска и замены в строках</a>


    
        
        
        


<a href="../../../sql-reference/functions/type-conversion-functions/" title="Функции преобразования типов" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции преобразования типов</a>


    
        
        
        


<a href="../../../sql-reference/functions/splitting-merging-functions/" title="Функции разбиения и слияния строк и массивов" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции разбиения и слияния строк и массивов</a>


    
        
        
        


<a href="../../../sql-reference/functions/comparison-functions/" title="Функции сравнения" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции сравнения</a>


    
        
        
        


<a href="../../../sql-reference/functions/hash-functions/" title="Функции хэширования" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функции хэширования</a>


    
        
        
        


<a href="../../../sql-reference/functions/array-join/" title="Функция ArrayJoin" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Функция ArrayJoin</a>


    
    </nav>
</div>


    
    </nav>
</div>


            
                
                
                


<a href="#sidebar-sidebar-6" data-toggle="collapse" aria-expanded="false" aria-controls="sidebar-sidebar-6" title="Руководства" class="nav-link text-light text-wrap dropdown-toggle px-0">Руководства</a>
<div id="sidebar-sidebar-6" class="nav flex-column collapse">
    <nav class="nav flex-column pl-2">
    
    
        
        
        


<a href="../../../guides/" title="Обзор" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Обзор</a>


    
        
        
        


<a href="../../../guides/apply-catboost-model/" title="Применение модели CatBoost в ClickHouse" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Применение модели CatBoost в ClickHouse</a>


    
    </nav>
</div>


            
                
                
                


<a href="#sidebar-sidebar-7" data-toggle="collapse" aria-expanded="false" aria-controls="sidebar-sidebar-7" title="Эксплуатация" class="nav-link text-light text-wrap dropdown-toggle px-0">Эксплуатация</a>
<div id="sidebar-sidebar-7" class="nav flex-column collapse">
    <nav class="nav flex-column pl-2">
    
    
        
        
        


<a href="../../../operations/" title="intro" class="nav-link text-light text-wrap d-inline-block w-100 px-0">intro</a>


    
        
        
        


<a href="#sidebar-sidebar-7-2" data-toggle="collapse" aria-expanded="false" aria-controls="sidebar-sidebar-7-2" title="Optimizing Performance" class="nav-link text-light text-wrap dropdown-toggle px-0">Optimizing Performance</a>
<div id="sidebar-sidebar-7-2" class="nav flex-column collapse">
    <nav class="nav flex-column pl-2">
    
    
        
        
        

    
        
        
        


<a href="../../../operations/optimizing-performance/sampling-query-profiler/" title="Query Profiling" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Query Profiling</a>


    
    </nav>
</div>


    
        
        
        


<a href="../../../operations/performance-test/" title="Testing Hardware" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Testing Hardware</a>


    
        
        
        


<a href="#sidebar-sidebar-7-4" data-toggle="collapse" aria-expanded="false" aria-controls="sidebar-sidebar-7-4" title="Конфигурационные параметры сервера" class="nav-link text-light text-wrap dropdown-toggle px-0">Конфигурационные параметры сервера</a>
<div id="sidebar-sidebar-7-4" class="nav flex-column collapse">
    <nav class="nav flex-column pl-2">
    
    
        
        
        


<a href="../../../operations/server-configuration-parameters/" title="Введение" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Введение</a>


    
        
        
        


<a href="../../../operations/server-configuration-parameters/settings/" title="Конфигурационные параметры сервера" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Конфигурационные параметры сервера</a>


    
    </nav>
</div>


    
        
        
        


<a href="#sidebar-sidebar-7-5" data-toggle="collapse" aria-expanded="false" aria-controls="sidebar-sidebar-7-5" title="Введение" class="nav-link text-light text-wrap dropdown-toggle px-0">Введение</a>
<div id="sidebar-sidebar-7-5" class="nav flex-column collapse">
    <nav class="nav flex-column pl-2">
    
    
        
        
        


<a href="../../../operations/settings/" title="Настройки" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Настройки</a>


    
        
        
        


<a href="../../../operations/settings/settings/" title="Settings" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Settings</a>


    
        
        
        


<a href="../../../operations/settings/merge-tree-settings/" title="Настройки MergeTree таблиц" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Настройки MergeTree таблиц</a>


    
        
        
        


<a href="../../../operations/settings/settings-users/" title="Настройки пользователей" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Настройки пользователей</a>


    
        
        
        


<a href="../../../operations/settings/constraints-on-settings/" title="Ограничения на изменение настроек" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Ограничения на изменение настроек</a>


    
        
        
        


<a href="../../../operations/settings/query-complexity/" title="Ограничения на сложность запроса" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Ограничения на сложность запроса</a>


    
        
        
        


<a href="../../../operations/settings/settings-profiles/" title="Профили настроек" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Профили настроек</a>


    
        
        
        


<a href="../../../operations/settings/permissions-for-queries/" title="Разрешения для запросов" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Разрешения для запросов</a>


    
    </nav>
</div>


    
        
        
        


<a href="../../../operations/quotas/" title="Квоты" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Квоты</a>


    
        
        
        


<a href="../../../operations/configuration-files/" title="Конфигурационные файлы" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Конфигурационные файлы</a>


    
        
        
        


<a href="../../../operations/monitoring/" title="Мониторинг" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Мониторинг</a>


    
        
        
        


<a href="../../../operations/update/" title="Обновление ClickHouse" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Обновление ClickHouse</a>


    
        
        
        


<a href="../../../operations/backup/" title="Резервное копирование данных" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Резервное копирование данных</a>


    
        
        
        


<a href="../../../operations/system-tables/" title="Системные таблицы" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Системные таблицы</a>


    
        
        
        


<a href="../../../operations/tips/" title="Советы по эксплуатации" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Советы по эксплуатации</a>


    
        
        
        


<a href="../../../operations/requirements/" title="Требования" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Требования</a>


    
        
        
        


<a href="../../../operations/access-rights/" title="Управление доступом" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Управление доступом</a>


    
        
        
        


<a href="../../../operations/troubleshooting/" title="Устранение неисправностей" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Устранение неисправностей</a>


    
        
        
        


<a href="#sidebar-sidebar-7-16" data-toggle="collapse" aria-expanded="false" aria-controls="sidebar-sidebar-7-16" title="Утилиты ClickHouse" class="nav-link text-light text-wrap dropdown-toggle px-0">Утилиты ClickHouse</a>
<div id="sidebar-sidebar-7-16" class="nav flex-column collapse">
    <nav class="nav flex-column pl-2">
    
    
        
        
        


<a href="../../../operations/utilities/clickhouse-benchmark/" title="clickhouse-benchmark" class="nav-link text-light text-wrap d-inline-block w-100 px-0">clickhouse-benchmark</a>


    
        
        
        


<a href="../../../operations/utilities/clickhouse-copier/" title="clickhouse-copier" class="nav-link text-light text-wrap d-inline-block w-100 px-0">clickhouse-copier</a>


    
        
        
        


<a href="../../../operations/utilities/clickhouse-local/" title="clickhouse-local" class="nav-link text-light text-wrap d-inline-block w-100 px-0">clickhouse-local</a>


    
        
        
        


<a href="../../../operations/utilities/" title="Утилиты ClickHouse" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Утилиты ClickHouse</a>


    
    </nav>
</div>


    
    </nav>
</div>


            
                
                
                


<a href="#sidebar-sidebar-8" data-toggle="collapse" aria-expanded="false" aria-controls="sidebar-sidebar-8" title="Development" class="nav-link text-light text-wrap dropdown-toggle px-0">Development</a>
<div id="sidebar-sidebar-8" class="nav flex-column collapse">
    <nav class="nav flex-column pl-2">
    
    
        
        
        

    
        
        
        


<a href="../../../development/build/" title="How to Build ClickHouse on Linux" class="nav-link text-light text-wrap d-inline-block w-100 px-0">How to Build ClickHouse on Linux</a>


    
        
        
        


<a href="../../../development/build-osx/" title="How to Build ClickHouse on Mac OS X" class="nav-link text-light text-wrap d-inline-block w-100 px-0">How to Build ClickHouse on Mac OS X</a>


    
        
        
        


<a href="../../../development/build-cross-osx/" title="How to Build ClickHouse on Linux for Mac OS X" class="nav-link text-light text-wrap d-inline-block w-100 px-0">How to Build ClickHouse on Linux for Mac OS X</a>


    
        
        
        


<a href="../../../development/build-cross-arm/" title="How to Build ClickHouse on Linux for AARCH64 (ARM64)" class="nav-link text-light text-wrap d-inline-block w-100 px-0">How to Build ClickHouse on Linux for AARCH64 (ARM64)</a>


    
        
        
        


<a href="../../../development/tests/" title="How to Run ClickHouse Tests" class="nav-link text-light text-wrap d-inline-block w-100 px-0">How to Run ClickHouse Tests</a>


    
        
        
        


<a href="../../../development/developer-instruction/" title="Если вы используете Windows" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Если вы используете Windows</a>


    
        
        
        


<a href="../../../development/contrib/" title="Используемые сторонние библиотеки" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Используемые сторонние библиотеки</a>


    
        
        
        


<a href="../../../development/style/" title="Как писать код на C++" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Как писать код на C++</a>


    
        
        
        


<a href="../../../development/browse-code/" title="Навигация по коду ClickHouse" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Навигация по коду ClickHouse</a>


    
        
        
        


<a href="../../../development/architecture/" title="Обзор архитектуры ClickHouse" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Обзор архитектуры ClickHouse</a>


    
    </nav>
</div>


            
                
                
                


<a href="#sidebar-sidebar-9" data-toggle="collapse" aria-expanded="false" aria-controls="sidebar-sidebar-9" title="Коммерческие услуги" class="nav-link text-light text-wrap dropdown-toggle px-0">Коммерческие услуги</a>
<div id="sidebar-sidebar-9" class="nav flex-column collapse">
    <nav class="nav flex-column pl-2">
    
    
        
        
        


<a href="../../../commercial/support/" title="Support" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Support</a>


    
        
        
        

    
        
        
        


<a href="../../../commercial/cloud/" title="Поставщики облачных услуг ClickHouse" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Поставщики облачных услуг ClickHouse</a>


    
    </nav>
</div>


            
                
                
                


<a href="#sidebar-sidebar-10" data-toggle="collapse" aria-expanded="false" aria-controls="sidebar-sidebar-10" title="Что нового?" class="nav-link text-light text-wrap dropdown-toggle px-0">Что нового?</a>
<div id="sidebar-sidebar-10" class="nav flex-column collapse">
    <nav class="nav flex-column pl-2">
    
    
        
        
        

    
        
        
        


<a href="#sidebar-sidebar-10-2" data-toggle="collapse" aria-expanded="false" aria-controls="sidebar-sidebar-10-2" title="Changelog" class="nav-link text-light text-wrap dropdown-toggle px-0">Changelog</a>
<div id="sidebar-sidebar-10-2" class="nav flex-column collapse">
    <nav class="nav flex-column pl-2">
    
    
        
        
        


<a href="../../../whats-new/changelog/" title="2020" class="nav-link text-light text-wrap d-inline-block w-100 px-0">2020</a>


    
        
        
        


<a href="../../../whats-new/changelog/2019/" title="2019" class="nav-link text-light text-wrap d-inline-block w-100 px-0">2019</a>


    
        
        
        


<a href="../../../whats-new/changelog/2018/" title="2018" class="nav-link text-light text-wrap d-inline-block w-100 px-0">2018</a>


    
        
        
        


<a href="../../../whats-new/changelog/2017/" title="2017" class="nav-link text-light text-wrap d-inline-block w-100 px-0">2017</a>


    
    </nav>
</div>


    
        
        
        


<a href="../../../whats-new/roadmap/" title="Roadmap" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Roadmap</a>


    
        
        
        


<a href="../../../whats-new/security-changelog/" title="Security Changelog" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Security Changelog</a>


    
        
        
        


<a href="../../../whats-new/extended-roadmap/" title="Планы разработки ClickHouse 2020" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Планы разработки ClickHouse 2020</a>


    
    </nav>
</div>


            
                
                
                


<a href="#sidebar-sidebar-11" data-toggle="collapse" aria-expanded="false" aria-controls="sidebar-sidebar-11" title="F.A.Q." class="nav-link text-light text-wrap dropdown-toggle px-0">F.A.Q.</a>
<div id="sidebar-sidebar-11" class="nav flex-column collapse">
    <nav class="nav flex-column pl-2">
    
    
        
        
        

    
        
        
        


<a href="../../../faq/general/" title="Общие вопросы" class="nav-link text-light text-wrap d-inline-block w-100 px-0">Общие вопросы</a>


    
    </nav>
</div>


            
            <a href="../../../single/clickhouse_ru.pdf" class="nav-link border-top border-secondary mt-3 px-0 pt-3 text-light">
                <img src="/images/mkdocs/pdf.svg" alt="PDF-версия" title="PDF-версия" height="24" class="d-block mr-1 float-left" /><div>PDF-версия</div>
            </a>
        </nav>
        
    </div>
</div>
                <div id="content-wrapper" class="col-md-8 p-2 p-md-5">
    <div id="content" class="mt-md-n3">
        
            
            
            
                
                <nav class="text-muted" aria-label="breadcrumb">
                    <ol class="breadcrumb bg-transparent p-0">
                        
                        
                        
                        <li class="breadcrumb-item"><a href="../../" class="text-reset">Справка по SQL</a>
                            
                        </li>
                       
                        
                        
                        <li class="breadcrumb-item"><a href="../" class="text-reset">Агрегатные функции</a>
                            
                        </li>
                       
                    </ol>
                </nav>
            

            
            <h1 id="aggregate-functions-reference">Справочник функций<a class="headerlink" href="#aggregate-functions-reference" title="Permanent link"> </a></h1>
<h2 id="agg_function-count">count<a class="headerlink" href="#agg_function-count" title="Permanent link"> </a></h2>
<p>Вычисляет количество строк или не NULL значений .</p>
<p>ClickHouse поддерживает следующие виды синтаксиса для <code class="syntax">count</code>:</p>
<ul>
<li><code class="syntax">count(expr)</code> или <code class="syntax">COUNT(DISTINCT expr)</code>.</li>
<li><code class="syntax">count()</code> или <code class="syntax">COUNT(*)</code>. Синтаксис <code class="syntax">count()</code> специфичен для ClickHouse.</li>
</ul>
<p><strong>Параметры</strong></p>
<p>Функция может принимать:</p>
<ul>
<li>Ноль параметров.</li>
<li>Одно <a href="../../syntax/#syntax-expressions">выражение</a>.</li>
</ul>
<p><strong>Возвращаемое значение</strong></p>
<ul>
<li>Если функция вызывается без параметров, она вычисляет количество строк.</li>
<li>Если передаётся <a href="../../syntax/#syntax-expressions">выражение</a> , то функция вычисляет количество раз, когда выражение возвращает не NULL. Если выражение возвращает значение типа <a href="../../data-types/nullable/">Nullable</a>, то результат <code class="syntax">count</code> не становится <code class="syntax">Nullable</code>. Функция возвращает 0, если выражение возвращает <code class="syntax">NULL</code> для всех строк.</li>
</ul>
<p>В обоих случаях тип возвращаемого значения <a href="../../data-types/int-uint/">UInt64</a>.</p>
<p><strong>Подробности</strong></p>
<p>ClickHouse поддерживает синтаксис <code class="syntax">COUNT(DISTINCT ...)</code>. Поведение этой конструкции зависит от настройки <a href="../../../operations/settings/settings/#settings-count_distinct_implementation">count_distinct_implementation</a>. Она определяет, какая из функций <a href="#agg_function-uniq">uniq*</a> используется для выполнения операции. По умолчанию — функция <a href="#agg_function-uniqexact">uniqExact</a>.</p>
<p>Запрос <code class="syntax">SELECT count() FROM table</code> не оптимизирован, поскольку количество записей в таблице не хранится отдельно. Он выбирает небольшой столбец из таблицы и подсчитывает количество значений в нём.</p>
<p><strong>Примеры</strong></p>
<p>Пример 1:</p>
<div class="codehilite"><pre><span></span><code class="syntax"><span class="k">SELECT</span> <span class="k">count</span><span class="p">()</span> <span class="k">FROM</span> <span class="n">t</span>
</code></pre></div>
<div class="codehilite"><pre><span></span><code class="syntax">┌─count()─┐
│       5 │
└─────────┘
</code></pre></div>
<p>Пример 2:</p>
<div class="codehilite"><pre><span></span><code class="syntax"><span class="k">SELECT</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span> <span class="k">FROM</span> <span class="k">system</span><span class="p">.</span><span class="n">settings</span> <span class="k">WHERE</span> <span class="n">name</span> <span class="o">=</span> <span class="s1">'count_distinct_implementation'</span>
</code></pre></div>
<div class="codehilite"><pre><span></span><code class="syntax">┌─name──────────────────────────┬─value─────┐
│ count_distinct_implementation │ uniqExact │
└───────────────────────────────┴───────────┘
</code></pre></div>
<div class="codehilite"><pre><span></span><code class="syntax"><span class="k">SELECT</span> <span class="k">count</span><span class="p">(</span><span class="k">DISTINCT</span> <span class="n">num</span><span class="p">)</span> <span class="k">FROM</span> <span class="n">t</span>
</code></pre></div>
<div class="codehilite"><pre><span></span><code class="syntax">┌─uniqExact(num)─┐
│              3 │
└────────────────┘
</code></pre></div>
<p>Этот пример показывает, что <code class="syntax">count(DISTINCT num)</code> выполняется с помощью функции <code class="syntax">uniqExact</code> в соответствии со значением настройки <code class="syntax">count_distinct_implementation</code>.</p>
<h2 id="agg_function-any">any(x)<a class="headerlink" href="#agg_function-any" title="Permanent link"> </a></h2>
<p>Выбирает первое попавшееся значение.<br/>
Порядок выполнения запроса может быть произвольным и даже каждый раз разным, поэтому результат данной функции недетерминирован.<br/>
Для получения детерминированного результата, можно использовать функции min или max вместо any.</p>
<p>В некоторых случаях, вы всё-таки можете рассчитывать на порядок выполнения запроса. Это - случаи, когда SELECT идёт из подзапроса, в котором используется ORDER BY.</p>
<p>При наличии в запросе <code class="syntax">SELECT</code> секции <code class="syntax">GROUP BY</code> или хотя бы одной агрегатной функции, ClickHouse (в отличие от, например, MySQL) требует, чтобы все выражения в секциях <code class="syntax">SELECT</code>, <code class="syntax">HAVING</code>, <code class="syntax">ORDER BY</code> вычислялись из ключей или из агрегатных функций. То есть, каждый выбираемый из таблицы столбец, должен использоваться либо в ключах, либо внутри агрегатных функций. Чтобы получить поведение, как в MySQL, вы можете поместить остальные столбцы в агрегатную функцию <code class="syntax">any</code>.</p>
<h2 id="agg_function-anyheavy">anyHeavy(x)<a class="headerlink" href="#agg_function-anyheavy" title="Permanent link"> </a></h2>
<p>Выбирает часто встречающееся значение с помощью алгоритма «<a href="http://www.cs.umd.edu/~samir/498/karp.pdf" rel="external nofollow noreferrer" target="_blank">heavy hitters</a>». Если существует значение, которое встречается чаще, чем в половине случаев, в каждом потоке выполнения запроса, то возвращается данное значение. В общем случае, результат недетерминирован.</p>
<div class="codehilite"><pre><span></span><code class="syntax"><span class="n">anyHeavy</span><span class="p">(</span><span class="k">column</span><span class="p">)</span>
</code></pre></div>
<p><strong>Аргументы</strong></p>
<ul>
<li><code class="syntax">column</code> — имя столбца.</li>
</ul>
<p><strong>Пример</strong></p>
<p>Возьмём набор данных <a href="../../../getting-started/example-datasets/ontime/">OnTime</a> и выберем произвольное часто встречающееся значение в столбце <code class="syntax">AirlineID</code>.</p>
<div class="codehilite"><pre><span></span><code class="syntax"><span class="k">SELECT</span> <span class="n">anyHeavy</span><span class="p">(</span><span class="n">AirlineID</span><span class="p">)</span> <span class="k">AS</span> <span class="n">res</span>
<span class="k">FROM</span> <span class="n">ontime</span>
</code></pre></div>
<div class="codehilite"><pre><span></span><code class="syntax">┌───res─┐
│ 19690 │
└───────┘
</code></pre></div>
<h2 id="anylastx">anyLast(x)<a class="headerlink" href="#anylastx" title="Permanent link"> </a></h2>
<p>Выбирает последнее попавшееся значение.<br/>
Результат так же недетерминирован, как и для функции <code class="syntax">any</code>.</p>
<h2 id="groupbitand">groupBitAnd<a class="headerlink" href="#groupbitand" title="Permanent link"> </a></h2>
<p>Применяет побитовое <code class="syntax">И</code> для последовательности чисел.</p>
<div class="codehilite"><pre><span></span><code class="syntax"><span class="n">groupBitAnd</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span>
</code></pre></div>
<p><strong>Параметры</strong></p>
<p><code class="syntax">expr</code> – выражение, результат которого имеет тип данных <code class="syntax">UInt*</code>.</p>
<p><strong>Возвращаемое значение</strong></p>
<p>Значение типа <code class="syntax">UInt*</code>.</p>
<p><strong>Пример</strong></p>
<p>Тестовые данные:</p>
<div class="codehilite"><pre><span></span><code class="syntax">binary     decimal
00101100 = 44
00011100 = 28
00001101 = 13
01010101 = 85
</code></pre></div>
<p>Запрос:</p>
<div class="codehilite"><pre><span></span><code class="syntax"><span class="k">SELECT</span> <span class="n">groupBitAnd</span><span class="p">(</span><span class="n">num</span><span class="p">)</span> <span class="k">FROM</span> <span class="n">t</span>
</code></pre></div>
<p>Где <code class="syntax">num</code> — столбец с тестовыми данными.</p>
<p>Результат:</p>
<div class="codehilite"><pre><span></span><code class="syntax">binary     decimal
00000100 = 4
</code></pre></div>
<h2 id="groupbitor">groupBitOr<a class="headerlink" href="#groupbitor" title="Permanent link"> </a></h2>
<p>Применяет побитовое <code class="syntax">ИЛИ</code> для последовательности чисел.</p>
<div class="codehilite"><pre><span></span><code class="syntax"><span class="n">groupBitOr</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span>
</code></pre></div>
<p><strong>Параметры</strong></p>
<p><code class="syntax">expr</code> – выражение, результат которого имеет тип данных <code class="syntax">UInt*</code>.</p>
<p><strong>Возвращаемое значение</strong></p>
<p>Значение типа <code class="syntax">UInt*</code>.</p>
<p><strong>Пример</strong></p>
<p>Тестовые данные:</p>
<div class="codehilite"><pre><span></span><code class="syntax">binary     decimal
00101100 = 44
00011100 = 28
00001101 = 13
01010101 = 85
</code></pre></div>
<p>Запрос:</p>
<div class="codehilite"><pre><span></span><code class="syntax"><span class="k">SELECT</span> <span class="n">groupBitOr</span><span class="p">(</span><span class="n">num</span><span class="p">)</span> <span class="k">FROM</span> <span class="n">t</span>
</code></pre></div>
<p>Где <code class="syntax">num</code> — столбец с тестовыми данными.</p>
<p>Результат:</p>
<div class="codehilite"><pre><span></span><code class="syntax">binary     decimal
01111101 = 125
</code></pre></div>
<h2 id="groupbitxor">groupBitXor<a class="headerlink" href="#groupbitxor" title="Permanent link"> </a></h2>
<p>Применяет побитовое <code class="syntax">ИСКЛЮЧАЮЩЕЕ ИЛИ</code> для последовательности чисел.</p>
<div class="codehilite"><pre><span></span><code class="syntax"><span class="n">groupBitXor</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span>
</code></pre></div>
<p><strong>Параметры</strong></p>
<p><code class="syntax">expr</code> – выражение, результат которого имеет тип данных <code class="syntax">UInt*</code>.</p>
<p><strong>Возвращаемое значение</strong></p>
<p>Значение типа <code class="syntax">UInt*</code>.</p>
<p><strong>Пример</strong></p>
<p>Тестовые данные:</p>
<div class="codehilite"><pre><span></span><code class="syntax">binary     decimal
00101100 = 44
00011100 = 28
00001101 = 13
01010101 = 85
</code></pre></div>
<p>Запрос:</p>
<div class="codehilite"><pre><span></span><code class="syntax"><span class="k">SELECT</span> <span class="n">groupBitXor</span><span class="p">(</span><span class="n">num</span><span class="p">)</span> <span class="k">FROM</span> <span class="n">t</span>
</code></pre></div>
<p>Где <code class="syntax">num</code> — столбец с тестовыми данными.</p>
<p>Результат:</p>
<div class="codehilite"><pre><span></span><code class="syntax">binary     decimal
01101000 = 104
</code></pre></div>
<h2 id="groupbitmap">groupBitmap<a class="headerlink" href="#groupbitmap" title="Permanent link"> </a></h2>
<p>Bitmap или агрегатные вычисления для столбца с типом данных <code class="syntax">UInt*</code>, возвращают кардинальность в виде значения типа UInt64, если добавить суффикс -State, то возвращают <a href="./">объект bitmap</a>.</p>
<div class="codehilite"><pre><span></span><code class="syntax"><span class="n">groupBitmap</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span>
</code></pre></div>
<p><strong>Параметры</strong></p>
<p><code class="syntax">expr</code> – выражение, результат которого имеет тип данных <code class="syntax">UInt*</code>.</p>
<p><strong>Возвращаемое значение</strong></p>
<p>Значение типа <code class="syntax">UInt64</code>.</p>
<p><strong>Пример</strong></p>
<p>Тестовые данные:</p>
<div class="codehilite"><pre><span></span><code class="syntax">UserID
1
1
2
3
</code></pre></div>
<p>Запрос:</p>
<div class="codehilite"><pre><span></span><code class="syntax"><span class="k">SELECT</span> <span class="n">groupBitmap</span><span class="p">(</span><span class="n">UserID</span><span class="p">)</span> <span class="k">as</span> <span class="n">num</span> <span class="k">FROM</span> <span class="n">t</span>
</code></pre></div>
<p>Результат:</p>
<div class="codehilite"><pre><span></span><code class="syntax">num
3
</code></pre></div>
<h2 id="agg_function-min">min(x)<a class="headerlink" href="#agg_function-min" title="Permanent link"> </a></h2>
<p>Вычисляет минимум.</p>
<h2 id="agg_function-max">max(x)<a class="headerlink" href="#agg_function-max" title="Permanent link"> </a></h2>
<p>Вычисляет максимум.</p>
<h2 id="agg-function-argmin">argMin(arg, val)<a class="headerlink" href="#agg-function-argmin" title="Permanent link"> </a></h2>
<p>Вычисляет значение arg при минимальном значении val. Если есть несколько разных значений arg для минимальных значений val, то выдаётся первое попавшееся из таких значений.</p>
<p><strong>Пример:</strong></p>
<div class="codehilite"><pre><span></span><code class="syntax">┌─user─────┬─salary─┐
│ director │   5000 │
│ manager  │   3000 │
│ worker   │   1000 │
└──────────┴────────┘
</code></pre></div>
<div class="codehilite"><pre><span></span><code class="syntax"><span class="k">SELECT</span> <span class="n">argMin</span><span class="p">(</span><span class="k">user</span><span class="p">,</span> <span class="n">salary</span><span class="p">)</span> <span class="k">FROM</span> <span class="n">salary</span>
</code></pre></div>
<div class="codehilite"><pre><span></span><code class="syntax">┌─argMin(user, salary)─┐
│ worker               │
└──────────────────────┘
</code></pre></div>
<h2 id="agg-function-argmax">argMax(arg, val)<a class="headerlink" href="#agg-function-argmax" title="Permanent link"> </a></h2>
<p>Вычисляет значение arg при максимальном значении val. Если есть несколько разных значений arg для максимальных значений val, то выдаётся первое попавшееся из таких значений.</p>
<h2 id="agg_function-sum">sum(x)<a class="headerlink" href="#agg_function-sum" title="Permanent link"> </a></h2>
<p>Вычисляет сумму.<br/>
Работает только для чисел.</p>
<h2 id="agg_function-sumwithoverflow">sumWithOverflow(x)<a class="headerlink" href="#agg_function-sumwithoverflow" title="Permanent link"> </a></h2>
<p>Вычисляет сумму чисел, используя для результата тот же тип данных, что и для входных параметров. Если сумма выйдет за максимальное значение для заданного типа данных, то функция вернёт ошибку.</p>
<p>Работает только для чисел.</p>
<h2 id="summapkey-value">sumMap(key, value)<a class="headerlink" href="#summapkey-value" title="Permanent link"> </a></h2>
<p>Производит суммирование массива ‘value’ по соответствующим ключам заданным в массиве ‘key’.<br/>
Количество элементов в ‘key’ и ‘value’ должно быть одинаковым для каждой строки, для которой происходит суммирование.<br/>
Возвращает кортеж из двух массивов - ключи в отсортированном порядке и значения, просуммированные по соответствующим ключам.</p>
<p>Пример:</p>
<div class="codehilite"><pre><span></span><code class="syntax"><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">sum_map</span><span class="p">(</span>
    <span class="nb">date</span> <span class="nb">Date</span><span class="p">,</span>
    <span class="n">timeslot</span> <span class="n">DateTime</span><span class="p">,</span>
    <span class="n">statusMap</span> <span class="n">Nested</span><span class="p">(</span>
        <span class="n">status</span> <span class="n">UInt16</span><span class="p">,</span>
        <span class="n">requests</span> <span class="n">UInt64</span>
    <span class="p">)</span>
<span class="p">)</span> <span class="n">ENGINE</span> <span class="o">=</span> <span class="n">Log</span><span class="p">;</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">sum_map</span> <span class="k">VALUES</span>
    <span class="p">(</span><span class="s1">'2000-01-01'</span><span class="p">,</span> <span class="s1">'2000-01-01 00:00:00'</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">]),</span>
    <span class="p">(</span><span class="s1">'2000-01-01'</span><span class="p">,</span> <span class="s1">'2000-01-01 00:00:00'</span><span class="p">,</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">]),</span>
    <span class="p">(</span><span class="s1">'2000-01-01'</span><span class="p">,</span> <span class="s1">'2000-01-01 00:01:00'</span><span class="p">,</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">],</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">]),</span>
    <span class="p">(</span><span class="s1">'2000-01-01'</span><span class="p">,</span> <span class="s1">'2000-01-01 00:01:00'</span><span class="p">,</span> <span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">],</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">]);</span>
<span class="k">SELECT</span>
    <span class="n">timeslot</span><span class="p">,</span>
    <span class="n">sumMap</span><span class="p">(</span><span class="n">statusMap</span><span class="p">.</span><span class="n">status</span><span class="p">,</span> <span class="n">statusMap</span><span class="p">.</span><span class="n">requests</span><span class="p">)</span>
<span class="k">FROM</span> <span class="n">sum_map</span>
<span class="k">GROUP</span> <span class="k">BY</span> <span class="n">timeslot</span>
</code></pre></div>
<div class="codehilite"><pre><span></span><code class="syntax">┌────────────timeslot─┬─sumMap(statusMap.status, statusMap.requests)─┐
│ 2000-01-01 00:00:00 │ ([1,2,3,4,5],[10,10,20,10,10])               │
│ 2000-01-01 00:01:00 │ ([4,5,6,7,8],[10,10,20,10,10])               │
└─────────────────────┴──────────────────────────────────────────────┘
</code></pre></div>
<h2 id="skewpop">skewPop<a class="headerlink" href="#skewpop" title="Permanent link"> </a></h2>
<p>Вычисляет <a href="https://ru.wikipedia.org/wiki/Коэффициент_асимметрии" rel="external nofollow noreferrer" target="_blank">коэффициент асимметрии</a> для последовательности.</p>
<div class="codehilite"><pre><span></span><code class="syntax"><span class="n">skewPop</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span>
</code></pre></div>
<p><strong>Параметры</strong></p>
<p><code class="syntax">expr</code> — <a href="../../syntax/#syntax-expressions">Выражение</a>, возвращающее число.</p>
<p><strong>Возвращаемое значение</strong></p>
<p>Коэффициент асимметрии заданного распределения. Тип — <a href="./">Float64</a></p>
<p><strong>Пример</strong></p>
<div class="codehilite"><pre><span></span><code class="syntax"><span class="k">SELECT</span> <span class="n">skewPop</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="k">FROM</span> <span class="n">series_with_value_column</span>
</code></pre></div>
<h2 id="skewsamp">skewSamp<a class="headerlink" href="#skewsamp" title="Permanent link"> </a></h2>
<p>Вычисляет <a href="https://ru.wikipedia.org/wiki/Статистика_(функция_выборки)" rel="external nofollow noreferrer" target="_blank">выборочный коэффициент асимметрии</a> для последовательности.</p>
<p>Он представляет собой несмещенную оценку асимметрии случайной величины, если переданные значения образуют ее выборку.</p>
<div class="codehilite"><pre><span></span><code class="syntax"><span class="n">skewSamp</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span>
</code></pre></div>
<p><strong>Параметры</strong></p>
<p><code class="syntax">expr</code> — <a href="../../syntax/#syntax-expressions">Выражение</a>, возвращающее число.</p>
<p><strong>Возвращаемое значение</strong></p>
<p>Коэффициент асимметрии заданного распределения. Тип — <a href="./">Float64</a>. Если <code class="syntax">n &lt;= 1</code> (<code class="syntax">n</code> — размер выборки), тогда функция возвращает <code class="syntax">nan</code>.</p>
<p><strong>Пример</strong></p>
<div class="codehilite"><pre><span></span><code class="syntax"><span class="k">SELECT</span> <span class="n">skewSamp</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="k">FROM</span> <span class="n">series_with_value_column</span>
</code></pre></div>
<h2 id="kurtpop">kurtPop<a class="headerlink" href="#kurtpop" title="Permanent link"> </a></h2>
<p>Вычисляет <a href="https://ru.wikipedia.org/wiki/Коэффициент_эксцесса" rel="external nofollow noreferrer" target="_blank">коэффициент эксцесса</a> последовательности.</p>
<div class="codehilite"><pre><span></span><code class="syntax"><span class="n">kurtPop</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span>
</code></pre></div>
<p><strong>Параметры</strong></p>
<p><code class="syntax">expr</code> — <a href="../../syntax/#syntax-expressions">Выражение</a>, возвращающее число.</p>
<p><strong>Возвращаемое значение</strong></p>
<p>Коэффициент эксцесса заданного распределения. Тип — <a href="./">Float64</a></p>
<p><strong>Пример</strong></p>
<div class="codehilite"><pre><span></span><code class="syntax"><span class="k">SELECT</span> <span class="n">kurtPop</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="k">FROM</span> <span class="n">series_with_value_column</span>
</code></pre></div>
<h2 id="kurtsamp">kurtSamp<a class="headerlink" href="#kurtsamp" title="Permanent link"> </a></h2>
<p>Вычисляет <a href="https://ru.wikipedia.org/wiki/Статистика_(функция_выборки)" rel="external nofollow noreferrer" target="_blank">выборочный коэффициент эксцесса</a> для последовательности.</p>
<p>Он представляет собой несмещенную оценку эксцесса случайной величины, если переданные значения образуют ее выборку.</p>
<div class="codehilite"><pre><span></span><code class="syntax"><span class="n">kurtSamp</span><span class="p">(</span><span class="n">expr</span><span class="p">)</span>
</code></pre></div>
<p><strong>Параметры</strong></p>
<p><code class="syntax">expr</code> — <a href="../../syntax/#syntax-expressions">Выражение</a>, возвращающее число.</p>
<p><strong>Возвращаемое значение</strong></p>
<p>Коэффициент эксцесса заданного распределения. Тип — <a href="./">Float64</a>. Если <code class="syntax">n &lt;= 1</code> (<code class="syntax">n</code> — размер выборки), тогда функция возвращает <code class="syntax">nan</code>.</p>
<p><strong>Пример</strong></p>
<div class="codehilite"><pre><span></span><code class="syntax"><span class="k">SELECT</span> <span class="n">kurtSamp</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="k">FROM</span> <span class="n">series_with_value_column</span>
</code></pre></div>
<h2 id="agg-function-timeseriesgroupsum">timeSeriesGroupSum(uid, timestamp, value)<a class="headerlink" href="#agg-function-timeseriesgroupsum" title="Permanent link"> </a></h2>
<p><code class="syntax">timeSeriesGroupSum</code> агрегирует временные ряды в которых не совпадают моменты.<br/>
Функция использует линейную интерполяцию между двумя значениями времени, а затем суммирует значения для одного и того же момента (как измеренные так и интерполированные) по всем рядам.</p>
<ul>
<li><code class="syntax">uid</code> уникальный идентификатор временного ряда, <code class="syntax">UInt64</code>.</li>
<li><code class="syntax">timestamp</code> имеет тип <code class="syntax">Int64</code> чтобы можно было учитывать милли и микросекунды.</li>
<li><code class="syntax">value</code> представляет собой значение метрики.</li>
</ul>
<p>Функция возвращает массив кортежей с парами <code class="syntax">(timestamp, aggregated_value)</code>.</p>
<p>Временные ряды должны быть отсортированы по возрастанию <code class="syntax">timestamp</code>.</p>
<p>Пример:</p>
<div class="codehilite"><pre><span></span><code class="syntax">┌─uid─┬─timestamp─┬─value─┐
│ 1   │     2     │   0.2 │
│ 1   │     7     │   0.7 │
│ 1   │    12     │   1.2 │
│ 1   │    17     │   1.7 │
│ 1   │    25     │   2.5 │
│ 2   │     3     │   0.6 │
│ 2   │     8     │   1.6 │
│ 2   │    12     │   2.4 │
│ 2   │    18     │   3.6 │
│ 2   │    24     │   4.8 │
└─────┴───────────┴───────┘
</code></pre></div>
<div class="codehilite"><pre><span></span><code class="syntax"><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">time_series</span><span class="p">(</span>
    <span class="n">uid</span>       <span class="n">UInt64</span><span class="p">,</span>
    <span class="k">timestamp</span> <span class="n">Int64</span><span class="p">,</span>
    <span class="n">value</span>     <span class="n">Float64</span>
<span class="p">)</span> <span class="n">ENGINE</span> <span class="o">=</span> <span class="n">Memory</span><span class="p">;</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">time_series</span> <span class="k">VALUES</span>
    <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">.</span><span class="mi">2</span><span class="p">),(</span><span class="mi">1</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">0</span><span class="p">.</span><span class="mi">7</span><span class="p">),(</span><span class="mi">1</span><span class="p">,</span><span class="mi">12</span><span class="p">,</span><span class="mi">1</span><span class="p">.</span><span class="mi">2</span><span class="p">),(</span><span class="mi">1</span><span class="p">,</span><span class="mi">17</span><span class="p">,</span><span class="mi">1</span><span class="p">.</span><span class="mi">7</span><span class="p">),(</span><span class="mi">1</span><span class="p">,</span><span class="mi">25</span><span class="p">,</span><span class="mi">2</span><span class="p">.</span><span class="mi">5</span><span class="p">),</span>
    <span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">0</span><span class="p">.</span><span class="mi">6</span><span class="p">),(</span><span class="mi">2</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">1</span><span class="p">.</span><span class="mi">6</span><span class="p">),(</span><span class="mi">2</span><span class="p">,</span><span class="mi">12</span><span class="p">,</span><span class="mi">2</span><span class="p">.</span><span class="mi">4</span><span class="p">),(</span><span class="mi">2</span><span class="p">,</span><span class="mi">18</span><span class="p">,</span><span class="mi">3</span><span class="p">.</span><span class="mi">6</span><span class="p">),(</span><span class="mi">2</span><span class="p">,</span><span class="mi">24</span><span class="p">,</span><span class="mi">4</span><span class="p">.</span><span class="mi">8</span><span class="p">);</span>

<span class="k">SELECT</span> <span class="n">timeSeriesGroupSum</span><span class="p">(</span><span class="n">uid</span><span class="p">,</span> <span class="k">timestamp</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
<span class="k">FROM</span> <span class="p">(</span>
    <span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">time_series</span> <span class="k">order</span> <span class="k">by</span> <span class="k">timestamp</span> <span class="k">ASC</span>
<span class="p">);</span>
</code></pre></div>
<p>И результат будет:</p>
<div class="codehilite"><pre><span></span><code class="syntax">[(2,0.2),(3,0.9),(7,2.1),(8,2.4),(12,3.6),(17,5.1),(18,5.4),(24,7.2),(25,2.5)]
</code></pre></div>
<h2 id="agg-function-timeseriesgroupratesum">timeSeriesGroupRateSum(uid, ts, val)<a class="headerlink" href="#agg-function-timeseriesgroupratesum" title="Permanent link"> </a></h2>
<p>Аналогично timeSeriesGroupSum, timeSeriesGroupRateSum будет вычислять производные по timestamp для рядов, а затем суммировать полученные производные для всех рядов для одного значения timestamp.<br/>
Также ряды должны быть отсортированы по возрастанию timestamp.</p>
<p>Для пример из описания timeSeriesGroupSum результат будет следующим:</p>
<div class="codehilite"><pre><span></span><code class="syntax">[(2,0),(3,0.1),(7,0.3),(8,0.3),(12,0.3),(17,0.3),(18,0.3),(24,0.3),(25,0.1)]
</code></pre></div>
<h2 id="agg_function-avg">avg(x)<a class="headerlink" href="#agg_function-avg" title="Permanent link"> </a></h2>
<p>Вычисляет среднее.<br/>
Работает только для чисел.<br/>
Результат всегда Float64.</p>
<h2 id="avgweighted">avgWeighted<a class="headerlink" href="#avgweighted" title="Permanent link"> </a></h2>
<p>Вычисляет <a href="https://ru.wikipedia.org/wiki/Среднее_арифметическое_взвешенное" rel="external nofollow noreferrer" target="_blank">среднее арифметическое взвешенное</a>.</p>
<p><strong>Синтаксис</strong></p>
<div class="codehilite"><pre><span></span><code class="syntax"><span class="n">avgWeighted</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">weight</span><span class="p">)</span>
</code></pre></div>
<p><strong>Параметры</strong></p>
<ul>
<li><code class="syntax">x</code> — Значения. <a href="./">Целые числа</a> или <a href="./">числа с плавающей запятой</a>.</li>
<li><code class="syntax">weight</code> — Веса отдельных значений. <a href="./">Целые числа</a> или <a href="./">числа с плавающей запятой</a>.</li>
</ul>
<p>Типы параметров должны совпадать.</p>
<p><strong>Возвращаемое значение</strong></p>
<ul>
<li>Среднее арифметическое взвешенное.</li>
<li><code class="syntax">NaN</code>, если все веса равны 0.</li>
</ul>
<p>Тип: <a href="./">Float64</a></p>
<p><strong>Пример</strong></p>
<p>Запрос:</p>
<div class="codehilite"><pre><span></span><code class="syntax"><span class="k">SELECT</span> <span class="n">avgWeighted</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">w</span><span class="p">)</span>
<span class="k">FROM</span> <span class="k">values</span><span class="p">(</span><span class="s1">'x Int8, w Int8'</span><span class="p">,</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
</code></pre></div>
<p>Результат:</p>
<div class="codehilite"><pre><span></span><code class="syntax">┌─avgWeighted(x, weight)─┐
│                      8 │
└────────────────────────┘
</code></pre></div>
<h2 id="agg_function-uniq">uniq<a class="headerlink" href="#agg_function-uniq" title="Permanent link"> </a></h2>
<p>Приближённо вычисляет количество различных значений аргумента.</p>
<div class="codehilite"><pre><span></span><code class="syntax"><span class="n">uniq</span><span class="p">(</span><span class="n">x</span><span class="p">[,</span> <span class="p">...])</span>
</code></pre></div>
<p><strong>Параметры</strong></p>
<p>Функция принимает переменное число входных параметров. Параметры могут быть числовых типов, а также <code class="syntax">Tuple</code>, <code class="syntax">Array</code>, <code class="syntax">Date</code>, <code class="syntax">DateTime</code>, <code class="syntax">String</code>.</p>
<p><strong>Возвращаемое значение</strong></p>
<ul>
<li>Значение с типом данных <a href="./">UInt64</a>.</li>
</ul>
<p><strong>Детали реализации</strong></p>
<p>Функция:</p>
<ul>
<li>
<p>Вычисляет хэш для всех параметров агрегации, а затем использует его в вычислениях.</p>
</li>
<li>
<p>Использует адаптивный алгоритм выборки. В качестве состояния вычисления функция использует выборку хэш-значений элементов размером до 65536.</p>
<div class="codehilite"><pre><span></span><code class="syntax"><span class="err">Этот</span> <span class="err">алгоритм</span> <span class="err">очень</span> <span class="err">точен</span> <span class="err">и</span> <span class="err">очень</span> <span class="err">эффективен</span> <span class="err">по</span> <span class="err">использованию</span> <span class="n">CPU</span><span class="p">.</span> <span class="err">Если</span> <span class="err">запрос</span> <span class="err">содержит</span> <span class="err">небольшое</span> <span class="err">количество</span> <span class="err">этих</span> <span class="err">функций</span><span class="p">,</span> <span class="err">использование</span> <span class="ss">`uniq`</span> <span class="err">почти</span> <span class="err">так</span> <span class="err">же</span> <span class="err">эффективно</span><span class="p">,</span>  <span class="err">как</span> <span class="err">и</span> <span class="err">использование</span> <span class="err">других</span> <span class="err">агрегатных</span> <span class="err">функций</span><span class="p">.</span>
</code></pre></div>
</li>
<li>
<p>Результат детерминирован (не зависит от порядка выполнения запроса).</p>
</li>
</ul>
<p>Эту функцию рекомендуется использовать практически во всех сценариях.</p>
<p><strong>Смотрите также</strong></p>
<ul>
<li><a href="#agg_function-uniqcombined">uniqCombined</a></li>
<li><a href="#agg_function-uniqcombined64">uniqCombined64</a></li>
<li><a href="#agg_function-uniqhll12">uniqHLL12</a></li>
<li><a href="#agg_function-uniqexact">uniqExact</a></li>
</ul>
<h2 id="agg_function-uniqcombined">uniqCombined<a class="headerlink" href="#agg_function-uniqcombined" title="Permanent link"> </a></h2>
<p>Приближённо вычисляет количество различных значений аргумента.</p>
<div class="codehilite"><pre><span></span><code class="syntax"><span class="n">uniqCombined</span><span class="p">(</span><span class="n">HLL_precision</span><span class="p">)(</span><span class="n">x</span><span class="p">[,</span> <span class="p">...])</span>
</code></pre></div>
<p>Функция <code class="syntax">uniqCombined</code> — это хороший выбор для вычисления количества различных значений.</p>
<p><strong>Параметры</strong></p>
<p>Функция принимает переменное число входных параметров. Параметры могут быть числовых типов, а также <code class="syntax">Tuple</code>, <code class="syntax">Array</code>, <code class="syntax">Date</code>, <code class="syntax">DateTime</code>, <code class="syntax">String</code>.</p>
<p><code class="syntax">HLL_precision</code> — это логарифм по основанию 2 от числа ячеек в <a href="https://en.wikipedia.org/wiki/HyperLogLog" rel="external nofollow noreferrer" target="_blank">HyperLogLog</a>. Необязательный, можно использовать функцию как <code class="syntax">uniqCombined (x [,...])</code>. Для <code class="syntax">HLL_precision</code> значение по умолчанию — 17, что фактически составляет 96 КБ пространства (2^17 ячеек, 6 бит каждая).</p>
<p><strong>Возвращаемое значение</strong></p>
<ul>
<li>Число типа <a href="./">UInt64</a>.</li>
</ul>
<p><strong>Детали реализации</strong></p>
<p>Функция:</p>
<ul>
<li>
<p>Вычисляет хэш (64-битный для <code class="syntax">String</code> и 32-битный для всех остальных типов) для всех параметров агрегации, а затем использует его в вычислениях.</p>
</li>
<li>
<p>Используется комбинация трёх алгоритмов: массив, хэш-таблица и HyperLogLog с таблицей коррекции погрешности.</p>
<div class="codehilite"><pre><span></span><code class="syntax"><span class="err">Для небольшого количества различных значений используется массив. Если размер набора больше, используется хэш-таблица. При дальнейшем увеличении количества значений, используется структура HyperLogLog, имеющая фиксированный размер в памяти.</span>
</code></pre></div>
</li>
<li>
<p>Результат детерминирован (не зависит от порядка выполнения запроса).</p>
</li>
</ul>
<div class="admonition note alert pb-0 mb-4 alert-primary" role="alert">
<p class="admonition-title alert-heading display-6 mb-2">Note</p>
<p>Так как используется 32-битный хэш для не-<code class="syntax">String</code> типов, результат будет иметь очень очень большую ошибку для количества разичных элементов существенно больше <code class="syntax">UINT_MAX</code> (ошибка быстро растёт начиная с нескольких десятков миллиардов различных значений), таким образом в этом случае нужно использовать <a class="alert-link" href="#agg_function-uniqcombined64">uniqCombined64</a></p>
</div>
<p>По сравнению с функцией <a href="#agg_function-uniq">uniq</a>, <code class="syntax">uniqCombined</code>:</p>
<ul>
<li>Потребляет в несколько раз меньше памяти.</li>
<li>Вычисляет с в несколько раз более высокой точностью.</li>
<li>Обычно имеет немного более низкую производительность. В некоторых сценариях <code class="syntax">uniqCombined</code> может показывать более высокую производительность, чем <code class="syntax">uniq</code>, например, в случае распределенных запросов, при которых по сети передаётся большое количество состояний агрегации.</li>
</ul>
<p><strong>Смотрите также</strong></p>
<ul>
<li><a href="#agg_function-uniq">uniq</a></li>
<li><a href="#agg_function-uniqcombined64">uniqCombined64</a></li>
<li><a href="#agg_function-uniqhll12">uniqHLL12</a></li>
<li><a href="#agg_function-uniqexact">uniqExact</a></li>
</ul>
<h2 id="agg_function-uniqcombined64">uniqCombined64<a class="headerlink" href="#agg_function-uniqcombined64" title="Permanent link"> </a></h2>
<p>Использует 64-битный хэш для всех типов, в отличие от <a href="#agg_function-uniqcombined">uniqCombined</a>.</p>
<h2 id="agg_function-uniqhll12">uniqHLL12<a class="headerlink" href="#agg_function-uniqhll12" title="Permanent link"> </a></h2>
<p>Вычисляет приблизительное число различных значений аргументов, используя алгоритм <a href="https://en.wikipedia.org/wiki/HyperLogLog" rel="external nofollow noreferrer" target="_blank">HyperLogLog</a>.</p>
<div class="codehilite"><pre><span></span><code class="syntax"><span class="n">uniqHLL12</span><span class="p">(</span><span class="n">x</span><span class="p">[,</span> <span class="p">...])</span>
</code></pre></div>
<p><strong>Параметры</strong></p>
<p>Функция принимает переменное число входных параметров. Параметры могут быть числовых типов, а также <code class="syntax">Tuple</code>, <code class="syntax">Array</code>, <code class="syntax">Date</code>, <code class="syntax">DateTime</code>, <code class="syntax">String</code>.</p>
<p><strong>Возвращаемое значение</strong></p>
<ul>
<li>Значение хэша с типом данных <a href="./">UInt64</a>.</li>
</ul>
<p><strong>Детали реализации</strong></p>
<p>Функция:</p>
<ul>
<li>
<p>Вычисляет хэш для всех параметров агрегации, а затем использует его в вычислениях.</p>
</li>
<li>
<p>Использует алгоритм HyperLogLog для аппроксимации числа различных значений аргументов.</p>
<div class="codehilite"><pre><span></span><code class="syntax"><span class="err">Используется 212 5-битовых ячеек. Размер состояния чуть больше 2.5 КБ. Результат не точный (ошибка до ~10%) для небольших множеств (&lt;10K элементов). Однако для множеств большой кардинальности (10K - 100M) результат довольно точен (ошибка до ~1.6%). Начиная с 100M ошибка оценки будет только расти и для множеств огромной кардинальности (1B+ элементов) функция возвращает результат с очень большой неточностью.</span>
</code></pre></div>
</li>
<li>
<p>Результат детерминирован (не зависит от порядка выполнения запроса).</p>
</li>
</ul>
<p>Мы не рекомендуем использовать эту функцию. В большинстве случаев используйте функцию <a href="#agg_function-uniq">uniq</a> или <a href="#agg_function-uniqcombined">uniqCombined</a>.</p>
<p><strong>Смотрите также</strong></p>
<ul>
<li><a href="#agg_function-uniq">uniq</a></li>
<li><a href="#agg_function-uniqcombined">uniqCombined</a></li>
<li><a href="#agg_function-uniqexact">uniqExact</a></li>
</ul>
<h2 id="agg_function-uniqexact">uniqExact<a class="headerlink" href="#agg_function-uniqexact" title="Permanent link"> </a></h2>
<p>Вычисляет точное количество различных значений аргументов.</p>
<div class="codehilite"><pre><span></span><code class="syntax"><span class="n">uniqExact</span><span class="p">(</span><span class="n">x</span><span class="p">[,</span> <span class="p">...])</span>
</code></pre></div>
<p>Функцию <code class="syntax">uniqExact</code> следует использовать, если вам обязательно нужен точный результат. В противном случае используйте функцию <a href="#agg_function-uniq">uniq</a>.</p>
<p>Функция <code class="syntax">uniqExact</code> расходует больше оперативной памяти, чем функция <code class="syntax">uniq</code>, так как размер состояния неограниченно растёт по мере роста количества различных значений.</p>
<p><strong>Параметры</strong></p>
<p>Функция принимает переменное число входных параметров. Параметры могут быть числовых типов, а также <code class="syntax">Tuple</code>, <code class="syntax">Array</code>, <code class="syntax">Date</code>, <code class="syntax">DateTime</code>, <code class="syntax">String</code>.</p>
<p><strong>Смотрите также</strong></p>
<ul>
<li><a href="#agg_function-uniq">uniq</a></li>
<li><a href="#agg_function-uniqcombined">uniqCombined</a></li>
<li><a href="#agg_function-uniqhll12">uniqHLL12</a></li>
</ul>
<h2 id="agg_function-grouparray">groupArray(x), groupArray(max_size)(x)<a class="headerlink" href="#agg_function-grouparray" title="Permanent link"> </a></h2>
<p>Составляет массив из значений аргумента.<br/>
Значения в массив могут быть добавлены в любом (недетерминированном) порядке.</p>
<p>Вторая версия (с параметром <code class="syntax">max_size</code>) ограничивает размер результирующего массива <code class="syntax">max_size</code> элементами.<br/>
Например, <code class="syntax">groupArray(1)(x)</code> эквивалентно <code class="syntax">[any(x)]</code>.</p>
<p>В некоторых случаях, вы всё же можете рассчитывать на порядок выполнения запроса. Это — случаи, когда <code class="syntax">SELECT</code> идёт из подзапроса, в котором используется <code class="syntax">ORDER BY</code>.</p>
<h2 id="grouparrayinsertat">groupArrayInsertAt<a class="headerlink" href="#grouparrayinsertat" title="Permanent link"> </a></h2>
<p>Вставляет значение в заданную позицию массива.</p>
<p><strong>Синтаксис</strong></p>
<div class="codehilite"><pre><span></span><code class="syntax"><span class="n">groupArrayInsertAt</span><span class="p">(</span><span class="n">default_x</span><span class="p">,</span> <span class="k">size</span><span class="p">)(</span><span class="n">x</span><span class="p">,</span> <span class="n">pos</span><span class="p">);</span>
</code></pre></div>
<p>Если запрос вставляет вставляется несколько значений в одну и ту же позицию, то функция ведет себя следующим образом:</p>
<ul>
<li>Если запрос выполняется в одном потоке, то используется первое из вставляемых значений.</li>
<li>Если запрос выполняется в нескольких потоках, то в результирующем массиве может оказаться любое из вставляемых значений.</li>
</ul>
<p><strong>Параметры</strong></p>
<ul>
<li><code class="syntax">x</code> — Значение, которое будет вставлено. <a href="../../syntax/#syntax-expressions">Выражение</a>, возвращающее значение одного из <a href="../../data-types/#data_types">поддерживаемых типов данных</a>.</li>
<li><code class="syntax">pos</code> — Позиция, в которую вставляется заданный элемент <code class="syntax">x</code>. Нумерация индексов в массиве начинается с нуля. <a href="../../data-types/int-uint/#uint8-uint16-uint32-uint64-int8-int16-int32-int64">UInt32</a>.</li>
<li><code class="syntax">default_x</code> — Значение по умолчанию для подстановки на пустые позиции. Опциональный параметр. <a href="../../syntax/#syntax-expressions">Выражение</a>, возвращающее значение с типом параметра <code class="syntax">x</code>. Если <code class="syntax">default_x</code> не определен, используются <a href="../../statements/create/#create-default-values">значения по умолчанию</a>.</li>
<li><code class="syntax">size</code>— Длина результирующего массива. Опциональный параметр. При использовании этого параметра должно быть указано значение по умолчанию <code class="syntax">default_x</code>. <a href="../../data-types/int-uint/#uint-ranges">UInt32</a>.</li>
</ul>
<p><strong>Возвращаемое значение</strong></p>
<ul>
<li>Массив со вставленными значениями.</li>
</ul>
<p>Тип: <a href="../../data-types/array/#data-type-array">Array</a>.</p>
<p><strong>Примеры</strong></p>
<p>Запрос:</p>
<div class="codehilite"><pre><span></span><code class="syntax"><span class="k">SELECT</span> <span class="n">groupArrayInsertAt</span><span class="p">(</span><span class="n">toString</span><span class="p">(</span><span class="nb">number</span><span class="p">),</span> <span class="nb">number</span> <span class="o">*</span> <span class="mi">2</span><span class="p">)</span> <span class="k">FROM</span> <span class="n">numbers</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span>
</code></pre></div>
<p>Результат:</p>
<div class="codehilite"><pre><span></span><code class="syntax">┌─groupArrayInsertAt(toString(number), multiply(number, 2))─┐
│ ['0','','1','','2','','3','','4']                         │
└───────────────────────────────────────────────────────────┘
</code></pre></div>
<p>Запрос:</p>
<div class="codehilite"><pre><span></span><code class="syntax"><span class="k">SELECT</span> <span class="n">groupArrayInsertAt</span><span class="p">(</span><span class="s1">'-'</span><span class="p">)(</span><span class="n">toString</span><span class="p">(</span><span class="nb">number</span><span class="p">),</span> <span class="nb">number</span> <span class="o">*</span> <span class="mi">2</span><span class="p">)</span> <span class="k">FROM</span> <span class="n">numbers</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span>
</code></pre></div>
<p>Результат:</p>
<div class="codehilite"><pre><span></span><code class="syntax">┌─groupArrayInsertAt('-')(toString(number), multiply(number, 2))─┐
│ ['0','-','1','-','2','-','3','-','4']                          │
└────────────────────────────────────────────────────────────────┘
</code></pre></div>
<p>Запрос:</p>
<div class="codehilite"><pre><span></span><code class="syntax"><span class="k">SELECT</span> <span class="n">groupArrayInsertAt</span><span class="p">(</span><span class="s1">'-'</span><span class="p">,</span> <span class="mi">5</span><span class="p">)(</span><span class="n">toString</span><span class="p">(</span><span class="nb">number</span><span class="p">),</span> <span class="nb">number</span> <span class="o">*</span> <span class="mi">2</span><span class="p">)</span> <span class="k">FROM</span> <span class="n">numbers</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span>
</code></pre></div>
<p>Результат:</p>
<div class="codehilite"><pre><span></span><code class="syntax">┌─groupArrayInsertAt('-', 5)(toString(number), multiply(number, 2))─┐
│ ['0','-','1','-','2']                                             │
└───────────────────────────────────────────────────────────────────┘
</code></pre></div>
<p>Многопоточная вставка элементов в одну позицию.</p>
<p>Запрос:</p>
<div class="codehilite"><pre><span></span><code class="syntax"><span class="k">SELECT</span> <span class="n">groupArrayInsertAt</span><span class="p">(</span><span class="nb">number</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="k">FROM</span> <span class="n">numbers_mt</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="n">SETTINGS</span> <span class="n">max_block_size</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
</code></pre></div>
<p>В результат этого запроса мы получите случайное целое число в диапазоне <code class="syntax">[0,9]</code>. Например:</p>
<div class="codehilite"><pre><span></span><code class="syntax">┌─groupArrayInsertAt(number, 0)─┐
│ [7]                           │
└───────────────────────────────┘
</code></pre></div>
<h2 id="agg_function-grouparraymovingsum">groupArrayMovingSum<a class="headerlink" href="#agg_function-grouparraymovingsum" title="Permanent link"> </a></h2>
<p>Вычисляет скользящую сумму входных значений.</p>
<div class="codehilite"><pre><span></span><code class="syntax"><span class="n">groupArrayMovingSum</span><span class="p">(</span><span class="n">numbers_for_summing</span><span class="p">)</span>
<span class="n">groupArrayMovingSum</span><span class="p">(</span><span class="n">window_size</span><span class="p">)(</span><span class="n">numbers_for_summing</span><span class="p">)</span>
</code></pre></div>
<p>Функция может принимать размер окна в качестве параметра. Если окно не указано, то функция использует размер окна, равный количеству строк в столбце.</p>
<p><strong>Параметры</strong></p>
<ul>
<li><code class="syntax">numbers_for_summing</code> — <a href="../../syntax/#syntax-expressions">выражение</a>, возвращающее значение числового типа.</li>
<li><code class="syntax">window_size</code> — размер окна.</li>
</ul>
<p><strong>Возвращаемые значения</strong></p>
<ul>
<li>Массив того же размера и типа, что и входные данные.</li>
</ul>
<p><strong>Пример</strong></p>
<p>Таблица с исходными данными:</p>
<div class="codehilite"><pre><span></span><code class="syntax"><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">t</span>
<span class="p">(</span>
    <span class="o">`</span><span class="nb">int</span><span class="o">`</span> <span class="n">UInt8</span><span class="p">,</span>
    <span class="o">`</span><span class="nb">float</span><span class="o">`</span> <span class="n">Float32</span><span class="p">,</span>
    <span class="o">`</span><span class="nb">dec</span><span class="o">`</span> <span class="n">Decimal32</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="p">)</span>
<span class="n">ENGINE</span> <span class="o">=</span> <span class="n">TinyLog</span>
</code></pre></div>
<div class="codehilite"><pre><span></span><code class="syntax">┌─int─┬─float─┬──dec─┐
│   1 │   1.1 │ 1.10 │
│   2 │   2.2 │ 2.20 │
│   4 │   4.4 │ 4.40 │
│   7 │  7.77 │ 7.77 │
└─────┴───────┴──────┘
</code></pre></div>
<p>Запросы:</p>
<div class="codehilite"><pre><span></span><code class="syntax"><span class="k">SELECT</span>
    <span class="n">groupArrayMovingSum</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span> <span class="k">AS</span> <span class="n">I</span><span class="p">,</span>
    <span class="n">groupArrayMovingSum</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span> <span class="k">AS</span> <span class="n">F</span><span class="p">,</span>
    <span class="n">groupArrayMovingSum</span><span class="p">(</span><span class="nb">dec</span><span class="p">)</span> <span class="k">AS</span> <span class="n">D</span>
<span class="k">FROM</span> <span class="n">t</span>
</code></pre></div>
<div class="codehilite"><pre><span></span><code class="syntax">┌─I──────────┬─F───────────────────────────────┬─D──────────────────────┐
│ [1,3,7,14] │ [1.1,3.3000002,7.7000003,15.47] │ [1.10,3.30,7.70,15.47] │
└────────────┴─────────────────────────────────┴────────────────────────┘
</code></pre></div>
<div class="codehilite"><pre><span></span><code class="syntax"><span class="k">SELECT</span>
    <span class="n">groupArrayMovingSum</span><span class="p">(</span><span class="mi">2</span><span class="p">)(</span><span class="nb">int</span><span class="p">)</span> <span class="k">AS</span> <span class="n">I</span><span class="p">,</span>
    <span class="n">groupArrayMovingSum</span><span class="p">(</span><span class="mi">2</span><span class="p">)(</span><span class="nb">float</span><span class="p">)</span> <span class="k">AS</span> <span class="n">F</span><span class="p">,</span>
    <span class="n">groupArrayMovingSum</span><span class="p">(</span><span class="mi">2</span><span class="p">)(</span><span class="nb">dec</span><span class="p">)</span> <span class="k">AS</span> <span class="n">D</span>
<span class="k">FROM</span> <span class="n">t</span>
</code></pre></div>
<div class="codehilite"><pre><span></span><code class="syntax">┌─I──────────┬─F───────────────────────────────┬─D──────────────────────┐
│ [1,3,6,11] │ [1.1,3.3000002,6.6000004,12.17] │ [1.10,3.30,6.60,12.17] │
└────────────┴─────────────────────────────────┴────────────────────────┘
</code></pre></div>
<h2 id="agg_function-grouparraymovingavg">groupArrayMovingAvg<a class="headerlink" href="#agg_function-grouparraymovingavg" title="Permanent link"> </a></h2>
<p>Вычисляет скользящее среднее для входных значений.</p>
<div class="codehilite"><pre><span></span><code class="syntax"><span class="err">groupArrayMovingAvg(numbers_for_summing)</span>
<span class="err">groupArrayMovingAvg(window_size)(numbers_for_summing)</span>
</code></pre></div>
<p>Функция может принимать размер окна в качестве параметра. Если окно не указано, то функция использует размер окна, равный количеству строк в столбце.</p>
<p><strong>Параметры</strong></p>
<ul>
<li><code class="syntax">numbers_for_summing</code> — <a href="../../syntax/#syntax-expressions">выражение</a>, возвращающее значение числового типа.</li>
<li><code class="syntax">window_size</code> — размер окна.</li>
</ul>
<p><strong>Возвращаемые значения</strong></p>
<ul>
<li>Массив того же размера и типа, что и входные данные.</li>
</ul>
<p>Функция использует <a href="https://ru.wikipedia.org/wiki/Округление#Методы" rel="external nofollow noreferrer" target="_blank">округление к меньшему по модулю</a>. Оно усекает десятичные разряды, незначимые для результирующего типа данных.</p>
<p><strong>Пример</strong></p>
<p>Таблица с исходными данными:</p>
<div class="codehilite"><pre><span></span><code class="syntax"><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">t</span>
<span class="p">(</span>
    <span class="o">`</span><span class="nb">int</span><span class="o">`</span> <span class="n">UInt8</span><span class="p">,</span>
    <span class="o">`</span><span class="nb">float</span><span class="o">`</span> <span class="n">Float32</span><span class="p">,</span>
    <span class="o">`</span><span class="nb">dec</span><span class="o">`</span> <span class="n">Decimal32</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="p">)</span>
<span class="n">ENGINE</span> <span class="o">=</span> <span class="n">TinyLog</span>
</code></pre></div>
<div class="codehilite"><pre><span></span><code class="syntax">┌─int─┬─float─┬──dec─┐
│   1 │   1.1 │ 1.10 │
│   2 │   2.2 │ 2.20 │
│   4 │   4.4 │ 4.40 │
│   7 │  7.77 │ 7.77 │
└─────┴───────┴──────┘
</code></pre></div>
<p>Запросы:</p>
<div class="codehilite"><pre><span></span><code class="syntax"><span class="k">SELECT</span>
    <span class="n">groupArrayMovingAvg</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span> <span class="k">AS</span> <span class="n">I</span><span class="p">,</span>
    <span class="n">groupArrayMovingAvg</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span> <span class="k">AS</span> <span class="n">F</span><span class="p">,</span>
    <span class="n">groupArrayMovingAvg</span><span class="p">(</span><span class="nb">dec</span><span class="p">)</span> <span class="k">AS</span> <span class="n">D</span>
<span class="k">FROM</span> <span class="n">t</span>
</code></pre></div>
<div class="codehilite"><pre><span></span><code class="syntax">┌─I─────────┬─F───────────────────────────────────┬─D─────────────────────┐
│ [0,0,1,3] │ [0.275,0.82500005,1.9250001,3.8675] │ [0.27,0.82,1.92,3.86] │
└───────────┴─────────────────────────────────────┴───────────────────────┘
</code></pre></div>
<div class="codehilite"><pre><span></span><code class="syntax"><span class="k">SELECT</span>
    <span class="n">groupArrayMovingAvg</span><span class="p">(</span><span class="mi">2</span><span class="p">)(</span><span class="nb">int</span><span class="p">)</span> <span class="k">AS</span> <span class="n">I</span><span class="p">,</span>
    <span class="n">groupArrayMovingAvg</span><span class="p">(</span><span class="mi">2</span><span class="p">)(</span><span class="nb">float</span><span class="p">)</span> <span class="k">AS</span> <span class="n">F</span><span class="p">,</span>
    <span class="n">groupArrayMovingAvg</span><span class="p">(</span><span class="mi">2</span><span class="p">)(</span><span class="nb">dec</span><span class="p">)</span> <span class="k">AS</span> <span class="n">D</span>
<span class="k">FROM</span> <span class="n">t</span>
</code></pre></div>
<div class="codehilite"><pre><span></span><code class="syntax">┌─I─────────┬─F────────────────────────────────┬─D─────────────────────┐
│ [0,1,3,5] │ [0.55,1.6500001,3.3000002,6.085] │ [0.55,1.65,3.30,6.08] │
└───────────┴──────────────────────────────────┴───────────────────────┘
</code></pre></div>
<h2 id="groupuniqarrayx-groupuniqarraymax-sizex">groupUniqArray(x), groupUniqArray(max_size)(x)<a class="headerlink" href="#groupuniqarrayx-groupuniqarraymax-sizex" title="Permanent link"> </a></h2>
<p>Составляет массив из различных значений аргумента. Расход оперативной памяти такой же, как у функции <code class="syntax">uniqExact</code>.</p>
<p>Функция <code class="syntax">groupUniqArray(max_size)(x)</code> ограничивает размер результирующего массива до <code class="syntax">max_size</code> элементов. Например, <code class="syntax">groupUniqArray(1)(x)</code> равнозначно <code class="syntax">[any(x)]</code>.</p>
<h2 id="quantile">quantile<a class="headerlink" href="#quantile" title="Permanent link"> </a></h2>
<p>Приблизительно вычисляет <a href="https://ru.wikipedia.org/wiki/Квантиль" rel="external nofollow noreferrer" target="_blank">квантиль</a> числовой последовательности.</p>
<p>Функция использует алгоритм <a href="https://en.wikipedia.org/wiki/Reservoir_sampling" rel="external nofollow noreferrer" target="_blank">reservoir sampling</a> с размером резервуара до 8192 и случайным генератором чисел для для сэмплирования. Результат не детерминирован. Чтобы получить точную квантиль используйте функцию <a href="#quantileexact">quantileExact</a>.</p>
<p>Внутренние состояния функций <code class="syntax">quantile*</code> не объединяются, если они используются в одном запросе. Если вам необходимо вычислить квантили нескольких уровней, используйте функцию <a href="#quantiles">quantiles</a>, это повысит эффективность запроса.</p>
<p><strong>Синтаксис</strong></p>
<div class="codehilite"><pre><span></span><code class="syntax"><span class="n">quantile</span><span class="p">(</span><span class="k">level</span><span class="p">)(</span><span class="n">expr</span><span class="p">)</span>
</code></pre></div>
<p>Алиас: <code class="syntax">median</code>.</p>
<p><strong>Параметры</strong></p>
<ul>
<li><code class="syntax">level</code> — Уровень квантили. Опционально. Константное значение с плавающей запятой от 0 до 1. Мы рекомендуем использовать значение <code class="syntax">level</code> из диапазона <code class="syntax">[0.01, 0.99]</code>. Значение по умолчанию: 0.5. При <code class="syntax">level=0.5</code> функция вычисляет <a href="https://ru.wikipedia.org/wiki/Медиана_(статистика)" rel="external nofollow noreferrer" target="_blank">медиану</a>.</li>
<li><code class="syntax">expr</code> — Выражение над значениями столбца, которое возвращает данные <a href="./#data_types">числовых типов</a> или типов <a href="./">Date</a>, <a href="./">DateTime</a>.</li>
</ul>
<p><strong>Возвращаемое значение</strong></p>
<ul>
<li>Приблизительный квантиль заданного уровня.</li>
</ul>
<p>Тип:</p>
<ul>
<li><a href="./">Float64</a> для входных данных числового типа.</li>
<li><a href="./">Date</a>, если входные значения имеют тип <code class="syntax">Date</code>.</li>
<li><a href="./">DateTime</a>, если входные значения имеют тип <code class="syntax">DateTime</code>.</li>
</ul>
<p><strong>Пример</strong></p>
<p>Входная таблица:</p>
<div class="codehilite"><pre><span></span><code class="syntax">┌─val─┐
│   1 │
│   1 │
│   2 │
│   3 │
└─────┘
</code></pre></div>
<p>Запрос:</p>
<div class="codehilite"><pre><span></span><code class="syntax"><span class="k">SELECT</span> <span class="n">quantile</span><span class="p">(</span><span class="n">val</span><span class="p">)</span> <span class="k">FROM</span> <span class="n">t</span>
</code></pre></div>
<p>Результат:</p>
<div class="codehilite"><pre><span></span><code class="syntax">┌─quantile(val)─┐
│           1.5 │
└───────────────┘
</code></pre></div>
<p><strong>Смотрите также</strong></p>
<ul>
<li><a href="#median">median</a></li>
<li><a href="#quantiles">quantiles</a></li>
</ul>
<h2 id="quantiledeterministic">quantileDeterministic<a class="headerlink" href="#quantiledeterministic" title="Permanent link"> </a></h2>
<p>Приблизительно вычисляет <a href="https://ru.wikipedia.org/wiki/Квантиль" rel="external nofollow noreferrer" target="_blank">квантиль</a> числовой последовательности.</p>
<p>Функция использует алгоритм <a href="https://en.wikipedia.org/wiki/Reservoir_sampling" rel="external nofollow noreferrer" target="_blank">reservoir sampling</a> с размером резервуара до 8192 и детерминированным алгоритмом сэмплирования. Результат детерминирован. Чтобы получить точную квантиль используйте функцию <a href="#quantileexact">quantileExact</a>.</p>
<p>Внутренние состояния функций <code class="syntax">quantile*</code> не объединяются, если они используются в одном запросе. Если вам необходимо вычислить квантили нескольких уровней, используйте функцию <a href="#quantiles">quantiles</a>, это повысит эффективность запроса.</p>
<p><strong>Синтаксис</strong></p>
<div class="codehilite"><pre><span></span><code class="syntax"><span class="n">quantileDeterministic</span><span class="p">(</span><span class="k">level</span><span class="p">)(</span><span class="n">expr</span><span class="p">,</span> <span class="n">determinator</span><span class="p">)</span>
</code></pre></div>
<p>Алиас: <code class="syntax">medianDeterministic</code>.</p>
<p><strong>Параметры</strong></p>
<ul>
<li><code class="syntax">level</code> — Уровень квантили. Опционально. Константное значение с плавающей запятой от 0 до 1. Мы рекомендуем использовать значение <code class="syntax">level</code> из диапазона <code class="syntax">[0.01, 0.99]</code>. Значение по умолчанию: 0.5. При <code class="syntax">level=0.5</code> функция вычисляет <a href="https://ru.wikipedia.org/wiki/Медиана_(статистика)" rel="external nofollow noreferrer" target="_blank">медиану</a>.</li>
<li><code class="syntax">expr</code> — Выражение над значениями столбца, которое возвращает данные <a href="./#data_types">числовых типов</a> или типов <a href="./">Date</a>, <a href="./">DateTime</a>.</li>
<li><code class="syntax">determinator</code> — Число, хэш которого используется при сэмплировании в алгоритме reservoir sampling, чтобы сделать результат детерминированным. В качестве детерминатора можно использовать любое определённое положительное число, например, идентификатор пользователя или события. Если одно и то же значение детерминатора попадается в выборке слишком часто, то функция выдаёт некорректный результат.</li>
</ul>
<p><strong>Возвращаемое значение</strong></p>
<ul>
<li>Приблизительный квантиль заданного уровня.</li>
</ul>
<p>Тип:</p>
<ul>
<li><a href="./">Float64</a> для входных данных числового типа.</li>
<li><a href="./">Date</a> если входные значения имеют тип <code class="syntax">Date</code>.</li>
<li><a href="./">DateTime</a> если входные значения имеют тип <code class="syntax">DateTime</code>.</li>
</ul>
<p><strong>Пример</strong></p>
<p>Входная таблица:</p>
<div class="codehilite"><pre><span></span><code class="syntax">┌─val─┐
│   1 │
│   1 │
│   2 │
│   3 │
└─────┘
</code></pre></div>
<p>Запрос:</p>
<div class="codehilite"><pre><span></span><code class="syntax"><span class="k">SELECT</span> <span class="n">quantileDeterministic</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="k">FROM</span> <span class="n">t</span>
</code></pre></div>
<p>Результат:</p>
<div class="codehilite"><pre><span></span><code class="syntax">┌─quantileDeterministic(val, 1)─┐
│                           1.5 │
└───────────────────────────────┘
</code></pre></div>
<p><strong>Смотрите также</strong></p>
<ul>
<li><a href="#median">median</a></li>
<li><a href="#quantiles">quantiles</a></li>
</ul>
<h2 id="quantileexact">quantileExact<a class="headerlink" href="#quantileexact" title="Permanent link"> </a></h2>
<p>Точно вычисляет <a href="https://ru.wikipedia.org/wiki/Квантиль" rel="external nofollow noreferrer" target="_blank">квантиль</a> числовой последовательности.</p>
<p>Чтобы получить точный результат, все переданные значения собираются в массив, который затем частично сортируется. Таким образом, функция потребляет объем памяти <code class="syntax">O(n)</code>, где <code class="syntax">n</code> — количество переданных значений. Для небольшого числа значений эта функция эффективна.</p>
<p>Внутренние состояния функций <code class="syntax">quantile*</code> не объединяются, если они используются в одном запросе. Если вам необходимо вычислить квантили нескольких уровней, используйте функцию <a href="#quantiles">quantiles</a>, это повысит эффективность запроса.</p>
<p><strong>Синтаксис</strong></p>
<div class="codehilite"><pre><span></span><code class="syntax"><span class="n">quantileExact</span><span class="p">(</span><span class="k">level</span><span class="p">)(</span><span class="n">expr</span><span class="p">)</span>
</code></pre></div>
<p>Алиас: <code class="syntax">medianExact</code>.</p>
<p><strong>Параметры</strong></p>
<ul>
<li><code class="syntax">level</code> — Уровень квантили. Опционально. Константное значение с плавающей запятой от 0 до 1. Мы рекомендуем использовать значение <code class="syntax">level</code> из диапазона <code class="syntax">[0.01, 0.99]</code>. Значение по умолчанию: 0.5. При <code class="syntax">level=0.5</code> функция вычисляет <a href="https://ru.wikipedia.org/wiki/Медиана_(статистика)" rel="external nofollow noreferrer" target="_blank">медиану</a>.</li>
<li><code class="syntax">expr</code> — Выражение над значениями столбца, которое возвращает данные <a href="./#data_types">числовых типов</a> или типов <a href="./">Date</a>, <a href="./">DateTime</a>.</li>
</ul>
<p><strong>Возвращаемое значение</strong></p>
<ul>
<li>Квантиль заданного уровня.</li>
</ul>
<p>Тип:</p>
<ul>
<li><a href="./">Float64</a> для входных данных числового типа.</li>
<li><a href="./">Date</a> если входные значения имеют тип <code class="syntax">Date</code>.</li>
<li><a href="./">DateTime</a> если входные значения имеют тип <code class="syntax">DateTime</code>.</li>
</ul>
<p><strong>Пример</strong></p>
<p>Запрос:</p>
<div class="codehilite"><pre><span></span><code class="syntax"><span class="k">SELECT</span> <span class="n">quantileExact</span><span class="p">(</span><span class="nb">number</span><span class="p">)</span> <span class="k">FROM</span> <span class="n">numbers</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</code></pre></div>
<p>Результат:</p>
<div class="codehilite"><pre><span></span><code class="syntax">┌─quantileExact(number)─┐
│                     5 │
└───────────────────────┘
</code></pre></div>
<p><strong>Смотрите также</strong></p>
<ul>
<li><a href="#median">median</a></li>
<li><a href="#quantiles">quantiles</a></li>
</ul>
<h2 id="quantileexactweighted">quantileExactWeighted<a class="headerlink" href="#quantileexactweighted" title="Permanent link"> </a></h2>
<p>Точно вычисляет <a href="https://ru.wikipedia.org/wiki/Квантиль" rel="external nofollow noreferrer" target="_blank">квантиль</a> числовой последовательности, учитывая вес каждого её элемента.</p>
<p>Чтобы получить точный результат, все переданные значения собираются в массив, который затем частично сортируется. Для каждого значения учитывается его вес (количество значений в выборке). В алгоритме используется хэш-таблица. Таким образом, если переданные значения часто повторяются, функция потребляет меньше оперативной памяти, чем <a href="#quantileexact">quantileExact</a>. Эту функцию можно использовать вместо <code class="syntax">quantileExact</code> если указать вес 1.</p>
<p>Внутренние состояния функций <code class="syntax">quantile*</code> не объединяются, если они используются в одном запросе. Если вам необходимо вычислить квантили нескольких уровней, используйте функцию <a href="#quantiles">quantiles</a>, это повысит эффективность запроса.</p>
<p><strong>Синтаксис</strong></p>
<div class="codehilite"><pre><span></span><code class="syntax"><span class="n">quantileExactWeighted</span><span class="p">(</span><span class="k">level</span><span class="p">)(</span><span class="n">expr</span><span class="p">,</span> <span class="n">weight</span><span class="p">)</span>
</code></pre></div>
<p>Алиас: <code class="syntax">medianExactWeighted</code>.</p>
<p><strong>Параметры</strong></p>
<ul>
<li><code class="syntax">level</code> — Уровень квантили. Опционально. Константное значение с плавающей запятой от 0 до 1. Мы рекомендуем использовать значение <code class="syntax">level</code> из диапазона <code class="syntax">[0.01, 0.99]</code>. Значение по умолчанию: 0.5. При <code class="syntax">level=0.5</code> функция вычисляет <a href="https://ru.wikipedia.org/wiki/Медиана_(статистика)" rel="external nofollow noreferrer" target="_blank">медиану</a>.</li>
<li><code class="syntax">expr</code> — Выражение над значениями столбца, которое возвращает данные <a href="./#data_types">числовых типов</a> или типов <a href="./">Date</a>, <a href="./">DateTime</a>.</li>
<li><code class="syntax">weight</code> — Столбец с весам элементов последовательности. Вес — это количество повторений элемента в последовательности.</li>
</ul>
<p><strong>Возвращаемое значение</strong></p>
<ul>
<li>Quantile of the specified level.</li>
</ul>
<p>Тип:</p>
<ul>
<li><a href="./">Float64</a> для входных данных числового типа.</li>
<li><a href="./">Date</a> если входные значения имеют тип <code class="syntax">Date</code>.</li>
<li><a href="./">DateTime</a> если входные значения имеют тип <code class="syntax">DateTime</code>.</li>
</ul>
<p><strong>Пример</strong></p>
<p>Входная таблица:</p>
<div class="codehilite"><pre><span></span><code class="syntax">┌─n─┬─val─┐
│ 0 │   3 │
│ 1 │   2 │
│ 2 │   1 │
│ 5 │   4 │
└───┴─────┘
</code></pre></div>
<p>Запрос:</p>
<div class="codehilite"><pre><span></span><code class="syntax"><span class="k">SELECT</span> <span class="n">quantileExactWeighted</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span> <span class="k">FROM</span> <span class="n">t</span>
</code></pre></div>
<p>Результат:</p>
<div class="codehilite"><pre><span></span><code class="syntax">┌─quantileExactWeighted(n, val)─┐
│                             1 │
└───────────────────────────────┘
</code></pre></div>
<p><strong>Смотрите также</strong></p>
<ul>
<li><a href="#median">median</a></li>
<li><a href="#quantiles">quantiles</a></li>
</ul>
<h2 id="quantiletiming">quantileTiming<a class="headerlink" href="#quantiletiming" title="Permanent link"> </a></h2>
<p>Вычисляет <a href="https://ru.wikipedia.org/wiki/Квантиль" rel="external nofollow noreferrer" target="_blank">квантиль</a> числовой последовательности с детерминированной точностью.</p>
<p>Результат детерминирован (не зависит от порядка обработки запроса). Функция оптимизирована для работы с последовательностями, описывающими такие распределения, как время загрузки веб-страниц или время отклика бэкенда.</p>
<p>Внутренние состояния функций <code class="syntax">quantile*</code> не объединяются, если они используются в одном запросе. Если вам необходимо вычислить квантили нескольких уровней, используйте функцию <a href="#quantiles">quantiles</a>, это повысит эффективность запроса.</p>
<p><strong>Синтаксис</strong></p>
<div class="codehilite"><pre><span></span><code class="syntax"><span class="n">quantileTiming</span><span class="p">(</span><span class="k">level</span><span class="p">)(</span><span class="n">expr</span><span class="p">)</span>
</code></pre></div>
<p>Алиас: <code class="syntax">medianTiming</code>.</p>
<p><strong>Параметры</strong></p>
<ul>
<li>
<p><code class="syntax">level</code> — Уровень квантили. Опционально. Константное значение с плавающей запятой от 0 до 1. Мы рекомендуем использовать значение <code class="syntax">level</code> из диапазона <code class="syntax">[0.01, 0.99]</code>. Значение по умолчанию: 0.5. При <code class="syntax">level=0.5</code> функция вычисляет <a href="https://ru.wikipedia.org/wiki/Медиана_(статистика)" rel="external nofollow noreferrer" target="_blank">медиану</a>.</p>
</li>
<li>
<p><code class="syntax">expr</code> — <a href="../../syntax/#syntax-expressions">Выражение</a> над значения столбца, которые возвращают данные типа <a href="./">Float*</a>.</p>
<div class="codehilite"><pre><span></span><code class="syntax"><span class="err">- Если в функцию передать отрицательные значения, то её поведение не определено.</span>
<span class="err">- Если значение больше, чем 30 000 (например, время загрузки страницы превышает 30 секунд), то оно приравнивается к 30 000.</span>
</code></pre></div>
</li>
</ul>
<p><strong>Точность</strong></p>
<p>Вычисления точны при соблюдении следующих условий:</p>
<ul>
<li>Размер выборки не превышает 5670 элементов.</li>
<li>Размер выборки превышает 5670 элементов, но значение каждого элемента не больше 1024.</li>
</ul>
<p>В противном случае, результат вычисления округляется до ближайшего множителя числа 16.</p>
<div class="admonition note alert pb-0 mb-4 alert-primary" role="alert">
<p class="admonition-title alert-heading display-6 mb-2">Примечание</p>
<p>Для указанного типа последовательностей функция производительнее и точнее, чем <a class="alert-link" href="#quantile">quantile</a>.</p>
</div>
<p><strong>Возвращаемое значение</strong></p>
<ul>
<li>Квантиль заданного уровня.</li>
</ul>
<p>Тип: <code class="syntax">Float32</code>.</p>
<div class="admonition note alert pb-0 mb-4 alert-primary" role="alert">
<p class="admonition-title alert-heading display-6 mb-2">Примечания</p>
<p>Если в функцию <code class="syntax">quantileTimingIf</code> не передать значений, то вернётся <a class="alert-link" href="./#data_type-float-nan-inf">NaN</a>. Это необходимо для отделения подобных случаев от случаев, когда результат 0. Подробности про сортировку <code class="syntax">NaN</code> cмотрите в разделе <a class="alert-link" href="../../statements/select/order-by/#select-order-by">Секция ORDER BY</a>.</p>
</div>
<p><strong>Пример</strong></p>
<p>Входная таблица:</p>
<div class="codehilite"><pre><span></span><code class="syntax">┌─response_time─┐
│            72 │
│           112 │
│           126 │
│           145 │
│           104 │
│           242 │
│           313 │
│           168 │
│           108 │
└───────────────┘
</code></pre></div>
<p>Запрос:</p>
<div class="codehilite"><pre><span></span><code class="syntax"><span class="k">SELECT</span> <span class="n">quantileTiming</span><span class="p">(</span><span class="n">response_time</span><span class="p">)</span> <span class="k">FROM</span> <span class="n">t</span>
</code></pre></div>
<p>Результат:</p>
<div class="codehilite"><pre><span></span><code class="syntax">┌─quantileTiming(response_time)─┐
│                           126 │
└───────────────────────────────┘
</code></pre></div>
<p><strong>Смотрите также</strong></p>
<ul>
<li><a href="#median">median</a></li>
<li><a href="#quantiles">quantiles</a></li>
</ul>
<h2 id="quantiletimingweighted">quantileTimingWeighted<a class="headerlink" href="#quantiletimingweighted" title="Permanent link"> </a></h2>
<p>С детерминированной точностью вычисляет <a href="https://ru.wikipedia.org/wiki/Квантиль" rel="external nofollow noreferrer" target="_blank">квантиль</a> числовой последовательности, учитывая вес каждого элемента.</p>
<p>Результат детерминирован (не зависит от порядка обработки запроса). Функция оптимизирована для работы с последовательностями, описывающими такие распределения, как время загрузки веб-страниц или время отклика бэкенда.</p>
<p>Внутренние состояния функций <code class="syntax">quantile*</code> не объединяются, если они используются в одном запросе. Если вам необходимо вычислить квантили нескольких уровней, используйте функцию <a href="#quantiles">quantiles</a>, это повысит эффективность запроса.</p>
<p><strong>Синтаксис</strong></p>
<div class="codehilite"><pre><span></span><code class="syntax"><span class="n">quantileTimingWeighted</span><span class="p">(</span><span class="k">level</span><span class="p">)(</span><span class="n">expr</span><span class="p">,</span> <span class="n">weight</span><span class="p">)</span>
</code></pre></div>
<p>Алиас: <code class="syntax">medianTimingWeighted</code>.</p>
<p><strong>Параметры</strong></p>
<ul>
<li>
<p><code class="syntax">level</code> — Уровень квантили. Опционально. Константное значение с плавающей запятой от 0 до 1. Мы рекомендуем использовать значение <code class="syntax">level</code> из диапазона <code class="syntax">[0.01, 0.99]</code>. Значение по умолчанию: 0.5. При <code class="syntax">level=0.5</code> функция вычисляет <a href="https://ru.wikipedia.org/wiki/Медиана_(статистика)" rel="external nofollow noreferrer" target="_blank">медиану</a>.</p>
</li>
<li>
<p><code class="syntax">expr</code> — <a href="../../syntax/#syntax-expressions">Выражение</a> над значения столбца, которые возвращают данные типа <a href="./">Float*</a>.</p>
<div class="codehilite"><pre><span></span><code class="syntax"><span class="err">- Если в функцию передать отрицательные значения, то её поведение не определено.</span>
<span class="err">- Если значение больше, чем 30 000 (например, время загрузки страницы превышает 30 секунд), то оно приравнивается к 30 000.</span>
</code></pre></div>
</li>
<li>
<p><code class="syntax">weight</code> — Столбец с весам элементов последовательности. Вес — это количество повторений элемента в последовательности.</p>
</li>
</ul>
<p><strong>Точность</strong></p>
<p>Вычисления точны при соблюдении следующих условий:</p>
<ul>
<li>Размер выборки не превышает 5670 элементов.</li>
<li>Размер выборки превышает 5670 элементов, но значение каждого элемента не больше 1024.</li>
</ul>
<p>В противном случае, результат вычисления округляется до ближайшего множителя числа 16.</p>
<div class="admonition note alert pb-0 mb-4 alert-primary" role="alert">
<p class="admonition-title alert-heading display-6 mb-2">Примечание</p>
<p>Для указанного типа последовательностей функция производительнее и точнее, чем <a class="alert-link" href="#quantile">quantile</a>.</p>
</div>
<p><strong>Возвращаемое значение</strong></p>
<ul>
<li>Квантиль заданного уровня.</li>
</ul>
<p>Тип: <code class="syntax">Float32</code>.</p>
<div class="admonition note alert pb-0 mb-4 alert-primary" role="alert">
<p class="admonition-title alert-heading display-6 mb-2">Примечания</p>
<p>Если в функцию <code class="syntax">quantileTimingIf</code> не передать значений, то вернётся <a class="alert-link" href="./#data_type-float-nan-inf">NaN</a>. Это необходимо для отделения подобных случаев от случаев, когда результат 0. Подробности про сортировку <code class="syntax">NaN</code> cмотрите в разделе <a class="alert-link" href="../../statements/select/order-by/#select-order-by">Секция ORDER BY</a>.</p>
</div>
<p><strong>Пример</strong></p>
<p>Входная таблица:</p>
<div class="codehilite"><pre><span></span><code class="syntax">┌─response_time─┬─weight─┐
│            68 │      1 │
│           104 │      2 │
│           112 │      3 │
│           126 │      2 │
│           138 │      1 │
│           162 │      1 │
└───────────────┴────────┘
</code></pre></div>
<p>Запрос:</p>
<div class="codehilite"><pre><span></span><code class="syntax"><span class="k">SELECT</span> <span class="n">quantileTimingWeighted</span><span class="p">(</span><span class="n">response_time</span><span class="p">,</span> <span class="n">weight</span><span class="p">)</span> <span class="k">FROM</span> <span class="n">t</span>
</code></pre></div>
<p>Результат:</p>
<div class="codehilite"><pre><span></span><code class="syntax">┌─quantileTimingWeighted(response_time, weight)─┐
│                                           112 │
└───────────────────────────────────────────────┘
</code></pre></div>
<p><strong>Смотрите также</strong></p>
<ul>
<li><a href="#median">median</a></li>
<li><a href="#quantiles">quantiles</a></li>
</ul>
<h2 id="quantiletdigest">quantileTDigest<a class="headerlink" href="#quantiletdigest" title="Permanent link"> </a></h2>
<p>Приблизительно вычисляет <a href="https://ru.wikipedia.org/wiki/Квантиль" rel="external nofollow noreferrer" target="_blank">квантиль</a> числовой последовательности, используя алгоритм <a href="https://github.com/tdunning/t-digest/blob/master/docs/t-digest-paper/histo.pdf" rel="external nofollow noreferrer" target="_blank">t-digest</a>.</p>
<p>Максимальная ошибка 1%. Потребление памяти — <code class="syntax">log(n)</code>, где <code class="syntax">n</code> — число значений. Результат не детерминирован и зависит от порядка выполнения запроса.</p>
<p>Производительность функции ниже, чем производительность функции <a href="#quantile">quantile</a> или <a href="#quantiletiming">quantileTiming</a>. По соотношению размера состояния к точности вычисления, эта функция значительно превосходит <code class="syntax">quantile</code>.</p>
<p>Внутренние состояния функций <code class="syntax">quantile*</code> не объединяются, если они используются в одном запросе. Если вам необходимо вычислить квантили нескольких уровней, используйте функцию <a href="#quantiles">quantiles</a>, это повысит эффективность запроса.</p>
<p><strong>Синтаксис</strong></p>
<div class="codehilite"><pre><span></span><code class="syntax"><span class="n">quantileTDigest</span><span class="p">(</span><span class="k">level</span><span class="p">)(</span><span class="n">expr</span><span class="p">)</span>
</code></pre></div>
<p>Алиас: <code class="syntax">medianTDigest</code>.</p>
<p><strong>Параметры</strong></p>
<ul>
<li><code class="syntax">level</code> — Уровень квантили. Опционально. Константное значение с плавающей запятой от 0 до 1. Мы рекомендуем использовать значение <code class="syntax">level</code> из диапазона <code class="syntax">[0.01, 0.99]</code>. Значение по умолчанию: 0.5. При <code class="syntax">level=0.5</code> функция вычисляет <a href="https://ru.wikipedia.org/wiki/Медиана_(статистика)" rel="external nofollow noreferrer" target="_blank">медиану</a>.</li>
<li><code class="syntax">expr</code> — Выражение над значениями столбца, которое возвращает данные <a href="./#data_types">числовых типов</a> или типов <a href="./">Date</a>, <a href="./">DateTime</a>.</li>
</ul>
<p><strong>Возвращаемое значение</strong></p>
<ul>
<li>Приблизительную квантиль заданного уровня.</li>
</ul>
<p>Тип:</p>
<ul>
<li><a href="./">Float64</a> для входных данных числового типа.</li>
<li><a href="./">Date</a> если входные значения имеют тип <code class="syntax">Date</code>.</li>
<li><a href="./">DateTime</a> если входные значения имеют тип <code class="syntax">DateTime</code>.</li>
</ul>
<p><strong>Пример</strong></p>
<p>Запрос:</p>
<div class="codehilite"><pre><span></span><code class="syntax"><span class="k">SELECT</span> <span class="n">quantileTDigest</span><span class="p">(</span><span class="nb">number</span><span class="p">)</span> <span class="k">FROM</span> <span class="n">numbers</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</code></pre></div>
<p>Результат:</p>
<div class="codehilite"><pre><span></span><code class="syntax">┌─quantileTDigest(number)─┐
│                     4.5 │
└─────────────────────────┘
</code></pre></div>
<p><strong>Смотрите также</strong></p>
<ul>
<li><a href="#median">median</a></li>
<li><a href="#quantiles">quantiles</a></li>
</ul>
<h2 id="quantiletdigestweighted">quantileTDigestWeighted<a class="headerlink" href="#quantiletdigestweighted" title="Permanent link"> </a></h2>
<p>Приблизительно вычисляет <a href="https://ru.wikipedia.org/wiki/Квантиль" rel="external nofollow noreferrer" target="_blank">квантиль</a> числовой последовательности, используя алгоритм <a href="https://github.com/tdunning/t-digest/blob/master/docs/t-digest-paper/histo.pdf" rel="external nofollow noreferrer" target="_blank">t-digest</a>. Функция учитывает вес каждого элемента последовательности.</p>
<p>Максимальная ошибка 1%. Потребление памяти — <code class="syntax">log(n)</code>, где <code class="syntax">n</code> — число значений. Результат не детерминирован и зависит от порядка выполнения запроса.</p>
<p>Производительность функции ниже, чем производительность функции <a href="#quantile">quantile</a> или <a href="#quantiletiming">quantileTiming</a>. По соотношению размера состояния к точности вычисления, эта функция значительно превосходит <code class="syntax">quantile</code>.</p>
<p>Внутренние состояния функций <code class="syntax">quantile*</code> не объединяются, если они используются в одном запросе. Если вам необходимо вычислить квантили нескольких уровней, используйте функцию <a href="#quantiles">quantiles</a>, это повысит эффективность запроса.</p>
<p><strong>Синтаксис</strong></p>
<div class="codehilite"><pre><span></span><code class="syntax"><span class="n">quantileTDigestWeighted</span><span class="p">(</span><span class="k">level</span><span class="p">)(</span><span class="n">expr</span><span class="p">,</span> <span class="n">weight</span><span class="p">)</span>
</code></pre></div>
<p>Алиас: <code class="syntax">medianTDigest</code>.</p>
<p><strong>Параметры</strong></p>
<ul>
<li><code class="syntax">level</code> — Уровень квантили. Опционально. Константное значение с плавающей запятой от 0 до 1. Мы рекомендуем использовать значение <code class="syntax">level</code> из диапазона <code class="syntax">[0.01, 0.99]</code>. Значение по умолчанию: 0.5. При <code class="syntax">level=0.5</code> функция вычисляет <a href="https://ru.wikipedia.org/wiki/Медиана_(статистика)" rel="external nofollow noreferrer" target="_blank">медиану</a>.</li>
<li><code class="syntax">expr</code> — Выражение над значениями столбца, которое возвращает данные <a href="./#data_types">числовых типов</a> или типов <a href="./">Date</a>, <a href="./">DateTime</a>.</li>
<li><code class="syntax">weight</code> — Столбец с весам элементов последовательности. Вес — это количество повторений элемента в последовательности.</li>
</ul>
<p><strong>Возвращаемое значение</strong></p>
<ul>
<li>Приблизительный квантиль заданного уровня.</li>
</ul>
<p>Тип:</p>
<ul>
<li><a href="./">Float64</a> для входных данных числового типа.</li>
<li><a href="./">Date</a> если входные значения имеют тип <code class="syntax">Date</code>.</li>
<li><a href="./">DateTime</a> если входные значения имеют тип <code class="syntax">DateTime</code>.</li>
</ul>
<p><strong>Пример</strong></p>
<p>Запрос:</p>
<div class="codehilite"><pre><span></span><code class="syntax"><span class="k">SELECT</span> <span class="n">quantileTDigestWeighted</span><span class="p">(</span><span class="nb">number</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="k">FROM</span> <span class="n">numbers</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</code></pre></div>
<p>Результат:</p>
<div class="codehilite"><pre><span></span><code class="syntax">┌─quantileTDigestWeighted(number, 1)─┐
│                                4.5 │
└────────────────────────────────────┘
</code></pre></div>
<p><strong>Смотрите также</strong></p>
<ul>
<li><a href="#median">median</a></li>
<li><a href="#quantiles">quantiles</a></li>
</ul>
<h2 id="median">median<a class="headerlink" href="#median" title="Permanent link"> </a></h2>
<p>Функции <code class="syntax">median*</code> — алиасы для соответствущих функций <code class="syntax">quantile*</code>. Они вычисляют медиану числовой последовательности.</p>
<p>Functions:</p>
<ul>
<li><code class="syntax">median</code> — алиас <a href="#quantile">quantile</a>.</li>
<li><code class="syntax">medianDeterministic</code> — алиас <a href="#quantiledeterministic">quantileDeterministic</a>.</li>
<li><code class="syntax">medianExact</code> — алиас <a href="#quantileexact">quantileExact</a>.</li>
<li><code class="syntax">medianExactWeighted</code> — алиас <a href="#quantileexactweighted">quantileExactWeighted</a>.</li>
<li><code class="syntax">medianTiming</code> — алиас <a href="#quantiletiming">quantileTiming</a>.</li>
<li><code class="syntax">medianTimingWeighted</code> — алиас <a href="#quantiletimingweighted">quantileTimingWeighted</a>.</li>
<li><code class="syntax">medianTDigest</code> — алиас <a href="#quantiletdigest">quantileTDigest</a>.</li>
<li><code class="syntax">medianTDigestWeighted</code> — алиас <a href="#quantiletdigestweighted">quantileTDigestWeighted</a>.</li>
</ul>
<p><strong>Пример</strong></p>
<p>Входная таблица:</p>
<div class="codehilite"><pre><span></span><code class="syntax">┌─val─┐
│   1 │
│   1 │
│   2 │
│   3 │
└─────┘
</code></pre></div>
<p>Запрос:</p>
<div class="codehilite"><pre><span></span><code class="syntax"><span class="k">SELECT</span> <span class="n">medianDeterministic</span><span class="p">(</span><span class="n">val</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="k">FROM</span> <span class="n">t</span>
</code></pre></div>
<p>Результат:</p>
<div class="codehilite"><pre><span></span><code class="syntax">┌─medianDeterministic(val, 1)─┐
│                         1.5 │
└─────────────────────────────┘
</code></pre></div>
<h2 id="quantiles">quantiles(level1, level2, …)(x)<a class="headerlink" href="#quantiles" title="Permanent link"> </a></h2>
<p>Для всех quantile-функций, также присутствуют соответствующие quantiles-функции: <code class="syntax">quantiles</code>, <code class="syntax">quantilesDeterministic</code>, <code class="syntax">quantilesTiming</code>, <code class="syntax">quantilesTimingWeighted</code>, <code class="syntax">quantilesExact</code>, <code class="syntax">quantilesExactWeighted</code>, <code class="syntax">quantilesTDigest</code>. Эти функции за один проход вычисляют все квантили перечисленных уровней и возвращают массив вычисленных значений.</p>
<h2 id="varsampx">varSamp(x)<a class="headerlink" href="#varsampx" title="Permanent link"> </a></h2>
<p>Вычисляет величину <code class="syntax">Σ((x - x̅)^2) / (n - 1)</code>, где <code class="syntax">n</code> - размер выборки, <code class="syntax">x̅</code>- среднее значение <code class="syntax">x</code>.</p>
<p>Она представляет собой несмещённую оценку дисперсии случайной величины, если переданные в функцию значения являются выборкой этой случайной величины.</p>
<p>Возвращает <code class="syntax">Float64</code>. В случае, когда <code class="syntax">n &lt;= 1</code>, возвращается <code class="syntax">+∞</code>.</p>
<div class="admonition note alert pb-0 mb-4 alert-primary" role="alert">
<p class="admonition-title alert-heading display-6 mb-2">Примечание</p>
<p>Функция использует вычислительно неустойчивый алгоритм. Если для ваших расчётов необходима <a class="alert-link" href="https://ru.wikipedia.org/wiki/Вычислительная_устойчивость" rel="external nofollow noreferrer" target="_blank">вычислительная устойчивость</a>, используйте функцию <code class="syntax">varSampStable</code>. Она работает медленнее, но обеспечиват меньшую вычислительную ошибку.</p>
</div>
<h2 id="varpopx">varPop(x)<a class="headerlink" href="#varpopx" title="Permanent link"> </a></h2>
<p>Вычисляет величину <code class="syntax">Σ((x - x̅)^2) / n</code>, где <code class="syntax">n</code> - размер выборки, <code class="syntax">x̅</code>- среднее значение <code class="syntax">x</code>.</p>
<p>То есть, дисперсию для множества значений. Возвращает <code class="syntax">Float64</code>.</p>
<div class="admonition note alert pb-0 mb-4 alert-primary" role="alert">
<p class="admonition-title alert-heading display-6 mb-2">Примечание</p>
<p>Функция использует вычислительно неустойчивый алгоритм. Если для ваших расчётов необходима <a class="alert-link" href="https://ru.wikipedia.org/wiki/Вычислительная_устойчивость" rel="external nofollow noreferrer" target="_blank">вычислительная устойчивость</a>, используйте функцию <code class="syntax">varPopStable</code>. Она работает медленнее, но обеспечивает меньшую вычислительную ошибку.</p>
</div>
<h2 id="stddevsampx">stddevSamp(x)<a class="headerlink" href="#stddevsampx" title="Permanent link"> </a></h2>
<p>Результат равен квадратному корню от <code class="syntax">varSamp(x)</code>.</p>
<div class="admonition note alert pb-0 mb-4 alert-primary" role="alert">
<p class="admonition-title alert-heading display-6 mb-2">Примечание</p>
<p>Функция использует вычислительно неустойчивый алгоритм. Если для ваших расчётов необходима <a class="alert-link" href="https://ru.wikipedia.org/wiki/Вычислительная_устойчивость" rel="external nofollow noreferrer" target="_blank">вычислительная устойчивость</a>, используйте функцию <code class="syntax">stddevSampStable</code>. Она работает медленнее, но обеспечивает меньшую вычислительную ошибку.</p>
</div>
<h2 id="stddevpopx">stddevPop(x)<a class="headerlink" href="#stddevpopx" title="Permanent link"> </a></h2>
<p>Результат равен квадратному корню от <code class="syntax">varPop(x)</code>.</p>
<div class="admonition note alert pb-0 mb-4 alert-primary" role="alert">
<p class="admonition-title alert-heading display-6 mb-2">Примечание</p>
<p>Функция использует вычислительно неустойчивый алгоритм. Если для ваших расчётов необходима <a class="alert-link" href="https://ru.wikipedia.org/wiki/Вычислительная_устойчивость" rel="external nofollow noreferrer" target="_blank">вычислительная устойчивость</a>, используйте функцию <code class="syntax">stddevPopStable</code>. Она работает медленнее, но обеспечивает меньшую вычислительную ошибку.</p>
</div>
<h2 id="topkncolumn">topK(N)(column)<a class="headerlink" href="#topkncolumn" title="Permanent link"> </a></h2>
<p>Возвращает массив наиболее часто встречающихся значений в указанном столбце. Результирующий массив упорядочен по убыванию частоты значения (не по самим значениям).</p>
<p>Реализует <a href="http://www.l2f.inesc-id.pt/~fmmb/wiki/uploads/Work/misnis.ref0a.pdf" rel="external nofollow noreferrer" target="_blank">Filtered Space-Saving</a> алгоритм для анализа TopK, на основе reduce-and-combine алгоритма из методики <a href="https://arxiv.org/pdf/1401.0702.pdf" rel="external nofollow noreferrer" target="_blank">Parallel Space Saving</a>.</p>
<div class="codehilite"><pre><span></span><code class="syntax"><span class="n">topK</span><span class="p">(</span><span class="n">N</span><span class="p">)(</span><span class="k">column</span><span class="p">)</span>
</code></pre></div>
<p>Функция не дает гарантированного результата. В некоторых ситуациях могут возникать ошибки, и функция возвращает частые, но не наиболее частые значения.</p>
<p>Рекомендуем использовать значения <code class="syntax">N &lt; 10</code>, при больших <code class="syntax">N</code> снижается производительность. Максимально возможное значение <code class="syntax">N = 65536</code>.</p>
<p><strong>Аргументы</strong></p>
<ul>
<li>‘N’ - Количество значений.</li>
<li>‘x’ – Столбец.</li>
</ul>
<p><strong>Пример</strong></p>
<p>Возьмём набор данных <a href="../../../getting-started/example-datasets/ontime/">OnTime</a> и выберем 3 наиболее часто встречающихся значения в столбце <code class="syntax">AirlineID</code>.</p>
<div class="codehilite"><pre><span></span><code class="syntax"><span class="k">SELECT</span> <span class="n">topK</span><span class="p">(</span><span class="mi">3</span><span class="p">)(</span><span class="n">AirlineID</span><span class="p">)</span> <span class="k">AS</span> <span class="n">res</span>
<span class="k">FROM</span> <span class="n">ontime</span>
</code></pre></div>
<div class="codehilite"><pre><span></span><code class="syntax">┌─res─────────────────┐
│ [19393,19790,19805] │
└─────────────────────┘
</code></pre></div>
<h2 id="topkweighted">topKWeighted<a class="headerlink" href="#topkweighted" title="Permanent link"> </a></h2>
<p>Аналогична <code class="syntax">topK</code>, но дополнительно принимает положительный целочисленный параметр <code class="syntax">weight</code>. Каждое значение учитывается <code class="syntax">weight</code> раз при расчёте частоты.</p>
<p><strong>Синтаксис</strong></p>
<div class="codehilite"><pre><span></span><code class="syntax"><span class="n">topKWeighted</span><span class="p">(</span><span class="n">N</span><span class="p">)(</span><span class="n">x</span><span class="p">,</span> <span class="n">weight</span><span class="p">)</span>
</code></pre></div>
<p><strong>Параметры</strong></p>
<ul>
<li><code class="syntax">N</code> — Количество элементов для выдачи.</li>
</ul>
<p><strong>Аргументы</strong></p>
<ul>
<li><code class="syntax">x</code> – значение.</li>
<li><code class="syntax">weight</code> — вес. <a href="./">UInt8</a>.</li>
</ul>
<p><strong>Возвращаемое значение</strong></p>
<p>Возвращает массив значений с максимально приближенной суммой весов.</p>
<p><strong>Пример</strong></p>
<p>Запрос:</p>
<div class="codehilite"><pre><span></span><code class="syntax"><span class="k">SELECT</span> <span class="n">topKWeighted</span><span class="p">(</span><span class="mi">10</span><span class="p">)(</span><span class="nb">number</span><span class="p">,</span> <span class="nb">number</span><span class="p">)</span> <span class="k">FROM</span> <span class="n">numbers</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span>
</code></pre></div>
<p>Результат:</p>
<div class="codehilite"><pre><span></span><code class="syntax">┌─topKWeighted(10)(number, number)──────────┐
│ [999,998,997,996,995,994,993,992,991,990] │
└───────────────────────────────────────────┘
</code></pre></div>
<h2 id="covarsampx-y">covarSamp(x, y)<a class="headerlink" href="#covarsampx-y" title="Permanent link"> </a></h2>
<p>Вычисляет величину <code class="syntax">Σ((x - x̅)(y - y̅)) / (n - 1)</code>.</p>
<p>Возвращает Float64. В случае, когда <code class="syntax">n &lt;= 1</code>, возвращается +∞.</p>
<div class="admonition note alert pb-0 mb-4 alert-primary" role="alert">
<p class="admonition-title alert-heading display-6 mb-2">Примечание</p>
<p>Функция использует вычислительно неустойчивый алгоритм. Если для ваших расчётов необходима <a class="alert-link" href="https://ru.wikipedia.org/wiki/Вычислительная_устойчивость" rel="external nofollow noreferrer" target="_blank">вычислительная устойчивость</a>, используйте функцию <code class="syntax">covarSampStable</code>. Она работает медленнее, но обеспечивает меньшую вычислительную ошибку.</p>
</div>
<h2 id="covarpopx-y">covarPop(x, y)<a class="headerlink" href="#covarpopx-y" title="Permanent link"> </a></h2>
<p>Вычисляет величину <code class="syntax">Σ((x - x̅)(y - y̅)) / n</code>.</p>
<div class="admonition note alert pb-0 mb-4 alert-primary" role="alert">
<p class="admonition-title alert-heading display-6 mb-2">Примечание</p>
<p>Функция использует вычислительно неустойчивый алгоритм. Если для ваших расчётов необходима <a class="alert-link" href="https://ru.wikipedia.org/wiki/Вычислительная_устойчивость" rel="external nofollow noreferrer" target="_blank">вычислительная устойчивость</a>, используйте функцию <code class="syntax">covarPopStable</code>. Она работает медленнее, но обеспечивает меньшую вычислительную ошибку.</p>
</div>
<h2 id="corrx-y">corr(x, y)<a class="headerlink" href="#corrx-y" title="Permanent link"> </a></h2>
<p>Вычисляет коэффициент корреляции Пирсона: <code class="syntax">Σ((x - x̅)(y - y̅)) / sqrt(Σ((x - x̅)^2) * Σ((y - y̅)^2))</code>.</p>
<div class="admonition note alert pb-0 mb-4 alert-primary" role="alert">
<p class="admonition-title alert-heading display-6 mb-2">Примечание</p>
<p>Функция использует вычислительно неустойчивый алгоритм. Если для ваших расчётов необходима <a class="alert-link" href="https://ru.wikipedia.org/wiki/Вычислительная_устойчивость" rel="external nofollow noreferrer" target="_blank">вычислительная устойчивость</a>, используйте функцию <code class="syntax">corrStable</code>. Она работает медленнее, но обеспечивает меньшую вычислительную ошибку.</p>
</div>
<h2 id="simplelinearregression">simpleLinearRegression<a class="headerlink" href="#simplelinearregression" title="Permanent link"> </a></h2>
<p>Выполняет простую (одномерную) линейную регрессию.</p>
<div class="codehilite"><pre><span></span><code class="syntax"><span class="n">simpleLinearRegression</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
</code></pre></div>
<p>Параметры:</p>
<ul>
<li><code class="syntax">x</code> — столбец со значениями зависимой переменной.</li>
<li><code class="syntax">y</code> — столбец со значениями наблюдаемой переменной.</li>
</ul>
<p>Возвращаемые значения:</p>
<p>Константы <code class="syntax">(a, b)</code> результирующей прямой <code class="syntax">y = a*x + b</code>.</p>
<p><strong>Примеры</strong></p>
<div class="codehilite"><pre><span></span><code class="syntax"><span class="k">SELECT</span> <span class="n">arrayReduce</span><span class="p">(</span><span class="s1">'simpleLinearRegression'</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
</code></pre></div>
<div class="codehilite"><pre><span></span><code class="syntax">┌─arrayReduce('simpleLinearRegression', [0, 1, 2, 3], [0, 1, 2, 3])─┐
│ (1,0)                                                             │
└───────────────────────────────────────────────────────────────────┘
</code></pre></div>
<div class="codehilite"><pre><span></span><code class="syntax"><span class="k">SELECT</span> <span class="n">arrayReduce</span><span class="p">(</span><span class="s1">'simpleLinearRegression'</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">])</span>
</code></pre></div>
<div class="codehilite"><pre><span></span><code class="syntax">┌─arrayReduce('simpleLinearRegression', [0, 1, 2, 3], [3, 4, 5, 6])─┐
│ (1,3)                                                             │
└───────────────────────────────────────────────────────────────────┘
</code></pre></div>
<h2 id="agg_functions-stochasticlinearregression">stochasticLinearRegression<a class="headerlink" href="#agg_functions-stochasticlinearregression" title="Permanent link"> </a></h2>
<p>Функция реализует стохастическую линейную регрессию. Поддерживает пользовательские параметры для скорости обучения, коэффициента регуляризации L2, размера mini-batch и имеет несколько методов обновления весов (<a href="https://en.wikipedia.org/wiki/Stochastic_gradient_descent#Adam" rel="external nofollow noreferrer" target="_blank">Adam</a> (по умолчанию), <a href="https://en.wikipedia.org/wiki/Stochastic_gradient_descent" rel="external nofollow noreferrer" target="_blank">simple SGD</a>, <a href="https://en.wikipedia.org/wiki/Stochastic_gradient_descent#Momentum" rel="external nofollow noreferrer" target="_blank">Momentum</a>, <a href="https://mipt.ru/upload/medialibrary/d7e/41-91.pdf" rel="external nofollow noreferrer" target="_blank">Nesterov</a>).</p>
<h3 id="agg_functions-stochasticlinearregression-parameters">Параметры<a class="headerlink" href="#agg_functions-stochasticlinearregression-parameters" title="Permanent link"> </a></h3>
<p>Есть 4 настраиваемых параметра. Они передаются в функцию последовательно, однако не обязательно указывать все, используются значения по умолчанию, однако хорошая модель требует некоторой настройки параметров.</p>
<div class="codehilite"><pre><span></span><code class="syntax">stochasticLinearRegression(1.0, 1.0, 10, 'SGD')
</code></pre></div>
<ol>
<li>Скорость обучения — коэффициент длины шага, при выполнении градиентного спуска. Слишком большая скорость обучения может привести к бесконечным весам модели. По умолчанию <code class="syntax">0.00001</code>.</li>
<li>Коэффициент регуляризации l2. Помогает предотвратить подгонку. По умолчанию <code class="syntax">0.1</code>.</li>
<li>Размер mini-batch задаёт количество элементов, чьи градиенты будут вычислены и просуммированы при выполнении одного шага градиентного спуска. Чистый стохастический спуск использует один элемент, однако использование mini-batch (около 10 элементов) делает градиентные шаги более стабильными. По умолчанию <code class="syntax">15</code>.</li>
<li>Метод обновления весов, можно выбрать один из следующих: <code class="syntax">Adam</code> (по умолчанию), <code class="syntax">SGD</code>, <code class="syntax">Momentum</code>, <code class="syntax">Nesterov</code>. <code class="syntax">Momentum</code> и <code class="syntax">Nesterov</code> более требовательные к вычислительным ресурсам и памяти, однако они имеют высокую скорость схождения и устойчивости методов стохастического градиента.</li>
</ol>
<h3 id="agg_functions-stochasticlinearregression-usage">Использование<a class="headerlink" href="#agg_functions-stochasticlinearregression-usage" title="Permanent link"> </a></h3>
<p><code class="syntax">stochasticLinearRegression</code> используется на двух этапах: построение модели и предсказание новых данных. Чтобы построить модель и сохранить её состояние для дальнейшего использования, мы используем комбинатор <code class="syntax">-State</code>.<br/>
Для прогнозирования мы используем функцию <a href="../../functions/machine-learning-functions/#machine_learning_methods-evalmlmethod">evalMLMethod</a>, которая принимает в качестве аргументов состояние и свойства для прогнозирования.</p>
<p><a name="stochasticlinearregression-usage-fitting"></a></p>
<p><strong>1.</strong> Построение модели</p>
<p>Пример запроса:</p>
<div class="codehilite"><pre><span></span><code class="syntax"><span class="k">CREATE</span> <span class="k">TABLE</span> <span class="k">IF</span> <span class="k">NOT</span> <span class="k">EXISTS</span> <span class="n">train_data</span>
<span class="p">(</span>
    <span class="n">param1</span> <span class="n">Float64</span><span class="p">,</span>
    <span class="n">param2</span> <span class="n">Float64</span><span class="p">,</span>
    <span class="n">target</span> <span class="n">Float64</span>
<span class="p">)</span> <span class="n">ENGINE</span> <span class="o">=</span> <span class="n">Memory</span><span class="p">;</span>

<span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">your_model</span> <span class="n">ENGINE</span> <span class="o">=</span> <span class="n">Memory</span> <span class="k">AS</span> <span class="k">SELECT</span>
<span class="n">stochasticLinearRegressionState</span><span class="p">(</span><span class="mi">0</span><span class="p">.</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">.</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="s1">'SGD'</span><span class="p">)(</span><span class="n">target</span><span class="p">,</span> <span class="n">param1</span><span class="p">,</span> <span class="n">param2</span><span class="p">)</span>
<span class="k">AS</span> <span class="k">state</span> <span class="k">FROM</span> <span class="n">train_data</span><span class="p">;</span>
</code></pre></div>
<p>Здесь нам также нужно вставить данные в таблицу <code class="syntax">train_data</code>. Количество параметров не фиксировано, оно зависит только от количества аргументов, перешедших в <code class="syntax">linearRegressionState</code>. Все они должны быть числовыми значениями.<br/>
Обратите внимание, что столбец с целевым значением (которое мы хотели бы научиться предсказывать) вставляется в качестве первого аргумента.</p>
<p><strong>2.</strong> Прогнозирование</p>
<p>После сохранения состояния в таблице мы можем использовать его несколько раз для прогнозирования или смёржить с другими состояниями и создать новые, улучшенные модели.</p>
<div class="codehilite"><pre><span></span><code class="syntax"><span class="k">WITH</span> <span class="p">(</span><span class="k">SELECT</span> <span class="k">state</span> <span class="k">FROM</span> <span class="n">your_model</span><span class="p">)</span> <span class="k">AS</span> <span class="n">model</span> <span class="k">SELECT</span>
<span class="n">evalMLMethod</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">param1</span><span class="p">,</span> <span class="n">param2</span><span class="p">)</span> <span class="k">FROM</span> <span class="n">test_data</span>
</code></pre></div>
<p>Запрос возвращает столбец прогнозируемых значений. Обратите внимание, что первый аргумент <code class="syntax">evalMLMethod</code> это объект <code class="syntax">AggregateFunctionState</code>, далее идут столбцы свойств.</p>
<p><code class="syntax">test_data</code> — это таблица, подобная <code class="syntax">train_data</code>, но при этом может не содержать целевое значение.</p>
<h3 id="agg_functions-stochasticlinearregression-notes">Примечания<a class="headerlink" href="#agg_functions-stochasticlinearregression-notes" title="Permanent link"> </a></h3>
<ol>
<li>Объединить две модели можно следующим запросом:</li>
</ol>
<!-- -->
<div class="codehilite"><pre><span></span><code class="syntax"><span class="err">``` sql</span>
<span class="err">SELECT state1 + state2 FROM your_models</span>
<span class="err">```</span>
</code></pre></div>
<p>где таблица <code class="syntax">your_models</code> содержит обе модели. Запрос вернёт новый объект <code class="syntax">AggregateFunctionState</code>.</p>
<ol>
<li>Пользователь может получать веса созданной модели для своих целей без сохранения модели, если не использовать комбинатор <code class="syntax">-State</code>.</li>
</ol>
<!-- -->
<div class="codehilite"><pre><span></span><code class="syntax"><span class="err">``` sql</span>
<span class="err">SELECT stochasticLinearRegression(0.01)(target, param1, param2) FROM train_data</span>
<span class="err">```</span>
</code></pre></div>
<p>Подобный запрос строит модель и возвращает её веса, отвечающие параметрам моделей и смещение. Таким образом, в приведенном выше примере запрос вернет столбец с тремя значениями.</p>
<p><strong>Смотрите также</strong></p>
<ul>
<li><a href="#agg_functions-stochasticlogisticregression">stochasticLogisticRegression</a></li>
<li><a href="https://stackoverflow.com/questions/12146914/what-is-the-difference-between-linear-regression-and-logistic-regression" rel="external nofollow noreferrer" target="_blank">Отличие линейной от логистической регрессии.</a></li>
</ul>
<h2 id="agg_functions-stochasticlogisticregression">stochasticLogisticRegression<a class="headerlink" href="#agg_functions-stochasticlogisticregression" title="Permanent link"> </a></h2>
<p>Функция реализует стохастическую логистическую регрессию. Её можно использовать для задачи бинарной классификации, функция поддерживает те же пользовательские параметры, что и stochasticLinearRegression и работает таким же образом.</p>
<h3 id="agg_functions-stochasticlogisticregression-parameters">Параметры<a class="headerlink" href="#agg_functions-stochasticlogisticregression-parameters" title="Permanent link"> </a></h3>
<p>Параметры те же, что и в stochasticLinearRegression:<br/>
<code class="syntax">learning rate</code>, <code class="syntax">l2 regularization coefficient</code>, <code class="syntax">mini-batch size</code>, <code class="syntax">method for updating weights</code>.<br/>
Смотрите раздел <a href="#agg_functions-stochasticlinearregression-parameters">parameters</a>.</p>
<div class="codehilite"><pre><span></span><code class="syntax">stochasticLogisticRegression(1.0, 1.0, 10, 'SGD')
</code></pre></div>
<ol>
<li>Построение модели</li>
</ol>
<!-- -->
<p>Смотрите раздел <code class="syntax">Построение модели</code> в описании <a href="#stochasticlinearregression-usage-fitting">stochasticLinearRegression</a> .</p>
<div class="codehilite"><pre><span></span><code class="syntax"><span class="err">Прогнозируемые метки должны быть в диапазоне \[-1, 1\].</span>
</code></pre></div>
<ol>
<li>Прогнозирование</li>
</ol>
<!-- -->
<p>Используя сохраненное состояние, можно предсказать вероятность наличия у объекта метки <code class="syntax">1</code>.</p>
<div class="codehilite"><pre><span></span><code class="syntax"><span class="err">``` sql</span>
<span class="err">WITH (SELECT state FROM your_model) AS model SELECT</span>
<span class="err">evalMLMethod(model, param1, param2) FROM test_data</span>
<span class="err">```</span>
</code></pre></div>
<p>Запрос возвращает столбец вероятностей. Обратите внимание, что первый аргумент <code class="syntax">evalMLMethod</code> это объект <code class="syntax">AggregateFunctionState</code>, далее идут столбцы свойств.</p>
<p>Мы также можем установить границу вероятности, которая присваивает элементам различные метки.</p>
<div class="codehilite"><pre><span></span><code class="syntax"><span class="err">``` sql</span>
<span class="err">SELECT ans &lt; 1.1 AND ans &gt; 0.5 FROM</span>
<span class="err">(WITH (SELECT state FROM your_model) AS model SELECT</span>
<span class="err">evalMLMethod(model, param1, param2) AS ans FROM test_data)</span>
<span class="err">```</span>
</code></pre></div>
<p>Тогда результатом будут метки.</p>
<p><code class="syntax">test_data</code> — это таблица, подобная <code class="syntax">train_data</code>, но при этом может не содержать целевое значение.</p>
<p><strong>Смотрите также</strong></p>
<ul>
<li><a href="#agg_functions-stochasticlinearregression">stochasticLinearRegression</a></li>
<li><a href="https://moredez.ru/q/51225972/" rel="external nofollow noreferrer" target="_blank">Отличие линейной от логистической регрессии</a></li>
</ul>
<p><a href="https://clickhouse.tech/docs/ru/query_language/agg_functions/reference/" target="_blank">Оригинальная статья</a> <!--hide--></p>
        

        
    </div>

    
<div class="alert alert-light my-3">
  <p class="float-right mb-0">Рейтинг: RATING_VALUE - RATING_COUNT голосов</p>
  <span class="alert-heading display-6">Был ли этот контент полезным?</span>
  <div id="rating-stars" class="display-6 mb-0"
     
     data-titles="['Непригодная', 'Плохая', 'OK', 'Хорошая', 'Отличная']"
     data-documentation="документация"
     
  >RATING_STARS</div>
</div>

<div id="content-footer" class="text-muted pt-3 mb-5">
    <div class="float-md-right">©2016–2020 Yandex LLC</div>
    <div>Собрано из <a href="https://github.com/ClickHouse/ClickHouse/commit/782f2179ce4ad0b9a9c898a5f32557555b59e4d0" rel="external nofollow noreferrer" target="_blank" class="text-reset">782f2179ce</a>, опубликовано <span title="2017-10-25T08:27:09+03:00">2017-10-25</span>, изменено <span title="2020-05-20T08:35:51+03:00">2020-05-20</span>
    
    </div>
</div>

</div>

                
                    <div id="toc" class="col-xl-2 d-none d-xl-block d-print-none p-3 overflow-auto toc-right mb-5">
    
    
        
    
    <nav class="nav flex-column text-wrap">
    
        <label for="toc">Cодержание</label>
    
    
        
        
        <a href="#agg_function-count" title="count" class="nav-link text-wrap d-inline-block w-100">
    count
</a>

    
        
        
        <a href="#agg_function-any" title="any(x)" class="nav-link text-wrap d-inline-block w-100">
    any(x)
</a>

    
        
        
        <a href="#agg_function-anyheavy" title="anyHeavy(x)" class="nav-link text-wrap d-inline-block w-100">
    anyHeavy(x)
</a>

    
        
        
        <a href="#anylastx" title="anyLast(x)" class="nav-link text-wrap d-inline-block w-100">
    anyLast(x)
</a>

    
        
        
        <a href="#groupbitand" title="groupBitAnd" class="nav-link text-wrap d-inline-block w-100">
    groupBitAnd
</a>

    
        
        
        <a href="#groupbitor" title="groupBitOr" class="nav-link text-wrap d-inline-block w-100">
    groupBitOr
</a>

    
        
        
        <a href="#groupbitxor" title="groupBitXor" class="nav-link text-wrap d-inline-block w-100">
    groupBitXor
</a>

    
        
        
        <a href="#groupbitmap" title="groupBitmap" class="nav-link text-wrap d-inline-block w-100">
    groupBitmap
</a>

    
        
        
        <a href="#agg_function-min" title="min(x)" class="nav-link text-wrap d-inline-block w-100">
    min(x)
</a>

    
        
        
        <a href="#agg_function-max" title="max(x)" class="nav-link text-wrap d-inline-block w-100">
    max(x)
</a>

    
        
        
        <a href="#agg-function-argmin" title="argMin(arg, val)" class="nav-link text-wrap d-inline-block w-100">
    argMin(arg, val)
</a>

    
        
        
        <a href="#agg-function-argmax" title="argMax(arg, val)" class="nav-link text-wrap d-inline-block w-100">
    argMax(arg, val)
</a>

    
        
        
        <a href="#agg_function-sum" title="sum(x)" class="nav-link text-wrap d-inline-block w-100">
    sum(x)
</a>

    
        
        
        <a href="#agg_function-sumwithoverflow" title="sumWithOverflow(x)" class="nav-link text-wrap d-inline-block w-100">
    sumWithOverflow(x)
</a>

    
        
        
        <a href="#summapkey-value" title="sumMap(key, value)" class="nav-link text-wrap d-inline-block w-100">
    sumMap(key, value)
</a>

    
        
        
        <a href="#skewpop" title="skewPop" class="nav-link text-wrap d-inline-block w-100">
    skewPop
</a>

    
        
        
        <a href="#skewsamp" title="skewSamp" class="nav-link text-wrap d-inline-block w-100">
    skewSamp
</a>

    
        
        
        <a href="#kurtpop" title="kurtPop" class="nav-link text-wrap d-inline-block w-100">
    kurtPop
</a>

    
        
        
        <a href="#kurtsamp" title="kurtSamp" class="nav-link text-wrap d-inline-block w-100">
    kurtSamp
</a>

    
        
        
        <a href="#agg-function-timeseriesgroupsum" title="timeSeriesGroupSum(uid, timestamp, value)" class="nav-link text-wrap d-inline-block w-100">
    timeSeriesGroupSum(uid, timestamp, value)
</a>

    
        
        
        <a href="#agg-function-timeseriesgroupratesum" title="timeSeriesGroupRateSum(uid, ts, val)" class="nav-link text-wrap d-inline-block w-100">
    timeSeriesGroupRateSum(uid, ts, val)
</a>

    
        
        
        <a href="#agg_function-avg" title="avg(x)" class="nav-link text-wrap d-inline-block w-100">
    avg(x)
</a>

    
        
        
        <a href="#avgweighted" title="avgWeighted" class="nav-link text-wrap d-inline-block w-100">
    avgWeighted
</a>

    
        
        
        <a href="#agg_function-uniq" title="uniq" class="nav-link text-wrap d-inline-block w-100">
    uniq
</a>

    
        
        
        <a href="#agg_function-uniqcombined" title="uniqCombined" class="nav-link text-wrap d-inline-block w-100">
    uniqCombined
</a>

    
        
        
        <a href="#agg_function-uniqcombined64" title="uniqCombined64" class="nav-link text-wrap d-inline-block w-100">
    uniqCombined64
</a>

    
        
        
        <a href="#agg_function-uniqhll12" title="uniqHLL12" class="nav-link text-wrap d-inline-block w-100">
    uniqHLL12
</a>

    
        
        
        <a href="#agg_function-uniqexact" title="uniqExact" class="nav-link text-wrap d-inline-block w-100">
    uniqExact
</a>

    
        
        
        <a href="#agg_function-grouparray" title="groupArray(x), groupArray(max_size)(x)" class="nav-link text-wrap d-inline-block w-100">
    groupArray(x), groupArray(max_size)(x)
</a>

    
        
        
        <a href="#grouparrayinsertat" title="groupArrayInsertAt" class="nav-link text-wrap d-inline-block w-100">
    groupArrayInsertAt
</a>

    
        
        
        <a href="#agg_function-grouparraymovingsum" title="groupArrayMovingSum" class="nav-link text-wrap d-inline-block w-100">
    groupArrayMovingSum
</a>

    
        
        
        <a href="#agg_function-grouparraymovingavg" title="groupArrayMovingAvg" class="nav-link text-wrap d-inline-block w-100">
    groupArrayMovingAvg
</a>

    
        
        
        <a href="#groupuniqarrayx-groupuniqarraymax-sizex" title="groupUniqArray(x), groupUniqArray(max_size)(x)" class="nav-link text-wrap d-inline-block w-100">
    groupUniqArray(x), groupUniqArray(max_size)(x)
</a>

    
        
        
        <a href="#quantile" title="quantile" class="nav-link text-wrap d-inline-block w-100">
    quantile
</a>

    
        
        
        <a href="#quantiledeterministic" title="quantileDeterministic" class="nav-link text-wrap d-inline-block w-100">
    quantileDeterministic
</a>

    
        
        
        <a href="#quantileexact" title="quantileExact" class="nav-link text-wrap d-inline-block w-100">
    quantileExact
</a>

    
        
        
        <a href="#quantileexactweighted" title="quantileExactWeighted" class="nav-link text-wrap d-inline-block w-100">
    quantileExactWeighted
</a>

    
        
        
        <a href="#quantiletiming" title="quantileTiming" class="nav-link text-wrap d-inline-block w-100">
    quantileTiming
</a>

    
        
        
        <a href="#quantiletimingweighted" title="quantileTimingWeighted" class="nav-link text-wrap d-inline-block w-100">
    quantileTimingWeighted
</a>

    
        
        
        <a href="#quantiletdigest" title="quantileTDigest" class="nav-link text-wrap d-inline-block w-100">
    quantileTDigest
</a>

    
        
        
        <a href="#quantiletdigestweighted" title="quantileTDigestWeighted" class="nav-link text-wrap d-inline-block w-100">
    quantileTDigestWeighted
</a>

    
        
        
        <a href="#median" title="median" class="nav-link text-wrap d-inline-block w-100">
    median
</a>

    
        
        
        <a href="#quantiles" title="quantiles(level1, level2, …)(x)" class="nav-link text-wrap d-inline-block w-100">
    quantiles(level1, level2, …)(x)
</a>

    
        
        
        <a href="#varsampx" title="varSamp(x)" class="nav-link text-wrap d-inline-block w-100">
    varSamp(x)
</a>

    
        
        
        <a href="#varpopx" title="varPop(x)" class="nav-link text-wrap d-inline-block w-100">
    varPop(x)
</a>

    
        
        
        <a href="#stddevsampx" title="stddevSamp(x)" class="nav-link text-wrap d-inline-block w-100">
    stddevSamp(x)
</a>

    
        
        
        <a href="#stddevpopx" title="stddevPop(x)" class="nav-link text-wrap d-inline-block w-100">
    stddevPop(x)
</a>

    
        
        
        <a href="#topkncolumn" title="topK(N)(column)" class="nav-link text-wrap d-inline-block w-100">
    topK(N)(column)
</a>

    
        
        
        <a href="#topkweighted" title="topKWeighted" class="nav-link text-wrap d-inline-block w-100">
    topKWeighted
</a>

    
        
        
        <a href="#covarsampx-y" title="covarSamp(x, y)" class="nav-link text-wrap d-inline-block w-100">
    covarSamp(x, y)
</a>

    
        
        
        <a href="#covarpopx-y" title="covarPop(x, y)" class="nav-link text-wrap d-inline-block w-100">
    covarPop(x, y)
</a>

    
        
        
        <a href="#corrx-y" title="corr(x, y)" class="nav-link text-wrap d-inline-block w-100">
    corr(x, y)
</a>

    
        
        
        <a href="#simplelinearregression" title="simpleLinearRegression" class="nav-link text-wrap d-inline-block w-100">
    simpleLinearRegression
</a>

    
        
        
        <a href="#agg_functions-stochasticlinearregression" title="stochasticLinearRegression" class="nav-link text-wrap d-inline-block w-100">
    stochasticLinearRegression
</a>

<nav id="toc-toc-54" class="nav flex-column pl-2">
    
    
        
        
        <a href="#agg_functions-stochasticlinearregression-parameters" title="Параметры" class="nav-link text-wrap d-inline-block w-100">
    Параметры
</a>

    
        
        
        <a href="#agg_functions-stochasticlinearregression-usage" title="Использование" class="nav-link text-wrap d-inline-block w-100">
    Использование
</a>

    
        
        
        <a href="#agg_functions-stochasticlinearregression-notes" title="Примечания" class="nav-link text-wrap d-inline-block w-100">
    Примечания
</a>

    
</nav>

    
        
        
        <a href="#agg_functions-stochasticlogisticregression" title="stochasticLogisticRegression" class="nav-link text-wrap d-inline-block w-100">
    stochasticLogisticRegression
</a>

<nav id="toc-toc-55" class="nav flex-column pl-2">
    
    
        
        
        <a href="#agg_functions-stochasticlogisticregression-parameters" title="Параметры" class="nav-link text-wrap d-inline-block w-100">
    Параметры
</a>

    
</nav>

    
    </nav>
</div>
                
            </div>
        </div>
    

    

<script async type="text/javascript" src="/js/base.js?js_digest"></script>



<noscript>
    <div><img src="https://mc.yandex.ru/watch/18343495" alt="Yandex"/></div>
</noscript>
</body>
</html>