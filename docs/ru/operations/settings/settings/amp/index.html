










    



    



    



    
    






    <!doctype html>
<html ⚡ lang="ru">
  <head>
    <meta charset="utf-8">
    <script async src="https://cdn.ampproject.org/v0.js"></script>
    <title>Settings | Документация ClickHouse</title>
    <link rel="canonical" href="https://clickhouse.tech/docs/ru/operations/settings/settings/" />
    <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">
    
<script type="application/ld+json">[{
"@context": "http://schema.org",
"@type": "TechArticle",
"headline": "Settings | Документация ClickHouse",
"mainEntityOfPage": "https://clickhouse.tech/docs/ru/operations/settings/settings/",

"datePublished": "2017-03-12T20:58:51+03:00",
"dateModified": "2020-07-03T00:26:55+03:00",

"image": "https://clickhouse.tech/images/logo-209x60.png",
"author": {
  "@type": "Project",
  "name": "ClickHouse"
},
"publisher": {
  "@type": "Organization",
  "name": "Yandex LLC",
  "logo": {
    "@type": "ImageObject",
    "url": "https://clickhouse.tech/images/yandex.png",
    "width": 163,
    "height": 60
  }
}}, {
"@context": "http://schema.org",
"@type": "Episode",
"name": "Settings | Документация ClickHouse",
"aggregateRating": {
  "@type": "AggregateRating",
  "ratingValue": RATING_VALUE,
  "ratingCount": RATING_COUNT
}
}]</script>

    
    <style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>
    <style amp-custom>:root{--blue:#007bff;--indigo:#6610f2;--purple:#6f42c1;--pink:#e83e8c;--red:#dc3545;--orange:#fd7e14;--yellow:#ffc107;--green:#28a745;--teal:#20c997;--cyan:#17a2b8;--white:#fff;--gray:#6c757d;--gray-dark:#343a40;--primary:#007bff;--secondary:#6c757d;--success:#28a745;--info:#17a2b8;--warning:#ffc107;--danger:#dc3545;--light:#f8f9fa;--dark:#343a40;--breakpoint-xs:0;--breakpoint-sm:576px;--breakpoint-md:768px;--breakpoint-lg:992px;--breakpoint-xl:1200px;--font-family-sans-serif:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";--font-family-monospace:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace}*,::after,::before{box-sizing:border-box}html{font-family:sans-serif;line-height:1.15;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent}footer,header{display:block}body{margin:0;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-size:1rem;font-weight:400;line-height:1.5;color:#212529;text-align:left;background-color:#fff}[tabindex="-1"]:focus:not(:focus-visible){outline:0}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:.5rem}p{margin-top:0;margin-bottom:1rem}ol,ul{margin-top:0;margin-bottom:1rem}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}dd{margin-bottom:.5rem;margin-left:0}b,strong{font-weight:bolder}a{color:#007bff;text-decoration:none;background-color:transparent}a:hover{color:#0056b3;text-decoration:underline}a:not([href]){color:inherit;text-decoration:none}a:not([href]):hover{color:inherit;text-decoration:none}code,pre{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:1em}pre{margin-top:0;margin-bottom:1rem;overflow:auto}img{vertical-align:middle;border-style:none}svg{overflow:hidden;vertical-align:middle}table{border-collapse:collapse}input,select{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}input{overflow:visible}select{text-transform:none}select{word-wrap:normal}[type=button],[type=reset],[type=submit]{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled){cursor:pointer}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner{padding:0;border-style:none}input[type=checkbox],input[type=radio]{box-sizing:border-box;padding:0}input[type=date],input[type=datetime-local],input[type=month],input[type=time]{-webkit-appearance:listbox}progress{vertical-align:baseline}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:none}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}output{display:inline-block}[hidden]{display:none}.h1,.h2,.h3,.h4,.h5,.h6,h1,h2,h3,h4,h5,h6{margin-bottom:.5rem;font-weight:500;line-height:1.2}.h1,h1{font-size:2.5rem}.h2,h2{font-size:2rem}.h3,h3{font-size:1.75rem}.h4,h4{font-size:1.5rem}.h5,h5{font-size:1.25rem}.h6,h6{font-size:1rem}.display-1{font-size:6rem;font-weight:300;line-height:1.2}.display-2{font-size:5.5rem;font-weight:300;line-height:1.2}.display-3{font-size:4.5rem;font-weight:300;line-height:1.2}.display-4{font-size:3.5rem;font-weight:300;line-height:1.2}.img-fluid{max-width:100%;height:auto}code{font-size:87.5%;color:#e83e8c;word-wrap:break-word}a>code{color:inherit}pre{display:block;font-size:87.5%;color:#212529}pre code{font-size:inherit;color:inherit;word-break:normal}.container{width:100%;padding-right:15px;padding-left:15px;margin-right:auto;margin-left:auto}@media(min-width:576px){.container{max-width:540px}}@media(min-width:768px){.container{max-width:720px}}@media(min-width:992px){.container{max-width:960px}}@media(min-width:1200px){.container{max-width:1140px}}.container-fluid,.container-lg,.container-md{width:100%;padding-right:15px;padding-left:15px;margin-right:auto;margin-left:auto}@media(min-width:576px){.container{max-width:540px}}@media(min-width:768px){.container,.container-md{max-width:720px}}@media(min-width:992px){.container,.container-lg,.container-md{max-width:960px}}@media(min-width:1200px){.container,.container-lg,.container-md{max-width:1140px}}.row{display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-right:-15px;margin-left:-15px}.col,.col-1,.col-10,.col-11,.col-12,.col-2,.col-3,.col-4,.col-5,.col-6,.col-7,.col-8,.col-9,.col-auto,.col-lg,.col-lg-1,.col-lg-10,.col-lg-11,.col-lg-12,.col-lg-2,.col-lg-3,.col-lg-4,.col-lg-5,.col-lg-6,.col-lg-7,.col-lg-8,.col-lg-9,.col-lg-auto,.col-md,.col-md-1,.col-md-10,.col-md-11,.col-md-12,.col-md-2,.col-md-3,.col-md-4,.col-md-5,.col-md-6,.col-md-7,.col-md-8,.col-md-9,.col-md-auto{position:relative;width:100%;padding-right:15px;padding-left:15px}.col{-ms-flex-preferred-size:0;flex-basis:0;-ms-flex-positive:1;flex-grow:1;max-width:100%}.col-auto{-ms-flex:0 0 auto;flex:0 0 auto;width:auto;max-width:100%}.col-1{-ms-flex:0 0 8.333333%;flex:0 0 8.333333%;max-width:8.333333%}.col-2{-ms-flex:0 0 16.666667%;flex:0 0 16.666667%;max-width:16.666667%}.col-3{-ms-flex:0 0 25%;flex:0 0 25%;max-width:25%}.col-4{-ms-flex:0 0 33.333333%;flex:0 0 33.333333%;max-width:33.333333%}.col-5{-ms-flex:0 0 41.666667%;flex:0 0 41.666667%;max-width:41.666667%}.col-6{-ms-flex:0 0 50%;flex:0 0 50%;max-width:50%}.col-7{-ms-flex:0 0 58.333333%;flex:0 0 58.333333%;max-width:58.333333%}.col-8{-ms-flex:0 0 66.666667%;flex:0 0 66.666667%;max-width:66.666667%}.col-9{-ms-flex:0 0 75%;flex:0 0 75%;max-width:75%}.col-10{-ms-flex:0 0 83.333333%;flex:0 0 83.333333%;max-width:83.333333%}.col-11{-ms-flex:0 0 91.666667%;flex:0 0 91.666667%;max-width:91.666667%}.col-12{-ms-flex:0 0 100%;flex:0 0 100%;max-width:100%}.order-first{-ms-flex-order:-1;order:-1}.order-last{-ms-flex-order:13;order:13}.order-0{-ms-flex-order:0;order:0}.order-1{-ms-flex-order:1;order:1}.order-2{-ms-flex-order:2;order:2}.order-3{-ms-flex-order:3;order:3}.order-4{-ms-flex-order:4;order:4}.order-5{-ms-flex-order:5;order:5}.order-6{-ms-flex-order:6;order:6}.order-7{-ms-flex-order:7;order:7}.order-8{-ms-flex-order:8;order:8}.order-9{-ms-flex-order:9;order:9}.order-10{-ms-flex-order:10;order:10}.order-11{-ms-flex-order:11;order:11}.order-12{-ms-flex-order:12;order:12}@media(min-width:768px){.col-md{-ms-flex-preferred-size:0;flex-basis:0;-ms-flex-positive:1;flex-grow:1;max-width:100%}.col-md-auto{-ms-flex:0 0 auto;flex:0 0 auto;width:auto;max-width:100%}.col-md-1{-ms-flex:0 0 8.333333%;flex:0 0 8.333333%;max-width:8.333333%}.col-md-2{-ms-flex:0 0 16.666667%;flex:0 0 16.666667%;max-width:16.666667%}.col-md-3{-ms-flex:0 0 25%;flex:0 0 25%;max-width:25%}.col-md-4{-ms-flex:0 0 33.333333%;flex:0 0 33.333333%;max-width:33.333333%}.col-md-5{-ms-flex:0 0 41.666667%;flex:0 0 41.666667%;max-width:41.666667%}.col-md-6{-ms-flex:0 0 50%;flex:0 0 50%;max-width:50%}.col-md-7{-ms-flex:0 0 58.333333%;flex:0 0 58.333333%;max-width:58.333333%}.col-md-8{-ms-flex:0 0 66.666667%;flex:0 0 66.666667%;max-width:66.666667%}.col-md-9{-ms-flex:0 0 75%;flex:0 0 75%;max-width:75%}.col-md-10{-ms-flex:0 0 83.333333%;flex:0 0 83.333333%;max-width:83.333333%}.col-md-11{-ms-flex:0 0 91.666667%;flex:0 0 91.666667%;max-width:91.666667%}.col-md-12{-ms-flex:0 0 100%;flex:0 0 100%;max-width:100%}.order-md-first{-ms-flex-order:-1;order:-1}.order-md-last{-ms-flex-order:13;order:13}.order-md-0{-ms-flex-order:0;order:0}.order-md-1{-ms-flex-order:1;order:1}.order-md-2{-ms-flex-order:2;order:2}.order-md-3{-ms-flex-order:3;order:3}.order-md-4{-ms-flex-order:4;order:4}.order-md-5{-ms-flex-order:5;order:5}.order-md-6{-ms-flex-order:6;order:6}.order-md-7{-ms-flex-order:7;order:7}.order-md-8{-ms-flex-order:8;order:8}.order-md-9{-ms-flex-order:9;order:9}.order-md-10{-ms-flex-order:10;order:10}.order-md-11{-ms-flex-order:11;order:11}.order-md-12{-ms-flex-order:12;order:12}}@media(min-width:992px){.col-lg{-ms-flex-preferred-size:0;flex-basis:0;-ms-flex-positive:1;flex-grow:1;max-width:100%}.col-lg-auto{-ms-flex:0 0 auto;flex:0 0 auto;width:auto;max-width:100%}.col-lg-1{-ms-flex:0 0 8.333333%;flex:0 0 8.333333%;max-width:8.333333%}.col-lg-2{-ms-flex:0 0 16.666667%;flex:0 0 16.666667%;max-width:16.666667%}.col-lg-3{-ms-flex:0 0 25%;flex:0 0 25%;max-width:25%}.col-lg-4{-ms-flex:0 0 33.333333%;flex:0 0 33.333333%;max-width:33.333333%}.col-lg-5{-ms-flex:0 0 41.666667%;flex:0 0 41.666667%;max-width:41.666667%}.col-lg-6{-ms-flex:0 0 50%;flex:0 0 50%;max-width:50%}.col-lg-7{-ms-flex:0 0 58.333333%;flex:0 0 58.333333%;max-width:58.333333%}.col-lg-8{-ms-flex:0 0 66.666667%;flex:0 0 66.666667%;max-width:66.666667%}.col-lg-9{-ms-flex:0 0 75%;flex:0 0 75%;max-width:75%}.col-lg-10{-ms-flex:0 0 83.333333%;flex:0 0 83.333333%;max-width:83.333333%}.col-lg-11{-ms-flex:0 0 91.666667%;flex:0 0 91.666667%;max-width:91.666667%}.col-lg-12{-ms-flex:0 0 100%;flex:0 0 100%;max-width:100%}.order-lg-first{-ms-flex-order:-1;order:-1}.order-lg-last{-ms-flex-order:13;order:13}.order-lg-0{-ms-flex-order:0;order:0}.order-lg-1{-ms-flex-order:1;order:1}.order-lg-2{-ms-flex-order:2;order:2}.order-lg-3{-ms-flex-order:3;order:3}.order-lg-4{-ms-flex-order:4;order:4}.order-lg-5{-ms-flex-order:5;order:5}.order-lg-6{-ms-flex-order:6;order:6}.order-lg-7{-ms-flex-order:7;order:7}.order-lg-8{-ms-flex-order:8;order:8}.order-lg-9{-ms-flex-order:9;order:9}.order-lg-10{-ms-flex-order:10;order:10}.order-lg-11{-ms-flex-order:11;order:11}.order-lg-12{-ms-flex-order:12;order:12}}.table{width:100%;margin-bottom:1rem;color:#212529}.table-primary{background-color:#b8daff}.table-warning{background-color:#ffeeba}.table-light{background-color:#fdfdfe}.table-dark{background-color:#c6c8ca}.table-dark{color:#fff;background-color:#343a40}.btn{display:inline-block;font-weight:400;color:#212529;text-align:center;vertical-align:middle;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-color:transparent;border:1px solid transparent;padding:.375rem .75rem;font-size:1rem;line-height:1.5;border-radius:.25rem;transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out}@media(prefers-reduced-motion:reduce){.btn{transition:none}}.btn:hover{color:#212529;text-decoration:none}.btn:focus{outline:0;box-shadow:0 0 0 .2rem rgba(0,123,255,.25)}.btn.disabled,.btn:disabled{opacity:.65}a.btn.disabled{pointer-events:none}.btn-primary{color:#fff;background-color:#007bff;border-color:#007bff}.btn-primary:hover{color:#fff;background-color:#0069d9;border-color:#0062cc}.btn-primary:focus{color:#fff;background-color:#0069d9;border-color:#0062cc;box-shadow:0 0 0 .2rem rgba(38,143,255,.5)}.btn-primary.disabled,.btn-primary:disabled{color:#fff;background-color:#007bff;border-color:#007bff}.btn-primary:not(:disabled):not(.disabled):active{color:#fff;background-color:#0062cc;border-color:#005cbf}.btn-primary:not(:disabled):not(.disabled):active:focus{box-shadow:0 0 0 .2rem rgba(38,143,255,.5)}.btn-warning{color:#212529;background-color:#ffc107;border-color:#ffc107}.btn-warning:hover{color:#212529;background-color:#e0a800;border-color:#d39e00}.btn-warning:focus{color:#212529;background-color:#e0a800;border-color:#d39e00;box-shadow:0 0 0 .2rem rgba(222,170,12,.5)}.btn-warning.disabled,.btn-warning:disabled{color:#212529;background-color:#ffc107;border-color:#ffc107}.btn-warning:not(:disabled):not(.disabled):active{color:#212529;background-color:#d39e00;border-color:#c69500}.btn-warning:not(:disabled):not(.disabled):active:focus{box-shadow:0 0 0 .2rem rgba(222,170,12,.5)}.btn-light{color:#212529;background-color:#f8f9fa;border-color:#f8f9fa}.btn-light:hover{color:#212529;background-color:#e2e6ea;border-color:#dae0e5}.btn-light:focus{color:#212529;background-color:#e2e6ea;border-color:#dae0e5;box-shadow:0 0 0 .2rem rgba(216,217,219,.5)}.btn-light.disabled,.btn-light:disabled{color:#212529;background-color:#f8f9fa;border-color:#f8f9fa}.btn-light:not(:disabled):not(.disabled):active{color:#212529;background-color:#dae0e5;border-color:#d3d9df}.btn-light:not(:disabled):not(.disabled):active:focus{box-shadow:0 0 0 .2rem rgba(216,217,219,.5)}.btn-dark{color:#fff;background-color:#343a40;border-color:#343a40}.btn-dark:hover{color:#fff;background-color:#23272b;border-color:#1d2124}.btn-dark:focus{color:#fff;background-color:#23272b;border-color:#1d2124;box-shadow:0 0 0 .2rem rgba(82,88,93,.5)}.btn-dark.disabled,.btn-dark:disabled{color:#fff;background-color:#343a40;border-color:#343a40}.btn-dark:not(:disabled):not(.disabled):active{color:#fff;background-color:#1d2124;border-color:#171a1d}.btn-dark:not(:disabled):not(.disabled):active:focus{box-shadow:0 0 0 .2rem rgba(82,88,93,.5)}.btn-outline-primary{color:#007bff;border-color:#007bff}.btn-outline-primary:hover{color:#fff;background-color:#007bff;border-color:#007bff}.btn-outline-primary:focus{box-shadow:0 0 0 .2rem rgba(0,123,255,.5)}.btn-outline-primary.disabled,.btn-outline-primary:disabled{color:#007bff;background-color:transparent}.btn-outline-primary:not(:disabled):not(.disabled):active{color:#fff;background-color:#007bff;border-color:#007bff}.btn-outline-primary:not(:disabled):not(.disabled):active:focus{box-shadow:0 0 0 .2rem rgba(0,123,255,.5)}.btn-outline-warning{color:#ffc107;border-color:#ffc107}.btn-outline-warning:hover{color:#212529;background-color:#ffc107;border-color:#ffc107}.btn-outline-warning:focus{box-shadow:0 0 0 .2rem rgba(255,193,7,.5)}.btn-outline-warning.disabled,.btn-outline-warning:disabled{color:#ffc107;background-color:transparent}.btn-outline-warning:not(:disabled):not(.disabled):active{color:#212529;background-color:#ffc107;border-color:#ffc107}.btn-outline-warning:not(:disabled):not(.disabled):active:focus{box-shadow:0 0 0 .2rem rgba(255,193,7,.5)}.btn-outline-light{color:#f8f9fa;border-color:#f8f9fa}.btn-outline-light:hover{color:#212529;background-color:#f8f9fa;border-color:#f8f9fa}.btn-outline-light:focus{box-shadow:0 0 0 .2rem rgba(248,249,250,.5)}.btn-outline-light.disabled,.btn-outline-light:disabled{color:#f8f9fa;background-color:transparent}.btn-outline-light:not(:disabled):not(.disabled):active{color:#212529;background-color:#f8f9fa;border-color:#f8f9fa}.btn-outline-light:not(:disabled):not(.disabled):active:focus{box-shadow:0 0 0 .2rem rgba(248,249,250,.5)}.btn-outline-dark{color:#343a40;border-color:#343a40}.btn-outline-dark:hover{color:#fff;background-color:#343a40;border-color:#343a40}.btn-outline-dark:focus{box-shadow:0 0 0 .2rem rgba(52,58,64,.5)}.btn-outline-dark.disabled,.btn-outline-dark:disabled{color:#343a40;background-color:transparent}.btn-outline-dark:not(:disabled):not(.disabled):active{color:#fff;background-color:#343a40;border-color:#343a40}.btn-outline-dark:not(:disabled):not(.disabled):active:focus{box-shadow:0 0 0 .2rem rgba(52,58,64,.5)}.btn-link{font-weight:400;color:#007bff;text-decoration:none}.btn-link:hover{color:#0056b3;text-decoration:underline}.btn-link:focus{text-decoration:underline;box-shadow:none}.btn-link.disabled,.btn-link:disabled{color:#6c757d;pointer-events:none}.btn-group-lg>.btn,.btn-lg{padding:.5rem 1rem;font-size:1.25rem;line-height:1.5;border-radius:.3rem}.btn-block{display:block;width:100%}.btn-block+.btn-block{margin-top:.5rem}input[type=button].btn-block,input[type=reset].btn-block,input[type=submit].btn-block{width:100%}.btn-group{position:relative;display:-ms-inline-flexbox;display:inline-flex;vertical-align:middle}.btn-group>.btn{position:relative;-ms-flex:1 1 auto;flex:1 1 auto}.btn-group>.btn:hover{z-index:1}.btn-group>.btn:active,.btn-group>.btn:focus{z-index:1}.btn-group>.btn-group:not(:first-child),.btn-group>.btn:not(:first-child){margin-left:-1px}.btn-group>.btn-group:not(:last-child)>.btn{border-top-right-radius:0;border-bottom-right-radius:0}.btn-group>.btn-group:not(:first-child)>.btn,.btn-group>.btn:not(:first-child){border-top-left-radius:0;border-bottom-left-radius:0}.input-group{position:relative;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;-ms-flex-align:stretch;align-items:stretch;width:100%}.input-group>.custom-select{position:relative;-ms-flex:1 1 0;flex:1 1 0;min-width:0;margin-bottom:0}.input-group>.custom-select+.custom-select{margin-left:-1px}.input-group>.custom-select:focus{z-index:3}.input-group>.custom-select:not(:last-child){border-top-right-radius:0;border-bottom-right-radius:0}.input-group>.custom-select:not(:first-child){border-top-left-radius:0;border-bottom-left-radius:0}.input-group-text{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;padding:.375rem .75rem;margin-bottom:0;font-size:1rem;font-weight:400;line-height:1.5;color:#495057;text-align:center;white-space:nowrap;background-color:#e9ecef;border:1px solid #ced4da;border-radius:.25rem}.input-group-text input[type=checkbox],.input-group-text input[type=radio]{margin-top:0}.input-group-lg>.custom-select{height:calc(1.5em+1rem+2px)}.input-group-lg>.custom-select{padding:.5rem 1rem;font-size:1.25rem;line-height:1.5;border-radius:.3rem}.input-group-lg>.custom-select{padding-right:1.75rem}.custom-select{display:inline-block;width:100%;height:calc(1.5em+.75rem+2px);padding:.375rem 1.75rem .375rem .75rem;font-size:1rem;font-weight:400;line-height:1.5;color:#495057;vertical-align:middle;background:#fff url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='4' height='5' viewBox='0 0 4 5'%3e%3cpath fill='%23343a40' d='M2 0L0 2h4zm0 5L0 3h4z'/%3e%3c/svg%3e") no-repeat right .75rem center/8px 10px;border:1px solid #ced4da;border-radius:.25rem;-webkit-appearance:none;-moz-appearance:none;appearance:none}.custom-select:focus{border-color:#80bdff;outline:0;box-shadow:0 0 0 .2rem rgba(0,123,255,.25)}.custom-select:focus::-ms-value{color:#495057;background-color:#fff}.custom-select[multiple],.custom-select[size]:not([size="1"]){height:auto;padding-right:.75rem;background-image:none}.custom-select:disabled{color:#6c757d;background-color:#e9ecef}.custom-select::-ms-expand{display:none}.custom-select:-moz-focusring{color:transparent;text-shadow:0 0 0 #495057}.custom-select-lg{height:calc(1.5em+1rem+2px);padding-top:.5rem;padding-bottom:.5rem;padding-left:1rem;font-size:1.25rem}.custom-select{transition:background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out}@media(prefers-reduced-motion:reduce){.custom-select{transition:none}}.alert{position:relative;padding:.75rem 1.25rem;margin-bottom:1rem;border:1px solid transparent;border-radius:.25rem}.alert-heading{color:inherit}.alert-link{font-weight:700}.alert-primary{color:#004085;background-color:#cce5ff;border-color:#b8daff}.alert-primary .alert-link{color:#002752}.alert-warning{color:#856404;background-color:#fff3cd;border-color:#ffeeba}.alert-warning .alert-link{color:#533f03}.alert-light{color:#818182;background-color:#fefefe;border-color:#fdfdfe}.alert-light .alert-link{color:#686868}.alert-dark{color:#1b1e21;background-color:#d6d8d9;border-color:#c6c8ca}.alert-dark .alert-link{color:#040505}@-webkit-keyframes progress-bar-stripes{from{background-position:1rem 0}to{background-position:0 0}}@keyframes progress-bar-stripes{from{background-position:1rem 0}to{background-position:0 0}}.progress{display:-ms-flexbox;display:flex;height:1rem;overflow:hidden;font-size:.75rem;background-color:#e9ecef;border-radius:.25rem}.close{float:right;font-size:1.5rem;font-weight:700;line-height:1;color:#000;text-shadow:0 1px 0 #fff;opacity:.5}.close:hover{color:#000;text-decoration:none}.close:not(:disabled):not(.disabled):focus,.close:not(:disabled):not(.disabled):hover{opacity:.75}a.close.disabled{pointer-events:none}@-webkit-keyframes spinner-border{to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes spinner-border{to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-webkit-keyframes spinner-grow{0%{-webkit-transform:scale(0);transform:scale(0)}50%{opacity:1}}@keyframes spinner-grow{0%{-webkit-transform:scale(0);transform:scale(0)}50%{opacity:1}}.bg-primary{background-color:#007bff}a.bg-primary:focus,a.bg-primary:hover{background-color:#0062cc}.bg-warning{background-color:#ffc107}a.bg-warning:focus,a.bg-warning:hover{background-color:#d39e00}.bg-light{background-color:#f8f9fa}a.bg-light:focus,a.bg-light:hover{background-color:#dae0e5}.bg-dark{background-color:#343a40}a.bg-dark:focus,a.bg-dark:hover{background-color:#1d2124}.bg-white{background-color:#fff}.d-none{display:none}.d-inline{display:inline}.d-inline-block{display:inline-block}.d-block{display:block}.d-table{display:table}.d-table-row{display:table-row}@media(min-width:768px){.d-md-none{display:none}.d-md-inline{display:inline}.d-md-inline-block{display:inline-block}.d-md-block{display:block}.d-md-table{display:table}.d-md-table-row{display:table-row}}@media(min-width:992px){.d-lg-none{display:none}.d-lg-inline{display:inline}.d-lg-inline-block{display:inline-block}.d-lg-block{display:block}.d-lg-table{display:table}.d-lg-table-row{display:table-row}}.float-right{float:right}.float-none{float:none}@media(min-width:768px){.float-md-right{float:right}.float-md-none{float:none}}@media(min-width:992px){.float-lg-right{float:right}.float-lg-none{float:none}}.overflow-auto{overflow:auto}.overflow-hidden{overflow:hidden}.fixed-bottom{position:fixed;right:0;bottom:0;left:0;z-index:1030}.w-25{width:25%}.w-50{width:50%}.w-75{width:75%}.w-100{width:100%}.w-auto{width:auto}.h-25{height:25%}.h-50{height:50%}.h-75{height:75%}.h-100{height:100%}.h-auto{height:auto}.my-0{margin-top:0}.mr-0{margin-right:0}.mb-0,.my-0{margin-bottom:0}.my-1{margin-top:.25rem}.mr-1{margin-right:.25rem}.mb-1,.my-1{margin-bottom:.25rem}.my-2{margin-top:.5rem}.mr-2{margin-right:.5rem}.mb-2,.my-2{margin-bottom:.5rem}.my-3{margin-top:1rem}.mr-3{margin-right:1rem}.mb-3,.my-3{margin-bottom:1rem}.my-4{margin-top:1.5rem}.mr-4{margin-right:1.5rem}.mb-4,.my-4{margin-bottom:1.5rem}.my-5{margin-top:3rem}.mr-5{margin-right:3rem}.mb-5,.my-5{margin-bottom:3rem}.p-0{padding:0}.pt-0,.py-0{padding-top:0}.pb-0,.py-0{padding-bottom:0}.p-1{padding:.25rem}.pt-1,.py-1{padding-top:.25rem}.pb-1,.py-1{padding-bottom:.25rem}.p-2{padding:.5rem}.pt-2,.py-2{padding-top:.5rem}.pb-2,.py-2{padding-bottom:.5rem}.p-3{padding:1rem}.pt-3,.py-3{padding-top:1rem}.pb-3,.py-3{padding-bottom:1rem}.p-4{padding:1.5rem}.pt-4,.py-4{padding-top:1.5rem}.pb-4,.py-4{padding-bottom:1.5rem}.p-5{padding:3rem}.pt-5,.py-5{padding-top:3rem}.pb-5,.py-5{padding-bottom:3rem}.my-n1{margin-top:-.25rem}.mr-n1{margin-right:-.25rem}.mb-n1,.my-n1{margin-bottom:-.25rem}.my-n2{margin-top:-.5rem}.mr-n2{margin-right:-.5rem}.mb-n2,.my-n2{margin-bottom:-.5rem}.my-n3{margin-top:-1rem}.mr-n3{margin-right:-1rem}.mb-n3,.my-n3{margin-bottom:-1rem}.my-n4{margin-top:-1.5rem}.mr-n4{margin-right:-1.5rem}.mb-n4,.my-n4{margin-bottom:-1.5rem}.my-n5{margin-top:-3rem}.mr-n5{margin-right:-3rem}.mb-n5,.my-n5{margin-bottom:-3rem}.my-auto{margin-top:auto}.mr-auto{margin-right:auto}.mb-auto,.my-auto{margin-bottom:auto}@media(min-width:768px){.my-md-0{margin-top:0}.mr-md-0{margin-right:0}.mb-md-0,.my-md-0{margin-bottom:0}.my-md-1{margin-top:.25rem}.mr-md-1{margin-right:.25rem}.mb-md-1,.my-md-1{margin-bottom:.25rem}.my-md-2{margin-top:.5rem}.mr-md-2{margin-right:.5rem}.mb-md-2,.my-md-2{margin-bottom:.5rem}.my-md-3{margin-top:1rem}.mr-md-3{margin-right:1rem}.mb-md-3,.my-md-3{margin-bottom:1rem}.my-md-4{margin-top:1.5rem}.mr-md-4{margin-right:1.5rem}.mb-md-4,.my-md-4{margin-bottom:1.5rem}.my-md-5{margin-top:3rem}.mr-md-5{margin-right:3rem}.mb-md-5,.my-md-5{margin-bottom:3rem}.p-md-0{padding:0}.pt-md-0,.py-md-0{padding-top:0}.pb-md-0,.py-md-0{padding-bottom:0}.p-md-1{padding:.25rem}.pt-md-1,.py-md-1{padding-top:.25rem}.pb-md-1,.py-md-1{padding-bottom:.25rem}.p-md-2{padding:.5rem}.pt-md-2,.py-md-2{padding-top:.5rem}.pb-md-2,.py-md-2{padding-bottom:.5rem}.p-md-3{padding:1rem}.pt-md-3,.py-md-3{padding-top:1rem}.pb-md-3,.py-md-3{padding-bottom:1rem}.p-md-4{padding:1.5rem}.pt-md-4,.py-md-4{padding-top:1.5rem}.pb-md-4,.py-md-4{padding-bottom:1.5rem}.p-md-5{padding:3rem}.pt-md-5,.py-md-5{padding-top:3rem}.pb-md-5,.py-md-5{padding-bottom:3rem}.my-md-n1{margin-top:-.25rem}.mr-md-n1{margin-right:-.25rem}.mb-md-n1,.my-md-n1{margin-bottom:-.25rem}.my-md-n2{margin-top:-.5rem}.mr-md-n2{margin-right:-.5rem}.mb-md-n2,.my-md-n2{margin-bottom:-.5rem}.my-md-n3{margin-top:-1rem}.mr-md-n3{margin-right:-1rem}.mb-md-n3,.my-md-n3{margin-bottom:-1rem}.my-md-n4{margin-top:-1.5rem}.mr-md-n4{margin-right:-1.5rem}.mb-md-n4,.my-md-n4{margin-bottom:-1.5rem}.my-md-n5{margin-top:-3rem}.mr-md-n5{margin-right:-3rem}.mb-md-n5,.my-md-n5{margin-bottom:-3rem}.my-md-auto{margin-top:auto}.mr-md-auto{margin-right:auto}.mb-md-auto,.my-md-auto{margin-bottom:auto}}@media(min-width:992px){.my-lg-0{margin-top:0}.mr-lg-0{margin-right:0}.mb-lg-0,.my-lg-0{margin-bottom:0}.my-lg-1{margin-top:.25rem}.mr-lg-1{margin-right:.25rem}.mb-lg-1,.my-lg-1{margin-bottom:.25rem}.my-lg-2{margin-top:.5rem}.mr-lg-2{margin-right:.5rem}.mb-lg-2,.my-lg-2{margin-bottom:.5rem}.my-lg-3{margin-top:1rem}.mr-lg-3{margin-right:1rem}.mb-lg-3,.my-lg-3{margin-bottom:1rem}.my-lg-4{margin-top:1.5rem}.mr-lg-4{margin-right:1.5rem}.mb-lg-4,.my-lg-4{margin-bottom:1.5rem}.my-lg-5{margin-top:3rem}.mr-lg-5{margin-right:3rem}.mb-lg-5,.my-lg-5{margin-bottom:3rem}.p-lg-0{padding:0}.pt-lg-0,.py-lg-0{padding-top:0}.pb-lg-0,.py-lg-0{padding-bottom:0}.p-lg-1{padding:.25rem}.pt-lg-1,.py-lg-1{padding-top:.25rem}.pb-lg-1,.py-lg-1{padding-bottom:.25rem}.p-lg-2{padding:.5rem}.pt-lg-2,.py-lg-2{padding-top:.5rem}.pb-lg-2,.py-lg-2{padding-bottom:.5rem}.p-lg-3{padding:1rem}.pt-lg-3,.py-lg-3{padding-top:1rem}.pb-lg-3,.py-lg-3{padding-bottom:1rem}.p-lg-4{padding:1.5rem}.pt-lg-4,.py-lg-4{padding-top:1.5rem}.pb-lg-4,.py-lg-4{padding-bottom:1.5rem}.p-lg-5{padding:3rem}.pt-lg-5,.py-lg-5{padding-top:3rem}.pb-lg-5,.py-lg-5{padding-bottom:3rem}.my-lg-n1{margin-top:-.25rem}.mr-lg-n1{margin-right:-.25rem}.mb-lg-n1,.my-lg-n1{margin-bottom:-.25rem}.my-lg-n2{margin-top:-.5rem}.mr-lg-n2{margin-right:-.5rem}.mb-lg-n2,.my-lg-n2{margin-bottom:-.5rem}.my-lg-n3{margin-top:-1rem}.mr-lg-n3{margin-right:-1rem}.mb-lg-n3,.my-lg-n3{margin-bottom:-1rem}.my-lg-n4{margin-top:-1.5rem}.mr-lg-n4{margin-right:-1.5rem}.mb-lg-n4,.my-lg-n4{margin-bottom:-1.5rem}.my-lg-n5{margin-top:-3rem}.mr-lg-n5{margin-right:-3rem}.mb-lg-n5,.my-lg-n5{margin-bottom:-3rem}.my-lg-auto{margin-top:auto}.mr-lg-auto{margin-right:auto}.mb-lg-auto,.my-lg-auto{margin-bottom:auto}}.text-right{text-align:right}.text-center{text-align:center}@media(min-width:768px){.text-md-right{text-align:right}.text-md-center{text-align:center}}@media(min-width:992px){.text-lg-right{text-align:right}.text-lg-center{text-align:center}}.text-white{color:#fff}.text-primary{color:#007bff}a.text-primary:focus,a.text-primary:hover{color:#0056b3}.text-warning{color:#ffc107}a.text-warning:focus,a.text-warning:hover{color:#ba8b00}.text-light{color:#f8f9fa}a.text-light:focus,a.text-light:hover{color:#cbd3da}.text-dark{color:#343a40}a.text-dark:focus,a.text-dark:hover{color:#121416}.text-body{color:#212529}.text-muted{color:#6c757d}.text-black-50{color:rgba(0,0,0,.5)}.text-white-50{color:rgba(255,255,255,.5)}.text-hide{font:0/0 a;color:transparent;text-shadow:none;background-color:transparent;border:0}.text-decoration-none{text-decoration:none}.text-reset{color:inherit}.visible{visibility:visible}@media print{*,::after,::before{text-shadow:none;box-shadow:none}a:not(.btn){text-decoration:underline}pre{white-space:pre-wrap}pre{border:1px solid #adb5bd;page-break-inside:avoid}img{page-break-inside:avoid}h2,h3,p{orphans:3;widows:3}h2,h3{page-break-after:avoid}@page{size:a3}body{min-width:992px}.container{min-width:992px}.table{border-collapse:collapse}.table-dark{color:inherit}}@-webkit-keyframes sbx-reset-in{0%{-webkit-transform:translate3d(-20%,0,0);transform:translate3d(-20%,0,0);opacity:0}100%{-webkit-transform:none;transform:none;opacity:1}}@keyframes sbx-reset-in{0%{-webkit-transform:translate3d(-20%,0,0);transform:translate3d(-20%,0,0);opacity:0}100%{-webkit-transform:none;transform:none;opacity:1}}body{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Noto Sans","Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji"}a:link,a:visited{color:#f14600;text-decoration:none}a:active,a:hover{text-decoration:underline}.btn.disabled,.btn:disabled{cursor:default;opacity:.4}#logo-text{width:180px;margin-left:12px}.display-5{font-size:2rem;font-weight:300;line-height:1.2}.display-6{font-size:1.75rem;font-weight:300;line-height:1.2}.bg-dark-alt,.bg-dark-alt:focus{background:#36363f}.bg-orange,.bg-orange:focus{background:#f14600}.text-dark-alt{color:#36363f}.btn-dark-alt{background:#36363f}.btn-dark-alt:focus{background:#36363f}.btn-outline-orange{border-color:#f14600;color:#f14600}.btn-orange,.btn-outline-orange:hover{background:#f14600;color:#fff}.btn:active,.btn:hover{text-decoration:none}.text-orange{color:#f14600}.bg-number{position:absolute;font-size:900%;font-weight:700;color:rgba(241,70,0,.1);line-height:1;margin-top:-1rem}.w-15{width:15%}.headerlink{text-decoration:none;margin-left:.5rem}body[data-spy] #content{overflow-x:scroll}#content table{border:1px solid #dee2e6;width:100%;margin-bottom:1rem;overflow-x:auto}#content code{color:#111;background:#eee}#content pre{background:#eee;padding:1rem}@media print{body{min-width:0}code,h1,h2,h3,h4,h5,h6,img,li,p,pre{page-break-inside:avoid}}@media(prefers-color-scheme:dark){#to-full-website,body.amp,body[data-spy]{background:#1c1c1c;color:#efefef}.invert-dark{filter:invert(100%)}#content table{border:1px solid #2a2b2c}#content code,#content pre{background:#444;color:#eee}}.syntax{background:#f8f9fa;color:#2f1e2e}.syntax .c{color:#8d8687}.syntax .err{color:#ef6155}.syntax .k{color:#815ba4}.syntax .n{color:#2f1e2e}.syntax .o{color:#5bc4bf}.syntax .p{color:#2f1e2e}.syntax .c1{color:#8d8687}.syntax .ld{color:#48b685}.syntax .s{color:#48b685}.syntax .nl{color:#2f1e2e}.syntax .py{color:#2f1e2e}.syntax .w{color:#2f1e2e}.syntax .mi{color:#f99b15}.syntax .s2{color:#48b685}.syntax .s1{color:#48b685}.syntax .ss{color:#48b685}@media(prefers-color-scheme:dark){.syntax .k{color:#c78cff}.syntax .ld{color:#64ffbb}.syntax .s{color:#64ffbb}.syntax .s2{color:#64ffbb}.syntax .s1{color:#64ffbb}.syntax .ss{color:#64ffbb}.syntax .c{color:#64ffbb}.syntax .n{color:#f8f9fa}.syntax .p{color:#f8f9fa}.syntax .nl{color:#f8f9fa}.syntax .py{color:#f8f9fa}.syntax .w{color:#f8f9fa}}</style>
    <script async custom-element="amp-analytics" src="https://cdn.ampproject.org/v0/amp-analytics-0.1.js"></script>
    <script async custom-element="amp-iframe" src="https://cdn.ampproject.org/v0/amp-iframe-0.1.js"></script>
  </head>
  <body class="amp" dir="ltr">
    <div class="container-fluid container-lg pb-5">
      <div class="row pt-3 mb-3">
        <div class="col">
          <a href="/" class="text-decoration-none">
            <amp-img class="d-inline-block mr-3" layout="fixed" width="40" height="36" src="/images/logo.svg" alt="ClickHouse logo" title="ClickHouse logo"></amp-img><amp-img class="invert-dark d-inline-block" layout="fixed" width="238" height="36" src="/images/clickhouse-black.svg" alt="ClickHouse" title="ClickHouse"></amp-img>
          </a>
        </div>
      </div>
      <div class="row">
        <div id="content" class="col">
          
          <h1 id=settings>Настройки<a class=headerlink href=../amp/#settings title="Permanent link"> </a></h1><h2 id=distributed-product-mode>distributed_product_mode<a class=headerlink href=../amp/#distributed-product-mode title="Permanent link"> </a></h2><p>Изменяет поведение <a href=../../../../sql-reference/operators/amp/ >распределенных подзапросов</a>.</p><p>ClickHouse применяет настройку в тех случаях, когда запрос содержит произведение распределённых таблиц, т.е. когда запрос к распределенной таблице содержит не-GLOBAL подзапрос к также распределенной таблице.</p><p>Условия применения:</p><ul><li>Только подзапросы для IN, JOIN.</li><li>Только если в секции FROM используется распределённая таблица, содержащая более одного шарда.</li><li>Если подзапрос касается распределенной таблицы, содержащей более одного шарда.</li><li>Не используется в случае табличной функции <a href=../../../../sql-reference/table-functions/remote/amp/ >remote</a>.</li></ul><p>Возможные значения:</p><ul><li><code class=syntax>deny</code> — значение по умолчанию. Запрещает использование таких подзапросов (При попытке использование вернет исключение «Double-distributed IN/JOIN subqueries is denied»);</li><li><code class=syntax>local</code> — заменяет базу данных и таблицу в подзапросе на локальные для конечного сервера (шарда), оставив обычный <code class=syntax>IN</code>/<code class=syntax>JOIN.</code></li><li><code class=syntax>global</code> — заменяет запрос <code class=syntax>IN</code>/<code class=syntax>JOIN</code> на <code class=syntax>GLOBAL IN</code>/<code class=syntax>GLOBAL JOIN.</code></li><li><code class=syntax>allow</code> — разрешает использование таких подзапросов.</li></ul><h2 id=enable-optimize-predicate-expression>enable_optimize_predicate_expression<a class=headerlink href=../amp/#enable-optimize-predicate-expression title="Permanent link"> </a></h2><p>Включает пробрасывание предикатов в подзапросы для запросов <code class=syntax>SELECT</code>.</p><p>Пробрасывание предикатов может существенно уменьшить сетевой трафик для распределенных запросов.</p><p>Возможные значения:</p><ul><li>0 — выключена.</li><li>1 — включена.</li></ul><p>Значение по умолчанию: 1.</p><p>Использование</p><p>Рассмотрим следующие запросы:</p><ol><li><code class=syntax>SELECT count() FROM test_table WHERE date = '2018-10-10'</code></li><li><code class=syntax>SELECT count() FROM (SELECT * FROM test_table) WHERE date = '2018-10-10'</code></li></ol><p>Если <code class=syntax>enable_optimize_predicate_expression = 1</code>, то время выполнения запросов одинаковое, так как ClickHouse применяет <code class=syntax>WHERE</code> к подзапросу сразу при его обработке.</p><p>Если <code class=syntax>enable_optimize_predicate_expression = 0</code>, то время выполнения второго запроса намного больше, потому что секция <code class=syntax>WHERE</code> применяется к данным уже после завершения подзапроса.</p><h2 id=settings-fallback_to_stale_replicas_for_distributed_queries>fallback_to_stale_replicas_for_distributed_queries<a class=headerlink href=../amp/#settings-fallback_to_stale_replicas_for_distributed_queries title="Permanent link"> </a></h2><p>Форсирует запрос в устаревшую реплику в случае, если актуальные данные недоступны. См. <a href=../../../../engines/table-engines/mergetree-family/replication/amp/ >Репликация</a>.</p><p>Из устаревших реплик таблицы ClickHouse выбирает наиболее актуальную.</p><p>Используется при выполнении <code class=syntax>SELECT</code> из распределенной таблицы, которая указывает на реплицированные таблицы.</p><p>По умолчанию - 1 (включена).</p><h2 id=settings-force_index_by_date>force_index_by_date<a class=headerlink href=../amp/#settings-force_index_by_date title="Permanent link"> </a></h2><p>Запрещает выполнение запросов, если использовать индекс по дате невозможно.</p><p>Работает с таблицами семейства MergeTree.</p><p>При <code class=syntax>force_index_by_date=1</code> ClickHouse проверяет, есть ли в запросе условие на ключ даты, которое может использоваться для отсечения диапазонов данных. Если подходящего условия нет - кидается исключение. При этом не проверяется, действительно ли условие уменьшает объём данных для чтения. Например, условие <code class=syntax>Date != '2000-01-01'</code> подходит даже в том случае, когда соответствует всем данным в таблице (т.е. для выполнения запроса требуется full scan). Подробнее про диапазоны данных в таблицах MergeTree читайте в разделе <a href=../../../../engines/table-engines/mergetree-family/mergetree/amp/ >MergeTree</a>.</p><h2 id=settings-force_primary_key>force_primary_key<a class=headerlink href=../amp/#settings-force_primary_key title="Permanent link"> </a></h2><p>Запрещает выполнение запросов, если использовать индекс по первичному ключу невозможно.</p><p>Работает с таблицами семейства MergeTree.</p><p>При <code class=syntax>force_primary_key=1</code> ClickHouse проверяет, есть ли в запросе условие на первичный ключ, которое может использоваться для отсечения диапазонов данных. Если подходящего условия нет - кидается исключение. При этом не проверяется, действительно ли условие уменьшает объём данных для чтения. Подробнее про диапазоны данных в таблицах MergeTree читайте в разделе <a href=../../../../engines/table-engines/mergetree-family/mergetree/amp/ >MergeTree</a>.</p><h2 id=format-schema>format_schema<a class=headerlink href=../amp/#format-schema title="Permanent link"> </a></h2><p>Параметр применяется в том случае, когда используются форматы, требующие определения схемы, например <a href=https://capnproto.org/ rel="external nofollow noreferrer" target=_blank>Cap’n Proto</a> или <a href=https://developers.google.com/protocol-buffers/ rel="external nofollow noreferrer" target=_blank>Protobuf</a>. Значение параметра зависит от формата.</p><h2 id=fsync-metadata>fsync_metadata<a class=headerlink href=../amp/#fsync-metadata title="Permanent link"> </a></h2><p>Включает или отключает <a href=http://pubs.opengroup.org/onlinepubs/9699919799/functions/fsync.html rel="external nofollow noreferrer" target=_blank>fsync</a> при записи <code class=syntax>.sql</code> файлов. По умолчанию включено.</p><p>Имеет смысл выключать, если на сервере миллионы мелких таблиц-чанков, которые постоянно создаются и уничтожаются.</p><h2 id=settings-enable_http_compression>enable_http_compression<a class=headerlink href=../amp/#settings-enable_http_compression title="Permanent link"> </a></h2><p>Включает или отключает сжатие данных в ответе на HTTP-запрос.</p><p>Для получения дополнительной информации, читайте <a href=../../../../interfaces/http/amp/ >Описание интерфейса HTTP</a>.</p><p>Возможные значения:</p><ul><li>0 — выключена.</li><li>1 — включена.</li></ul><p>Значение по умолчанию: 0.</p><h2 id=settings-http_zlib_compression_level>http_zlib_compression_level<a class=headerlink href=../amp/#settings-http_zlib_compression_level title="Permanent link"> </a></h2><p>Задаёт уровень сжатия данных в ответе на HTTP-запрос, если <a href=../amp/#settings-enable_http_compression>enable_http_compression = 1</a>.</p><p>Возможные значения: числа от 1 до 9.</p><p>Значение по умолчанию: 3.</p><h2 id=settings-http_native_compression_disable_checksumming_on_decompress>http_native_compression_disable_checksumming_on_decompress<a class=headerlink href=../amp/#settings-http_native_compression_disable_checksumming_on_decompress title="Permanent link"> </a></h2><p>Включает или отключает проверку контрольной суммы при распаковке данных HTTP POST от клиента. Используется только для собственного (<code class=syntax>Navite</code>) формата сжатия ClickHouse (ни <code class=syntax>gzip</code>, ни <code class=syntax>deflate</code>).</p><p>Для получения дополнительной информации, читайте <a href=../../../../interfaces/http/amp/ >Описание интерфейса HTTP</a>.</p><p>Возможные значения:</p><ul><li>0 — выключена.</li><li>1 — включена.</li></ul><p>Значение по умолчанию: 0.</p><h2 id=settings-send_progress_in_http_headers>send_progress_in_http_headers<a class=headerlink href=../amp/#settings-send_progress_in_http_headers title="Permanent link"> </a></h2><p>Включает или отключает HTTP-заголовки <code class=syntax>X-ClickHouse-Progress</code> в ответах <code class=syntax>clickhouse-server</code>.</p><p>Для получения дополнительной информации, читайте <a href=../../../../interfaces/http/amp/ >Описание интерфейса HTTP</a>.</p><p>Возможные значения:</p><ul><li>0 — выключена.</li><li>1 — включена.</li></ul><p>Значение по умолчанию: 0.</p><h2 id=setting-max_http_get_redirects>max_http_get_redirects<a class=headerlink href=../amp/#setting-max_http_get_redirects title="Permanent link"> </a></h2><p>Ограничивает максимальное количество переходов по редиректам в таблицах с движком <a href=../../../../engines/table-engines/special/url/amp/ >URL</a> при выполнении HTTP запросов методом GET. Настройка применяется для обоих типов таблиц: созданных запросом <a href=../../../sql_reference/create/amp/#create-table-query>CREATE TABLE</a> и с помощью табличной функции <a href=../../../../sql-reference/table-functions/url/amp/ >url</a>.</p><p>Возможные значения:</p><ul><li>Положительное целое число переходов.</li><li>0 — переходы запрещены.</li></ul><p>Значение по умолчанию: 0.</p><h2 id=input-format-allow-errors-num>input_format_allow_errors_num<a class=headerlink href=../amp/#input-format-allow-errors-num title="Permanent link"> </a></h2><p>Устанавливает максимальное количество допустимых ошибок при чтении из текстовых форматов (CSV, TSV и т.п.).</p><p>Значение по умолчанию: 0.</p><p>Используйте обязательно в паре с <code class=syntax>input_format_allow_errors_ratio</code>. Для пропуска ошибок, значения обеих настроек должны быть больше 0.</p><p>Если при чтении строки возникла ошибка, но при этом счетчик ошибок меньше <code class=syntax>input_format_allow_errors_num</code>, то ClickHouse игнорирует строку и переходит к следующей.</p><p>В случае превышения <code class=syntax>input_format_allow_errors_num</code> ClickHouse генерирует исключение.</p><h2 id=input-format-allow-errors-ratio>input_format_allow_errors_ratio<a class=headerlink href=../amp/#input-format-allow-errors-ratio title="Permanent link"> </a></h2><p>Устанавливает максимальную долю допустимых ошибок при чтении из текстовых форматов (CSV, TSV и т.п.).<br> Доля ошибок задаётся в виде числа с плавающей запятой от 0 до 1.</p><p>Значение по умолчанию: 0.</p><p>Используйте обязательно в паре с <code class=syntax>input_format_allow_errors_num</code>. Для пропуска ошибок, значения обеих настроек должны быть больше 0.</p><p>Если при чтении строки возникла ошибка, но при этом текущая доля ошибок меньше <code class=syntax>input_format_allow_errors_ratio</code>, то ClickHouse игнорирует строку и переходит к следующей.</p><p>В случае превышения <code class=syntax>input_format_allow_errors_ratio</code> ClickHouse генерирует исключение.</p><h2 id=settings-input_format_values_interpret_expressions>input_format_values_interpret_expressions<a class=headerlink href=../amp/#settings-input_format_values_interpret_expressions title="Permanent link"> </a></h2><p>Включает или отключает парсер SQL, если потоковый парсер не может проанализировать данные. Этот параметр используется только для формата <a href=../../../../interfaces/formats/amp/#data-format-values>Values</a> при вставке данных. Дополнительные сведения о парсерах читайте в разделе <a href=../../../../sql-reference/syntax/amp/ >Синтаксис</a>.</p><p>Возможные значения:</p><ul><li><p>0 — выключена.</p><div class=codehilite><pre><span></span><code class=syntax><span class=err>В этом случае необходимо вставлять форматированные данные. Смотрите раздел [Форматы](../../interfaces/formats.md).</span>
</code></pre></div></li><li><p>1 — включена.</p><div class=codehilite><pre><span></span><code class=syntax><span class=err>В этом случае вы можете использовать выражение SQL в качестве значения, но вставка данных намного медленнее. Если вы вставляете только форматированные данные, ClickHouse ведет себя так, как будто значение параметра равно 0.</span>
</code></pre></div></li></ul><p>Значение по умолчанию: 1.</p><p>Пример использования:</p><p>Вставим значение типа <a href=../../../../sql-reference/data-types/datetime/amp/ >DateTime</a> при разных значения настройки.</p><div class=codehilite><pre><span></span><code class=syntax><span class=k>SET</span> <span class=n>input_format_values_interpret_expressions</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
<span class=k>INSERT</span> <span class=k>INTO</span> <span class=n>datetime_t</span> <span class=k>VALUES</span> <span class=p>(</span><span class=n>now</span><span class=p>())</span>
</code></pre></div><div class=codehilite><pre><span></span><code class=syntax>Exception on client:
Code: 27. DB::Exception: Cannot parse input: expected ) before: now()): (at row 1)
</code></pre></div><div class=codehilite><pre><span></span><code class=syntax><span class=k>SET</span> <span class=n>input_format_values_interpret_expressions</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span>
<span class=k>INSERT</span> <span class=k>INTO</span> <span class=n>datetime_t</span> <span class=k>VALUES</span> <span class=p>(</span><span class=n>now</span><span class=p>())</span>
</code></pre></div><div class=codehilite><pre><span></span><code class=syntax>Ok.
</code></pre></div><p>Последний запрос эквивалентен следующему:</p><div class=codehilite><pre><span></span><code class=syntax><span class=k>SET</span> <span class=n>input_format_values_interpret_expressions</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
<span class=k>INSERT</span> <span class=k>INTO</span> <span class=n>datetime_t</span> <span class=k>SELECT</span> <span class=n>now</span><span class=p>()</span>
</code></pre></div><div class=codehilite><pre><span></span><code class=syntax>Ok.
</code></pre></div><h2 id=settings-input_format_values_deduce_templates_of_expressions>input_format_values_deduce_templates_of_expressions<a class=headerlink href=../amp/#settings-input_format_values_deduce_templates_of_expressions title="Permanent link"> </a></h2><p>Включает или отключает попытку вычисления шаблона для выражений SQL в формате <a href=../../../../interfaces/formats/amp/#data-format-values>Values</a>. Это позволяет гораздо быстрее парсить и интерпретировать выражения в <code class=syntax>Values</code>, если выражения в последовательных строках имеют одинаковую структуру. ClickHouse пытается вычислить шаблон выражения, распарсить следующие строки с помощью этого шаблона и вычислить выражение в пачке успешно проанализированных строк.</p><p>Возможные значения:</p><ul><li>0 — Выключена.</li><li>1 — Включена.</li></ul><p>Значение по умолчанию: 1.</p><p>Для следующего запроса:</p><div class=codehilite><pre><span></span><code class=syntax><span class=k>INSERT</span> <span class=k>INTO</span> <span class=n>test</span> <span class=k>VALUES</span> <span class=p>(</span><span class=k>lower</span><span class=p>(</span><span class=s1>'Hello'</span><span class=p>)),</span> <span class=p>(</span><span class=k>lower</span><span class=p>(</span><span class=s1>'world'</span><span class=p>)),</span> <span class=p>(</span><span class=k>lower</span><span class=p>(</span><span class=s1>'INSERT'</span><span class=p>)),</span> <span class=p>(</span><span class=k>upper</span><span class=p>(</span><span class=s1>'Values'</span><span class=p>)),</span> <span class=p>...</span>
</code></pre></div><ul><li>Если <code class=syntax>input_format_values_interpret_expressions=1</code> и <code class=syntax>format_values_deduce_templates_of_expressions=0</code>, выражения интерпретируются отдельно для каждой строки (это очень медленно для большого количества строк).</li><li>Если <code class=syntax>input_format_values_interpret_expressions=0</code> и <code class=syntax>format_values_deduce_templates_of_expressions=1</code>, выражения в первой, второй и третьей строках парсятся с помощью шаблона <code class=syntax>lower(String)</code> и интерпретируется вместе, выражение в четвертой строке парсится с другим шаблоном (<code class=syntax>upper(String)</code>).</li><li>Если <code class=syntax>input_format_values_interpret_expressions=1</code> и <code class=syntax>format_values_deduce_templates_of_expressions=1</code>, то же самое, что и в предыдущем случае, но также позволяет выполнять резервную интерпретацию выражений отдельно, если невозможно вычислить шаблон.</li></ul><h2 id=settings-input-format-values-accurate-types-of-literals>input_format_values_accurate_types_of_literals<a class=headerlink href=../amp/#settings-input-format-values-accurate-types-of-literals title="Permanent link"> </a></h2><p>Эта настройка используется, только когда <code class=syntax>input_format_values_deduce_templates_of_expressions = 1</code>. Выражения для некоторых столбцов могут иметь одинаковую структуру, но содержат числовые литералы разных типов, например:</p><div class=codehilite><pre><span></span><code class=syntax><span class=p>(...,</span> <span class=k>abs</span><span class=p>(</span><span class=mi>0</span><span class=p>),</span> <span class=p>...),</span>             <span class=c1>-- UInt64 literal</span>
<span class=p>(...,</span> <span class=k>abs</span><span class=p>(</span><span class=mi>3</span><span class=p>.</span><span class=mi>141592654</span><span class=p>),</span> <span class=p>...),</span>   <span class=c1>-- Float64 literal</span>
<span class=p>(...,</span> <span class=k>abs</span><span class=p>(</span><span class=o>-</span><span class=mi>1</span><span class=p>),</span> <span class=p>...),</span>            <span class=c1>-- Int64 literal</span>
</code></pre></div><p>Возможные значения:</p><ul><li><p>0 — Выключена.</p><p>В этом случае, ClickHouse может использовать более общий тип для некоторых литералов (например, <code class=syntax>Float64</code> или <code class=syntax>Int64</code> вместо <code class=syntax>UInt64</code> для <code class=syntax>42</code>), но это может привести к переполнению и проблемам с точностью.</p></li><li><p>1 — Включена.</p><p>В этом случае, ClickHouse проверяет фактический тип литерала и использует шаблон выражения соответствующего типа. В некоторых случаях это может значительно замедлить оценку выажения в <code class=syntax>Values</code>.</p></li></ul><p>Значение по умолчанию: 1.</p><h2 id=session_settings-input_format_defaults_for_omitted_fields>input_format_defaults_for_omitted_fields<a class=headerlink href=../amp/#session_settings-input_format_defaults_for_omitted_fields title="Permanent link"> </a></h2><p>При вставке данных запросом <code class=syntax>INSERT</code>, заменяет пропущенные поля значениям по умолчанию для типа данных столбца.</p><p>Поддерживаемые форматы вставки:</p><ul><li><a href=../../../../interfaces/formats/amp/#jsoneachrow>JSONEachRow</a></li><li><a href=../../../../interfaces/formats/amp/#csv>CSV</a></li><li><a href=../../../../interfaces/formats/amp/#tabseparated>TabSeparated</a></li></ul><div class="admonition note alert pb-0 mb-4 alert-primary" role=alert><p class="admonition-title alert-heading display-6 mb-2">Примечание</p><p>Когда опция включена, сервер отправляет клиенту расширенные метаданные. Это требует дополнительных вычислительных ресурсов на сервере и может снизить производительность.</p></div><p>Возможные значения:</p><ul><li>0 — выключена.</li><li>1 — включена.</li></ul><p>Значение по умолчанию: 1.</p><h2 id=settings-input-format-null-as-default>input_format_null_as_default<a class=headerlink href=../amp/#settings-input-format-null-as-default title="Permanent link"> </a></h2><p>Включает или отключает использование значений по умолчанию в случаях, когда во входных данных содержится <code class=syntax>NULL</code>, но тип соответствующего столбца не <code class=syntax>Nullable(T)</code> (для текстовых форматов).</p><h2 id=settings-input-format-skip-unknown-fields>input_format_skip_unknown_fields<a class=headerlink href=../amp/#settings-input-format-skip-unknown-fields title="Permanent link"> </a></h2><p>Включает или отключает пропускание вставки неизвестных данных.</p><p>При записи данных, если входные данные содержат столбцы, которых нет в целевой таблице, ClickHouse генерирует исключение. Если пропускание вставки включено, ClickHouse не вставляет неизвестные данные и не генерирует исключение.</p><p>Поддерживаемые форматы:</p><ul><li><a href=../../../../interfaces/formats/amp/#jsoneachrow>JSONEachRow</a></li><li><a href=../../../../interfaces/formats/amp/#csvwithnames>CSVWithNames</a></li><li><a href=../../../../interfaces/formats/amp/#tabseparatedwithnames>TabSeparatedWithNames</a></li><li><a href=../../../../interfaces/formats/amp/#tskv>TSKV</a></li></ul><p>Возможные значения:</p><ul><li>0 — выключена.</li><li>1 — включена.</li></ul><p>Значение по умолчанию: 0.</p><h2 id=settings-input_format_import_nested_json>input_format_import_nested_json<a class=headerlink href=../amp/#settings-input_format_import_nested_json title="Permanent link"> </a></h2><p>Включает или отключает вставку данных JSON с вложенными объектами.</p><p>Поддерживаемые форматы:</p><ul><li><a href=../../../../interfaces/formats/amp/#jsoneachrow>JSONEachRow</a></li></ul><p>Возможные значения:</p><ul><li>0 — выключена.</li><li>1 — включена.</li></ul><p>Значение по умолчанию: 0.</p><p>См. также:</p><ul><li><a href=../../../../interfaces/formats/amp/#jsoneachrow-nested>Использование вложенных структур</a> with the <code class=syntax>JSONEachRow</code> format.</li></ul><h2 id=settings-input-format-with-names-use-header>input_format_with_names_use_header<a class=headerlink href=../amp/#settings-input-format-with-names-use-header title="Permanent link"> </a></h2><p>Включает или отключает проверку порядка столбцов при вставке данных.</p><p>Чтобы повысить эффективность вставки данных, рекомендуем отключить эту проверку, если вы уверены, что порядок столбцов входных данных такой же, как в целевой таблице.</p><p>Поддерживаемые форматы:</p><ul><li><a href=../../../../interfaces/formats/amp/#csvwithnames>CSVWithNames</a></li><li><a href=../../../../interfaces/formats/amp/#tabseparatedwithnames>TabSeparatedWithNames</a></li></ul><p>Возможные значения:</p><ul><li>0 — выключена.</li><li>1 — включена.</li></ul><p>Значение по умолчанию: 1.</p><h2 id=settings-date_time_input_format>date_time_input_format<a class=headerlink href=../amp/#settings-date_time_input_format title="Permanent link"> </a></h2><p>Выбор парсера для текстового представления дат и времени при обработке входного формата.</p><p>Настройка не применяется к <a href=../../../../sql-reference/functions/date-time-functions/amp/ >функциям для работы с датой и временем</a>.</p><p>Возможные значения:</p><ul><li><p><code class=syntax>'best_effort'</code> — включает расширенный парсинг.</p><div class=codehilite><pre><span></span><code class=syntax><span class=err>ClickHouse может парсить базовый формат `YYYY-MM-DD HH:MM:SS` и все форматы [ISO 8601](https://en.wikipedia.org/wiki/ISO_8601). Например, `'2018-06-08T01:02:03.000Z'`.</span>
</code></pre></div></li><li><p><code class=syntax>'basic'</code> — используется базовый парсер.</p><div class=codehilite><pre><span></span><code class=syntax><span class=err>ClickHouse может парсить только базовый формат `YYYY-MM-DD HH:MM:SS`. Например, `'2019-08-20 10:18:56'`.</span>
</code></pre></div></li></ul><p>Значение по умолчанию: <code class=syntax>'basic'</code>.</p><p>См. также:</p><ul><li><a href=../../../../sql-reference/data-types/datetime/amp/ >Тип данных DateTime.</a></li><li><a href=../../../../sql-reference/functions/date-time-functions/amp/ >Функции для работы с датой и временем.</a></li></ul><h2 id=settings-join_default_strictness>join_default_strictness<a class=headerlink href=../amp/#settings-join_default_strictness title="Permanent link"> </a></h2><p>Устанавливает строгость по умолчанию для <a href=../../../../sql-reference/statements/select/join/amp/#select-join>JOIN</a>.</p><p>Возможные значения</p><ul><li><code class=syntax>ALL</code> — если в правой таблице несколько совпадающих строк, данные умножаются на количество этих строк. Это нормальное поведение <code class=syntax>JOIN</code> как в стандартном SQL.</li><li><code class=syntax>ANY</code> — если в правой таблице несколько соответствующих строк, то соединяется только первая найденная. Если в «правой» таблице есть не более одной подходящей строки, то результаты <code class=syntax>ANY</code> и <code class=syntax>ALL</code> совпадают.</li><li><code class=syntax>Пустая строка</code> — если <code class=syntax>ALL</code> или <code class=syntax>ANY</code> не указаны в запросе, то ClickHouse генерирует исключение.</li></ul><p>Значение по умолчанию: <code class=syntax>ALL</code>.</p><h2 id=settings-join_any_take_last_row>join_any_take_last_row<a class=headerlink href=../amp/#settings-join_any_take_last_row title="Permanent link"> </a></h2><p>Изменяет поведение операций, выполняемых со строгостью <code class=syntax>ANY</code>.</p><div class="admonition warning alert pb-0 mb-4 alert-warning" role=alert><p class="admonition-title alert-heading display-6 mb-2">Внимание</p><p>Настройка применяется только для операций <code class=syntax>JOIN</code>, выполняемых над таблицами с движком <a href=../../../../engines/table-engines/special/join/amp/ class=alert-link>Join</a>.</p></div><p>Возможные значения:</p><ul><li>0 — если в правой таблице несколько соответствующих строк, то присоединяется только первая найденная строка.</li><li>1 — если в правой таблице несколько соответствующих строк, то присоединяется только последняя найденная строка.</li></ul><p>Значение по умолчанию: 0.</p><p>См. также:</p><ul><li><a href=../../../../sql-reference/statements/select/join/amp/#select-join>Секция JOIN</a></li><li><a href=../../../../engines/table-engines/special/join/amp/ >Движок таблиц Join</a></li><li><a href=../amp/#settings-join_default_strictness>join_default_strictness</a></li></ul><h2 id=join_use_nulls>join_use_nulls<a class=headerlink href=../amp/#join_use_nulls title="Permanent link"> </a></h2><p>Устанавливает тип поведения <a href=../../../../sql-reference/statements/select/join/amp/ >JOIN</a>. При объединении таблиц могут появиться пустые ячейки. ClickHouse заполняет их по-разному в зависимости от настроек.</p><p>Возможные значения</p><ul><li>0 — пустые ячейки заполняются значением по умолчанию соответствующего типа поля.</li><li>1 — <code class=syntax>JOIN</code> ведёт себя как в стандартном SQL. Тип соответствующего поля преобразуется в <a href=../../../../sql-reference/data-types/nullable/amp/#data_type-nullable>Nullable</a>, а пустые ячейки заполняются значениями <a href=../../../../sql-reference/syntax/amp/ >NULL</a>.</li></ul><p>Значение по умолчанию: 0.</p><h2 id=setting-max_block_size>max_block_size<a class=headerlink href=../amp/#setting-max_block_size title="Permanent link"> </a></h2><p>Данные в ClickHouse обрабатываются по блокам (наборам кусочков столбцов). Внутренние циклы обработки для одного блока достаточно эффективны, но есть заметные издержки на каждый блок. Настройка <code class=syntax>max_block_size</code> — это рекомендация, какой размер блока (в количестве строк) загружать из таблиц. Размер блока не должен быть слишком маленьким, чтобы затраты на каждый блок были заметны, но не слишком велики, чтобы запрос с LIMIT, который завершается после первого блока, обрабатывался быстро. Цель состоит в том, чтобы не использовалось слишком много оперативки при вынимании большого количества столбцов в несколько потоков; чтобы оставалась хоть какая-нибудь кэш-локальность.</p><p>Значение по умолчанию: 65,536.</p><p>Из таблицы не всегда загружаются блоки размера <code class=syntax>max_block_size</code>. Если ясно, что нужно прочитать меньше данных, то будет считан блок меньшего размера.</p><h2 id=preferred-block-size-bytes>preferred_block_size_bytes<a class=headerlink href=../amp/#preferred-block-size-bytes title="Permanent link"> </a></h2><p>Служит для тех же целей что и <code class=syntax>max_block_size</code>, но задает рекомендуемый размер блоков в байтах, выбирая адаптивное количество строк в блоке.<br> При этом размер блока не может быть более <code class=syntax>max_block_size</code> строк.<br> По умолчанию: 1,000,000. Работает только при чтении из MergeTree-движков.</p><h2 id=setting-merge-tree-uniform-read-distribution>merge_tree_uniform_read_distribution<a class=headerlink href=../amp/#setting-merge-tree-uniform-read-distribution title="Permanent link"> </a></h2><p>При чтении из таблиц <a href=../../../../engines/table-engines/mergetree-family/mergetree/amp/ >MergeTree</a> ClickHouse использует несколько потоков. Этот параметр включает/выключает равномерное распределение заданий по рабочим потокам. Алгоритм равномерного распределения стремится сделать время выполнения всех потоков примерно равным для одного запроса <code class=syntax>SELECT</code>.</p><p>Возможные значения:</p><ul><li>0 — не использовать равномерное распределение заданий на чтение.</li><li>1 — использовать равномерное распределение заданий на чтение.</li></ul><p>Значение по умолчанию: 1.</p><h2 id=setting-merge-tree-min-rows-for-concurrent-read>merge_tree_min_rows_for_concurrent_read<a class=headerlink href=../amp/#setting-merge-tree-min-rows-for-concurrent-read title="Permanent link"> </a></h2><p>Если количество строк, считываемых из файла таблицы <a href=../../../../engines/table-engines/mergetree-family/mergetree/amp/ >MergeTree</a> превышает <code class=syntax>merge_tree_min_rows_for_concurrent_read</code>, то ClickHouse пытается выполнить одновременное чтение из этого файла в несколько потоков.</p><p>Возможные значения:</p><ul><li>Любое положительное целое число.</li></ul><p>Значение по умолчанию: 163840.</p><h2 id=setting-merge-tree-min-bytes-for-concurrent-read>merge_tree_min_bytes_for_concurrent_read<a class=headerlink href=../amp/#setting-merge-tree-min-bytes-for-concurrent-read title="Permanent link"> </a></h2><p>Если число байтов, которое должно быть прочитано из одного файла таблицы с движком <a href=../../../../engines/table-engines/mergetree-family/mergetree/amp/ >MergeTree</a>, превышает значение <code class=syntax>merge_tree_min_bytes_for_concurrent_read</code>, то ClickHouse выполняет одновременное чтение в несколько потоков из этого файла.</p><p>Возможное значение:</p><ul><li>Положительное целое число.</li></ul><p>Значение по умолчанию: 251658240.</p><h2 id=setting-merge-tree-min-rows-for-seek>merge_tree_min_rows_for_seek<a class=headerlink href=../amp/#setting-merge-tree-min-rows-for-seek title="Permanent link"> </a></h2><p>Если расстояние между двумя блоками данных для чтения в одном файле меньше, чем <code class=syntax>merge_tree_min_rows_for_seek</code> строк, то ClickHouse не перескакивает (seek) через блоки, а считывает данные последовательно.</p><p>Возможные значения:</p><ul><li>Положительное целое число.</li></ul><p>Значение по умолчанию: 0.</p><h2 id=setting-merge-tree-min-bytes-for-seek>merge_tree_min_bytes_for_seek<a class=headerlink href=../amp/#setting-merge-tree-min-bytes-for-seek title="Permanent link"> </a></h2><p>Если расстояние между двумя блоками данных для чтения в одном файле меньше, чем <code class=syntax>merge_tree_min_bytes_for_seek</code> байтов, то ClickHouse не перескакивает (seek) через блоки, а считывает данные последовательно.</p><p>Возможные значения:</p><ul><li>Положительное целое число.</li></ul><p>Значение по умолчанию: 0.</p><h2 id=setting-merge-tree-coarse-index-granularity>merge_tree_coarse_index_granularity<a class=headerlink href=../amp/#setting-merge-tree-coarse-index-granularity title="Permanent link"> </a></h2><p>При поиске данных ClickHouse проверяет засечки данных в файле индекса. Если ClickHouse обнаруживает, что требуемые ключи находятся в некотором диапазоне, он делит этот диапазон на <code class=syntax>merge_tree_coarse_index_granularity</code> поддиапазонов и выполняет в них рекурсивный поиск нужных ключей.</p><p>Возможные значения:</p><ul><li>Положительное целое число.</li></ul><p>Значение по умолчанию: 8.</p><h2 id=setting-merge-tree-max-rows-to-use-cache>merge_tree_max_rows_to_use_cache<a class=headerlink href=../amp/#setting-merge-tree-max-rows-to-use-cache title="Permanent link"> </a></h2><p>Если требуется прочитать более, чем <code class=syntax>merge_tree_max_rows_to_use_cache</code> строк в одном запросе, ClickHouse не используют кэш несжатых блоков.</p><p>Кэш несжатых блоков хранит данные, извлечённые при выполнении запросов. ClickHouse использует этот кэш для ускорения ответов на повторяющиеся небольшие запросы. Настройка защищает кэш от замусоривания запросами, для выполнения которых необходимо извлечь большое количество данных. Настройка сервера <a href=../../../server-configuration-parameters/settings/amp/#server-settings-uncompressed_cache_size>uncompressed_cache_size</a> определяет размер кэша несжатых блоков.</p><p>Возможные значения:</p><ul><li>Положительное целое число.</li></ul><p>Значение по умолчанию: 128 ✕ 8192.</p><h2 id=setting-merge-tree-max-bytes-to-use-cache>merge_tree_max_bytes_to_use_cache<a class=headerlink href=../amp/#setting-merge-tree-max-bytes-to-use-cache title="Permanent link"> </a></h2><p>Если требуется прочитать более, чем <code class=syntax>merge_tree_max_bytes_to_use_cache</code> байтов в одном запросе, ClickHouse не используют кэш несжатых блоков.</p><p>Кэш несжатых блоков хранит данные, извлечённые при выполнении запросов. ClickHouse использует кэш для ускорения ответов на повторяющиеся небольшие запросы. Настройка защищает кэш от переполнения. Настройка сервера <a href=../../../server-configuration-parameters/settings/amp/#server-settings-uncompressed_cache_size>uncompressed_cache_size</a> определяет размер кэша несжатых блоков.</p><p>Возможное значение:</p><ul><li>Положительное целое число.</li></ul><p>Значение по умолчанию: 2013265920.</p><h2 id=settings-min-bytes-to-use-direct-io>min_bytes_to_use_direct_io<a class=headerlink href=../amp/#settings-min-bytes-to-use-direct-io title="Permanent link"> </a></h2><p>Минимальный объём данных, необходимый для прямого (небуферизованного) чтения/записи (direct I/O) на диск.</p><p>ClickHouse использует этот параметр при чтении данных из таблиц. Если общий объём хранения всех данных для чтения превышает <code class=syntax>min_bytes_to_use_direct_io</code> байт, тогда ClickHouse использует флаг <code class=syntax>O_DIRECT</code> при чтении данных с диска.</p><p>Возможные значения:</p><ul><li>0 — прямой ввод-вывод отключен.</li><li>Положительное целое число.</li></ul><p>Значение по умолчанию: 0.</p><h2 id=settings-log-queries>log_queries<a class=headerlink href=../amp/#settings-log-queries title="Permanent link"> </a></h2><p>Установка логирования запроса.</p><p>Запросы, переданные в ClickHouse с этой установкой, логируются согласно правилам конфигурационного параметра сервера <a href=../../../server-configuration-parameters/settings/amp/#server_configuration_parameters-query-log>query_log</a>.</p><p>Пример:</p><div class=codehilite><pre><span></span><code class=syntax>log_queries=1
</code></pre></div><h2 id=settings-log-query-threads>log_query_threads<a class=headerlink href=../amp/#settings-log-query-threads title="Permanent link"> </a></h2><p>Установка логирования информации о потоках выполнения запроса.</p><p>Лог информации о потоках выполнения запросов, переданных в ClickHouse с этой установкой, записывается согласно правилам конфигурационного параметра сервера <a href=../../../server-configuration-parameters/settings/amp/#server_configuration_parameters-query_thread_log>query_thread_log</a>.</p><p>Пример:</p><div class=codehilite><pre><span></span><code class=syntax>log_query_threads=1
</code></pre></div><h2 id=settings-max_insert_block_size>max_insert_block_size<a class=headerlink href=../amp/#settings-max_insert_block_size title="Permanent link"> </a></h2><p>Формировать блоки указанного размера, при вставке в таблицу.<br> Эта настройка действует только в тех случаях, когда сервер сам формирует такие блоки.<br> Например, при INSERT-е через HTTP интерфейс, сервер парсит формат данных, и формирует блоки указанного размера.<br> А при использовании clickhouse-client, клиент сам парсит данные, и настройка max_insert_block_size на сервере не влияет на размер вставляемых блоков.<br> При использовании INSERT SELECT, настройка так же не имеет смысла, так как данные будут вставляться теми блоками, которые вышли после SELECT-а.</p><p>Значение по умолчанию: 1,048,576.</p><p>Это значение намного больше, чем <code class=syntax>max_block_size</code>. Это сделано, потому что некоторые движки таблиц (<code class=syntax>*MergeTree</code>) будут на каждый вставляемый блок формировать кусок данных на диске, что является довольно большой сущностью. Также, в таблицах типа <code class=syntax>*MergeTree</code>, данные сортируются при вставке, и достаточно большой размер блока позволяет отсортировать больше данных в оперативке.</p><h2 id=min-insert-block-size-rows>min_insert_block_size_rows<a class=headerlink href=../amp/#min-insert-block-size-rows title="Permanent link"> </a></h2><p>Устанавливает минимальное количество строк в блоке, который может быть вставлен в таблицу запросом <code class=syntax>INSERT</code>. Блоки меньшего размера склеиваются в блоки большего размера.</p><p>Возможные значения:</p><ul><li>Целое положительное число.</li><li>0 — Склейка блоков выключена.</li></ul><p>Значение по умолчанию: 1048576.</p><h2 id=min-insert-block-size-bytes>min_insert_block_size_bytes<a class=headerlink href=../amp/#min-insert-block-size-bytes title="Permanent link"> </a></h2><p>Устанавливает минимальное количество байтов в блоке, который может быть вставлен в таблицу запросом <code class=syntax>INSERT</code>. Блоки меньшего размера склеиваются в блоки большего размера.</p><p>Возможные значения:</p><ul><li>Целое положительное число.</li><li>0 — Склейка блоков выключена.</li></ul><p>Значение по умолчанию: 268435456.</p><h2 id=settings-max_replica_delay_for_distributed_queries>max_replica_delay_for_distributed_queries<a class=headerlink href=../amp/#settings-max_replica_delay_for_distributed_queries title="Permanent link"> </a></h2><p>Отключает отстающие реплики при распределенных запросах. См. <a href=../../../../engines/table-engines/mergetree-family/replication/amp/ >Репликация</a>.</p><p>Устанавливает время в секундах. Если отставание реплики больше установленного значения, то реплика не используется.</p><p>Значение по умолчанию: 300.</p><p>Используется при выполнении <code class=syntax>SELECT</code> из распределенной таблицы, которая указывает на реплицированные таблицы.</p><h2 id=settings-max_threads>max_threads<a class=headerlink href=../amp/#settings-max_threads title="Permanent link"> </a></h2><p>Максимальное количество потоков обработки запроса без учёта потоков для чтения данных с удалённых серверов (смотрите параметр max_distributed_connections).</p><p>Этот параметр относится к потокам, которые выполняют параллельно одни стадии конвейера выполнения запроса.<br> Например, при чтении из таблицы, если есть возможность вычислять выражения с функциями, фильтровать с помощью WHERE и предварительно агрегировать для GROUP BY параллельно, используя хотя бы количество потоков max_threads, то используются max_threads.</p><p>Значение по умолчанию: количество процессорных ядер без учёта Hyper-Threading.</p><p>Если на сервере обычно исполняется менее одного запроса SELECT одновременно, то выставите этот параметр в значение чуть меньше количества реальных процессорных ядер.</p><p>Для запросов, которые быстро завершаются из-за LIMIT-а, имеет смысл выставить max_threads поменьше. Например, если нужное количество записей находится в каждом блоке, то при max_threads = 8 будет считано 8 блоков, хотя достаточно было прочитать один.</p><p>Чем меньше <code class=syntax>max_threads</code>, тем меньше будет использоваться оперативки.</p><h2 id=settings-max-insert-threads>max_insert_threads<a class=headerlink href=../amp/#settings-max-insert-threads title="Permanent link"> </a></h2><p>Максимальное количество потоков для выполнения запроса <code class=syntax>INSERT SELECT</code>.</p><p>Возможные значения:</p><ul><li>0 (или 1) — <code class=syntax>INSERT SELECT</code> не выполняется параллельно.</li><li>Положительное целое число, больше 1.</li></ul><p>Значение по умолчанию: 0.</p><p>Параллельный <code class=syntax>INSERT SELECT</code> действует только в том случае, если часть SELECT выполняется параллельно, см. настройку <a href=../amp/#settings-max_threads>max_threads</a>.<br> Чем больше значение <code class=syntax>max_insert_threads</code>, тем больше потребление оперативной памяти.</p><h2 id=max-compress-block-size>max_compress_block_size<a class=headerlink href=../amp/#max-compress-block-size title="Permanent link"> </a></h2><p>Максимальный размер блоков не сжатых данных перед сжатием при записи в таблицу. По умолчанию - 1 048 576 (1 MiB). При уменьшении размера, незначительно уменьшается коэффициент сжатия, незначительно возрастает скорость сжатия и разжатия за счёт кэш-локальности, и уменьшается потребление оперативки. Как правило, не имеет смысла менять эту настройку.</p><p>Не путайте блоки для сжатия (кусок памяти, состоящий из байт) и блоки для обработки запроса (пачка строк из таблицы).</p><h2 id=min-compress-block-size>min_compress_block_size<a class=headerlink href=../amp/#min-compress-block-size title="Permanent link"> </a></h2><p>Для таблиц типа <a href=../../../../engines/table-engines/mergetree-family/mergetree/amp/ >MergeTree</a>. В целях уменьшения задержек при обработке запросов, блок сжимается при записи следующей засечки, если его размер не меньше min_compress_block_size. По умолчанию - 65 536.</p><p>Реальный размер блока, если несжатых данных меньше max_compress_block_size, будет не меньше этого значения и не меньше объёма данных на одну засечку.</p><p>Рассмотрим пример. Пусть index_granularity, указанная при создании таблицы - 8192.</p><p>Пусть мы записываем столбец типа UInt32 (4 байта на значение). При записи 8192 строк, будет всего 32 КБ данных. Так как min_compress_block_size = 65 536, сжатый блок будет сформирован на каждые две засечки.</p><p>Пусть мы записываем столбец URL типа String (средний размер - 60 байт на значение). При записи 8192 строк, будет, в среднем, чуть меньше 500 КБ данных. Так как это больше 65 536 строк, то сжатый блок будет сформирован на каждую засечку. В этом случае, при чтении с диска данных из диапазона в одну засечку, не будет разжато лишних данных.</p><p>Как правило, не имеет смысла менять эту настройку.</p><h2 id=settings-max_query_size>max_query_size<a class=headerlink href=../amp/#settings-max_query_size title="Permanent link"> </a></h2><p>Максимальный кусок запроса, который будет считан в оперативку для разбора парсером языка SQL.<br> Запрос INSERT также содержит данные для INSERT-а, которые обрабатываются отдельным, потоковым парсером (расходующим O(1) оперативки), и не учитываются в этом ограничении.</p><p>Значение по умолчанию: 256 Кб.</p><h2 id=max_parser_depth>max_parser_depth<a class=headerlink href=../amp/#max_parser_depth title="Permanent link"> </a></h2><p>Ограничивает максимальную глубину рекурсии в парсере рекурсивного спуска. Позволяет контролировать размер стека.</p><p>Возможные значения:</p><ul><li>Положительное целое число.</li><li>0 — Глубина рекурсии не ограничена.</li></ul><p>Значение по умолчанию: 1000.</p><h2 id=interactive-delay>interactive_delay<a class=headerlink href=../amp/#interactive-delay title="Permanent link"> </a></h2><p>Интервал в микросекундах для проверки, не запрошена ли остановка выполнения запроса, и отправки прогресса.</p><p>Значение по умолчанию: 100,000 (проверять остановку запроса и отправлять прогресс десять раз в секунду).</p><h2 id=connect-timeout-receive-timeout-send-timeout>connect_timeout, receive_timeout, send_timeout<a class=headerlink href=../amp/#connect-timeout-receive-timeout-send-timeout title="Permanent link"> </a></h2><p>Таймауты в секундах на сокет, по которому идёт общение с клиентом.</p><p>Значение по умолчанию: 10, 300, 300.</p><h2 id=cancel-http-readonly-queries-on-client-close>cancel_http_readonly_queries_on_client_close<a class=headerlink href=../amp/#cancel-http-readonly-queries-on-client-close title="Permanent link"> </a></h2><p>Отменяет HTTP readonly запросы (например, SELECT), когда клиент обрывает соединение до завершения получения данных.</p><p>Значение по умолчанию: 0</p><h2 id=poll-interval>poll_interval<a class=headerlink href=../amp/#poll-interval title="Permanent link"> </a></h2><p>Блокироваться в цикле ожидания запроса в сервере на указанное количество секунд.</p><p>Значение по умолчанию: 10.</p><h2 id=max-distributed-connections>max_distributed_connections<a class=headerlink href=../amp/#max-distributed-connections title="Permanent link"> </a></h2><p>Максимальное количество одновременных соединений с удалёнными серверами при распределённой обработке одного запроса к одной таблице типа Distributed. Рекомендуется выставлять не меньше, чем количество серверов в кластере.</p><p>Значение по умолчанию: 1024.</p><p>Следующие параметры имеют значение только на момент создания таблицы типа Distributed (и при запуске сервера), поэтому их не имеет смысла менять в рантайме.</p><h2 id=distributed-connections-pool-size>distributed_connections_pool_size<a class=headerlink href=../amp/#distributed-connections-pool-size title="Permanent link"> </a></h2><p>Максимальное количество одновременных соединений с удалёнными серверами при распределённой обработке всех запросов к одной таблице типа Distributed. Рекомендуется выставлять не меньше, чем количество серверов в кластере.</p><p>Значение по умолчанию: 1024.</p><h2 id=connect-timeout-with-failover-ms>connect_timeout_with_failover_ms<a class=headerlink href=../amp/#connect-timeout-with-failover-ms title="Permanent link"> </a></h2><p>Таймаут в миллисекундах на соединение с удалённым сервером, для движка таблиц Distributed, если используются секции shard и replica в описании кластера.<br> В случае неуспеха, делается несколько попыток соединений с разными репликами.</p><p>Значение по умолчанию: 50.</p><h2 id=connections-with-failover-max-tries>connections_with_failover_max_tries<a class=headerlink href=../amp/#connections-with-failover-max-tries title="Permanent link"> </a></h2><p>Максимальное количество попыток соединения с каждой репликой, для движка таблиц Distributed.</p><p>Значение по умолчанию: 3.</p><h2 id=extremes>extremes<a class=headerlink href=../amp/#extremes title="Permanent link"> </a></h2><p>Считать ли экстремальные значения (минимумы и максимумы по столбцам результата запроса). Принимает 0 или 1. По умолчанию - 0 (выключено).<br> Подробнее смотрите раздел «Экстремальные значения».</p><h2 id=setting-use_uncompressed_cache>use_uncompressed_cache<a class=headerlink href=../amp/#setting-use_uncompressed_cache title="Permanent link"> </a></h2><p>Использовать ли кэш разжатых блоков. Принимает 0 или 1. По умолчанию - 0 (выключено).</p><p>Использование кэша несжатых блоков (только для таблиц семейства MergeTree) может существенно сократить задержку и увеличить пропускную способность при работе с большим количеством коротких запросов. Включите эту настройку для пользователей, от которых идут частые короткие запросы. Также обратите внимание на конфигурационный параметр <a href=../../../server-configuration-parameters/settings/amp/#server-settings-uncompressed_cache_size>uncompressed_cache_size</a> (настраивается только в конфигурационном файле) – размер кэша разжатых блоков. По умолчанию - 8 GiB. Кэш разжатых блоков заполняется по мере надобности, а наиболее невостребованные данные автоматически удаляются.</p><p>Для запросов, читающих хоть немного приличный объём данных (миллион строк и больше), кэш разжатых блоков автоматически выключается, чтобы оставить место для действительно мелких запросов. Поэтому, можно держать настройку <code class=syntax>use_uncompressed_cache</code> всегда выставленной в 1.</p><h2 id=replace-running-query>replace_running_query<a class=headerlink href=../amp/#replace-running-query title="Permanent link"> </a></h2><p>При использовании интерфейса HTTP может быть передан параметр query_id. Это любая строка, которая служит идентификатором запроса.<br> Если в этот момент, уже существует запрос от того же пользователя с тем же query_id, то поведение определяется параметром replace_running_query.</p><p><code class=syntax>0</code> - (по умолчанию) кинуть исключение (не давать выполнить запрос, если запрос с таким же query_id уже выполняется);</p><p><code class=syntax>1</code> - отменить старый запрос и начать выполнять новый.</p><p>Эта настройка, выставленная в 1, используется в Яндекс.Метрике для реализации suggest-а значений для условий сегментации. После ввода очередного символа, если старый запрос ещё не выполнился, его следует отменить.</p><h2 id=stream-flush-interval-ms>stream_flush_interval_ms<a class=headerlink href=../amp/#stream-flush-interval-ms title="Permanent link"> </a></h2><p>Работает для таблиц со стриммингом в случае тайм-аута, или когда поток генерирует <a href=../amp/#settings-max_insert_block_size>max_insert_block_size</a> строк.</p><p>Значение по умолчанию: 7500.</p><p>Чем меньше значение, тем чаще данные сбрасываются в таблицу. Установка слишком низкого значения приводит к снижению производительности.</p><h2 id=settings-load_balancing>load_balancing<a class=headerlink href=../amp/#settings-load_balancing title="Permanent link"> </a></h2><p>Задает алгоритм выбора реплик, используемый при обработке распределенных запросов.</p><p>ClickHouse поддерживает следующие алгоритмы выбора реплик:</p><ul><li><a href=../amp/#load_balancing-random>Random</a> (by default)</li><li><a href=../amp/#load_balancing-nearest_hostname>Nearest hostname</a></li><li><a href=../amp/#load_balancing-in_order>In order</a></li><li><a href=../amp/#load_balancing-first_or_random>First or random</a></li></ul><h3 id=load_balancing-random>Random (by Default)<a class=headerlink href=../amp/#load_balancing-random title="Permanent link"> </a></h3><div class=codehilite><pre><span></span><code class=syntax><span class=n>load_balancing</span> <span class=o>=</span> <span class=n>random</span>
</code></pre></div><p>Для каждой реплики считается количество ошибок. Запрос отправляется на реплику с минимальным числом ошибок, а если таких несколько, то на случайную из них.<br> Недостатки: не учитывается близость серверов; если на репликах оказались разные данные, то вы будете получать так же разные данные.</p><h3 id=load_balancing-nearest_hostname>Nearest Hostname<a class=headerlink href=../amp/#load_balancing-nearest_hostname title="Permanent link"> </a></h3><div class=codehilite><pre><span></span><code class=syntax><span class=n>load_balancing</span> <span class=o>=</span> <span class=n>nearest_hostname</span>
</code></pre></div><p>Для каждой реплики считается количество ошибок. Каждые 5 минут, число ошибок целочисленно делится на 2. Таким образом, обеспечивается расчёт числа ошибок за недавнее время с экспоненциальным сглаживанием. Если есть одна реплика с минимальным числом ошибок (то есть, на других репликах недавно были ошибки) - запрос отправляется на неё. Если есть несколько реплик с одинаковым минимальным числом ошибок, то запрос отправляется на реплику, имя хоста которой в конфигурационном файле минимально отличается от имени хоста сервера (по количеству отличающихся символов на одинаковых позициях, до минимальной длины обеих имён хостов).</p><p>Для примера, example01-01-1 и example01-01-2.yandex.ru отличаются в одной позиции, а example01-01-1 и example01-02-2 - в двух.<br> Этот метод может показаться примитивным, но он не требует внешних данных о топологии сети и не сравнивает IP-адреса, что было бы сложно для наших IPv6-адресов.</p><p>Таким образом, если есть равнозначные реплики, предпочитается ближайшая по имени.<br> Также можно сделать предположение, что при отправке запроса на один и тот же сервер, в случае отсутствия сбоев, распределённый запрос будет идти тоже на одни и те же серверы. То есть, даже если на репликах расположены разные данные, запрос будет возвращать в основном одинаковые результаты.</p><h3 id=load_balancing-in_order>In Order<a class=headerlink href=../amp/#load_balancing-in_order title="Permanent link"> </a></h3><div class=codehilite><pre><span></span><code class=syntax><span class=n>load_balancing</span> <span class=o>=</span> <span class=n>in_order</span>
</code></pre></div><p>Реплики с одинаковым количеством ошибок опрашиваются в порядке, определённом конфигурацией.<br> Этот способ подходит для тех случаев, когда вы точно знаете, какая реплика предпочтительнее.</p><h3 id=load_balancing-first_or_random>First or Random<a class=headerlink href=../amp/#load_balancing-first_or_random title="Permanent link"> </a></h3><div class=codehilite><pre><span></span><code class=syntax><span class=n>load_balancing</span> <span class=o>=</span> <span class=n>first_or_random</span>
</code></pre></div><p>Алгоритм выбирает первую реплику или случайную реплику, если первая недоступна. Он эффективен в топологиях с перекрестной репликацией, но бесполезен в других конфигурациях.</p><p>Алгоритм <code class=syntax>first or random</code> решает проблему алгоритма <code class=syntax>in order</code>. При использовании <code class=syntax>in order</code>, если одна реплика перестаёт отвечать, то следующая за ней принимает двойную нагрузку, в то время как все остальные обрабатываю свой обычный трафик. Алгоритм <code class=syntax>first or random</code> равномерно распределяет нагрузку между репликами.</p><h2 id=settings-prefer-localhost-replica>prefer_localhost_replica<a class=headerlink href=../amp/#settings-prefer-localhost-replica title="Permanent link"> </a></h2><p>Включает или выключает предпочтительное использование localhost реплики при обработке распределенных запросов.</p><p>Возможные значения:</p><ul><li>1 — ClickHouse всегда отправляет запрос на localhost реплику, если она существует.</li><li>0 — ClickHouse использует балансировку, заданную настройкой <a href=../amp/#settings-load_balancing>load_balancing</a>.</li></ul><p>Значение по умолчанию: 1.</p><div class="admonition warning alert pb-0 mb-4 alert-warning" role=alert><p class="admonition-title alert-heading display-6 mb-2">Warning</p><p>Отключайте эту настройку при использовании <a class=alert-link href=../amp/#settings-max_parallel_replicas>max_parallel_replicas</a>.</p></div><h2 id=totals-mode>totals_mode<a class=headerlink href=../amp/#totals-mode title="Permanent link"> </a></h2><p>Каким образом вычислять TOTALS при наличии HAVING, а также при наличии max_rows_to_group_by и group_by_overflow_mode = ‘any’.<br> Смотрите раздел «Модификатор WITH TOTALS».</p><h2 id=totals-auto-threshold>totals_auto_threshold<a class=headerlink href=../amp/#totals-auto-threshold title="Permanent link"> </a></h2><p>Порог для <code class=syntax>totals_mode = 'auto'</code>.<br> Смотрите раздел «Модификатор WITH TOTALS».</p><h2 id=settings-max_parallel_replicas>max_parallel_replicas<a class=headerlink href=../amp/#settings-max_parallel_replicas title="Permanent link"> </a></h2><p>Максимальное количество используемых реплик каждого шарда при выполнении запроса.<br> Для консистентности (чтобы получить разные части одного и того же разбиения), эта опция работает только при заданном ключе сэмплирования.<br> Отставание реплик не контролируется.</p><h2 id=compile>compile<a class=headerlink href=../amp/#compile title="Permanent link"> </a></h2><p>Включить компиляцию запросов. По умолчанию - 0 (выключено).</p><p>Компиляция предусмотрена только для части конвейера обработки запроса - для первой стадии агрегации (GROUP BY).<br> В случае, если эта часть конвейера была скомпилирована, запрос может работать быстрее, за счёт разворачивания коротких циклов и инлайнинга вызовов агрегатных функций. Максимальный прирост производительности (до четырёх раз в редких случаях) достигается на запросах с несколькими простыми агрегатными функциями. Как правило, прирост производительности незначителен. В очень редких случаях возможно замедление выполнения запроса.</p><h2 id=min-count-to-compile>min_count_to_compile<a class=headerlink href=../amp/#min-count-to-compile title="Permanent link"> </a></h2><p>После скольких раз, когда скомпилированный кусок кода мог пригодиться, выполнить его компиляцию. По умолчанию - 3.<br> Для тестирования можно установить значение 0: компиляция выполняется синхронно, и запрос ожидает окончания процесса компиляции перед продолжением выполнения. Во всех остальных случаях используйте значения, начинающиеся с 1. Как правило, компиляция занимает по времени около 5-10 секунд.<br> В случае, если значение равно 1 или больше, компиляция выполняется асинхронно, в отдельном потоке. При готовности результата, он сразу же будет использован, в том числе, уже выполняющимися в данный момент запросами.</p><p>Скомпилированный код требуется для каждого разного сочетания используемых в запросе агрегатных функций и вида ключей в GROUP BY.<br> Результаты компиляции сохраняются в директории build в виде .so файлов. Количество результатов компиляции не ограничено, так как они не занимают много места. При перезапуске сервера, старые результаты будут использованы, за исключением случая обновления сервера - тогда старые результаты удаляются.</p><h2 id=input-format-skip-unknown-fields>input_format_skip_unknown_fields<a class=headerlink href=../amp/#input-format-skip-unknown-fields title="Permanent link"> </a></h2><p>Если значение равно true, то при выполнении INSERT входные данные из столбцов с неизвестными именами будут пропущены. В противном случае эта ситуация создаст исключение.<br> Работает для форматов JSONEachRow и TSKV.</p><h2 id=session_settings-output_format_json_quote_64bit_integers>output_format_json_quote_64bit_integers<a class=headerlink href=../amp/#session_settings-output_format_json_quote_64bit_integers title="Permanent link"> </a></h2><p>Если значение истинно, то при использовании JSON* форматов UInt64 и Int64 числа выводятся в кавычках (из соображений совместимости с большинством реализаций JavaScript), иначе - без кавычек.</p><h2 id=settings-format_csv_delimiter>format_csv_delimiter<a class=headerlink href=../amp/#settings-format_csv_delimiter title="Permanent link"> </a></h2><p>Символ, интерпретируемый как разделитель в данных формата CSV. По умолчанию — <code class=syntax>,</code>.</p><h2 id=settings-input_format_csv_unquoted_null_literal_as_null>input_format_csv_unquoted_null_literal_as_null<a class=headerlink href=../amp/#settings-input_format_csv_unquoted_null_literal_as_null title="Permanent link"> </a></h2><p>Для формата CSV включает или выключает парсинг неэкранированной строки <code class=syntax>NULL</code> как литерала (синоним для <code class=syntax>\N</code>)</p><h2 id=settings-output-format-csv-crlf-end-of-line>output_format_csv_crlf_end_of_line<a class=headerlink href=../amp/#settings-output-format-csv-crlf-end-of-line title="Permanent link"> </a></h2><p>Использовать в качестве разделителя строк для CSV формата CRLF (DOS/Windows стиль) вместо LF (Unix стиль).</p><h2 id=settings-output-format-tsv-crlf-end-of-line>output_format_tsv_crlf_end_of_line<a class=headerlink href=../amp/#settings-output-format-tsv-crlf-end-of-line title="Permanent link"> </a></h2><p>Использовать в качестве разделителя строк для TSV формата CRLF (DOC/Windows стиль) вместо LF (Unix стиль).</p><h2 id=settings-insert_quorum>insert_quorum<a class=headerlink href=../amp/#settings-insert_quorum title="Permanent link"> </a></h2><p>Включает кворумную запись.</p><ul><li>Если <code class=syntax>insert_quorum &lt; 2</code>, то кворумная запись выключена.</li><li>Если <code class=syntax>insert_quorum &gt;= 2</code>, то кворумная запись включена.</li></ul><p>Значение по умолчанию: 0.</p><p>Кворумная запись</p><p><code class=syntax>INSERT</code> завершается успешно только в том случае, когда ClickHouse смог без ошибки записать данные в <code class=syntax>insert_quorum</code> реплик за время <code class=syntax>insert_quorum_timeout</code>. Если по любой причине количество реплик с успешной записью не достигнет <code class=syntax>insert_quorum</code>, то запись считается не состоявшейся и ClickHouse удалит вставленный блок из всех реплик, куда уже успел записать данные.</p><p>Все реплики в кворуме консистентны, т.е. содержат данные всех более ранних запросов <code class=syntax>INSERT</code>. Последовательность <code class=syntax>INSERT</code> линеаризуется.</p><p>При чтении данных, записанных с <code class=syntax>insert_quorum</code> можно использовать настройку <a href=../amp/#settings-select_sequential_consistency>select_sequential_consistency</a>.</p><p>ClickHouse генерирует исключение</p><ul><li>Если количество доступных реплик на момент запроса меньше <code class=syntax>insert_quorum</code>.</li><li>При попытке записать данные в момент, когда предыдущий блок ещё не вставлен в <code class=syntax>insert_quorum</code> реплик. Эта ситуация может возникнуть, если пользователь вызвал <code class=syntax>INSERT</code> прежде, чем завершился предыдущий с <code class=syntax>insert_quorum</code>.</li></ul><p>См. также:</p><ul><li><a href=../amp/#settings-insert_quorum_timeout>insert_quorum_timeout</a></li><li><a href=../amp/#settings-select_sequential_consistency>select_sequential_consistency</a></li></ul><h2 id=settings-insert_quorum_timeout>insert_quorum_timeout<a class=headerlink href=../amp/#settings-insert_quorum_timeout title="Permanent link"> </a></h2><p>Время ожидания кворумной записи в секундах. Если время прошло, а запись так не состоялась, то ClickHouse сгенерирует исключение и клиент должен повторить запрос на запись того же блока на эту же или любую другую реплику.</p><p>Значение по умолчанию: 60 секунд.</p><p>См. также:</p><ul><li><a href=../amp/#settings-insert_quorum>insert_quorum</a></li><li><a href=../amp/#settings-select_sequential_consistency>select_sequential_consistency</a></li></ul><h2 id=settings-select_sequential_consistency>select_sequential_consistency<a class=headerlink href=../amp/#settings-select_sequential_consistency title="Permanent link"> </a></h2><p>Включает или выключает последовательную консистентность для запросов <code class=syntax>SELECT</code>.</p><p>Возможные значения:</p><ul><li>0 — выключена.</li><li>1 — включена.</li></ul><p>Значение по умолчанию: 0.</p><p>Использование</p><p>Когда последовательная консистентность включена, то ClickHouse позволит клиенту выполнить запрос <code class=syntax>SELECT</code> только к тем репликам, которые содержат данные всех предыдущих запросов <code class=syntax>INSERT</code>, выполненных с <code class=syntax>insert_quorum</code>. Если клиент обратится к неполной реплике, то ClickHouse сгенерирует исключение. В запросе SELECT не будут участвовать данные, которые ещё не были записаны на кворум реплик.</p><p>См. также:</p><ul><li><a href=../amp/#settings-insert_quorum>insert_quorum</a></li><li><a href=../amp/#settings-insert_quorum_timeout>insert_quorum_timeout</a></li></ul><h2 id=settings-insert-deduplicate>insert_deduplicate<a class=headerlink href=../amp/#settings-insert-deduplicate title="Permanent link"> </a></h2><p>Включает и выключает дедупликацию для запросов <code class=syntax>INSERT</code> (для Replicated* таблиц).</p><p>Возможные значения:</p><ul><li>0 — выключена.</li><li>1 — включена.</li></ul><p>Значение по умолчанию: 1.</p><p>По умолчанию блоки, вставляемые в реплицируемые таблицы оператором <code class=syntax>INSERT</code>, дедуплицируются (см. <a href=../../../../engines/table-engines/mergetree-family/replication/amp/ >Репликация данных</a>).</p><h2 id=settings-deduplicate-blocks-in-dependent-materialized-views>deduplicate_blocks_in_dependent_materialized_views<a class=headerlink href=../amp/#settings-deduplicate-blocks-in-dependent-materialized-views title="Permanent link"> </a></h2><p>Включает и выключает проверку дедупликации для материализованных представлений, которые получают данные из Replicated* таблиц.</p><p>Возможные значения:</p><ul><li>0 — выключена.</li><li>1 — включена.</li></ul><p>Значение по умолчанию: 0.</p><p>По умолчанию проверка дедупликации у материализованных представлений не производится, а наследуется от Replicated* (основной) таблицы, за которой «следит» материализованное представление.<br> Т.е. если <code class=syntax>INSERT</code> в основную таблицу д.б. пропущен (сдедуплицирован), то автоматически не будет вставки и в материализованные представления. Это имплементировано для того, чтобы работали материализованные представления, которые сильно группируют данные основных <code class=syntax>INSERT</code>, до такой степени что блоки вставляемые в материализованные представления получаются одинаковыми для разных <code class=syntax>INSERT</code> в основную таблицу.<br> Одновременно это «ломает» идемпотентность вставки в материализованные представления. Т.е. если <code class=syntax>INSERT</code> был успешен в основную таблицу и неуспешен в таблицу материализованного представления (напр. из-за сетевого сбоя при коммуникации с Zookeeper), клиент получит ошибку и попытается повторить <code class=syntax>INSERT</code>. Но вставки в материализованные представления произведено не будет, потому что дедупликация сработает на основной таблице. Настройка <code class=syntax>deduplicate_blocks_in_dependent_materialized_views</code> позволяет это изменить. Т.е. при повторном <code class=syntax>INSERT</code> будет произведена дедупликация на таблице материализованного представления, и повторный инсерт вставит данные в таблицу материализованного представления, которые не удалось вставить из-за сбоя первого <code class=syntax>INSERT</code>.</p><h2 id=settings-count_distinct_implementation>count_distinct_implementation<a class=headerlink href=../amp/#settings-count_distinct_implementation title="Permanent link"> </a></h2><p>Задаёт, какая из функций <code class=syntax>uniq*</code> используется при выполнении конструкции <a href=../../../../sql-reference/aggregate-functions/reference/amp/#agg_function-count>COUNT(DISTINCT …)</a>.</p><p>Возможные значения:</p><ul><li><a href=../../../../sql-reference/aggregate-functions/reference/amp/#agg_function-uniq>uniq</a></li><li><a href=../../../../sql-reference/aggregate-functions/reference/amp/#agg_function-uniqcombined>uniqCombined</a></li><li><a href=../../../../sql-reference/aggregate-functions/reference/amp/#agg_function-uniqcombined64>uniqCombined64</a></li><li><a href=../../../../sql-reference/aggregate-functions/reference/amp/#agg_function-uniqhll12>uniqHLL12</a></li><li><a href=../../../../sql-reference/aggregate-functions/reference/amp/#agg_function-uniqexact>uniqExact</a></li></ul><p>Значение по умолчанию: <code class=syntax>uniqExact</code>.</p><h2 id=settings-max-network-bytes>max_network_bytes<a class=headerlink href=../amp/#settings-max-network-bytes title="Permanent link"> </a></h2><p>Ограничивает объём данных (в байтах), который принимается или передается по сети при выполнении запроса. Параметр применяется к каждому отдельному запросу.</p><p>Возможные значения:</p><ul><li>Положительное целое число.</li><li>0 — контроль объёма данных отключен.</li></ul><p>Значение по умолчанию: 0.</p><h2 id=settings-max-network-bandwidth>max_network_bandwidth<a class=headerlink href=../amp/#settings-max-network-bandwidth title="Permanent link"> </a></h2><p>Ограничивает скорость обмена данными по сети в байтах в секунду. Параметр применяется к каждому отдельному запросу.</p><p>Возможные значения:</p><ul><li>Положительное целое число.</li><li>0 — контроль скорости передачи данных отключен.</li></ul><p>Значение по умолчанию: 0.</p><h2 id=settings-max-network-bandwidth-for-user>max_network_bandwidth_for_user<a class=headerlink href=../amp/#settings-max-network-bandwidth-for-user title="Permanent link"> </a></h2><p>Ограничивает скорость обмена данными по сети в байтах в секунду. Этот параметр применяется ко всем одновременно выполняемым запросам, запущенным одним пользователем.</p><p>Возможные значения:</p><ul><li>Положительное целое число.</li><li>0 — управление скоростью передачи данных отключено.</li></ul><p>Значение по умолчанию: 0.</p><h2 id=settings-max-network-bandwidth-for-all-users>max_network_bandwidth_for_all_users<a class=headerlink href=../amp/#settings-max-network-bandwidth-for-all-users title="Permanent link"> </a></h2><p>Ограничивает скорость обмена данными по сети в байтах в секунду. Этот параметр применяется ко всем одновременно выполняемым запросам на сервере.</p><p>Возможные значения:</p><ul><li>Положительное целое число.</li><li>0 — управление скоростью передачи данных отключено.</li></ul><p>Значение по умолчанию: 0.</p><h2 id=settings-skip_unavailable_shards>skip_unavailable_shards<a class=headerlink href=../amp/#settings-skip_unavailable_shards title="Permanent link"> </a></h2><p>Включает или отключает тихий пропуск недоступных шардов.</p><p>Шард считается недоступным, если все его реплики недоступны. Реплика недоступна в следующих случаях:</p><ul><li><p>ClickHouse не может установить соединение с репликой по любой причине.</p><div class=codehilite><pre><span></span><code class=syntax><span class=err>ClickHouse предпринимает несколько попыток подключиться к реплике. Если все попытки оказались неудачными, реплика считается недоступной.</span>
</code></pre></div></li><li><p>Реплика не может быть разрешена с помощью DNS.</p><div class=codehilite><pre><span></span><code class=syntax><span class=n>Если</span><span class=w> </span><span class=n>имя</span><span class=w> </span><span class=n>хоста</span><span class=w> </span><span class=n>реплики</span><span class=w> </span><span class=n>не</span><span class=w> </span><span class=n>может</span><span class=w> </span><span class=n>быть</span><span class=w> </span><span class=n>разрешено</span><span class=w> </span><span class=n>с</span><span class=w> </span><span class=n>помощью</span><span class=w> </span><span class=n>DNS</span><span class=p>,</span><span class=w> </span><span class=n>это</span><span class=w> </span><span class=n>может</span><span class=w> </span><span class=n>указывать</span><span class=w> </span><span class=n>на</span><span class=w> </span><span class=n>следующие</span><span class=w> </span><span class=nl>ситуации</span><span class=p>:</span><span class=w></span>

<span class=o>-</span><span class=w> </span><span class=n>Нет</span><span class=w> </span><span class=n>записи</span><span class=w> </span><span class=n>DNS</span><span class=w> </span><span class=n>для</span><span class=w> </span><span class=n>хоста</span><span class=p>.</span><span class=w> </span><span class=n>Это</span><span class=w> </span><span class=n>может</span><span class=w> </span><span class=n>происходить</span><span class=w> </span><span class=n>в</span><span class=w> </span><span class=n>системах</span><span class=w> </span><span class=n>с</span><span class=w> </span><span class=n>динамическим</span><span class=w> </span><span class=n>DNS</span><span class=p>,</span><span class=w> </span><span class=n>например</span><span class=p>,</span><span class=w> </span><span class=o>[</span><span class=n>Kubernetes</span><span class=o>]</span><span class=p>(</span><span class=nl>https</span><span class=p>:</span><span class=o>//</span><span class=n>kubernetes</span><span class=p>.</span><span class=n>io</span><span class=p>),</span><span class=w> </span><span class=n>где</span><span class=w> </span><span class=n>отключенные</span><span class=w> </span><span class=n>ноды</span><span class=w> </span><span class=n>не</span><span class=w> </span><span class=n>разрешаться</span><span class=w> </span><span class=n>с</span><span class=w> </span><span class=n>помощью</span><span class=w> </span><span class=n>DNS</span><span class=w> </span><span class=n>и</span><span class=w> </span><span class=n>это</span><span class=w> </span><span class=n>не</span><span class=w> </span><span class=n>ошибка</span><span class=p>.</span><span class=w></span>

<span class=o>-</span><span class=w> </span><span class=n>Ошибка</span><span class=w> </span><span class=n>конфигурации</span><span class=p>.</span><span class=w> </span><span class=n>Конфигурационный</span><span class=w> </span><span class=n>файл</span><span class=w> </span><span class=n>ClickHouse</span><span class=w> </span><span class=n>может</span><span class=w> </span><span class=n>содержать</span><span class=w> </span><span class=n>неправильное</span><span class=w> </span><span class=n>имя</span><span class=w> </span><span class=n>хоста</span><span class=p>.</span><span class=w></span>
</code></pre></div></li></ul><p>Возможные значения:</p><ul><li><p>1 — пропуск включен.</p><div class=codehilite><pre><span></span><code class=syntax><span class=err>Если шард недоступен, то ClickHouse возвращает результат, основанный на неполных данных и не оповещает о проблемах с доступностью хостов.</span>
</code></pre></div></li><li><p>0 — пропуск выключен.</p><div class=codehilite><pre><span></span><code class=syntax><span class=err>Если шард недоступен, то ClickHouse генерирует исключение.</span>
</code></pre></div></li></ul><p>Значение по умолчанию: 0.</p><h2 id=optimize-skip-unused-shards>optimize_skip_unused_shards<a class=headerlink href=../amp/#optimize-skip-unused-shards title="Permanent link"> </a></h2><p>Включает или отключает пропуск неиспользуемых шардов для запросов <a href=../../../../sql-reference/statements/select/amp/ >SELECT</a> , в которых условие ключа шардирования задано в секции <code class=syntax>WHERE/PREWHERE</code>. Предполагается, что данные распределены с помощью ключа шардирования, в противном случае настройка ничего не делает.</p><p>Возможные значения:</p><ul><li>0 — Выключена.</li><li>1 — Включена.</li></ul><p>Значение по умолчанию: 0</p><h2 id=optimize-skip-unused-shards-nesting>optimize_skip_unused_shards_nesting<a class=headerlink href=../amp/#optimize-skip-unused-shards-nesting title="Permanent link"> </a></h2><p>Контролирует настройку <a href=../amp/#optimize-skip-unused-shards><code class=syntax>optimize_skip_unused_shards</code></a> (поэтому все еще требует <code class=syntax>optimize_skip_unused_shards</code>) в зависимости от вложенности распределенного запроса (когда у вас есть <code class=syntax>Distributed</code> таблица которая смотрит на другую <code class=syntax>Distributed</code> таблицу).</p><p>Возможные значения:</p><ul><li>0 — Выключена, <code class=syntax>optimize_skip_unused_shards</code> работает всегда.</li><li>1 — Включает <code class=syntax>optimize_skip_unused_shards</code> только для 1-ого уровня вложенности.</li><li>2 — Включает <code class=syntax>optimize_skip_unused_shards</code> для 1-ого и 2-ого уровня вложенности.</li></ul><p>Значение по умолчанию: 0</p><h2 id=force-optimize-skip-unused-shards>force_optimize_skip_unused_shards<a class=headerlink href=../amp/#force-optimize-skip-unused-shards title="Permanent link"> </a></h2><p>Разрешает или запрещает выполнение запроса, если настройка <a href=../amp/#optimize-skip-unused-shards>optimize_skip_unused_shards</a> включена, а пропуск неиспользуемых шардов невозможен. Если данная настройка включена и пропуск невозможен, ClickHouse генерирует исключение.</p><p>Возможные значения:</p><ul><li>0 — Выключена, <code class=syntax>force_optimize_skip_unused_shards</code> работает всегда.</li><li>1 — Включает <code class=syntax>force_optimize_skip_unused_shards</code> только для 1-ого уровня вложенности.</li><li>2 — Включает <code class=syntax>force_optimize_skip_unused_shards</code> для 1-ого и 2-ого уровня вложенности.</li></ul><p>Значение по умолчанию: 0</p><h2 id=settings-force_optimize_skip_unused_shards_nesting>force_optimize_skip_unused_shards_nesting<a class=headerlink href=../amp/#settings-force_optimize_skip_unused_shards_nesting title="Permanent link"> </a></h2><p>Контролирует настройку <a href=../amp/#force-optimize-skip-unused-shards><code class=syntax>force_optimize_skip_unused_shards</code></a> (поэтому все еще требует <code class=syntax>optimize_skip_unused_shards</code>) в зависимости от вложенности распределенного запроса (когда у вас есть <code class=syntax>Distributed</code> таблица которая смотрит на другую <code class=syntax>Distributed</code> таблицу).</p><p>Возможные значения:</p><ul><li>0 - Disabled, <code class=syntax>force_optimize_skip_unused_shards</code> works on all levels.</li><li>1 — Enables <code class=syntax>force_optimize_skip_unused_shards</code> only for the first level.</li><li>2 — Enables <code class=syntax>force_optimize_skip_unused_shards</code> up to the second level.</li></ul><p>Значение по умолчанию: 0</p><h2 id=setting-optimize_throw_if_noop>optimize_throw_if_noop<a class=headerlink href=../amp/#setting-optimize_throw_if_noop title="Permanent link"> </a></h2><p>Включает или отключает генерирование исключения в в случаях, когда запрос <a href=../../../../sql-reference/statements/misc/amp/#misc_operations-optimize>OPTIMIZE</a> не выполняет мёрж.</p><p>По умолчанию, <code class=syntax>OPTIMIZE</code> завершается успешно и в тех случаях, когда он ничего не сделал. Настройка позволяет отделить подобные случаи и включает генерирование исключения с поясняющим сообщением.</p><p>Возможные значения:</p><ul><li>1 — генерирование исключения включено.</li><li>0 — генерирование исключения выключено.</li></ul><p>Значение по умолчанию: 0.</p><h2 id=distributed_directory_monitor_sleep_time_ms>distributed_directory_monitor_sleep_time_ms<a class=headerlink href=../amp/#distributed_directory_monitor_sleep_time_ms title="Permanent link"> </a></h2><p>Основной интервал отправки данных движком таблиц <a href=../../../../engines/table-engines/special/distributed/amp/ >Distributed</a>. Фактический интервал растёт экспоненциально при возникновении ошибок.</p><p>Возможные значения:</p><ul><li>Положительное целое количество миллисекунд.</li></ul><p>Значение по умолчанию: 100 миллисекунд.</p><h2 id=distributed_directory_monitor_max_sleep_time_ms>distributed_directory_monitor_max_sleep_time_ms<a class=headerlink href=../amp/#distributed_directory_monitor_max_sleep_time_ms title="Permanent link"> </a></h2><p>Максимальный интервал отправки данных движком таблиц <a href=../../../../engines/table-engines/special/distributed/amp/ >Distributed</a>. Ограничивает экпоненциальный рост интервала, установленого настройкой <a href=../amp/#distributed_directory_monitor_sleep_time_ms>distributed_directory_monitor_sleep_time_ms</a>.</p><p>Возможные значения:</p><ul><li>Положительное целое количество миллисекунд.</li></ul><p>Значение по умолчанию: 30000 миллисекунд (30 секунд).</p><h2 id=distributed_directory_monitor_batch_inserts>distributed_directory_monitor_batch_inserts<a class=headerlink href=../amp/#distributed_directory_monitor_batch_inserts title="Permanent link"> </a></h2><p>Включает/выключает пакетную отправку вставленных данных.</p><p>Если пакетная отправка включена, то движок таблиц <a href=../../../../engines/table-engines/special/distributed/amp/ >Distributed</a> вместо того, чтобы отправлять каждый файл со вставленными данными по отдельности, старается отправить их все за одну операцию. Пакетная отправка улучшает производительность кластера за счет более оптимального использования ресурсов сервера и сети.</p><p>Возможные значения:</p><ul><li>1 — включено.</li><li>0 — выключено.</li></ul><p>Значение по умолчанию: 0.</p><h2 id=setting-os-thread-priority>os_thread_priority<a class=headerlink href=../amp/#setting-os-thread-priority title="Permanent link"> </a></h2><p>Устанавливает приоритет (<a href=https://en.wikipedia.org/wiki/Nice_(Unix) rel="external nofollow noreferrer" target=_blank>nice</a>) для потоков, исполняющих запросы. Планировщик ОС учитывает эти приоритеты при выборе следующего потока для исполнения на доступном ядре CPU.</p><div class="admonition warning alert pb-0 mb-4 alert-warning" role=alert><p class="admonition-title alert-heading display-6 mb-2">Предупреждение</p><p>Для использования этой настройки необходимо установить свойство <code class=syntax>CAP_SYS_NICE</code>. Пакет <code class=syntax>clickhouse-server</code> устанавливает его во время инсталляции. Некоторые виртуальные окружения не позволяют установить <code class=syntax>CAP_SYS_NICE</code>. В этом случае, <code class=syntax>clickhouse-server</code> выводит сообщение при запуске.</p></div><p>Допустимые значения:</p><ul><li>Любое значение из диапазона <code class=syntax>[-20, 19]</code>.</li></ul><p>Более низкие значения означают более высокий приоритет. Потоки с низкими значениями приоритета <code class=syntax>nice</code> выполняются чаще, чем потоки с более высокими значениями. Высокие значения предпочтительно использовать для долгих неинтерактивных запросов, поскольку это позволяет бысто выделить ресурс в пользу коротких интерактивных запросов.</p><p>Значение по умолчанию: 0.</p><h2 id=query_profiler_real_time_period_ns>query_profiler_real_time_period_ns<a class=headerlink href=../amp/#query_profiler_real_time_period_ns title="Permanent link"> </a></h2><p>Sets the period for a real clock timer of the <a href=../../../optimizing-performance/sampling-query-profiler/amp/ >query profiler</a>. Real clock timer counts wall-clock time.</p><p>Possible values:</p><ul><li><p>Positive integer number, in nanoseconds.</p><div class=codehilite><pre><span></span><code class=syntax><span class=n>Recommended</span> <span class=k>values</span><span class=p>:</span>

    <span class=o>-</span> <span class=mi>10000000</span> <span class=p>(</span><span class=mi>100</span> <span class=n>times</span> <span class=n>a</span> <span class=k>second</span><span class=p>)</span> <span class=n>nanoseconds</span> <span class=k>and</span> <span class=k>less</span> <span class=k>for</span> <span class=n>single</span> <span class=n>queries</span><span class=p>.</span>
    <span class=o>-</span> <span class=mi>1000000000</span> <span class=p>(</span><span class=n>once</span> <span class=n>a</span> <span class=k>second</span><span class=p>)</span> <span class=k>for</span> <span class=k>cluster</span><span class=o>-</span><span class=n>wide</span> <span class=n>profiling</span><span class=p>.</span>
</code></pre></div></li><li><p>0 for turning off the timer.</p></li></ul><p>Type: <a href=../../../../sql-reference/data-types/int-uint/amp/ >UInt64</a>.</p><p>Default value: 1000000000 nanoseconds (once a second).</p><p>See also:</p><ul><li>System table <a href=../../../system-tables/amp/#system_tables-trace_log>trace_log</a></li></ul><h2 id=query_profiler_cpu_time_period_ns>query_profiler_cpu_time_period_ns<a class=headerlink href=../amp/#query_profiler_cpu_time_period_ns title="Permanent link"> </a></h2><p>Sets the period for a CPU clock timer of the <a href=../../../optimizing-performance/sampling-query-profiler/amp/ >query profiler</a>. This timer counts only CPU time.</p><p>Possible values:</p><ul><li><p>Positive integer number of nanoseconds.</p><div class=codehilite><pre><span></span><code class=syntax><span class=n>Recommended</span> <span class=k>values</span><span class=p>:</span>

    <span class=o>-</span> <span class=mi>10000000</span> <span class=p>(</span><span class=mi>100</span> <span class=n>times</span> <span class=n>a</span> <span class=k>second</span><span class=p>)</span> <span class=n>nanosecods</span> <span class=k>and</span> <span class=k>more</span> <span class=k>for</span> <span class=k>for</span> <span class=n>single</span> <span class=n>queries</span><span class=p>.</span>
    <span class=o>-</span> <span class=mi>1000000000</span> <span class=p>(</span><span class=n>once</span> <span class=n>a</span> <span class=k>second</span><span class=p>)</span> <span class=k>for</span> <span class=k>cluster</span><span class=o>-</span><span class=n>wide</span> <span class=n>profiling</span><span class=p>.</span>
</code></pre></div></li><li><p>0 for turning off the timer.</p></li></ul><p>Type: <a href=../../../../sql-reference/data-types/int-uint/amp/ >UInt64</a>.</p><p>Default value: 1000000000 nanoseconds.</p><p>See also:</p><ul><li>System table <a href=../../../system-tables/amp/#system_tables-trace_log>trace_log</a></li></ul><h2 id=settings-allow_introspection_functions>allow_introspection_functions<a class=headerlink href=../amp/#settings-allow_introspection_functions title="Permanent link"> </a></h2><p>Enables of disables <a href=../../../../sql-reference/functions/introspection/amp/ >introspections functions</a> for query profiling.</p><p>Possible values:</p><ul><li>1 — Introspection functions enabled.</li><li>0 — Introspection functions disabled.</li></ul><p>Default value: 0.</p><p><strong>See Also</strong></p><ul><li><a href=../../../optimizing-performance/sampling-query-profiler/amp/ >Sampling Query Profiler</a></li><li>System table <a href=../../../system-tables/amp/#system_tables-trace_log>trace_log</a></li></ul><h2 id=background_pool_size>background_pool_size<a class=headerlink href=../amp/#background_pool_size title="Permanent link"> </a></h2><p>Задает количество потоков для выполнения фоновых операций в движках таблиц (например, слияния в таблицах c движком <a href=../../../../engines/table-engines/mergetree-family/amp/ >MergeTree</a>). Настройка применяется при запуске сервера ClickHouse и не может быть изменена во пользовательском сеансе. Настройка позволяет управлять загрузкой процессора и диска. Чем меньше пулл, тем ниже нагрузка на CPU и диск, при этом фоновые процессы замедляются, что может повлиять на скорость выполнения запроса.</p><p>Допустимые значения:</p><ul><li>Положительное целое число.</li></ul><p>Значение по умолчанию: 16.</p><h2 id=always_fetch_merged_part>always_fetch_merged_part<a class=headerlink href=../amp/#always_fetch_merged_part title="Permanent link"> </a></h2><p>Запрещает слияние данных для таблиц семейства <a href=../../../../engines/table-engines/mergetree-family/replication/amp/ >Replicated*MergeTree</a>.</p><p>Если слияние запрещено, реплика никогда не выполняет слияние отдельных кусков данных, а всегда загружает объединённые данные из других реплик. Если объединённых данных пока нет, реплика ждет их появления. Нагрузка на процессор и диски на реплике уменьшается, но нагрузка на сеть в кластере возрастает. Настройка может быть полезна на репликах с относительно слабыми процессорами или медленными дисками, например, на репликах для хранения архивных данных.</p><p>Возможные значения:</p><ul><li>0 — таблицы семейства <code class=syntax>Replicated*MergeTree</code> выполняют слияние данных на реплике.</li><li>1 — таблицы семейства <code class=syntax>Replicated*MergeTree</code> не выполняют слияние данных на реплике, а загружают объединённые данные из других реплик.</li></ul><p>Значение по умолчанию: 0.</p><p><strong>См. также:</strong> </p><ul><li><a href=../../../../engines/table-engines/mergetree-family/replication/amp/ >Репликация данных</a></li></ul><h2 id=transform_null_in>transform_null_in<a class=headerlink href=../amp/#transform_null_in title="Permanent link"> </a></h2><p>Разрешает сравнивать значения <a href=../../../../sql-reference/syntax/amp/#null-literal>NULL</a> в операторе <a href=../../../../sql-reference/operators/in/amp/ >IN</a>.</p><p>По умолчанию, значения <code class=syntax>NULL</code> нельзя сравнивать, поскольку <code class=syntax>NULL</code> обозначает неопределённое значение. Следовательно, сравнение <code class=syntax>expr = NULL</code> должно всегда возвращать <code class=syntax>false</code>. С этой настройкой <code class=syntax>NULL = NULL</code> возвращает <code class=syntax>true</code> в операторе <code class=syntax>IN</code>.</p><p>Possible values:</p><ul><li>0 — Сравнение значений <code class=syntax>NULL</code> в операторе <code class=syntax>IN</code> возвращает <code class=syntax>false</code>.</li><li>1 — Сравнение значений <code class=syntax>NULL</code> в операторе <code class=syntax>IN</code> возвращает <code class=syntax>true</code>.</li></ul><p>Значение по умолчанию: 0.</p><p><strong>Пример</strong> </p><p>Рассмотрим таблицу <code class=syntax>null_in</code>:</p><div class=codehilite><pre><span></span><code class=syntax>┌──idx─┬─────i─┐
│    1 │     1 │
│    2 │  NULL │
│    3 │     3 │
└──────┴───────┘
</code></pre></div><p>Consider the <code class=syntax>null_in</code> table:</p><div class=codehilite><pre><span></span><code class=syntax>┌──idx─┬─────i─┐
│    1 │     1 │
│    2 │  NULL │
│    3 │     3 │
└──────┴───────┘
</code></pre></div><p>Запрос:</p><div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>idx</span><span class=p>,</span> <span class=n>i</span> <span class=k>FROM</span> <span class=n>null_in</span> <span class=k>WHERE</span> <span class=n>i</span> <span class=k>IN</span> <span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=k>NULL</span><span class=p>)</span> <span class=n>SETTINGS</span> <span class=n>transform_null_in</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</code></pre></div><p>Ответ:</p><div class=codehilite><pre><span></span><code class=syntax>┌──idx─┬────i─┐
│    1 │    1 │
└──────┴──────┘
</code></pre></div><p>Запрос:</p><div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>idx</span><span class=p>,</span> <span class=n>i</span> <span class=k>FROM</span> <span class=n>null_in</span> <span class=k>WHERE</span> <span class=n>i</span> <span class=k>IN</span> <span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=k>NULL</span><span class=p>)</span> <span class=n>SETTINGS</span> <span class=n>transform_null_in</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span>
</code></pre></div><p>Ответ:</p><div class=codehilite><pre><span></span><code class=syntax>┌──idx─┬─────i─┐
│    1 │     1 │
│    2 │  NULL │
└──────┴───────┘
</code></pre></div><p><strong>См. также</strong> </p><ul><li><a href=../../../../sql-reference/operators/in/amp/#in-null-processing>Обработка значения NULL в операторе IN</a></li></ul><h2 id=background_buffer_flush_schedule_pool_size>background_buffer_flush_schedule_pool_size<a class=headerlink href=../amp/#background_buffer_flush_schedule_pool_size title="Permanent link"> </a></h2><p>Задает количество потоков для выполнения фонового сброса данных в таблицах с движком <a href=../../../../engines/table-engines/special/buffer/amp/ >Buffer</a>. Настройка применяется при запуске сервера ClickHouse и не может быть изменена в пользовательском сеансе.</p><p>Допустимые значения:</p><ul><li>Положительное целое число.</li></ul><p>Значение по умолчанию: 16.</p><h2 id=background_move_pool_size>background_move_pool_size<a class=headerlink href=../amp/#background_move_pool_size title="Permanent link"> </a></h2><p>Задает количество потоков для фоновых перемещений кусков между дисками. Работает для таблиц с движком <a href=../../../../engines/table-engines/mergetree-family/mergetree/amp/#table_engine-mergetree-multiple-volumes>MergeTree</a>. Настройка применяется при запуске сервера ClickHouse и не может быть изменена в пользовательском сеансе.</p><p>Допустимые значения:</p><ul><li>Положительное целое число.</li></ul><p>Значение по умолчанию: 8.</p><h2 id=background_schedule_pool_size>background_schedule_pool_size<a class=headerlink href=../amp/#background_schedule_pool_size title="Permanent link"> </a></h2><p>Задает количество потоков для выполнения фоновых задач. Работает для <a href=../../../../engines/table-engines/mergetree-family/replication/amp/ >реплицируемых</a> таблиц, стримов в <a href=../../../../engines/table-engines/integrations/kafka/amp/ >Kafka</a> и обновления IP адресов у записей во внутреннем <a href=../../../server-configuration-parameters/settings/amp/#server-settings-dns-cache-update-period>DNS кеше</a>. Настройка применяется при запуске сервера ClickHouse и не может быть изменена в пользовательском сеансе.</p><p>Допустимые значения:</p><ul><li>Положительное целое число.</li></ul><p>Значение по умолчанию: 16.</p><h2 id=background_distributed_schedule_pool_size>background_distributed_schedule_pool_size<a class=headerlink href=../amp/#background_distributed_schedule_pool_size title="Permanent link"> </a></h2><p>Задает количество потоков для выполнения фоновых задач. Работает для таблиц с движком <a href=../../../../engines/table-engines/special/distributed/amp/ >Distributed</a>. Настройка применяется при запуске сервера ClickHouse и не может быть изменена в пользовательском сеансе.</p><p>Допустимые значения:</p><ul><li>Положительное целое число.</li></ul><p>Значение по умолчанию: 16.</p><h2 id=format_avro_schema_registry_url>format_avro_schema_registry_url<a class=headerlink href=../amp/#format_avro_schema_registry_url title="Permanent link"> </a></h2><p>Задает URL реестра схем <a href=https://docs.confluent.io/current/schema-registry/index.html rel="external nofollow noreferrer" target=_blank>Confluent</a> для использования с форматом <a href=../../../../interfaces/formats/amp/#data-format-avro-confluent>AvroConfluent</a>.</p><p>Значение по умолчанию: <code class=syntax>Пустая строка</code>.</p><h2 id=min-insert-block-size-rows-for-materialized-views>min_insert_block_size_rows_for_materialized_views<a class=headerlink href=../amp/#min-insert-block-size-rows-for-materialized-views title="Permanent link"> </a></h2><p>Устанавливает минимальное количество строк в блоке, который может быть вставлен в таблицу запросом <code class=syntax>INSERT</code>. Блоки меньшего размера склеиваются в блоки большего размера. Настройка применяется только для блоков, вставляемых в <a href=../../../../sql-reference/statements/create/amp/#create-view>материализованное представление</a>. Настройка позволяет избежать избыточного потребления памяти.</p><p>Допустимые значения:</p><ul><li>Положительное целое число.</li><li>0 — Склейка блоков выключена.</li></ul><p>Значение по умолчанию: 1048576.</p><p><strong>См. также:</strong></p><ul><li><a href=../amp/#min-insert-block-size-rows>min_insert_block_size_rows</a></li></ul><h2 id=min-insert-block-size-bytes-for-materialized-views>min_insert_block_size_bytes_for_materialized_views<a class=headerlink href=../amp/#min-insert-block-size-bytes-for-materialized-views title="Permanent link"> </a></h2><p>Устанавливает минимальное количество байтов в блоке, который может быть вставлен в таблицу запросом <code class=syntax>INSERT</code>. Блоки меньшего размера склеиваются в блоки большего размера. Настройка применяется только для блоков, вставляемых в <a href=../../../../sql-reference/statements/create/amp/#create-view>материализованное представление</a>. Настройка позволяет избежать избыточного потребления памяти.</p><p>Допустимые значения:</p><ul><li>Положительное целое число.</li><li>0 — Склейка блоков выключена.</li></ul><p>Значение по умолчанию: 268435456.</p><p><strong>См. также:</strong></p><ul><li><a href=../amp/#min-insert-block-size-bytes>min_insert_block_size_bytes</a></li></ul><p><a href=https://clickhouse.tech/docs/ru/operations/settings/settings/ target=_blank>Оригинальная статья</a> <!--hide--></p>
        </div>
      </div>
      <div class="row">
        <div class="col">
          
<div class="alert alert-light my-3">
  <p class="float-right mb-0">Рейтинг: RATING_VALUE - RATING_COUNT голосов</p>
  <span class="alert-heading display-6">Рейтинг статьи</span>
  <div id="rating-stars" class="display-6 mb-0"
     
  >RATING_STARS</div>
</div>

<div id="content-footer" class="text-muted pt-3 mb-5">
    <div class="float-md-right">©2016–2020 Yandex LLC</div>
    <div>Собрано из <a href="https://github.com/ClickHouse/ClickHouse/commit/782f2179ce4ad0b9a9c898a5f32557555b59e4d0" rel="external nofollow noreferrer" target="_blank" class="text-reset">782f2179ce</a>, опубликовано <span title="2017-03-12T20:58:51+03:00">2017-03-12</span>, изменено <span title="2020-07-03T00:26:55+03:00">2020-07-03</span>
    
    </div>
</div>

        </div>
      </div>
      <div id="to-full-website" class="row fixed-bottom text-center bg-white py-3">
        <div class="col">
          <a class="btn btn-lg btn-outline-orange" href="https://clickhouse.tech/docs/ru/operations/settings/settings/">To full website</a>
        </div>
      </div>
    </div>
    <amp-analytics type="metrika">
      <script type="application/json">{
"vars": {
  "counterId": "18343495",
  "triggers": {
    "notBounce": {
      "on": "timer",
      "timerSpec": {
        "immediate": false,
        "interval": 15,
        "maxTimerLength": 16
      },
      "request": "notBounce"
    }
  }
}
}</script>
  </amp-analytics>
  </body>
</html>
