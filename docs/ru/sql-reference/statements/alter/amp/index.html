










    



    



    



    
    






    <!doctype html>
<html ⚡ lang="ru">
  <head>
    <meta charset="utf-8">
    <script async src="https://cdn.ampproject.org/v0.js"></script>
    <title>ALTER | Документация ClickHouse</title>
    <link rel="canonical" href="https://clickhouse.tech/docs/ru/sql-reference/statements/alter/" />
    <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">
    
<script type="application/ld+json">[{
"@context": "http://schema.org",
"@type": "TechArticle",
"headline": "ALTER | Документация ClickHouse",
"mainEntityOfPage": "https://clickhouse.tech/docs/ru/sql-reference/statements/alter/",

"datePublished": "2018-07-18T10:42:59+03:00",
"dateModified": "2020-05-19T09:02:30+03:00",

"image": "https://clickhouse.tech/images/logo-209x60.png",
"author": {
  "@type": "Project",
  "name": "ClickHouse"
},
"publisher": {
  "@type": "Organization",
  "name": "Yandex LLC",
  "logo": {
    "@type": "ImageObject",
    "url": "https://clickhouse.tech/images/yandex.png",
    "width": 163,
    "height": 60
  }
}}, {
"@context": "http://schema.org",
"@type": "Episode",
"name": "ALTER | Документация ClickHouse",
"aggregateRating": {
  "@type": "AggregateRating",
  "ratingValue": RATING_VALUE,
  "ratingCount": RATING_COUNT
}
}]</script>

    
    <style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>
    <style amp-custom>:root{--blue:#007bff;--indigo:#6610f2;--purple:#6f42c1;--pink:#e83e8c;--red:#dc3545;--orange:#fd7e14;--yellow:#ffc107;--green:#28a745;--teal:#20c997;--cyan:#17a2b8;--white:#fff;--gray:#6c757d;--gray-dark:#343a40;--primary:#007bff;--secondary:#6c757d;--success:#28a745;--info:#17a2b8;--warning:#ffc107;--danger:#dc3545;--light:#f8f9fa;--dark:#343a40;--breakpoint-xs:0;--breakpoint-sm:576px;--breakpoint-md:768px;--breakpoint-lg:992px;--breakpoint-xl:1200px;--font-family-sans-serif:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";--font-family-monospace:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace}*,::after,::before{box-sizing:border-box}html{font-family:sans-serif;line-height:1.15;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent}footer{display:block}body{margin:0;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-size:1rem;font-weight:400;line-height:1.5;color:#212529;text-align:left;background-color:#fff}[tabindex="-1"]:focus:not(:focus-visible){outline:0}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:.5rem}p{margin-top:0;margin-bottom:1rem}address{margin-bottom:1rem;font-style:normal;line-height:inherit}ol,ul{margin-top:0;margin-bottom:1rem}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}b{font-weight:bolder}a{color:#007bff;text-decoration:none;background-color:transparent}a:hover{color:#0056b3;text-decoration:underline}a:not([href]){color:inherit;text-decoration:none}a:not([href]):hover{color:inherit;text-decoration:none}code,pre{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:1em}pre{margin-top:0;margin-bottom:1rem;overflow:auto}img{vertical-align:middle;border-style:none}svg{overflow:hidden;vertical-align:middle}table{border-collapse:collapse}select{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}select{text-transform:none}select{word-wrap:normal}[type=button],[type=reset],[type=submit]{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled){cursor:pointer}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner{padding:0;border-style:none}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:none}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}[hidden]{display:none}.h1,.h2,.h3,.h4,.h5,.h6,h1,h2,h3,h4,h5,h6{margin-bottom:.5rem;font-weight:500;line-height:1.2}.h1,h1{font-size:2.5rem}.h2,h2{font-size:2rem}.h3,h3{font-size:1.75rem}.h4,h4{font-size:1.5rem}.h5,h5{font-size:1.25rem}.h6,h6{font-size:1rem}.display-1{font-size:6rem;font-weight:300;line-height:1.2}.display-2{font-size:5.5rem;font-weight:300;line-height:1.2}.display-3{font-size:4.5rem;font-weight:300;line-height:1.2}.display-4{font-size:3.5rem;font-weight:300;line-height:1.2}.img-fluid{max-width:100%;height:auto}code{font-size:87.5%;color:#e83e8c;word-wrap:break-word}a>code{color:inherit}pre{display:block;font-size:87.5%;color:#212529}pre code{font-size:inherit;color:inherit;word-break:normal}.container{width:100%;padding-right:15px;padding-left:15px;margin-right:auto;margin-left:auto}@media(min-width:576px){.container{max-width:540px}}@media(min-width:768px){.container{max-width:720px}}@media(min-width:992px){.container{max-width:960px}}@media(min-width:1200px){.container{max-width:1140px}}.container-fluid,.container-lg,.container-md{width:100%;padding-right:15px;padding-left:15px;margin-right:auto;margin-left:auto}@media(min-width:576px){.container{max-width:540px}}@media(min-width:768px){.container,.container-md{max-width:720px}}@media(min-width:992px){.container,.container-lg,.container-md{max-width:960px}}@media(min-width:1200px){.container,.container-lg,.container-md{max-width:1140px}}.row{display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-right:-15px;margin-left:-15px}.col,.col-1,.col-10,.col-11,.col-12,.col-2,.col-3,.col-4,.col-5,.col-6,.col-7,.col-8,.col-9,.col-lg,.col-lg-1,.col-lg-10,.col-lg-11,.col-lg-12,.col-lg-2,.col-lg-3,.col-lg-4,.col-lg-5,.col-lg-6,.col-lg-7,.col-lg-8,.col-lg-9,.col-md,.col-md-1,.col-md-10,.col-md-11,.col-md-12,.col-md-2,.col-md-3,.col-md-4,.col-md-5,.col-md-6,.col-md-7,.col-md-8,.col-md-9{position:relative;width:100%;padding-right:15px;padding-left:15px}.col{-ms-flex-preferred-size:0;flex-basis:0;-ms-flex-positive:1;flex-grow:1;max-width:100%}.col-1{-ms-flex:0 0 8.333333%;flex:0 0 8.333333%;max-width:8.333333%}.col-2{-ms-flex:0 0 16.666667%;flex:0 0 16.666667%;max-width:16.666667%}.col-3{-ms-flex:0 0 25%;flex:0 0 25%;max-width:25%}.col-4{-ms-flex:0 0 33.333333%;flex:0 0 33.333333%;max-width:33.333333%}.col-5{-ms-flex:0 0 41.666667%;flex:0 0 41.666667%;max-width:41.666667%}.col-6{-ms-flex:0 0 50%;flex:0 0 50%;max-width:50%}.col-7{-ms-flex:0 0 58.333333%;flex:0 0 58.333333%;max-width:58.333333%}.col-8{-ms-flex:0 0 66.666667%;flex:0 0 66.666667%;max-width:66.666667%}.col-9{-ms-flex:0 0 75%;flex:0 0 75%;max-width:75%}.col-10{-ms-flex:0 0 83.333333%;flex:0 0 83.333333%;max-width:83.333333%}.col-11{-ms-flex:0 0 91.666667%;flex:0 0 91.666667%;max-width:91.666667%}.col-12{-ms-flex:0 0 100%;flex:0 0 100%;max-width:100%}.order-0{-ms-flex-order:0;order:0}.order-1{-ms-flex-order:1;order:1}.order-2{-ms-flex-order:2;order:2}.order-3{-ms-flex-order:3;order:3}.order-4{-ms-flex-order:4;order:4}.order-5{-ms-flex-order:5;order:5}.order-6{-ms-flex-order:6;order:6}.order-7{-ms-flex-order:7;order:7}.order-8{-ms-flex-order:8;order:8}.order-9{-ms-flex-order:9;order:9}.order-10{-ms-flex-order:10;order:10}.order-11{-ms-flex-order:11;order:11}.order-12{-ms-flex-order:12;order:12}@media(min-width:768px){.col-md{-ms-flex-preferred-size:0;flex-basis:0;-ms-flex-positive:1;flex-grow:1;max-width:100%}.col-md-1{-ms-flex:0 0 8.333333%;flex:0 0 8.333333%;max-width:8.333333%}.col-md-2{-ms-flex:0 0 16.666667%;flex:0 0 16.666667%;max-width:16.666667%}.col-md-3{-ms-flex:0 0 25%;flex:0 0 25%;max-width:25%}.col-md-4{-ms-flex:0 0 33.333333%;flex:0 0 33.333333%;max-width:33.333333%}.col-md-5{-ms-flex:0 0 41.666667%;flex:0 0 41.666667%;max-width:41.666667%}.col-md-6{-ms-flex:0 0 50%;flex:0 0 50%;max-width:50%}.col-md-7{-ms-flex:0 0 58.333333%;flex:0 0 58.333333%;max-width:58.333333%}.col-md-8{-ms-flex:0 0 66.666667%;flex:0 0 66.666667%;max-width:66.666667%}.col-md-9{-ms-flex:0 0 75%;flex:0 0 75%;max-width:75%}.col-md-10{-ms-flex:0 0 83.333333%;flex:0 0 83.333333%;max-width:83.333333%}.col-md-11{-ms-flex:0 0 91.666667%;flex:0 0 91.666667%;max-width:91.666667%}.col-md-12{-ms-flex:0 0 100%;flex:0 0 100%;max-width:100%}.order-md-0{-ms-flex-order:0;order:0}.order-md-1{-ms-flex-order:1;order:1}.order-md-2{-ms-flex-order:2;order:2}.order-md-3{-ms-flex-order:3;order:3}.order-md-4{-ms-flex-order:4;order:4}.order-md-5{-ms-flex-order:5;order:5}.order-md-6{-ms-flex-order:6;order:6}.order-md-7{-ms-flex-order:7;order:7}.order-md-8{-ms-flex-order:8;order:8}.order-md-9{-ms-flex-order:9;order:9}.order-md-10{-ms-flex-order:10;order:10}.order-md-11{-ms-flex-order:11;order:11}.order-md-12{-ms-flex-order:12;order:12}}@media(min-width:992px){.col-lg{-ms-flex-preferred-size:0;flex-basis:0;-ms-flex-positive:1;flex-grow:1;max-width:100%}.col-lg-1{-ms-flex:0 0 8.333333%;flex:0 0 8.333333%;max-width:8.333333%}.col-lg-2{-ms-flex:0 0 16.666667%;flex:0 0 16.666667%;max-width:16.666667%}.col-lg-3{-ms-flex:0 0 25%;flex:0 0 25%;max-width:25%}.col-lg-4{-ms-flex:0 0 33.333333%;flex:0 0 33.333333%;max-width:33.333333%}.col-lg-5{-ms-flex:0 0 41.666667%;flex:0 0 41.666667%;max-width:41.666667%}.col-lg-6{-ms-flex:0 0 50%;flex:0 0 50%;max-width:50%}.col-lg-7{-ms-flex:0 0 58.333333%;flex:0 0 58.333333%;max-width:58.333333%}.col-lg-8{-ms-flex:0 0 66.666667%;flex:0 0 66.666667%;max-width:66.666667%}.col-lg-9{-ms-flex:0 0 75%;flex:0 0 75%;max-width:75%}.col-lg-10{-ms-flex:0 0 83.333333%;flex:0 0 83.333333%;max-width:83.333333%}.col-lg-11{-ms-flex:0 0 91.666667%;flex:0 0 91.666667%;max-width:91.666667%}.col-lg-12{-ms-flex:0 0 100%;flex:0 0 100%;max-width:100%}.order-lg-0{-ms-flex-order:0;order:0}.order-lg-1{-ms-flex-order:1;order:1}.order-lg-2{-ms-flex-order:2;order:2}.order-lg-3{-ms-flex-order:3;order:3}.order-lg-4{-ms-flex-order:4;order:4}.order-lg-5{-ms-flex-order:5;order:5}.order-lg-6{-ms-flex-order:6;order:6}.order-lg-7{-ms-flex-order:7;order:7}.order-lg-8{-ms-flex-order:8;order:8}.order-lg-9{-ms-flex-order:9;order:9}.order-lg-10{-ms-flex-order:10;order:10}.order-lg-11{-ms-flex-order:11;order:11}.order-lg-12{-ms-flex-order:12;order:12}}.table{width:100%;margin-bottom:1rem;color:#212529}.table-primary{background-color:#b8daff}.table-light{background-color:#fdfdfe}.table-dark{background-color:#c6c8ca}.table-dark{color:#fff;background-color:#343a40}.btn{display:inline-block;font-weight:400;color:#212529;text-align:center;vertical-align:middle;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-color:transparent;border:1px solid transparent;padding:.375rem .75rem;font-size:1rem;line-height:1.5;border-radius:.25rem;transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out}@media(prefers-reduced-motion:reduce){.btn{transition:none}}.btn:hover{color:#212529;text-decoration:none}.btn:focus{outline:0;box-shadow:0 0 0 .2rem rgba(0,123,255,.25)}.btn:disabled{opacity:.65}.btn-primary{color:#fff;background-color:#007bff;border-color:#007bff}.btn-primary:hover{color:#fff;background-color:#0069d9;border-color:#0062cc}.btn-primary:focus{color:#fff;background-color:#0069d9;border-color:#0062cc;box-shadow:0 0 0 .2rem rgba(38,143,255,.5)}.btn-primary:disabled{color:#fff;background-color:#007bff;border-color:#007bff}.btn-light{color:#212529;background-color:#f8f9fa;border-color:#f8f9fa}.btn-light:hover{color:#212529;background-color:#e2e6ea;border-color:#dae0e5}.btn-light:focus{color:#212529;background-color:#e2e6ea;border-color:#dae0e5;box-shadow:0 0 0 .2rem rgba(216,217,219,.5)}.btn-light:disabled{color:#212529;background-color:#f8f9fa;border-color:#f8f9fa}.btn-dark{color:#fff;background-color:#343a40;border-color:#343a40}.btn-dark:hover{color:#fff;background-color:#23272b;border-color:#1d2124}.btn-dark:focus{color:#fff;background-color:#23272b;border-color:#1d2124;box-shadow:0 0 0 .2rem rgba(82,88,93,.5)}.btn-dark:disabled{color:#fff;background-color:#343a40;border-color:#343a40}.btn-outline-primary{color:#007bff;border-color:#007bff}.btn-outline-primary:hover{color:#fff;background-color:#007bff;border-color:#007bff}.btn-outline-primary:focus{box-shadow:0 0 0 .2rem rgba(0,123,255,.5)}.btn-outline-primary:disabled{color:#007bff;background-color:transparent}.btn-outline-light{color:#f8f9fa;border-color:#f8f9fa}.btn-outline-light:hover{color:#212529;background-color:#f8f9fa;border-color:#f8f9fa}.btn-outline-light:focus{box-shadow:0 0 0 .2rem rgba(248,249,250,.5)}.btn-outline-light:disabled{color:#f8f9fa;background-color:transparent}.btn-outline-dark{color:#343a40;border-color:#343a40}.btn-outline-dark:hover{color:#fff;background-color:#343a40;border-color:#343a40}.btn-outline-dark:focus{box-shadow:0 0 0 .2rem rgba(52,58,64,.5)}.btn-outline-dark:disabled{color:#343a40;background-color:transparent}.btn-link{font-weight:400;color:#007bff;text-decoration:none}.btn-link:hover{color:#0056b3;text-decoration:underline}.btn-link:focus{text-decoration:underline;box-shadow:none}.btn-link:disabled{color:#6c757d;pointer-events:none}.btn-lg{padding:.5rem 1rem;font-size:1.25rem;line-height:1.5;border-radius:.3rem}.btn-block{display:block;width:100%}.btn-block+.btn-block{margin-top:.5rem}.custom-select{display:inline-block;width:100%;height:calc(1.5em+.75rem+2px);padding:.375rem 1.75rem .375rem .75rem;font-size:1rem;font-weight:400;line-height:1.5;color:#495057;vertical-align:middle;background:#fff url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='4' height='5' viewBox='0 0 4 5'%3e%3cpath fill='%23343a40' d='M2 0L0 2h4zm0 5L0 3h4z'/%3e%3c/svg%3e") no-repeat right .75rem center/8px 10px;border:1px solid #ced4da;border-radius:.25rem;-webkit-appearance:none;-moz-appearance:none;appearance:none}.custom-select:focus{border-color:#80bdff;outline:0;box-shadow:0 0 0 .2rem rgba(0,123,255,.25)}.custom-select:focus::-ms-value{color:#495057;background-color:#fff}.custom-select[multiple],.custom-select[size]:not([size="1"]){height:auto;padding-right:.75rem;background-image:none}.custom-select:disabled{color:#6c757d;background-color:#e9ecef}.custom-select::-ms-expand{display:none}.custom-select:-moz-focusring{color:transparent;text-shadow:0 0 0 #495057}.custom-select-lg{height:calc(1.5em+1rem+2px);padding-top:.5rem;padding-bottom:.5rem;padding-left:1rem;font-size:1.25rem}.custom-select{transition:background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out}@media(prefers-reduced-motion:reduce){.custom-select{transition:none}}.alert{position:relative;padding:.75rem 1.25rem;margin-bottom:1rem;border:1px solid transparent;border-radius:.25rem}.alert-heading{color:inherit}.alert-link{font-weight:700}.alert-primary{color:#004085;background-color:#cce5ff;border-color:#b8daff}.alert-primary .alert-link{color:#002752}.alert-light{color:#818182;background-color:#fefefe;border-color:#fdfdfe}.alert-light .alert-link{color:#686868}.alert-dark{color:#1b1e21;background-color:#d6d8d9;border-color:#c6c8ca}.alert-dark .alert-link{color:#040505}@-webkit-keyframes progress-bar-stripes{from{background-position:1rem 0}to{background-position:0 0}}@keyframes progress-bar-stripes{from{background-position:1rem 0}to{background-position:0 0}}@-webkit-keyframes spinner-border{to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes spinner-border{to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-webkit-keyframes spinner-grow{0%{-webkit-transform:scale(0);transform:scale(0)}50%{opacity:1}}@keyframes spinner-grow{0%{-webkit-transform:scale(0);transform:scale(0)}50%{opacity:1}}.bg-primary{background-color:#007bff}a.bg-primary:focus,a.bg-primary:hover{background-color:#0062cc}.bg-light{background-color:#f8f9fa}a.bg-light:focus,a.bg-light:hover{background-color:#dae0e5}.bg-dark{background-color:#343a40}a.bg-dark:focus,a.bg-dark:hover{background-color:#1d2124}.bg-white{background-color:#fff}.d-none{display:none}.d-inline{display:inline}.d-inline-block{display:inline-block}.d-block{display:block}.d-table{display:table}.d-table-row{display:table-row}@media(min-width:768px){.d-md-none{display:none}.d-md-inline{display:inline}.d-md-inline-block{display:inline-block}.d-md-block{display:block}.d-md-table{display:table}.d-md-table-row{display:table-row}}@media(min-width:992px){.d-lg-none{display:none}.d-lg-inline{display:inline}.d-lg-inline-block{display:inline-block}.d-lg-block{display:block}.d-lg-table{display:table}.d-lg-table-row{display:table-row}}.float-right{float:right}.float-none{float:none}@media(min-width:768px){.float-md-right{float:right}.float-md-none{float:none}}@media(min-width:992px){.float-lg-right{float:right}.float-lg-none{float:none}}.fixed-bottom{position:fixed;right:0;bottom:0;left:0;z-index:1030}.shadow{box-shadow:0 .5rem 1rem rgba(0,0,0,.15)}.shadow-lg{box-shadow:0 1rem 3rem rgba(0,0,0,.175)}.shadow-none{box-shadow:none}.h-25{height:25%}.h-50{height:50%}.h-75{height:75%}.h-100{height:100%}.my-0{margin-top:0}.mr-0{margin-right:0}.mb-0,.my-0{margin-bottom:0}.my-1{margin-top:.25rem}.mr-1{margin-right:.25rem}.mb-1,.my-1{margin-bottom:.25rem}.my-2{margin-top:.5rem}.mr-2{margin-right:.5rem}.mb-2,.my-2{margin-bottom:.5rem}.my-3{margin-top:1rem}.mr-3{margin-right:1rem}.mb-3,.my-3{margin-bottom:1rem}.my-4{margin-top:1.5rem}.mr-4{margin-right:1.5rem}.mb-4,.my-4{margin-bottom:1.5rem}.my-5{margin-top:3rem}.mr-5{margin-right:3rem}.mb-5,.my-5{margin-bottom:3rem}.p-0{padding:0}.pt-0,.py-0{padding-top:0}.pb-0,.py-0{padding-bottom:0}.p-1{padding:.25rem}.pt-1,.py-1{padding-top:.25rem}.pb-1,.py-1{padding-bottom:.25rem}.p-2{padding:.5rem}.pt-2,.py-2{padding-top:.5rem}.pb-2,.py-2{padding-bottom:.5rem}.p-3{padding:1rem}.pt-3,.py-3{padding-top:1rem}.pb-3,.py-3{padding-bottom:1rem}.p-4{padding:1.5rem}.pt-4,.py-4{padding-top:1.5rem}.pb-4,.py-4{padding-bottom:1.5rem}.p-5{padding:3rem}.pt-5,.py-5{padding-top:3rem}.pb-5,.py-5{padding-bottom:3rem}.my-n1{margin-top:-.25rem}.mr-n1{margin-right:-.25rem}.mb-n1,.my-n1{margin-bottom:-.25rem}.my-n2{margin-top:-.5rem}.mr-n2{margin-right:-.5rem}.mb-n2,.my-n2{margin-bottom:-.5rem}.my-n3{margin-top:-1rem}.mr-n3{margin-right:-1rem}.mb-n3,.my-n3{margin-bottom:-1rem}.my-n4{margin-top:-1.5rem}.mr-n4{margin-right:-1.5rem}.mb-n4,.my-n4{margin-bottom:-1.5rem}.my-n5{margin-top:-3rem}.mr-n5{margin-right:-3rem}.mb-n5,.my-n5{margin-bottom:-3rem}@media(min-width:768px){.my-md-0{margin-top:0}.mr-md-0{margin-right:0}.mb-md-0,.my-md-0{margin-bottom:0}.my-md-1{margin-top:.25rem}.mr-md-1{margin-right:.25rem}.mb-md-1,.my-md-1{margin-bottom:.25rem}.my-md-2{margin-top:.5rem}.mr-md-2{margin-right:.5rem}.mb-md-2,.my-md-2{margin-bottom:.5rem}.my-md-3{margin-top:1rem}.mr-md-3{margin-right:1rem}.mb-md-3,.my-md-3{margin-bottom:1rem}.my-md-4{margin-top:1.5rem}.mr-md-4{margin-right:1.5rem}.mb-md-4,.my-md-4{margin-bottom:1.5rem}.my-md-5{margin-top:3rem}.mr-md-5{margin-right:3rem}.mb-md-5,.my-md-5{margin-bottom:3rem}.p-md-0{padding:0}.pt-md-0,.py-md-0{padding-top:0}.pb-md-0,.py-md-0{padding-bottom:0}.p-md-1{padding:.25rem}.pt-md-1,.py-md-1{padding-top:.25rem}.pb-md-1,.py-md-1{padding-bottom:.25rem}.p-md-2{padding:.5rem}.pt-md-2,.py-md-2{padding-top:.5rem}.pb-md-2,.py-md-2{padding-bottom:.5rem}.p-md-3{padding:1rem}.pt-md-3,.py-md-3{padding-top:1rem}.pb-md-3,.py-md-3{padding-bottom:1rem}.p-md-4{padding:1.5rem}.pt-md-4,.py-md-4{padding-top:1.5rem}.pb-md-4,.py-md-4{padding-bottom:1.5rem}.p-md-5{padding:3rem}.pt-md-5,.py-md-5{padding-top:3rem}.pb-md-5,.py-md-5{padding-bottom:3rem}.my-md-n1{margin-top:-.25rem}.mr-md-n1{margin-right:-.25rem}.mb-md-n1,.my-md-n1{margin-bottom:-.25rem}.my-md-n2{margin-top:-.5rem}.mr-md-n2{margin-right:-.5rem}.mb-md-n2,.my-md-n2{margin-bottom:-.5rem}.my-md-n3{margin-top:-1rem}.mr-md-n3{margin-right:-1rem}.mb-md-n3,.my-md-n3{margin-bottom:-1rem}.my-md-n4{margin-top:-1.5rem}.mr-md-n4{margin-right:-1.5rem}.mb-md-n4,.my-md-n4{margin-bottom:-1.5rem}.my-md-n5{margin-top:-3rem}.mr-md-n5{margin-right:-3rem}.mb-md-n5,.my-md-n5{margin-bottom:-3rem}}@media(min-width:992px){.my-lg-0{margin-top:0}.mr-lg-0{margin-right:0}.mb-lg-0,.my-lg-0{margin-bottom:0}.my-lg-1{margin-top:.25rem}.mr-lg-1{margin-right:.25rem}.mb-lg-1,.my-lg-1{margin-bottom:.25rem}.my-lg-2{margin-top:.5rem}.mr-lg-2{margin-right:.5rem}.mb-lg-2,.my-lg-2{margin-bottom:.5rem}.my-lg-3{margin-top:1rem}.mr-lg-3{margin-right:1rem}.mb-lg-3,.my-lg-3{margin-bottom:1rem}.my-lg-4{margin-top:1.5rem}.mr-lg-4{margin-right:1.5rem}.mb-lg-4,.my-lg-4{margin-bottom:1.5rem}.my-lg-5{margin-top:3rem}.mr-lg-5{margin-right:3rem}.mb-lg-5,.my-lg-5{margin-bottom:3rem}.p-lg-0{padding:0}.pt-lg-0,.py-lg-0{padding-top:0}.pb-lg-0,.py-lg-0{padding-bottom:0}.p-lg-1{padding:.25rem}.pt-lg-1,.py-lg-1{padding-top:.25rem}.pb-lg-1,.py-lg-1{padding-bottom:.25rem}.p-lg-2{padding:.5rem}.pt-lg-2,.py-lg-2{padding-top:.5rem}.pb-lg-2,.py-lg-2{padding-bottom:.5rem}.p-lg-3{padding:1rem}.pt-lg-3,.py-lg-3{padding-top:1rem}.pb-lg-3,.py-lg-3{padding-bottom:1rem}.p-lg-4{padding:1.5rem}.pt-lg-4,.py-lg-4{padding-top:1.5rem}.pb-lg-4,.py-lg-4{padding-bottom:1.5rem}.p-lg-5{padding:3rem}.pt-lg-5,.py-lg-5{padding-top:3rem}.pb-lg-5,.py-lg-5{padding-bottom:3rem}.my-lg-n1{margin-top:-.25rem}.mr-lg-n1{margin-right:-.25rem}.mb-lg-n1,.my-lg-n1{margin-bottom:-.25rem}.my-lg-n2{margin-top:-.5rem}.mr-lg-n2{margin-right:-.5rem}.mb-lg-n2,.my-lg-n2{margin-bottom:-.5rem}.my-lg-n3{margin-top:-1rem}.mr-lg-n3{margin-right:-1rem}.mb-lg-n3,.my-lg-n3{margin-bottom:-1rem}.my-lg-n4{margin-top:-1.5rem}.mr-lg-n4{margin-right:-1.5rem}.mb-lg-n4,.my-lg-n4{margin-bottom:-1.5rem}.my-lg-n5{margin-top:-3rem}.mr-lg-n5{margin-right:-3rem}.mb-lg-n5,.my-lg-n5{margin-bottom:-3rem}}.text-right{text-align:right}.text-center{text-align:center}@media(min-width:768px){.text-md-right{text-align:right}.text-md-center{text-align:center}}@media(min-width:992px){.text-lg-right{text-align:right}.text-lg-center{text-align:center}}.text-white{color:#fff}.text-primary{color:#007bff}a.text-primary:focus,a.text-primary:hover{color:#0056b3}.text-light{color:#f8f9fa}a.text-light:focus,a.text-light:hover{color:#cbd3da}.text-dark{color:#343a40}a.text-dark:focus,a.text-dark:hover{color:#121416}.text-body{color:#212529}.text-muted{color:#6c757d}.text-black-50{color:rgba(0,0,0,.5)}.text-white-50{color:rgba(255,255,255,.5)}.text-hide{font:0/0 a;color:transparent;text-shadow:none;background-color:transparent;border:0}.text-decoration-none{text-decoration:none}.text-reset{color:inherit}.visible{visibility:visible}@media print{*,::after,::before{text-shadow:none;box-shadow:none}a:not(.btn){text-decoration:underline}pre{white-space:pre-wrap}pre{border:1px solid #adb5bd;page-break-inside:avoid}img{page-break-inside:avoid}h2,h3,p{orphans:3;widows:3}h2,h3{page-break-after:avoid}@page{size:a3}body{min-width:992px}.container{min-width:992px}.table{border-collapse:collapse}.table-dark{color:inherit}}@-webkit-keyframes sbx-reset-in{0%{-webkit-transform:translate3d(-20%,0,0);transform:translate3d(-20%,0,0);opacity:0}100%{-webkit-transform:none;transform:none;opacity:1}}@keyframes sbx-reset-in{0%{-webkit-transform:translate3d(-20%,0,0);transform:translate3d(-20%,0,0);opacity:0}100%{-webkit-transform:none;transform:none;opacity:1}}body{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Noto Sans","Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji"}a:link,a:visited{color:#f14600;text-decoration:none}a:active,a:hover{text-decoration:underline}.btn:disabled{cursor:default;opacity:.4}#logo-text{width:180px;margin-left:12px}.display-5{font-size:2rem;font-weight:300;line-height:1.2}.display-6{font-size:1.75rem;font-weight:300;line-height:1.2}.bg-dark-alt,.bg-dark-alt:focus{background:#36363f}.bg-orange,.bg-orange:focus{background:#f14600}.text-dark-alt{color:#36363f}.btn-dark-alt{background:#36363f}.btn-dark-alt:focus{background:#36363f}.btn-outline-orange{border-color:#f14600;color:#f14600}.btn-orange,.btn-outline-orange:hover{background:#f14600;color:#fff}.btn:active,.btn:hover{text-decoration:none}.text-orange{color:#f14600}.bg-number{position:absolute;font-size:900%;font-weight:700;color:rgba(241,70,0,.1);line-height:1;margin-top:-1rem}.headerlink{text-decoration:none;margin-left:.5rem}body[data-spy] #content{overflow-x:scroll}#content table{border:1px solid #dee2e6;width:100%;margin-bottom:1rem;overflow-x:auto}#content code{color:#111;background:#eee}#content pre{background:#eee;padding:1rem}@media print{body{min-width:0}code,h1,h2,h3,h4,h5,h6,img,li,p,pre{page-break-inside:avoid}}@media(prefers-color-scheme:dark){#to-full-website,body.amp,body[data-spy]{background:#1c1c1c;color:#efefef}.invert-dark{filter:invert(100%)}#content table{border:1px solid #2a2b2c}#content code,#content pre{background:#444;color:#eee}}.syntax{background:#f8f9fa;color:#2f1e2e}.syntax .c{color:#8d8687}.syntax .err{color:#ef6155}.syntax .k{color:#815ba4}.syntax .n{color:#2f1e2e}.syntax .o{color:#5bc4bf}.syntax .p{color:#2f1e2e}.syntax .c1{color:#8d8687}.syntax .ld{color:#48b685}.syntax .s{color:#48b685}.syntax .nb{color:#2f1e2e}.syntax .no{color:#ef6155}.syntax .py{color:#2f1e2e}.syntax .mi{color:#f99b15}.syntax .s2{color:#48b685}.syntax .s1{color:#48b685}@media(prefers-color-scheme:dark){.syntax .k{color:#c78cff}.syntax .ld{color:#64ffbb}.syntax .s{color:#64ffbb}.syntax .s2{color:#64ffbb}.syntax .s1{color:#64ffbb}.syntax .c{color:#64ffbb}.syntax .n{color:#f8f9fa}.syntax .p{color:#f8f9fa}.syntax .nb{color:#f8f9fa}.syntax .py{color:#f8f9fa}}</style>
    <script async custom-element="amp-analytics" src="https://cdn.ampproject.org/v0/amp-analytics-0.1.js"></script>
    <script async custom-element="amp-iframe" src="https://cdn.ampproject.org/v0/amp-iframe-0.1.js"></script>
  </head>
  <body class="amp" dir="ltr">
    <div class="container-fluid container-lg pb-5">
      <div class="row pt-3 mb-3">
        <div class="col">
          <a href="/" class="text-decoration-none">
            <amp-img class="d-inline-block mr-3" layout="fixed" width="40" height="36" src="/images/logo.svg" alt="ClickHouse logo" title="ClickHouse logo"></amp-img><amp-img class="invert-dark d-inline-block" layout="fixed" width="238" height="36" src="/images/clickhouse-black.svg" alt="ClickHouse" title="ClickHouse"></amp-img>
          </a>
        </div>
      </div>
      <div class="row">
        <div id="content" class="col">
          
          <h2 id=query_language_queries_alter>ALTER<a class=headerlink href=../amp/#query_language_queries_alter title="Permanent link"> </a></h2><p>Запрос <code class=syntax>ALTER</code> поддерживается только для таблиц типа <code class=syntax>*MergeTree</code>, а также <code class=syntax>Merge</code> и <code class=syntax>Distributed</code>. Запрос имеет несколько вариантов.</p><h3 id=manipuliatsii-so-stolbtsami>Манипуляции со столбцами<a class=headerlink href=../amp/#manipuliatsii-so-stolbtsami title="Permanent link"> </a></h3><p>Изменение структуры таблицы.</p><div class=codehilite><pre><span></span><code class=syntax><span class=k>ALTER</span> <span class=k>TABLE</span> <span class=p>[</span><span class=n>db</span><span class=p>].</span><span class=n>name</span> <span class=p>[</span><span class=k>ON</span> <span class=k>CLUSTER</span> <span class=k>cluster</span><span class=p>]</span> <span class=k>ADD</span><span class=o>|</span><span class=k>DROP</span><span class=o>|</span><span class=n>CLEAR</span><span class=o>|</span><span class=k>COMMENT</span><span class=o>|</span><span class=k>MODIFY</span> <span class=k>COLUMN</span> <span class=p>...</span>
</code></pre></div><p>В запросе указывается список из одного или более действий через запятую.<br> Каждое действие — операция над столбцом.</p><p>Существуют следующие действия:</p><ul><li><a href=../amp/#alter_add-column>ADD COLUMN</a> — добавляет столбец в таблицу;</li><li><a href=../amp/#alter_drop-column>DROP COLUMN</a> — удаляет столбец;</li><li><a href=../amp/#alter_clear-column>CLEAR COLUMN</a> — сбрасывает все значения в столбце для заданной партиции;</li><li><a href=../amp/#alter_comment-column>COMMENT COLUMN</a> — добавляет комментарий к столбцу;</li><li><a href=../amp/#alter_modify-column>MODIFY COLUMN</a> — изменяет тип столбца, выражение для значения по умолчанию и TTL.</li></ul><p>Подробное описание для каждого действия приведено ниже.</p><h4 id=alter_add-column>ADD COLUMN<a class=headerlink href=../amp/#alter_add-column title="Permanent link"> </a></h4><div class=codehilite><pre><span></span><code class=syntax><span class=k>ADD</span> <span class=k>COLUMN</span> <span class=p>[</span><span class=k>IF</span> <span class=k>NOT</span> <span class=k>EXISTS</span><span class=p>]</span> <span class=n>name</span> <span class=p>[</span><span class=k>type</span><span class=p>]</span> <span class=p>[</span><span class=n>default_expr</span><span class=p>]</span> <span class=p>[</span><span class=n>codec</span><span class=p>]</span> <span class=p>[</span><span class=k>AFTER</span> <span class=n>name_after</span><span class=p>]</span>
</code></pre></div><p>Добавляет в таблицу новый столбец с именем <code class=syntax>name</code>, типом <code class=syntax>type</code>, <a href=../../create/amp/#codecs>кодеком</a> <code class=syntax>codec</code> и выражением для умолчания <code class=syntax>default_expr</code> (смотрите раздел <a href=../../create/amp/#create-default-values>Значения по умолчанию</a>).</p><p>Если указано <code class=syntax>IF NOT EXISTS</code>, запрос не будет возвращать ошибку, если столбец уже существует. Если указано <code class=syntax>AFTER name_after</code> (имя другого столбца), то столбец добавляется (в список столбцов таблицы) после указанного. Иначе, столбец добавляется в конец таблицы. Обратите внимание, ClickHouse не позволяет добавлять столбцы в начало таблицы. Для цепочки действий, <code class=syntax>name_after</code> может быть именем столбца, который добавляется в одном из предыдущих действий.</p><p>Добавление столбца всего лишь меняет структуру таблицы, и не производит никаких действий с данными - соответствующие данные не появляются на диске после ALTER-а. При чтении из таблицы, если для какого-либо столбца отсутствуют данные, то он заполняется значениями по умолчанию (выполняя выражение по умолчанию, если такое есть, или нулями, пустыми строками). Также, столбец появляется на диске при слиянии кусков данных (см. <a href=.././amp/ >MergeTree</a>).</p><p>Такая схема позволяет добиться мгновенной работы запроса <code class=syntax>ALTER</code> и отсутствия необходимости увеличивать объём старых данных.</p><p>Пример:</p><div class=codehilite><pre><span></span><code class=syntax><span class=k>ALTER</span> <span class=k>TABLE</span> <span class=n>visits</span> <span class=k>ADD</span> <span class=k>COLUMN</span> <span class=n>browser</span> <span class=n>String</span> <span class=k>AFTER</span> <span class=n>user_id</span>
</code></pre></div><h4 id=alter_drop-column>DROP COLUMN<a class=headerlink href=../amp/#alter_drop-column title="Permanent link"> </a></h4><div class=codehilite><pre><span></span><code class=syntax><span class=k>DROP</span> <span class=k>COLUMN</span> <span class=p>[</span><span class=k>IF</span> <span class=k>EXISTS</span><span class=p>]</span> <span class=n>name</span>
</code></pre></div><p>Удаляет столбец с именем <code class=syntax>name</code>. Если указано <code class=syntax>IF EXISTS</code>, запрос не будет возвращать ошибку, если столбца не существует.</p><p>Запрос удаляет данные из файловой системы. Так как это представляет собой удаление целых файлов, запрос выполняется почти мгновенно.</p><p>Пример:</p><div class=codehilite><pre><span></span><code class=syntax><span class=k>ALTER</span> <span class=k>TABLE</span> <span class=n>visits</span> <span class=k>DROP</span> <span class=k>COLUMN</span> <span class=n>browser</span>
</code></pre></div><h4 id=alter_clear-column>CLEAR COLUMN<a class=headerlink href=../amp/#alter_clear-column title="Permanent link"> </a></h4><div class=codehilite><pre><span></span><code class=syntax><span class=n>CLEAR</span> <span class=k>COLUMN</span> <span class=p>[</span><span class=k>IF</span> <span class=k>EXISTS</span><span class=p>]</span> <span class=n>name</span> <span class=k>IN</span> <span class=n>PARTITION</span> <span class=n>partition_name</span>
</code></pre></div><p>Сбрасывает все значения в столбце для заданной партиции. Если указано <code class=syntax>IF EXISTS</code>, запрос не будет возвращать ошибку, если столбца не существует.</p><p>Как корректно задать имя партиции, см. в разделе <a href=../amp/#alter-how-to-specify-part-expr>Как задавать имя партиции в запросах ALTER</a>.</p><p>Пример:</p><div class=codehilite><pre><span></span><code class=syntax><span class=k>ALTER</span> <span class=k>TABLE</span> <span class=n>visits</span> <span class=n>CLEAR</span> <span class=k>COLUMN</span> <span class=n>browser</span> <span class=k>IN</span> <span class=n>PARTITION</span> <span class=n>tuple</span><span class=p>()</span>
</code></pre></div><h4 id=alter_comment-column>COMMENT COLUMN<a class=headerlink href=../amp/#alter_comment-column title="Permanent link"> </a></h4><div class=codehilite><pre><span></span><code class=syntax><span class=k>COMMENT</span> <span class=k>COLUMN</span> <span class=p>[</span><span class=k>IF</span> <span class=k>EXISTS</span><span class=p>]</span> <span class=n>name</span> <span class=s1>'Text comment'</span>
</code></pre></div><p>Добавляет комментарий к таблице. Если указано <code class=syntax>IF EXISTS</code>, запрос не будет возвращать ошибку, если столбца не существует.</p><p>Каждый столбец может содержать только один комментарий. При выполнении запроса существующий комментарий заменяется на новый.</p><p>Посмотреть комментарии можно в столбце <code class=syntax>comment_expression</code> из запроса <a href=../../misc/amp/#misc-describe-table>DESCRIBE TABLE</a>.</p><p>Пример:</p><div class=codehilite><pre><span></span><code class=syntax><span class=k>ALTER</span> <span class=k>TABLE</span> <span class=n>visits</span> <span class=k>COMMENT</span> <span class=k>COLUMN</span> <span class=n>browser</span> <span class=s1>'Столбец показывает, из каких браузеров пользователи заходили на сайт.'</span>
</code></pre></div><h4 id=alter_modify-column>MODIFY COLUMN<a class=headerlink href=../amp/#alter_modify-column title="Permanent link"> </a></h4><div class=codehilite><pre><span></span><code class=syntax><span class=k>MODIFY</span> <span class=k>COLUMN</span> <span class=p>[</span><span class=k>IF</span> <span class=k>EXISTS</span><span class=p>]</span> <span class=n>name</span> <span class=p>[</span><span class=k>type</span><span class=p>]</span> <span class=p>[</span><span class=n>default_expr</span><span class=p>]</span> <span class=p>[</span><span class=n>TTL</span><span class=p>]</span>
</code></pre></div><p>Запрос изменяет следующие свойства столбца <code class=syntax>name</code>:</p><ul><li><p>Тип</p></li><li><p>Значение по умолчанию</p></li><li><p>TTL</p><div class=codehilite><pre><span></span><code class=syntax><span class=err>Примеры изменения TTL столбца смотрите в разделе [TTL столбца](../../sql_reference/statements/alter.md#mergetree-column-ttl).</span>
</code></pre></div></li></ul><p>Если указано <code class=syntax>IF EXISTS</code>, запрос не возвращает ошибку, если столбца не существует.</p><p>При изменении типа, значения преобразуются так, как если бы к ним была применена функция <a href=.././amp/ >toType</a>. Если изменяется только выражение для умолчания, запрос не делает никакой сложной работы и выполняется мгновенно.</p><p>Пример запроса:</p><div class=codehilite><pre><span></span><code class=syntax><span class=k>ALTER</span> <span class=k>TABLE</span> <span class=n>visits</span> <span class=k>MODIFY</span> <span class=k>COLUMN</span> <span class=n>browser</span> <span class=nb>Array</span><span class=p>(</span><span class=n>String</span><span class=p>)</span>
</code></pre></div><p>Изменение типа столбца - это единственное действие, которое выполняет сложную работу - меняет содержимое файлов с данными. Для больших таблиц, выполнение может занять длительное время.</p><p>Выполнение производится в несколько стадий:</p><ul><li>подготовка временных (новых) файлов с изменёнными данными;</li><li>переименование старых файлов;</li><li>переименование временных (новых) файлов в старые;</li><li>удаление старых файлов.</li></ul><p>Из них, длительной является только первая стадия. Если на этой стадии возникнет сбой, то данные не поменяются.<br> Если на одной из следующих стадий возникнет сбой, то данные будет можно восстановить вручную. За исключением случаев, когда старые файлы удалены из файловой системы, а данные для новых файлов не доехали на диск и потеряны.</p><p>Запрос <code class=syntax>ALTER</code> на изменение столбцов реплицируется. Соответствующие инструкции сохраняются в ZooKeeper, и затем каждая реплика их применяет. Все запросы <code class=syntax>ALTER</code> выполняются в одном и том же порядке. Запрос ждёт выполнения соответствующих действий на всех репликах. Но при этом, запрос на изменение столбцов в реплицируемой таблице можно прервать, и все действия будут осуществлены асинхронно.</p><h4 id=ogranicheniia-zaprosa-alter>Ограничения запроса ALTER<a class=headerlink href=../amp/#ogranicheniia-zaprosa-alter title="Permanent link"> </a></h4><p>Запрос <code class=syntax>ALTER</code> позволяет создавать и удалять отдельные элементы (столбцы) вложенных структур данных, но не вложенные структуры данных целиком. Для добавления вложенной структуры данных, вы можете добавить столбцы с именем вида <code class=syntax>name.nested_name</code> и типом <code class=syntax>Array(T)</code> - вложенная структура данных полностью эквивалентна нескольким столбцам-массивам с именем, имеющим одинаковый префикс до точки.</p><p>Отсутствует возможность удалять столбцы, входящие в первичный ключ или ключ для сэмплирования (в общем, входящие в выражение <code class=syntax>ENGINE</code>). Изменение типа у столбцов, входящих в первичный ключ возможно только в том случае, если это изменение не приводит к изменению данных (например, разрешено добавление значения в Enum или изменение типа с <code class=syntax>DateTime</code> на <code class=syntax>UInt32</code>).</p><p>Если возможностей запроса <code class=syntax>ALTER</code> не хватает для нужного изменения таблицы, вы можете создать новую таблицу, скопировать туда данные с помощью запроса <a href=../../insert-into/amp/#insert_query_insert-select>INSERT SELECT</a>, затем поменять таблицы местами с помощью запроса <a href=../../misc/amp/#misc_operations-rename>RENAME</a>, и удалить старую таблицу. В качестве альтернативы для запроса <code class=syntax>INSERT SELECT</code>, можно использовать инструмент <a href=.././amp/ >clickhouse-copier</a>.</p><p>Запрос <code class=syntax>ALTER</code> блокирует все чтения и записи для таблицы. То есть, если на момент запроса <code class=syntax>ALTER</code>, выполнялся долгий <code class=syntax>SELECT</code>, то запрос <code class=syntax>ALTER</code> сначала дождётся его выполнения. И в это время, все новые запросы к той же таблице, будут ждать, пока завершится этот <code class=syntax>ALTER</code>.</p><p>Для таблиц, которые не хранят данные самостоятельно (типа <a href=.././amp/ >Merge</a> и <a href=.././amp/ >Distributed</a>), <code class=syntax>ALTER</code> всего лишь меняет структуру таблицы, но не меняет структуру подчинённых таблиц. Для примера, при ALTER-е таблицы типа <code class=syntax>Distributed</code>, вам также потребуется выполнить запрос <code class=syntax>ALTER</code> для таблиц на всех удалённых серверах.</p><h3 id=manipuliatsii-s-kliuchevymi-vyrazheniiami-tablits>Манипуляции с ключевыми выражениями таблиц<a class=headerlink href=../amp/#manipuliatsii-s-kliuchevymi-vyrazheniiami-tablits title="Permanent link"> </a></h3><p>Поддерживается операция:</p><div class=codehilite><pre><span></span><code class=syntax><span class=k>MODIFY</span> <span class=k>ORDER</span> <span class=k>BY</span> <span class=n>new_expression</span>
</code></pre></div><p>Работает только для таблиц семейства <a href=.././amp/ ><code class=syntax>MergeTree</code></a> (в том числе <a href=.././amp/ >реплицированных</a>). После выполнения запроса<br><a href=.././amp/ >ключ сортировки</a> таблицы<br> заменяется на <code class=syntax>new_expression</code> (выражение или кортеж выражений). Первичный ключ при этом остаётся прежним.</p><p>Операция затрагивает только метаданные. Чтобы сохранить свойство упорядоченности кусков данных по ключу<br> сортировки, разрешено добавлять в ключ только новые столбцы (т.е. столбцы, добавляемые командой <code class=syntax>ADD COLUMN</code><br> в том же запросе <code class=syntax>ALTER</code>), у которых нет выражения по умолчанию.</p><h3 id=manipuliatsii-s-indeksami>Манипуляции с индексами<a class=headerlink href=../amp/#manipuliatsii-s-indeksami title="Permanent link"> </a></h3><p>Добавить или удалить индекс можно с помощью операций</p><div class=codehilite><pre><span></span><code class=syntax><span class=k>ALTER</span> <span class=k>TABLE</span> <span class=p>[</span><span class=n>db</span><span class=p>].</span><span class=n>name</span> <span class=k>ADD</span> <span class=k>INDEX</span> <span class=n>name</span> <span class=n>expression</span> <span class=k>TYPE</span> <span class=k>type</span> <span class=n>GRANULARITY</span> <span class=n>value</span> <span class=p>[</span><span class=k>AFTER</span> <span class=n>name</span><span class=p>]</span>
<span class=k>ALTER</span> <span class=k>TABLE</span> <span class=p>[</span><span class=n>db</span><span class=p>].</span><span class=n>name</span> <span class=k>DROP</span> <span class=k>INDEX</span> <span class=n>name</span>
</code></pre></div><p>Поддерживается только таблицами семейства <code class=syntax>*MergeTree</code>.</p><p>Команда <code class=syntax>ADD INDEX</code> добавляет описание индексов в метаданные, а <code class=syntax>DROP INDEX</code> удаляет индекс из метаданных и стирает файлы индекса с диска, поэтому они легковесные и работают мгновенно.</p><p>Если индекс появился в метаданных, то он начнет считаться в последующих слияниях и записях в таблицу, а не сразу после выполнения операции <code class=syntax>ALTER</code>.</p><p>Запрос на изменение индексов реплицируется, сохраняя новые метаданные в ZooKeeper и применяя изменения на всех репликах.</p><h3 id=manipuliatsii-s-ogranicheniiami-constraints>Манипуляции с ограничениями (constraints)<a class=headerlink href=../amp/#manipuliatsii-s-ogranicheniiami-constraints title="Permanent link"> </a></h3><p>Про ограничения подробнее написано <a href=../../create/amp/#constraints>тут</a>.</p><p>Добавить или удалить ограничение можно с помощью запросов</p><div class=codehilite><pre><span></span><code class=syntax><span class=k>ALTER</span> <span class=k>TABLE</span> <span class=p>[</span><span class=n>db</span><span class=p>].</span><span class=n>name</span> <span class=k>ADD</span> <span class=k>CONSTRAINT</span> <span class=k>constraint_name</span> <span class=k>CHECK</span> <span class=n>expression</span><span class=p>;</span>
<span class=k>ALTER</span> <span class=k>TABLE</span> <span class=p>[</span><span class=n>db</span><span class=p>].</span><span class=n>name</span> <span class=k>DROP</span> <span class=k>CONSTRAINT</span> <span class=k>constraint_name</span><span class=p>;</span>
</code></pre></div><p>Запросы выполняют добавление или удаление метаданных об ограничениях таблицы <code class=syntax>[db].name</code>, поэтому выполняются мнгновенно.</p><p>Если ограничение появилось для непустой таблицы, то <em>проверка ограничения для имеющихся данных не производится</em>.</p><p>Запрос на изменение ограничений для Replicated таблиц реплицируется, сохраняя новые метаданные в ZooKeeper и применяя изменения на всех репликах.</p><h3 id=alter_manipulations-with-partitions>Манипуляции с партициями и кусками<a class=headerlink href=../amp/#alter_manipulations-with-partitions title="Permanent link"> </a></h3><p>Для работы с <a href=.././amp/ >партициями</a> доступны следующие операции:</p><ul><li><a href=../amp/#alter_detach-partition>DETACH PARTITION</a> — перенести партицию в директорию <code class=syntax>detached</code>;</li><li><a href=../amp/#alter_drop-partition>DROP PARTITION</a> — удалить партицию;</li><li><a href=../amp/#alter_attach-partition>ATTACH PARTITION|PART</a> — добавить партицию/кусок в таблицу из директории <code class=syntax>detached</code>;</li><li><a href=../amp/#alter_attach-partition-from>ATTACH PARTITION FROM</a> — скопировать партицию из другой таблицы;</li><li><a href=../amp/#alter_replace-partition>REPLACE PARTITION</a> — скопировать партицию из другой таблицы с заменой;</li><li><a href=../amp/#alter_move_to_table-partition>MOVE PARTITION TO TABLE</a> — переместить партицию в другую таблицу;</li><li><a href=../amp/#alter_clear-column-partition>CLEAR COLUMN IN PARTITION</a> — удалить все значения в столбце для заданной партиции;</li><li><a href=../amp/#alter_clear-index-partition>CLEAR INDEX IN PARTITION</a> — очистить построенные вторичные индексы для заданной партиции;</li><li><a href=../amp/#alter_freeze-partition>FREEZE PARTITION</a> — создать резервную копию партиции;</li><li><a href=../amp/#alter_fetch-partition>FETCH PARTITION</a> — скачать партицию с другого сервера;</li><li><a href=../amp/#alter_move-partition>MOVE PARTITION|PART</a> — переместить партицию/кускок на другой диск или том.</li></ul><h4 id=alter_detach-partition>DETACH PARTITION<a class=headerlink href=../amp/#alter_detach-partition title="Permanent link"> </a></h4><div class=codehilite><pre><span></span><code class=syntax><span class=k>ALTER</span> <span class=k>TABLE</span> <span class=k>table_name</span> <span class=n>DETACH</span> <span class=n>PARTITION</span> <span class=n>partition_expr</span>
</code></pre></div><p>Перемещает заданную партицию в директорию <code class=syntax>detached</code>. Сервер не будет знать об этой партиции до тех пор, пока вы не выполните запрос <a href=../amp/#alter_attach-partition>ATTACH</a>.</p><p>Пример:</p><div class=codehilite><pre><span></span><code class=syntax><span class=k>ALTER</span> <span class=k>TABLE</span> <span class=n>visits</span> <span class=n>DETACH</span> <span class=n>PARTITION</span> <span class=mi>201901</span>
</code></pre></div><p>Подробнее о том, как корректно задать имя партиции, см. в разделе <a href=../amp/#alter-how-to-specify-part-expr>Как задавать имя партиции в запросах ALTER</a>.</p><p>После того как запрос будет выполнен, вы сможете производить любые операции с данными в директории <code class=syntax>detached</code>. Например, можно удалить их из файловой системы.</p><p>Запрос реплицируется — данные будут перенесены в директорию <code class=syntax>detached</code> и забыты на всех репликах. Обратите внимание, запрос может быть отправлен только на реплику-лидер. Чтобы узнать, является ли реплика лидером, выполните запрос <code class=syntax>SELECT</code> к системной таблице <a href=../../../../operations/system-tables/amp/#system_tables-replicas>system.replicas</a>. Либо можно выполнить запрос <code class=syntax>DETACH</code> на всех репликах — тогда на всех репликах, кроме реплики-лидера, запрос вернет ошибку.</p><h4 id=alter_drop-partition>DROP PARTITION<a class=headerlink href=../amp/#alter_drop-partition title="Permanent link"> </a></h4><div class=codehilite><pre><span></span><code class=syntax><span class=k>ALTER</span> <span class=k>TABLE</span> <span class=k>table_name</span> <span class=k>DROP</span> <span class=n>PARTITION</span> <span class=n>partition_expr</span>
</code></pre></div><p>Удаляет партицию. Партиция помечается как неактивная и будет полностью удалена примерно через 10 минут.</p><p>Подробнее о том, как корректно задать имя партиции, см. в разделе <a href=../amp/#alter-how-to-specify-part-expr>Как задавать имя партиции в запросах ALTER</a>.</p><p>Запрос реплицируется — данные будут удалены на всех репликах.</p><h4 id=alter_drop-detached>DROP DETACHED PARTITION|PART<a class=headerlink href=../amp/#alter_drop-detached title="Permanent link"> </a></h4><div class=codehilite><pre><span></span><code class=syntax><span class=k>ALTER</span> <span class=k>TABLE</span> <span class=k>table_name</span> <span class=k>DROP</span> <span class=n>DETACHED</span> <span class=n>PARTITION</span><span class=o>|</span><span class=n>PART</span> <span class=n>partition_expr</span>
</code></pre></div><p>Удаляет из <code class=syntax>detached</code> кусок или все куски, принадлежащие партиции.<br> Подробнее о том, как корректно задать имя партиции, см. в разделе <a href=../amp/#alter-how-to-specify-part-expr>Как задавать имя партиции в запросах ALTER</a>.</p><h4 id=alter_attach-partition>ATTACH PARTITION|PART<a class=headerlink href=../amp/#alter_attach-partition title="Permanent link"> </a></h4><div class=codehilite><pre><span></span><code class=syntax><span class=k>ALTER</span> <span class=k>TABLE</span> <span class=k>table_name</span> <span class=n>ATTACH</span> <span class=n>PARTITION</span><span class=o>|</span><span class=n>PART</span> <span class=n>partition_expr</span>
</code></pre></div><p>Добавляет данные в таблицу из директории <code class=syntax>detached</code>. Можно добавить данные как для целой партиции, так и для отдельного куска. Примеры:</p><div class=codehilite><pre><span></span><code class=syntax><span class=k>ALTER</span> <span class=k>TABLE</span> <span class=n>visits</span> <span class=n>ATTACH</span> <span class=n>PARTITION</span> <span class=mi>201901</span><span class=p>;</span>
<span class=k>ALTER</span> <span class=k>TABLE</span> <span class=n>visits</span> <span class=n>ATTACH</span> <span class=n>PART</span> <span class=mi>201901</span><span class=n>_2_2_0</span><span class=p>;</span>
</code></pre></div><p>Как корректно задать имя партиции или куска, см. в разделе <a href=../amp/#alter-how-to-specify-part-expr>Как задавать имя партиции в запросах ALTER</a>.</p><p>Этот запрос реплицируется. Реплика-иницатор проверяет, есть ли данные в директории <code class=syntax>detached</code>. Если данные есть, то запрос проверяет их целостность. В случае успеха данные добавляются в таблицу. Все остальные реплики загружают данные с реплики-инициатора запроса.</p><p>Это означает, что вы можете разместить данные в директории <code class=syntax>detached</code> на одной реплике и с помощью запроса <code class=syntax>ALTER ... ATTACH</code> добавить их в таблицу на всех репликах.</p><h4 id=alter_attach-partition-from>ATTACH PARTITION FROM<a class=headerlink href=../amp/#alter_attach-partition-from title="Permanent link"> </a></h4><div class=codehilite><pre><span></span><code class=syntax><span class=k>ALTER</span> <span class=k>TABLE</span> <span class=n>table2</span> <span class=n>ATTACH</span> <span class=n>PARTITION</span> <span class=n>partition_expr</span> <span class=k>FROM</span> <span class=n>table1</span>
</code></pre></div><p>Копирует партицию из таблицы <code class=syntax>table1</code> в таблицу <code class=syntax>table2</code> и добавляет к существующим данным <code class=syntax>table2</code>. Данные из <code class=syntax>table1</code> не удаляются.</p><p>Следует иметь в виду:</p><ul><li>Таблицы должны иметь одинаковую структуру.</li><li>Для таблиц должен быть задан одинаковый ключ партиционирования.</li></ul><p>Подробнее о том, как корректно задать имя партиции, см. в разделе <a href=../amp/#alter-how-to-specify-part-expr>Как задавать имя партиции в запросах ALTER</a>.</p><h4 id=alter_replace-partition>REPLACE PARTITION<a class=headerlink href=../amp/#alter_replace-partition title="Permanent link"> </a></h4><div class=codehilite><pre><span></span><code class=syntax><span class=k>ALTER</span> <span class=k>TABLE</span> <span class=n>table2</span> <span class=k>REPLACE</span> <span class=n>PARTITION</span> <span class=n>partition_expr</span> <span class=k>FROM</span> <span class=n>table1</span>
</code></pre></div><p>Копирует партицию из таблицы <code class=syntax>table1</code> в таблицу <code class=syntax>table2</code> с заменой существующих данных в <code class=syntax>table2</code>. Данные из <code class=syntax>table1</code> не удаляются.</p><p>Следует иметь в виду:</p><ul><li>Таблицы должны иметь одинаковую структуру.</li><li>Для таблиц должен быть задан одинаковый ключ партиционирования.</li></ul><p>Подробнее о том, как корректно задать имя партиции, см. в разделе <a href=../amp/#alter-how-to-specify-part-expr>Как задавать имя партиции в запросах ALTER</a>.</p><h4 id=alter_move_to_table-partition>MOVE PARTITION TO TABLE<a class=headerlink href=../amp/#alter_move_to_table-partition title="Permanent link"> </a></h4><div class=codehilite><pre><span></span><code class=syntax><span class=k>ALTER</span> <span class=k>TABLE</span> <span class=n>table_source</span> <span class=k>MOVE</span> <span class=n>PARTITION</span> <span class=n>partition_expr</span> <span class=k>TO</span> <span class=k>TABLE</span> <span class=n>table_dest</span>
</code></pre></div><p>Перемещает партицию из таблицы <code class=syntax>table_source</code> в таблицу <code class=syntax>table_dest</code> (добавляет к существующим данным в <code class=syntax>table_dest</code>) с удалением данных из таблицы <code class=syntax>table_source</code>.</p><p>Следует иметь в виду:</p><ul><li>Таблицы должны иметь одинаковую структуру.</li><li>Для таблиц должен быть задан одинаковый ключ партиционирования.</li><li>Движки таблиц должны быть одинакового семейства (реплицированные или нереплицированные).</li><li>Для таблиц должна быть задана одинаковая политика хранения.</li></ul><h4 id=alter_clear-column-partition>CLEAR COLUMN IN PARTITION<a class=headerlink href=../amp/#alter_clear-column-partition title="Permanent link"> </a></h4><div class=codehilite><pre><span></span><code class=syntax><span class=k>ALTER</span> <span class=k>TABLE</span> <span class=k>table_name</span> <span class=n>CLEAR</span> <span class=k>COLUMN</span> <span class=k>column_name</span> <span class=k>IN</span> <span class=n>PARTITION</span> <span class=n>partition_expr</span>
</code></pre></div><p>Сбрасывает все значения в столбце для заданной партиции. Если для столбца определено значение по умолчанию (в секции <code class=syntax>DEFAULT</code>), то будет выставлено это значение.</p><p>Пример:</p><div class=codehilite><pre><span></span><code class=syntax><span class=k>ALTER</span> <span class=k>TABLE</span> <span class=n>visits</span> <span class=n>CLEAR</span> <span class=k>COLUMN</span> <span class=n>hour</span> <span class=k>in</span> <span class=n>PARTITION</span> <span class=mi>201902</span>
</code></pre></div><h4 id=alter_clear-index-partition>CLEAR INDEX IN PARTITION<a class=headerlink href=../amp/#alter_clear-index-partition title="Permanent link"> </a></h4><div class=codehilite><pre><span></span><code class=syntax><span class=k>ALTER</span> <span class=k>TABLE</span> <span class=k>table_name</span> <span class=n>CLEAR</span> <span class=k>INDEX</span> <span class=n>index_name</span> <span class=k>IN</span> <span class=n>PARTITION</span> <span class=n>partition_expr</span>
</code></pre></div><p>Работает как <code class=syntax>CLEAR COLUMN</code>, но сбрасывает индексы вместо данных в столбцах.</p><h4 id=alter_freeze-partition>FREEZE PARTITION<a class=headerlink href=../amp/#alter_freeze-partition title="Permanent link"> </a></h4><div class=codehilite><pre><span></span><code class=syntax><span class=k>ALTER</span> <span class=k>TABLE</span> <span class=k>table_name</span> <span class=k>FREEZE</span> <span class=p>[</span><span class=n>PARTITION</span> <span class=n>partition_expr</span><span class=p>]</span>
</code></pre></div><p>Создаёт резервную копию для заданной партиции. Если выражение <code class=syntax>PARTITION</code> опущено, резервные копии будут созданы для всех партиций.</p><div class="admonition note alert pb-0 mb-4 alert-primary" role=alert><p class="admonition-title alert-heading display-6 mb-2">Примечание</p><p>Создание резервной копии не требует остановки сервера.</p></div><p>Для таблиц старого стиля имя партиций можно задавать в виде префикса (например, ‘2019’). В этом случае резервные копии будут созданы для всех соответствующих партиций. Подробнее о том, как корректно задать имя партиции, см. в разделе <a href=../amp/#alter-how-to-specify-part-expr>Как задавать имя партиции в запросах ALTER</a>.</p><p>Запрос делает следующее — для текущего состояния таблицы он формирует жесткие ссылки на данные в этой таблице. Ссылки размещаются в директории <code class=syntax>/var/lib/clickhouse/shadow/N/...</code>, где:</p><ul><li><code class=syntax>/var/lib/clickhouse/</code> — рабочая директория ClickHouse, заданная в конфигурационном файле;</li><li><code class=syntax>N</code> — инкрементальный номер резервной копии.</li></ul><div class="admonition note alert pb-0 mb-4 alert-primary" role=alert><p class="admonition-title alert-heading display-6 mb-2">Примечание</p><p>При использовании <a class=alert-link href=.././amp/#table_engine-mergetree-multiple-volumes>нескольких дисков для хранения данных таблицы</a> директория <code class=syntax>shadow/N</code> появляется на каждом из дисков, на которых были куски, попавшие под выражение <code class=syntax>PARTITION</code>.</p></div><p>Структура директорий внутри резервной копии такая же, как внутри <code class=syntax>/var/lib/clickhouse/</code>. Запрос выполнит ‘chmod’ для всех файлов, запрещая запись в них.</p><p>Обратите внимание, запрос <code class=syntax>ALTER TABLE t FREEZE PARTITION</code> не реплицируется. Он создает резервную копию только на локальном сервере. После создания резервной копии данные из <code class=syntax>/var/lib/clickhouse/shadow/</code> можно скопировать на удалённый сервер, а локальную копию удалить.</p><p>Резервная копия создается почти мгновенно (однако сначала запрос дожидается завершения всех запросов, которые выполняются для соответствующей таблицы).</p><p><code class=syntax>ALTER TABLE t FREEZE PARTITION</code> копирует только данные, но не метаданные таблицы. Чтобы сделать резервную копию метаданных таблицы, скопируйте файл <code class=syntax>/var/lib/clickhouse/metadata/database/table.sql</code></p><p>Чтобы восстановить данные из резервной копии, выполните следующее:</p><ol><li>Создайте таблицу, если она ещё не существует. Запрос на создание можно взять из .sql файла (замените в нём <code class=syntax>ATTACH</code> на <code class=syntax>CREATE</code>).</li><li>Скопируйте данные из директории <code class=syntax>data/database/table/</code> внутри резервной копии в директорию <code class=syntax>/var/lib/clickhouse/data/database/table/detached/</code>.</li><li>С помощью запросов <code class=syntax>ALTER TABLE t ATTACH PARTITION</code> добавьте данные в таблицу.</li></ol><p>Восстановление данных из резервной копии не требует остановки сервера.</p><p>Подробнее о резервном копировании и восстановлении данных читайте в разделе <a href=../../../../operations/backup/amp/ >Резервное копирование данных</a>.</p><h4 id=alter_fetch-partition>FETCH PARTITION<a class=headerlink href=../amp/#alter_fetch-partition title="Permanent link"> </a></h4><div class=codehilite><pre><span></span><code class=syntax><span class=k>ALTER</span> <span class=k>TABLE</span> <span class=k>table_name</span> <span class=k>FETCH</span> <span class=n>PARTITION</span> <span class=n>partition_expr</span> <span class=k>FROM</span> <span class=s1>'path-in-zookeeper'</span>
</code></pre></div><p>Загружает партицию с другого сервера. Этот запрос работает только для реплицированных таблиц.</p><p>Запрос выполняет следующее:</p><ol><li>Загружает партицию с указанного шарда. Путь к шарду задается в секции <code class=syntax>FROM</code> (‘path-in-zookeeper’). Обратите внимание, нужно задавать путь к шарду в ZooKeeper.</li><li>Помещает загруженные данные в директорию <code class=syntax>detached</code> таблицы <code class=syntax>table_name</code>. Чтобы прикрепить эти данные к таблице, используйте запрос <a href=../amp/#alter_attach-partition>ATTACH PARTITION|PART</a>.</li></ol><p>Например:</p><div class=codehilite><pre><span></span><code class=syntax><span class=k>ALTER</span> <span class=k>TABLE</span> <span class=n>users</span> <span class=k>FETCH</span> <span class=n>PARTITION</span> <span class=mi>201902</span> <span class=k>FROM</span> <span class=s1>'/clickhouse/tables/01-01/visits'</span><span class=p>;</span>
<span class=k>ALTER</span> <span class=k>TABLE</span> <span class=n>users</span> <span class=n>ATTACH</span> <span class=n>PARTITION</span> <span class=mi>201902</span><span class=p>;</span>
</code></pre></div><p>Следует иметь в виду:</p><ul><li>Запрос <code class=syntax>ALTER TABLE t FETCH PARTITION</code> не реплицируется. Он загружает партицию в директорию <code class=syntax>detached</code> только на локальном сервере.</li><li>Запрос <code class=syntax>ALTER TABLE t ATTACH</code> реплицируется — он добавляет данные в таблицу сразу на всех репликах. На одной из реплик данные будут добавлены из директории <code class=syntax>detached</code>, а на других — из соседних реплик.</li></ul><p>Перед загрузкой данных система проверяет, существует ли партиция и совпадает ли её структура со структурой таблицы. При этом автоматически выбирается наиболее актуальная реплика среди всех живых реплик.</p><p>Несмотря на то что запрос называется <code class=syntax>ALTER TABLE</code>, он не изменяет структуру таблицы и не изменяет сразу доступные данные в таблице.</p><h4 id=alter_move-partition>MOVE PARTITION|PART<a class=headerlink href=../amp/#alter_move-partition title="Permanent link"> </a></h4><p>Перемещает партицию или кусок данных на другой том или диск для таблиц с движком <code class=syntax>MergeTree</code>. Смотрите <a href=.././amp/#table_engine-mergetree-multiple-volumes>Хранение данных таблицы на нескольких блочных устройствах</a>.</p><div class=codehilite><pre><span></span><code class=syntax><span class=k>ALTER</span> <span class=k>TABLE</span> <span class=k>table_name</span> <span class=k>MOVE</span> <span class=n>PARTITION</span><span class=o>|</span><span class=n>PART</span> <span class=n>partition_expr</span> <span class=k>TO</span> <span class=n>DISK</span><span class=o>|</span><span class=n>VOLUME</span> <span class=s1>'disk_name'</span>
</code></pre></div><p>Запрос <code class=syntax>ALTER TABLE t MOVE</code>:</p><ul><li>Не реплицируется, т.к. на разных репликах могут быть различные конфигурации политик хранения.</li><li>Возвращает ошибку, если указан несконфигурированный том или диск. Ошибка также возвращается в случае невыполнения условий перемещения данных, которые указаны в конфигурации политики хранения.</li><li>Может возвращать ошибку в случае, когда перемещаемые данные уже оказались перемещены в результате фонового процесса, конкурентного запроса <code class=syntax>ALTER TABLE t MOVE</code> или как часть результата фоновой операции слияния. В данном случае никаких дополнительных действий от пользователя не требуется.</li></ul><p>Примеры:</p><div class=codehilite><pre><span></span><code class=syntax><span class=k>ALTER</span> <span class=k>TABLE</span> <span class=n>hits</span> <span class=k>MOVE</span> <span class=n>PART</span> <span class=s1>'20190301_14343_16206_438'</span> <span class=k>TO</span> <span class=n>VOLUME</span> <span class=s1>'slow'</span>
<span class=k>ALTER</span> <span class=k>TABLE</span> <span class=n>hits</span> <span class=k>MOVE</span> <span class=n>PARTITION</span> <span class=s1>'2019-09-01'</span> <span class=k>TO</span> <span class=n>DISK</span> <span class=s1>'fast_ssd'</span>
</code></pre></div><h4 id=alter-how-to-specify-part-expr>Как задавать имя партиции в запросах ALTER<a class=headerlink href=../amp/#alter-how-to-specify-part-expr title="Permanent link"> </a></h4><p>Чтобы задать нужную партицию в запросах <code class=syntax>ALTER ... PARTITION</code>, можно использовать:</p><ul><li>Имя партиции. Посмотреть имя партиции можно в столбце <code class=syntax>partition</code> системной таблицы <a href=../../../../operations/system-tables/amp/#system_tables-parts>system.parts</a>. Например, <code class=syntax>ALTER TABLE visits DETACH PARTITION 201901</code>.</li><li>Произвольное выражение из столбцов исходной таблицы. Также поддерживаются константы и константные выражения. Например, <code class=syntax>ALTER TABLE visits DETACH PARTITION toYYYYMM(toDate('2019-01-25'))</code>.</li><li>Строковый идентификатор партиции. Идентификатор партиции используется для именования кусков партиции на файловой системе и в ZooKeeper. В запросах <code class=syntax>ALTER</code> идентификатор партиции нужно указывать в секции <code class=syntax>PARTITION ID</code>, в одинарных кавычках. Например, <code class=syntax>ALTER TABLE visits DETACH PARTITION ID '201901'</code>.</li><li>Для запросов <a href=../amp/#alter_attach-partition>ATTACH PART</a> и <a href=../amp/#alter_drop-detached>DROP DETACHED PART</a>: чтобы задать имя куска партиции, используйте строковой литерал со значением из столбца <code class=syntax>name</code> системной таблицы <a href=../../../../operations/system-tables/amp/#system_tables-detached_parts>system.detached_parts</a>. Например, <code class=syntax>ALTER TABLE visits ATTACH PART '201901_1_1_0'</code>.</li></ul><p>Использование кавычек в имени партиций зависит от типа данных столбца, по которому задано партиционирование. Например, для столбца с типом <code class=syntax>String</code> имя партиции необходимо указывать в кавычках (одинарных). Для типов <code class=syntax>Date</code> и <code class=syntax>Int*</code> кавычки указывать не нужно.</p><p>Замечание: для таблиц старого стиля партицию можно указывать и как число <code class=syntax>201901</code>, и как строку <code class=syntax>'201901'</code>. Синтаксис для таблиц нового типа более строг к типам (аналогично парсеру входного формата VALUES).</p><p>Правила, сформулированные выше, актуальны также для запросов <a href=../../misc/amp/#misc_operations-optimize>OPTIMIZE</a>. Чтобы указать единственную партицию непартиционированной таблицы, укажите <code class=syntax>PARTITION tuple()</code>. Например:</p><div class=codehilite><pre><span></span><code class=syntax><span class=n>OPTIMIZE</span> <span class=k>TABLE</span> <span class=n>table_not_partitioned</span> <span class=n>PARTITION</span> <span class=n>tuple</span><span class=p>()</span> <span class=k>FINAL</span><span class=p>;</span>
</code></pre></div><p>Примеры запросов <code class=syntax>ALTER ... PARTITION</code> можно посмотреть в тестах: <a href=https://github.com/ClickHouse/ClickHouse/blob/master/tests/queries/0_stateless/00502_custom_partitioning_local.sql rel="external nofollow noreferrer" target=_blank><code class=syntax>00502_custom_partitioning_local</code></a> и <a href=https://github.com/ClickHouse/ClickHouse/blob/master/tests/queries/0_stateless/00502_custom_partitioning_replicated_zookeeper.sql rel="external nofollow noreferrer" target=_blank><code class=syntax>00502_custom_partitioning_replicated_zookeeper</code></a>.</p><h3 id=manipuliatsii-s-ttl-tablitsy>Манипуляции с TTL таблицы<a class=headerlink href=../amp/#manipuliatsii-s-ttl-tablitsy title="Permanent link"> </a></h3><p>Вы можете изменить <a href=.././amp/#mergetree-table-ttl>TTL для таблицы</a> запросом следующего вида:</p><div class=codehilite><pre><span></span><code class=syntax><span class=k>ALTER</span> <span class=k>TABLE</span> <span class=k>table</span><span class=o>-</span><span class=n>name</span> <span class=k>MODIFY</span> <span class=n>TTL</span> <span class=n>ttl</span><span class=o>-</span><span class=n>expression</span>
</code></pre></div><h3 id=sinkhronnost-zaprosov-alter>Синхронность запросов ALTER<a class=headerlink href=../amp/#sinkhronnost-zaprosov-alter title="Permanent link"> </a></h3><p>Для нереплицируемых таблиц, все запросы <code class=syntax>ALTER</code> выполняются синхронно. Для реплицируемых таблиц, запрос всего лишь добавляет инструкцию по соответствующим действиям в <code class=syntax>ZooKeeper</code>, а сами действия осуществляются при первой возможности. Но при этом, запрос может ждать завершения выполнения этих действий на всех репликах.</p><p>Для запросов <code class=syntax>ALTER ... ATTACH|DETACH|DROP</code> можно настроить ожидание, с помощью настройки <code class=syntax>replication_alter_partitions_sync</code>.<br> Возможные значения: <code class=syntax>0</code> - не ждать, <code class=syntax>1</code> - ждать выполнения только у себя (по умолчанию), <code class=syntax>2</code> - ждать всех.</p><h3 id=alter-mutations>Мутации<a class=headerlink href=../amp/#alter-mutations title="Permanent link"> </a></h3><p>Мутации - разновидность запроса ALTER, позволяющая изменять или удалять данные в таблице. В отличие от стандартных запросов <code class=syntax>DELETE</code> и <code class=syntax>UPDATE</code>, рассчитанных на точечное изменение данных, область применения мутаций - достаточно тяжёлые изменения, затрагивающие много строк в таблице. Поддержана для движков таблиц семейства <code class=syntax>MergeTree</code>, в том числе для движков с репликацией.</p><p>Конвертировать существующие таблицы для работы с мутациями не нужно. Но после применения первой мутации формат данных таблицы становится несовместимым с предыдущими версиями и откатиться на предыдущую версию уже не получится.</p><p>На данный момент доступны команды:</p><div class=codehilite><pre><span></span><code class=syntax><span class=k>ALTER</span> <span class=k>TABLE</span> <span class=p>[</span><span class=n>db</span><span class=p>.]</span><span class=k>table</span> <span class=k>DELETE</span> <span class=k>WHERE</span> <span class=n>filter_expr</span>
</code></pre></div><p>Выражение <code class=syntax>filter_expr</code> должно иметь тип <code class=syntax>UInt8</code>. Запрос удаляет строки таблицы, для которых это выражение принимает ненулевое значение.</p><div class=codehilite><pre><span></span><code class=syntax><span class=k>ALTER</span> <span class=k>TABLE</span> <span class=p>[</span><span class=n>db</span><span class=p>.]</span><span class=k>table</span> <span class=k>UPDATE</span> <span class=n>column1</span> <span class=o>=</span> <span class=n>expr1</span> <span class=p>[,</span> <span class=p>...]</span> <span class=k>WHERE</span> <span class=n>filter_expr</span>
</code></pre></div><p>Выражение <code class=syntax>filter_expr</code> должно иметь тип <code class=syntax>UInt8</code>. Запрос изменяет значение указанных столбцов на вычисленное значение соответствующих выражений в каждой строке, для которой <code class=syntax>filter_expr</code> принимает ненулевое значение. Вычисленные значения преобразуются к типу столбца с помощью оператора <code class=syntax>CAST</code>. Изменение столбцов, которые используются при вычислении первичного ключа или ключа партиционирования, не поддерживается.</p><div class=codehilite><pre><span></span><code class=syntax><span class=k>ALTER</span> <span class=k>TABLE</span> <span class=p>[</span><span class=n>db</span><span class=p>.]</span><span class=k>table</span> <span class=n>MATERIALIZE</span> <span class=k>INDEX</span> <span class=n>name</span> <span class=k>IN</span> <span class=n>PARTITION</span> <span class=n>partition_name</span>
</code></pre></div><p>Команда перестроит вторичный индекс <code class=syntax>name</code> для партиции <code class=syntax>partition_name</code>.</p><p>В одном запросе можно указать несколько команд через запятую.</p><p>Для *MergeTree-таблиц мутации выполняются, перезаписывая данные по кускам (parts). При этом атомарности нет — куски заменяются на помутированные по мере выполнения и запрос <code class=syntax>SELECT</code>, заданный во время выполнения мутации, увидит данные как из измененных кусков, так и из кусков, которые еще не были изменены.</p><p>Мутации линейно упорядочены между собой и накладываются на каждый кусок в порядке добавления. Мутации также упорядочены со вставками - гарантируется, что данные, вставленные в таблицу до начала выполнения запроса мутации, будут изменены, а данные, вставленные после окончания запроса мутации, изменены не будут. При этом мутации никак не блокируют вставки.</p><p>Запрос завершается немедленно после добавления информации о мутации (для реплицированных таблиц - в ZooKeeper, для нереплицированных - на файловую систему). Сама мутация выполняется асинхронно, используя настройки системного профиля. Следить за ходом её выполнения можно по таблице <a href=../../../../operations/system-tables/amp/#system_tables-mutations><code class=syntax>system.mutations</code></a>. Добавленные мутации будут выполняться до конца даже в случае перезапуска серверов ClickHouse. Откатить мутацию после её добавления нельзя, но если мутация по какой-то причине не может выполниться до конца, её можно остановить с помощью запроса <a href=../../misc/amp/#kill-mutation-statement><code class=syntax>KILL MUTATION</code></a>.</p><p>Записи о последних выполненных мутациях удаляются не сразу (количество сохраняемых мутаций определяется параметром движка таблиц <code class=syntax>finished_mutations_to_keep</code>). Более старые записи удаляются.</p><h2 id=alter-user-statement>ALTER USER<a class=headerlink href=../amp/#alter-user-statement title="Permanent link"> </a></h2><p>Изменяет аккаунт пользователя ClickHouse.</p><h3 id=alter-user-syntax>Синтаксис<a class=headerlink href=../amp/#alter-user-syntax title="Permanent link"> </a></h3><div class=codehilite><pre><span></span><code class=syntax><span class=k>ALTER</span> <span class=k>USER</span> <span class=p>[</span><span class=k>IF</span> <span class=k>EXISTS</span><span class=p>]</span> <span class=n>name</span> <span class=p>[</span><span class=k>ON</span> <span class=k>CLUSTER</span> <span class=n>cluster_name</span><span class=p>]</span>
    <span class=p>[</span><span class=k>RENAME</span> <span class=k>TO</span> <span class=n>new_name</span><span class=p>]</span>
    <span class=p>[</span><span class=n>IDENTIFIED</span> <span class=p>[</span><span class=k>WITH</span> <span class=err>{</span><span class=n>PLAINTEXT_PASSWORD</span><span class=o>|</span><span class=n>SHA256_PASSWORD</span><span class=o>|</span><span class=n>DOUBLE_SHA1_PASSWORD</span><span class=err>}</span><span class=p>]</span> <span class=k>BY</span> <span class=err>{</span><span class=s1>'password'</span><span class=o>|</span><span class=s1>'hash'</span><span class=err>}</span><span class=p>]</span>
    <span class=p>[[</span><span class=k>ADD</span><span class=o>|</span><span class=k>DROP</span><span class=p>]</span> <span class=k>HOST</span> <span class=err>{</span><span class=k>LOCAL</span> <span class=o>|</span> <span class=n>NAME</span> <span class=s1>'name'</span> <span class=o>|</span> <span class=n>REGEXP</span> <span class=s1>'name_regexp'</span> <span class=o>|</span> <span class=n>IP</span> <span class=s1>'address'</span> <span class=o>|</span> <span class=k>LIKE</span> <span class=s1>'pattern'</span><span class=err>}</span> <span class=p>[,...]</span> <span class=o>|</span> <span class=k>ANY</span> <span class=o>|</span> <span class=k>NONE</span><span class=p>]</span>
    <span class=p>[</span><span class=k>DEFAULT</span> <span class=k>ROLE</span> <span class=k>role</span> <span class=p>[,...]</span> <span class=o>|</span> <span class=k>ALL</span> <span class=o>|</span> <span class=k>ALL</span> <span class=k>EXCEPT</span> <span class=k>role</span> <span class=p>[,...]</span> <span class=p>]</span>
    <span class=p>[</span><span class=n>SETTINGS</span> <span class=k>variable</span> <span class=p>[</span><span class=o>=</span> <span class=n>value</span><span class=p>]</span> <span class=p>[</span><span class=k>MIN</span> <span class=p>[</span><span class=o>=</span><span class=p>]</span> <span class=n>min_value</span><span class=p>]</span> <span class=p>[</span><span class=k>MAX</span> <span class=p>[</span><span class=o>=</span><span class=p>]</span> <span class=n>max_value</span><span class=p>]</span> <span class=p>[</span><span class=n>READONLY</span><span class=o>|</span><span class=n>WRITABLE</span><span class=p>]</span> <span class=o>|</span> <span class=n>PROFILE</span> <span class=s1>'profile_name'</span><span class=p>]</span> <span class=p>[,...]</span>
</code></pre></div><h3 id=alter-user-dscr>Описание<a class=headerlink href=../amp/#alter-user-dscr title="Permanent link"> </a></h3><p>Для выполнения <code class=syntax>ALTER USER</code> необходима привилегия <a href=../../grant/amp/#grant-access-management>ALTER USER</a>.</p><h3 id=alter-user-examples>Примеры<a class=headerlink href=../amp/#alter-user-examples title="Permanent link"> </a></h3><p>Установить ролями по умолчанию роли, назначенные пользователю:</p><div class=codehilite><pre><span></span><code class=syntax><span class=k>ALTER</span> <span class=k>USER</span> <span class=k>user</span> <span class=k>DEFAULT</span> <span class=k>ROLE</span> <span class=n>role1</span><span class=p>,</span> <span class=n>role2</span>
</code></pre></div><p>Если роли не были назначены пользователю, ClickHouse выбрасывает исключение.</p><p>Установить ролями по умолчанию все роли, назначенные пользователю:</p><div class=codehilite><pre><span></span><code class=syntax><span class=k>ALTER</span> <span class=k>USER</span> <span class=k>user</span> <span class=k>DEFAULT</span> <span class=k>ROLE</span> <span class=k>ALL</span>
</code></pre></div><p>Если роль будет впоследствии назначена пользователю, она автоматически станет ролью по умолчанию.</p><p>Установить ролями по умолчанию все назначенные пользователю роли кроме <code class=syntax>role1</code> и <code class=syntax>role2</code>:</p><div class=codehilite><pre><span></span><code class=syntax><span class=k>ALTER</span> <span class=k>USER</span> <span class=k>user</span> <span class=k>DEFAULT</span> <span class=k>ROLE</span> <span class=k>ALL</span> <span class=k>EXCEPT</span> <span class=n>role1</span><span class=p>,</span> <span class=n>role2</span>
</code></pre></div><h2 id=alter-role-statement>ALTER ROLE<a class=headerlink href=../amp/#alter-role-statement title="Permanent link"> </a></h2><p>Изменяет роль.</p><h3 id=alter-role-syntax>Синтаксис<a class=headerlink href=../amp/#alter-role-syntax title="Permanent link"> </a></h3><div class=codehilite><pre><span></span><code class=syntax><span class=k>ALTER</span> <span class=k>ROLE</span> <span class=p>[</span><span class=k>IF</span> <span class=k>EXISTS</span><span class=p>]</span> <span class=n>name</span> <span class=p>[</span><span class=k>ON</span> <span class=k>CLUSTER</span> <span class=n>cluster_name</span><span class=p>]</span>
    <span class=p>[</span><span class=k>RENAME</span> <span class=k>TO</span> <span class=n>new_name</span><span class=p>]</span>
    <span class=p>[</span><span class=n>SETTINGS</span> <span class=k>variable</span> <span class=p>[</span><span class=o>=</span> <span class=n>value</span><span class=p>]</span> <span class=p>[</span><span class=k>MIN</span> <span class=p>[</span><span class=o>=</span><span class=p>]</span> <span class=n>min_value</span><span class=p>]</span> <span class=p>[</span><span class=k>MAX</span> <span class=p>[</span><span class=o>=</span><span class=p>]</span> <span class=n>max_value</span><span class=p>]</span> <span class=p>[</span><span class=n>READONLY</span><span class=o>|</span><span class=n>WRITABLE</span><span class=p>]</span> <span class=o>|</span> <span class=n>PROFILE</span> <span class=s1>'profile_name'</span><span class=p>]</span> <span class=p>[,...]</span>
</code></pre></div><h2 id=alter-row-policy-statement>ALTER ROW POLICY<a class=headerlink href=../amp/#alter-row-policy-statement title="Permanent link"> </a></h2><p>Изменяет политику доступа к строкам.</p><h3 id=alter-row-policy-syntax>Синтаксис<a class=headerlink href=../amp/#alter-row-policy-syntax title="Permanent link"> </a></h3><div class=codehilite><pre><span></span><code class=syntax><span class=k>ALTER</span> <span class=p>[</span><span class=k>ROW</span><span class=p>]</span> <span class=n>POLICY</span> <span class=p>[</span><span class=k>IF</span> <span class=k>EXISTS</span><span class=p>]</span> <span class=n>name</span> <span class=p>[</span><span class=k>ON</span> <span class=k>CLUSTER</span> <span class=n>cluster_name</span><span class=p>]</span> <span class=k>ON</span> <span class=p>[</span><span class=k>database</span><span class=p>.]</span><span class=k>table</span>
    <span class=p>[</span><span class=k>RENAME</span> <span class=k>TO</span> <span class=n>new_name</span><span class=p>]</span>
    <span class=p>[</span><span class=k>AS</span> <span class=err>{</span><span class=n>PERMISSIVE</span> <span class=o>|</span> <span class=n>RESTRICTIVE</span><span class=err>}</span><span class=p>]</span>
    <span class=p>[</span><span class=k>FOR</span> <span class=k>SELECT</span><span class=p>]</span>
    <span class=p>[</span><span class=k>USING</span> <span class=err>{</span><span class=n>condition</span> <span class=o>|</span> <span class=k>NONE</span><span class=err>}</span><span class=p>][,...]</span>
    <span class=p>[</span><span class=k>TO</span> <span class=err>{</span><span class=k>role</span> <span class=p>[,...]</span> <span class=o>|</span> <span class=k>ALL</span> <span class=o>|</span> <span class=k>ALL</span> <span class=k>EXCEPT</span> <span class=k>role</span> <span class=p>[,...]</span><span class=err>}</span><span class=p>]</span>
</code></pre></div><h2 id=alter-quota-statement>ALTER QUOTA<a class=headerlink href=../amp/#alter-quota-statement title="Permanent link"> </a></h2><p>Изменяет квоту.</p><h3 id=alter-quota-syntax>Синтаксис<a class=headerlink href=../amp/#alter-quota-syntax title="Permanent link"> </a></h3><div class=codehilite><pre><span></span><code class=syntax><span class=k>ALTER</span> <span class=n>QUOTA</span> <span class=p>[</span><span class=k>IF</span> <span class=k>EXISTS</span><span class=p>]</span> <span class=n>name</span> <span class=p>[</span><span class=k>ON</span> <span class=k>CLUSTER</span> <span class=n>cluster_name</span><span class=p>]</span>
    <span class=p>[</span><span class=k>RENAME</span> <span class=k>TO</span> <span class=n>new_name</span><span class=p>]</span>
    <span class=p>[</span><span class=n>KEYED</span> <span class=k>BY</span> <span class=err>{</span><span class=s1>'none'</span> <span class=o>|</span> <span class=s1>'user name'</span> <span class=o>|</span> <span class=s1>'ip address'</span> <span class=o>|</span> <span class=s1>'client key'</span> <span class=o>|</span> <span class=s1>'client key or user name'</span> <span class=o>|</span> <span class=s1>'client key or ip address'</span><span class=err>}</span><span class=p>]</span>
    <span class=p>[</span><span class=k>FOR</span> <span class=p>[</span><span class=n>RANDOMIZED</span><span class=p>]</span> <span class=nb>INTERVAL</span> <span class=nb>number</span> <span class=err>{</span><span class=k>SECOND</span> <span class=o>|</span> <span class=k>MINUTE</span> <span class=o>|</span> <span class=n>HOUR</span> <span class=o>|</span> <span class=k>DAY</span><span class=err>}</span>
        <span class=err>{</span><span class=k>MAX</span> <span class=err>{</span> <span class=err>{</span><span class=n>QUERIES</span> <span class=o>|</span> <span class=n>ERRORS</span> <span class=o>|</span> <span class=k>RESULT</span> <span class=k>ROWS</span> <span class=o>|</span> <span class=k>RESULT</span> <span class=n>BYTES</span> <span class=o>|</span> <span class=k>READ</span> <span class=k>ROWS</span> <span class=o>|</span> <span class=k>READ</span> <span class=n>BYTES</span> <span class=o>|</span> <span class=n>EXECUTION</span> <span class=n>TIME</span><span class=err>}</span> <span class=o>=</span> <span class=nb>number</span> <span class=err>}</span> <span class=p>[,...]</span> <span class=o>|</span>
        <span class=k>NO</span> <span class=n>LIMITS</span> <span class=o>|</span> <span class=n>TRACKING</span> <span class=k>ONLY</span><span class=err>}</span> <span class=p>[,...]]</span>
    <span class=p>[</span><span class=k>TO</span> <span class=err>{</span><span class=k>role</span> <span class=p>[,...]</span> <span class=o>|</span> <span class=k>ALL</span> <span class=o>|</span> <span class=k>ALL</span> <span class=k>EXCEPT</span> <span class=k>role</span> <span class=p>[,...]</span><span class=err>}</span><span class=p>]</span>
</code></pre></div><h2 id=alter-settings-profile-statement>ALTER SETTINGS PROFILE<a class=headerlink href=../amp/#alter-settings-profile-statement title="Permanent link"> </a></h2><p>Изменяет профили настроек.</p><h3 id=alter-settings-profile-syntax>Синтаксис<a class=headerlink href=../amp/#alter-settings-profile-syntax title="Permanent link"> </a></h3><div class=codehilite><pre><span></span><code class=syntax><span class=k>ALTER</span> <span class=n>SETTINGS</span> <span class=n>PROFILE</span> <span class=p>[</span><span class=k>IF</span> <span class=k>EXISTS</span><span class=p>]</span> <span class=n>name</span> <span class=p>[</span><span class=k>ON</span> <span class=k>CLUSTER</span> <span class=n>cluster_name</span><span class=p>]</span>
    <span class=p>[</span><span class=k>RENAME</span> <span class=k>TO</span> <span class=n>new_name</span><span class=p>]</span>
    <span class=p>[</span><span class=n>SETTINGS</span> <span class=k>variable</span> <span class=p>[</span><span class=o>=</span> <span class=n>value</span><span class=p>]</span> <span class=p>[</span><span class=k>MIN</span> <span class=p>[</span><span class=o>=</span><span class=p>]</span> <span class=n>min_value</span><span class=p>]</span> <span class=p>[</span><span class=k>MAX</span> <span class=p>[</span><span class=o>=</span><span class=p>]</span> <span class=n>max_value</span><span class=p>]</span> <span class=p>[</span><span class=n>READONLY</span><span class=o>|</span><span class=n>WRITABLE</span><span class=p>]</span> <span class=o>|</span> <span class=n>INHERIT</span> <span class=s1>'profile_name'</span><span class=p>]</span> <span class=p>[,...]</span>
</code></pre></div><p><a href=https://clickhouse.tech/docs/ru/query_language/alter/ target=_blank>Оригинальная статья</a> <!--hide--></p>
        </div>
      </div>
      <div class="row">
        <div class="col">
          
<div class="alert alert-light my-3">
  <p class="float-right mb-0">Рейтинг: RATING_VALUE - RATING_COUNT голосов</p>
  <span class="alert-heading display-6">Рейтинг статьи</span>
  <div id="rating-stars" class="display-6 mb-0"
     
  >RATING_STARS</div>
</div>

<div id="content-footer" class="text-muted pt-3 mb-5">
    <div class="float-md-right">©2016–2020 Yandex LLC</div>
    <div>Собрано из <a href="https://github.com/ClickHouse/ClickHouse/commit/782f2179ce4ad0b9a9c898a5f32557555b59e4d0" rel="external nofollow noreferrer" target="_blank" class="text-reset">782f2179ce</a>, опубликовано <span title="2018-07-18T10:42:59+03:00">2018-07-18</span>, изменено <span title="2020-05-19T09:02:30+03:00">2020-05-19</span>
    
    </div>
</div>

        </div>
      </div>
      <div id="to-full-website" class="row fixed-bottom text-center bg-white py-3">
        <div class="col">
          <a class="btn btn-lg btn-outline-orange" href="https://clickhouse.tech/docs/ru/sql-reference/statements/alter/">To full website</a>
        </div>
      </div>
    </div>
    <amp-analytics type="metrika">
      <script type="application/json">{
"vars": {
  "counterId": "18343495",
  "triggers": {
    "notBounce": {
      "on": "timer",
      "timerSpec": {
        "immediate": false,
        "interval": 15,
        "maxTimerLength": 16
      },
      "request": "notBounce"
    }
  }
}
}</script>
  </amp-analytics>
  </body>
</html>
