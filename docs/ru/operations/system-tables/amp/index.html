










    



    



    



    
    






    <!doctype html>
<html ⚡ lang="ru">
  <head>
    <meta charset="utf-8">
    <script async src="https://cdn.ampproject.org/v0.js"></script>
    <title>Системные таблицы | Документация ClickHouse</title>
    <link rel="canonical" href="https://clickhouse.tech/docs/ru/operations/system-tables/" />
    <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">
    
<script type="application/ld+json">[{
"@context": "http://schema.org",
"@type": "TechArticle",
"headline": "Системные таблицы | Документация ClickHouse",
"mainEntityOfPage": "https://clickhouse.tech/docs/ru/operations/system-tables/",

"datePublished": "2018-07-16T18:50:55+03:00",
"dateModified": "2020-07-14T09:57:39+03:00",

"image": "https://clickhouse.tech/images/logo-209x60.png",
"author": {
  "@type": "Project",
  "name": "ClickHouse"
},
"publisher": {
  "@type": "Organization",
  "name": "Yandex LLC",
  "logo": {
    "@type": "ImageObject",
    "url": "https://clickhouse.tech/images/yandex.png",
    "width": 163,
    "height": 60
  }
}}, {
"@context": "http://schema.org",
"@type": "Episode",
"name": "Системные таблицы | Документация ClickHouse",
"aggregateRating": {
  "@type": "AggregateRating",
  "ratingValue": RATING_VALUE,
  "ratingCount": RATING_COUNT
}
}]</script>

    
    <style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>
    <style amp-custom>:root{--blue:#007bff;--indigo:#6610f2;--purple:#6f42c1;--pink:#e83e8c;--red:#dc3545;--orange:#fd7e14;--yellow:#ffc107;--green:#28a745;--teal:#20c997;--cyan:#17a2b8;--white:#fff;--gray:#6c757d;--gray-dark:#343a40;--primary:#007bff;--secondary:#6c757d;--success:#28a745;--info:#17a2b8;--warning:#ffc107;--danger:#dc3545;--light:#f8f9fa;--dark:#343a40;--breakpoint-xs:0;--breakpoint-sm:576px;--breakpoint-md:768px;--breakpoint-lg:992px;--breakpoint-xl:1200px;--font-family-sans-serif:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";--font-family-monospace:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace}*,::after,::before{box-sizing:border-box}html{font-family:sans-serif;line-height:1.15;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent}footer,section{display:block}body{margin:0;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-size:1rem;font-weight:400;line-height:1.5;color:#212529;text-align:left;background-color:#fff}[tabindex="-1"]:focus:not(:focus-visible){outline:0}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:.5rem}p{margin-top:0;margin-bottom:1rem}address{margin-bottom:1rem;font-style:normal;line-height:inherit}ol,ul{margin-top:0;margin-bottom:1rem}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}b,strong{font-weight:bolder}a{color:#007bff;text-decoration:none;background-color:transparent}a:hover{color:#0056b3;text-decoration:underline}a:not([href]){color:inherit;text-decoration:none}a:not([href]):hover{color:inherit;text-decoration:none}code,pre{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:1em}pre{margin-top:0;margin-bottom:1rem;overflow:auto}img{vertical-align:middle;border-style:none}svg{overflow:hidden;vertical-align:middle}table{border-collapse:collapse}select{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}select{text-transform:none}select{word-wrap:normal}[type=button],[type=reset],[type=submit]{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled){cursor:pointer}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner{padding:0;border-style:none}progress{vertical-align:baseline}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:none}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}[hidden]{display:none}.h1,.h2,.h3,.h4,.h5,.h6,h1,h2,h3,h4,h5,h6{margin-bottom:.5rem;font-weight:500;line-height:1.2}.h1,h1{font-size:2.5rem}.h2,h2{font-size:2rem}.h3,h3{font-size:1.75rem}.h4,h4{font-size:1.5rem}.h5,h5{font-size:1.25rem}.h6,h6{font-size:1rem}.display-1{font-size:6rem;font-weight:300;line-height:1.2}.display-2{font-size:5.5rem;font-weight:300;line-height:1.2}.display-3{font-size:4.5rem;font-weight:300;line-height:1.2}.display-4{font-size:3.5rem;font-weight:300;line-height:1.2}.list-inline{padding-left:0;list-style:none}.img-fluid{max-width:100%;height:auto}code{font-size:87.5%;color:#e83e8c;word-wrap:break-word}a>code{color:inherit}pre{display:block;font-size:87.5%;color:#212529}pre code{font-size:inherit;color:inherit;word-break:normal}.container{width:100%;padding-right:15px;padding-left:15px;margin-right:auto;margin-left:auto}@media(min-width:576px){.container{max-width:540px}}@media(min-width:768px){.container{max-width:720px}}@media(min-width:992px){.container{max-width:960px}}@media(min-width:1200px){.container{max-width:1140px}}.container-fluid,.container-lg,.container-md{width:100%;padding-right:15px;padding-left:15px;margin-right:auto;margin-left:auto}@media(min-width:576px){.container{max-width:540px}}@media(min-width:768px){.container,.container-md{max-width:720px}}@media(min-width:992px){.container,.container-lg,.container-md{max-width:960px}}@media(min-width:1200px){.container,.container-lg,.container-md{max-width:1140px}}.row{display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-right:-15px;margin-left:-15px}.col,.col-1,.col-10,.col-11,.col-12,.col-2,.col-3,.col-4,.col-5,.col-6,.col-7,.col-8,.col-9,.col-lg,.col-lg-1,.col-lg-10,.col-lg-11,.col-lg-12,.col-lg-2,.col-lg-3,.col-lg-4,.col-lg-5,.col-lg-6,.col-lg-7,.col-lg-8,.col-lg-9,.col-md,.col-md-1,.col-md-10,.col-md-11,.col-md-12,.col-md-2,.col-md-3,.col-md-4,.col-md-5,.col-md-6,.col-md-7,.col-md-8,.col-md-9{position:relative;width:100%;padding-right:15px;padding-left:15px}.col{-ms-flex-preferred-size:0;flex-basis:0;-ms-flex-positive:1;flex-grow:1;max-width:100%}.col-1{-ms-flex:0 0 8.333333%;flex:0 0 8.333333%;max-width:8.333333%}.col-2{-ms-flex:0 0 16.666667%;flex:0 0 16.666667%;max-width:16.666667%}.col-3{-ms-flex:0 0 25%;flex:0 0 25%;max-width:25%}.col-4{-ms-flex:0 0 33.333333%;flex:0 0 33.333333%;max-width:33.333333%}.col-5{-ms-flex:0 0 41.666667%;flex:0 0 41.666667%;max-width:41.666667%}.col-6{-ms-flex:0 0 50%;flex:0 0 50%;max-width:50%}.col-7{-ms-flex:0 0 58.333333%;flex:0 0 58.333333%;max-width:58.333333%}.col-8{-ms-flex:0 0 66.666667%;flex:0 0 66.666667%;max-width:66.666667%}.col-9{-ms-flex:0 0 75%;flex:0 0 75%;max-width:75%}.col-10{-ms-flex:0 0 83.333333%;flex:0 0 83.333333%;max-width:83.333333%}.col-11{-ms-flex:0 0 91.666667%;flex:0 0 91.666667%;max-width:91.666667%}.col-12{-ms-flex:0 0 100%;flex:0 0 100%;max-width:100%}.order-last{-ms-flex-order:13;order:13}.order-0{-ms-flex-order:0;order:0}.order-1{-ms-flex-order:1;order:1}.order-2{-ms-flex-order:2;order:2}.order-3{-ms-flex-order:3;order:3}.order-4{-ms-flex-order:4;order:4}.order-5{-ms-flex-order:5;order:5}.order-6{-ms-flex-order:6;order:6}.order-7{-ms-flex-order:7;order:7}.order-8{-ms-flex-order:8;order:8}.order-9{-ms-flex-order:9;order:9}.order-10{-ms-flex-order:10;order:10}.order-11{-ms-flex-order:11;order:11}.order-12{-ms-flex-order:12;order:12}@media(min-width:768px){.col-md{-ms-flex-preferred-size:0;flex-basis:0;-ms-flex-positive:1;flex-grow:1;max-width:100%}.col-md-1{-ms-flex:0 0 8.333333%;flex:0 0 8.333333%;max-width:8.333333%}.col-md-2{-ms-flex:0 0 16.666667%;flex:0 0 16.666667%;max-width:16.666667%}.col-md-3{-ms-flex:0 0 25%;flex:0 0 25%;max-width:25%}.col-md-4{-ms-flex:0 0 33.333333%;flex:0 0 33.333333%;max-width:33.333333%}.col-md-5{-ms-flex:0 0 41.666667%;flex:0 0 41.666667%;max-width:41.666667%}.col-md-6{-ms-flex:0 0 50%;flex:0 0 50%;max-width:50%}.col-md-7{-ms-flex:0 0 58.333333%;flex:0 0 58.333333%;max-width:58.333333%}.col-md-8{-ms-flex:0 0 66.666667%;flex:0 0 66.666667%;max-width:66.666667%}.col-md-9{-ms-flex:0 0 75%;flex:0 0 75%;max-width:75%}.col-md-10{-ms-flex:0 0 83.333333%;flex:0 0 83.333333%;max-width:83.333333%}.col-md-11{-ms-flex:0 0 91.666667%;flex:0 0 91.666667%;max-width:91.666667%}.col-md-12{-ms-flex:0 0 100%;flex:0 0 100%;max-width:100%}.order-md-last{-ms-flex-order:13;order:13}.order-md-0{-ms-flex-order:0;order:0}.order-md-1{-ms-flex-order:1;order:1}.order-md-2{-ms-flex-order:2;order:2}.order-md-3{-ms-flex-order:3;order:3}.order-md-4{-ms-flex-order:4;order:4}.order-md-5{-ms-flex-order:5;order:5}.order-md-6{-ms-flex-order:6;order:6}.order-md-7{-ms-flex-order:7;order:7}.order-md-8{-ms-flex-order:8;order:8}.order-md-9{-ms-flex-order:9;order:9}.order-md-10{-ms-flex-order:10;order:10}.order-md-11{-ms-flex-order:11;order:11}.order-md-12{-ms-flex-order:12;order:12}}@media(min-width:992px){.col-lg{-ms-flex-preferred-size:0;flex-basis:0;-ms-flex-positive:1;flex-grow:1;max-width:100%}.col-lg-1{-ms-flex:0 0 8.333333%;flex:0 0 8.333333%;max-width:8.333333%}.col-lg-2{-ms-flex:0 0 16.666667%;flex:0 0 16.666667%;max-width:16.666667%}.col-lg-3{-ms-flex:0 0 25%;flex:0 0 25%;max-width:25%}.col-lg-4{-ms-flex:0 0 33.333333%;flex:0 0 33.333333%;max-width:33.333333%}.col-lg-5{-ms-flex:0 0 41.666667%;flex:0 0 41.666667%;max-width:41.666667%}.col-lg-6{-ms-flex:0 0 50%;flex:0 0 50%;max-width:50%}.col-lg-7{-ms-flex:0 0 58.333333%;flex:0 0 58.333333%;max-width:58.333333%}.col-lg-8{-ms-flex:0 0 66.666667%;flex:0 0 66.666667%;max-width:66.666667%}.col-lg-9{-ms-flex:0 0 75%;flex:0 0 75%;max-width:75%}.col-lg-10{-ms-flex:0 0 83.333333%;flex:0 0 83.333333%;max-width:83.333333%}.col-lg-11{-ms-flex:0 0 91.666667%;flex:0 0 91.666667%;max-width:91.666667%}.col-lg-12{-ms-flex:0 0 100%;flex:0 0 100%;max-width:100%}.order-lg-last{-ms-flex-order:13;order:13}.order-lg-0{-ms-flex-order:0;order:0}.order-lg-1{-ms-flex-order:1;order:1}.order-lg-2{-ms-flex-order:2;order:2}.order-lg-3{-ms-flex-order:3;order:3}.order-lg-4{-ms-flex-order:4;order:4}.order-lg-5{-ms-flex-order:5;order:5}.order-lg-6{-ms-flex-order:6;order:6}.order-lg-7{-ms-flex-order:7;order:7}.order-lg-8{-ms-flex-order:8;order:8}.order-lg-9{-ms-flex-order:9;order:9}.order-lg-10{-ms-flex-order:10;order:10}.order-lg-11{-ms-flex-order:11;order:11}.order-lg-12{-ms-flex-order:12;order:12}}.table{width:100%;margin-bottom:1rem;color:#212529}.table-primary{background-color:#b8daff}.table-warning{background-color:#ffeeba}.table-light{background-color:#fdfdfe}.table-dark{background-color:#c6c8ca}.table-active{background-color:rgba(0,0,0,.075)}.table-dark{color:#fff;background-color:#343a40}.btn{display:inline-block;font-weight:400;color:#212529;text-align:center;vertical-align:middle;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-color:transparent;border:1px solid transparent;padding:.375rem .75rem;font-size:1rem;line-height:1.5;border-radius:.25rem;transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out}@media(prefers-reduced-motion:reduce){.btn{transition:none}}.btn:hover{color:#212529;text-decoration:none}.btn:focus{outline:0;box-shadow:0 0 0 .2rem rgba(0,123,255,.25)}.btn:disabled{opacity:.65}.btn-primary{color:#fff;background-color:#007bff;border-color:#007bff}.btn-primary:hover{color:#fff;background-color:#0069d9;border-color:#0062cc}.btn-primary:focus{color:#fff;background-color:#0069d9;border-color:#0062cc;box-shadow:0 0 0 .2rem rgba(38,143,255,.5)}.btn-primary:disabled{color:#fff;background-color:#007bff;border-color:#007bff}.btn-warning{color:#212529;background-color:#ffc107;border-color:#ffc107}.btn-warning:hover{color:#212529;background-color:#e0a800;border-color:#d39e00}.btn-warning:focus{color:#212529;background-color:#e0a800;border-color:#d39e00;box-shadow:0 0 0 .2rem rgba(222,170,12,.5)}.btn-warning:disabled{color:#212529;background-color:#ffc107;border-color:#ffc107}.btn-light{color:#212529;background-color:#f8f9fa;border-color:#f8f9fa}.btn-light:hover{color:#212529;background-color:#e2e6ea;border-color:#dae0e5}.btn-light:focus{color:#212529;background-color:#e2e6ea;border-color:#dae0e5;box-shadow:0 0 0 .2rem rgba(216,217,219,.5)}.btn-light:disabled{color:#212529;background-color:#f8f9fa;border-color:#f8f9fa}.btn-dark{color:#fff;background-color:#343a40;border-color:#343a40}.btn-dark:hover{color:#fff;background-color:#23272b;border-color:#1d2124}.btn-dark:focus{color:#fff;background-color:#23272b;border-color:#1d2124;box-shadow:0 0 0 .2rem rgba(82,88,93,.5)}.btn-dark:disabled{color:#fff;background-color:#343a40;border-color:#343a40}.btn-outline-primary{color:#007bff;border-color:#007bff}.btn-outline-primary:hover{color:#fff;background-color:#007bff;border-color:#007bff}.btn-outline-primary:focus{box-shadow:0 0 0 .2rem rgba(0,123,255,.5)}.btn-outline-primary:disabled{color:#007bff;background-color:transparent}.btn-outline-warning{color:#ffc107;border-color:#ffc107}.btn-outline-warning:hover{color:#212529;background-color:#ffc107;border-color:#ffc107}.btn-outline-warning:focus{box-shadow:0 0 0 .2rem rgba(255,193,7,.5)}.btn-outline-warning:disabled{color:#ffc107;background-color:transparent}.btn-outline-light{color:#f8f9fa;border-color:#f8f9fa}.btn-outline-light:hover{color:#212529;background-color:#f8f9fa;border-color:#f8f9fa}.btn-outline-light:focus{box-shadow:0 0 0 .2rem rgba(248,249,250,.5)}.btn-outline-light:disabled{color:#f8f9fa;background-color:transparent}.btn-outline-dark{color:#343a40;border-color:#343a40}.btn-outline-dark:hover{color:#fff;background-color:#343a40;border-color:#343a40}.btn-outline-dark:focus{box-shadow:0 0 0 .2rem rgba(52,58,64,.5)}.btn-outline-dark:disabled{color:#343a40;background-color:transparent}.btn-link{font-weight:400;color:#007bff;text-decoration:none}.btn-link:hover{color:#0056b3;text-decoration:underline}.btn-link:focus{text-decoration:underline;box-shadow:none}.btn-link:disabled{color:#6c757d;pointer-events:none}.btn-lg{padding:.5rem 1rem;font-size:1.25rem;line-height:1.5;border-radius:.3rem}.btn-block{display:block;width:100%}.btn-block+.btn-block{margin-top:.5rem}.custom-select{display:inline-block;width:100%;height:calc(1.5em+.75rem+2px);padding:.375rem 1.75rem .375rem .75rem;font-size:1rem;font-weight:400;line-height:1.5;color:#495057;vertical-align:middle;background:#fff url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='4' height='5' viewBox='0 0 4 5'%3e%3cpath fill='%23343a40' d='M2 0L0 2h4zm0 5L0 3h4z'/%3e%3c/svg%3e") no-repeat right .75rem center/8px 10px;border:1px solid #ced4da;border-radius:.25rem;-webkit-appearance:none;-moz-appearance:none;appearance:none}.custom-select:focus{border-color:#80bdff;outline:0;box-shadow:0 0 0 .2rem rgba(0,123,255,.25)}.custom-select:focus::-ms-value{color:#495057;background-color:#fff}.custom-select[multiple],.custom-select[size]:not([size="1"]){height:auto;padding-right:.75rem;background-image:none}.custom-select:disabled{color:#6c757d;background-color:#e9ecef}.custom-select::-ms-expand{display:none}.custom-select:-moz-focusring{color:transparent;text-shadow:0 0 0 #495057}.custom-select-lg{height:calc(1.5em+1rem+2px);padding-top:.5rem;padding-bottom:.5rem;padding-left:1rem;font-size:1.25rem}.custom-file{position:relative;display:inline-block;width:100%;height:calc(1.5em+.75rem+2px);margin-bottom:0}.custom-select{transition:background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out}@media(prefers-reduced-motion:reduce){.custom-select{transition:none}}.alert{position:relative;padding:.75rem 1.25rem;margin-bottom:1rem;border:1px solid transparent;border-radius:.25rem}.alert-heading{color:inherit}.alert-link{font-weight:700}.alert-primary{color:#004085;background-color:#cce5ff;border-color:#b8daff}.alert-primary .alert-link{color:#002752}.alert-warning{color:#856404;background-color:#fff3cd;border-color:#ffeeba}.alert-warning .alert-link{color:#533f03}.alert-light{color:#818182;background-color:#fefefe;border-color:#fdfdfe}.alert-light .alert-link{color:#686868}.alert-dark{color:#1b1e21;background-color:#d6d8d9;border-color:#c6c8ca}.alert-dark .alert-link{color:#040505}@-webkit-keyframes progress-bar-stripes{from{background-position:1rem 0}to{background-position:0 0}}@keyframes progress-bar-stripes{from{background-position:1rem 0}to{background-position:0 0}}.progress{display:-ms-flexbox;display:flex;height:1rem;overflow:hidden;font-size:.75rem;background-color:#e9ecef;border-radius:.25rem}@-webkit-keyframes spinner-border{to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes spinner-border{to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-webkit-keyframes spinner-grow{0%{-webkit-transform:scale(0);transform:scale(0)}50%{opacity:1}}@keyframes spinner-grow{0%{-webkit-transform:scale(0);transform:scale(0)}50%{opacity:1}}.bg-primary{background-color:#007bff}a.bg-primary:focus,a.bg-primary:hover{background-color:#0062cc}.bg-warning{background-color:#ffc107}a.bg-warning:focus,a.bg-warning:hover{background-color:#d39e00}.bg-light{background-color:#f8f9fa}a.bg-light:focus,a.bg-light:hover{background-color:#dae0e5}.bg-dark{background-color:#343a40}a.bg-dark:focus,a.bg-dark:hover{background-color:#1d2124}.bg-white{background-color:#fff}.d-none{display:none}.d-inline{display:inline}.d-inline-block{display:inline-block}.d-block{display:block}.d-table{display:table}.d-table-row{display:table-row}@media(min-width:768px){.d-md-none{display:none}.d-md-inline{display:inline}.d-md-inline-block{display:inline-block}.d-md-block{display:block}.d-md-table{display:table}.d-md-table-row{display:table-row}}@media(min-width:992px){.d-lg-none{display:none}.d-lg-inline{display:inline}.d-lg-inline-block{display:inline-block}.d-lg-block{display:block}.d-lg-table{display:table}.d-lg-table-row{display:table-row}}.float-right{float:right}.float-none{float:none}@media(min-width:768px){.float-md-right{float:right}.float-md-none{float:none}}@media(min-width:992px){.float-lg-right{float:right}.float-lg-none{float:none}}.fixed-bottom{position:fixed;right:0;bottom:0;left:0;z-index:1030}.h-25{height:25%}.h-50{height:50%}.h-75{height:75%}.h-100{height:100%}.mt-0,.my-0{margin-top:0}.mr-0{margin-right:0}.mb-0,.my-0{margin-bottom:0}.mt-1,.my-1{margin-top:.25rem}.mr-1{margin-right:.25rem}.mb-1,.my-1{margin-bottom:.25rem}.mt-2,.my-2{margin-top:.5rem}.mr-2{margin-right:.5rem}.mb-2,.my-2{margin-bottom:.5rem}.mt-3,.my-3{margin-top:1rem}.mr-3{margin-right:1rem}.mb-3,.my-3{margin-bottom:1rem}.mt-4,.my-4{margin-top:1.5rem}.mr-4{margin-right:1.5rem}.mb-4,.my-4{margin-bottom:1.5rem}.mt-5,.my-5{margin-top:3rem}.mr-5{margin-right:3rem}.mb-5,.my-5{margin-bottom:3rem}.p-0{padding:0}.pt-0,.py-0{padding-top:0}.pb-0,.py-0{padding-bottom:0}.p-1{padding:.25rem}.pt-1,.py-1{padding-top:.25rem}.pb-1,.py-1{padding-bottom:.25rem}.p-2{padding:.5rem}.pt-2,.py-2{padding-top:.5rem}.pb-2,.py-2{padding-bottom:.5rem}.p-3{padding:1rem}.pt-3,.py-3{padding-top:1rem}.pb-3,.py-3{padding-bottom:1rem}.p-4{padding:1.5rem}.pt-4,.py-4{padding-top:1.5rem}.pb-4,.py-4{padding-bottom:1.5rem}.p-5{padding:3rem}.pt-5,.py-5{padding-top:3rem}.pb-5,.py-5{padding-bottom:3rem}.mt-n1,.my-n1{margin-top:-.25rem}.mr-n1{margin-right:-.25rem}.mb-n1,.my-n1{margin-bottom:-.25rem}.mt-n2,.my-n2{margin-top:-.5rem}.mr-n2{margin-right:-.5rem}.mb-n2,.my-n2{margin-bottom:-.5rem}.mt-n3,.my-n3{margin-top:-1rem}.mr-n3{margin-right:-1rem}.mb-n3,.my-n3{margin-bottom:-1rem}.mt-n4,.my-n4{margin-top:-1.5rem}.mr-n4{margin-right:-1.5rem}.mb-n4,.my-n4{margin-bottom:-1.5rem}.mt-n5,.my-n5{margin-top:-3rem}.mr-n5{margin-right:-3rem}.mb-n5,.my-n5{margin-bottom:-3rem}@media(min-width:768px){.mt-md-0,.my-md-0{margin-top:0}.mr-md-0{margin-right:0}.mb-md-0,.my-md-0{margin-bottom:0}.mt-md-1,.my-md-1{margin-top:.25rem}.mr-md-1{margin-right:.25rem}.mb-md-1,.my-md-1{margin-bottom:.25rem}.mt-md-2,.my-md-2{margin-top:.5rem}.mr-md-2{margin-right:.5rem}.mb-md-2,.my-md-2{margin-bottom:.5rem}.mt-md-3,.my-md-3{margin-top:1rem}.mr-md-3{margin-right:1rem}.mb-md-3,.my-md-3{margin-bottom:1rem}.mt-md-4,.my-md-4{margin-top:1.5rem}.mr-md-4{margin-right:1.5rem}.mb-md-4,.my-md-4{margin-bottom:1.5rem}.mt-md-5,.my-md-5{margin-top:3rem}.mr-md-5{margin-right:3rem}.mb-md-5,.my-md-5{margin-bottom:3rem}.p-md-0{padding:0}.pt-md-0,.py-md-0{padding-top:0}.pb-md-0,.py-md-0{padding-bottom:0}.p-md-1{padding:.25rem}.pt-md-1,.py-md-1{padding-top:.25rem}.pb-md-1,.py-md-1{padding-bottom:.25rem}.p-md-2{padding:.5rem}.pt-md-2,.py-md-2{padding-top:.5rem}.pb-md-2,.py-md-2{padding-bottom:.5rem}.p-md-3{padding:1rem}.pt-md-3,.py-md-3{padding-top:1rem}.pb-md-3,.py-md-3{padding-bottom:1rem}.p-md-4{padding:1.5rem}.pt-md-4,.py-md-4{padding-top:1.5rem}.pb-md-4,.py-md-4{padding-bottom:1.5rem}.p-md-5{padding:3rem}.pt-md-5,.py-md-5{padding-top:3rem}.pb-md-5,.py-md-5{padding-bottom:3rem}.mt-md-n1,.my-md-n1{margin-top:-.25rem}.mr-md-n1{margin-right:-.25rem}.mb-md-n1,.my-md-n1{margin-bottom:-.25rem}.mt-md-n2,.my-md-n2{margin-top:-.5rem}.mr-md-n2{margin-right:-.5rem}.mb-md-n2,.my-md-n2{margin-bottom:-.5rem}.mt-md-n3,.my-md-n3{margin-top:-1rem}.mr-md-n3{margin-right:-1rem}.mb-md-n3,.my-md-n3{margin-bottom:-1rem}.mt-md-n4,.my-md-n4{margin-top:-1.5rem}.mr-md-n4{margin-right:-1.5rem}.mb-md-n4,.my-md-n4{margin-bottom:-1.5rem}.mt-md-n5,.my-md-n5{margin-top:-3rem}.mr-md-n5{margin-right:-3rem}.mb-md-n5,.my-md-n5{margin-bottom:-3rem}}@media(min-width:992px){.mt-lg-0,.my-lg-0{margin-top:0}.mr-lg-0{margin-right:0}.mb-lg-0,.my-lg-0{margin-bottom:0}.mt-lg-1,.my-lg-1{margin-top:.25rem}.mr-lg-1{margin-right:.25rem}.mb-lg-1,.my-lg-1{margin-bottom:.25rem}.mt-lg-2,.my-lg-2{margin-top:.5rem}.mr-lg-2{margin-right:.5rem}.mb-lg-2,.my-lg-2{margin-bottom:.5rem}.mt-lg-3,.my-lg-3{margin-top:1rem}.mr-lg-3{margin-right:1rem}.mb-lg-3,.my-lg-3{margin-bottom:1rem}.mt-lg-4,.my-lg-4{margin-top:1.5rem}.mr-lg-4{margin-right:1.5rem}.mb-lg-4,.my-lg-4{margin-bottom:1.5rem}.mt-lg-5,.my-lg-5{margin-top:3rem}.mr-lg-5{margin-right:3rem}.mb-lg-5,.my-lg-5{margin-bottom:3rem}.p-lg-0{padding:0}.pt-lg-0,.py-lg-0{padding-top:0}.pb-lg-0,.py-lg-0{padding-bottom:0}.p-lg-1{padding:.25rem}.pt-lg-1,.py-lg-1{padding-top:.25rem}.pb-lg-1,.py-lg-1{padding-bottom:.25rem}.p-lg-2{padding:.5rem}.pt-lg-2,.py-lg-2{padding-top:.5rem}.pb-lg-2,.py-lg-2{padding-bottom:.5rem}.p-lg-3{padding:1rem}.pt-lg-3,.py-lg-3{padding-top:1rem}.pb-lg-3,.py-lg-3{padding-bottom:1rem}.p-lg-4{padding:1.5rem}.pt-lg-4,.py-lg-4{padding-top:1.5rem}.pb-lg-4,.py-lg-4{padding-bottom:1.5rem}.p-lg-5{padding:3rem}.pt-lg-5,.py-lg-5{padding-top:3rem}.pb-lg-5,.py-lg-5{padding-bottom:3rem}.mt-lg-n1,.my-lg-n1{margin-top:-.25rem}.mr-lg-n1{margin-right:-.25rem}.mb-lg-n1,.my-lg-n1{margin-bottom:-.25rem}.mt-lg-n2,.my-lg-n2{margin-top:-.5rem}.mr-lg-n2{margin-right:-.5rem}.mb-lg-n2,.my-lg-n2{margin-bottom:-.5rem}.mt-lg-n3,.my-lg-n3{margin-top:-1rem}.mr-lg-n3{margin-right:-1rem}.mb-lg-n3,.my-lg-n3{margin-bottom:-1rem}.mt-lg-n4,.my-lg-n4{margin-top:-1.5rem}.mr-lg-n4{margin-right:-1.5rem}.mb-lg-n4,.my-lg-n4{margin-bottom:-1.5rem}.mt-lg-n5,.my-lg-n5{margin-top:-3rem}.mr-lg-n5{margin-right:-3rem}.mb-lg-n5,.my-lg-n5{margin-bottom:-3rem}}.text-right{text-align:right}.text-center{text-align:center}@media(min-width:768px){.text-md-right{text-align:right}.text-md-center{text-align:center}}@media(min-width:992px){.text-lg-right{text-align:right}.text-lg-center{text-align:center}}.text-white{color:#fff}.text-primary{color:#007bff}a.text-primary:focus,a.text-primary:hover{color:#0056b3}.text-warning{color:#ffc107}a.text-warning:focus,a.text-warning:hover{color:#ba8b00}.text-light{color:#f8f9fa}a.text-light:focus,a.text-light:hover{color:#cbd3da}.text-dark{color:#343a40}a.text-dark:focus,a.text-dark:hover{color:#121416}.text-body{color:#212529}.text-muted{color:#6c757d}.text-black-50{color:rgba(0,0,0,.5)}.text-white-50{color:rgba(255,255,255,.5)}.text-hide{font:0/0 a;color:transparent;text-shadow:none;background-color:transparent;border:0}.text-decoration-none{text-decoration:none}.text-reset{color:inherit}.visible{visibility:visible}@media print{*,::after,::before{text-shadow:none;box-shadow:none}a:not(.btn){text-decoration:underline}pre{white-space:pre-wrap}pre{border:1px solid #adb5bd;page-break-inside:avoid}img{page-break-inside:avoid}h2,h3,p{orphans:3;widows:3}h2,h3{page-break-after:avoid}@page{size:a3}body{min-width:992px}.container{min-width:992px}.table{border-collapse:collapse}.table-dark{color:inherit}}@-webkit-keyframes sbx-reset-in{0%{-webkit-transform:translate3d(-20%,0,0);transform:translate3d(-20%,0,0);opacity:0}100%{-webkit-transform:none;transform:none;opacity:1}}@keyframes sbx-reset-in{0%{-webkit-transform:translate3d(-20%,0,0);transform:translate3d(-20%,0,0);opacity:0}100%{-webkit-transform:none;transform:none;opacity:1}}body{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Noto Sans","Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji"}a:link,a:visited{color:#f14600;text-decoration:none}a:active,a:hover{text-decoration:underline}.btn:disabled{cursor:default;opacity:.4}#logo-text{width:180px;margin-left:12px}.display-5{font-size:2rem;font-weight:300;line-height:1.2}.display-6{font-size:1.75rem;font-weight:300;line-height:1.2}.bg-dark-alt,.bg-dark-alt:focus{background:#36363f}.bg-orange,.bg-orange:focus{background:#f14600}.text-dark-alt{color:#36363f}.btn-dark-alt{background:#36363f}.btn-dark-alt:focus{background:#36363f}.btn-outline-orange{border-color:#f14600;color:#f14600}.btn-orange,.btn-outline-orange:hover{background:#f14600;color:#fff}.btn:active,.btn:hover{text-decoration:none}.text-orange{color:#f14600}.bg-number{position:absolute;font-size:900%;font-weight:700;color:rgba(241,70,0,.1);line-height:1;margin-top:-1rem}details{background:#444451;color:#eee;padding:1rem;margin-bottom:1rem;margin-top:1rem}.headerlink{text-decoration:none;margin-left:.5rem}body[data-spy] #content{overflow-x:scroll}#content table{border:1px solid #dee2e6;width:100%;margin-bottom:1rem;overflow-x:auto}#content code{color:#111;background:#eee}#content pre{background:#eee;padding:1rem}@media print{body{min-width:0}code,h1,h2,h3,h4,h5,h6,img,li,p,pre{page-break-inside:avoid}}@media(prefers-color-scheme:dark){#to-full-website,body.amp,body[data-spy]{background:#1c1c1c;color:#efefef}.invert-dark{filter:invert(100%)}#content table{border:1px solid #2a2b2c}#content code,#content pre{background:#444;color:#eee}}.syntax{background:#f8f9fa;color:#2f1e2e}.syntax .c{color:#8d8687}.syntax .err{color:#ef6155}.syntax .k{color:#815ba4}.syntax .n{color:#2f1e2e}.syntax .o{color:#5bc4bf}.syntax .p{color:#2f1e2e}.syntax .c1{color:#8d8687}.syntax .kt{color:#fec418}.syntax .ld{color:#48b685}.syntax .s{color:#48b685}.syntax .py{color:#2f1e2e}.syntax .nt{color:#5bc4bf}.syntax .mi{color:#f99b15}.syntax .s2{color:#48b685}.syntax .s1{color:#48b685}.syntax .ss{color:#48b685}@media(prefers-color-scheme:dark){.syntax .k{color:#c78cff}.syntax .ld{color:#64ffbb}.syntax .s{color:#64ffbb}.syntax .s2{color:#64ffbb}.syntax .s1{color:#64ffbb}.syntax .ss{color:#64ffbb}.syntax .c{color:#64ffbb}.syntax .n{color:#f8f9fa}.syntax .p{color:#f8f9fa}.syntax .py{color:#f8f9fa}}</style>
    <script async custom-element="amp-analytics" src="https://cdn.ampproject.org/v0/amp-analytics-0.1.js"></script>
    <script async custom-element="amp-iframe" src="https://cdn.ampproject.org/v0/amp-iframe-0.1.js"></script>
  </head>
  <body class="amp" dir="ltr">
    <div class="container-fluid container-lg pb-5">
      <div class="row pt-3 mb-3">
        <div class="col">
          <a href="/" class="text-decoration-none">
            <amp-img class="d-inline-block mr-3" layout="fixed" width="40" height="36" src="/images/logo.svg" alt="ClickHouse logo" title="ClickHouse logo"></amp-img><amp-img class="invert-dark d-inline-block" layout="fixed" width="238" height="36" src="/images/clickhouse-black.svg" alt="ClickHouse" title="ClickHouse"></amp-img>
          </a>
        </div>
      </div>
      <div class="row">
        <div id="content" class="col">
          
          <h1 id=system-tables>Системные таблицы<a class=headerlink href=../amp/#system-tables title="Permanent link"> </a></h1><h2 id=system-tables-introduction>Введение<a class=headerlink href=../amp/#system-tables-introduction title="Permanent link"> </a></h2><p>Системные таблицы используются для реализации части функциональности системы, а также предоставляют доступ к информации о работе системы.<br> Вы не можете удалить системную таблицу (хотя можете сделать DETACH).<br> Для системных таблиц нет файлов с данными на диске и файлов с метаданными. Сервер создаёт все системные таблицы при старте.<br> В системные таблицы нельзя записывать данные - можно только читать.<br> Системные таблицы расположены в базе данных system.</p><h2 id=system_tables-asynchronous_metrics>system.asynchronous_metrics<a class=headerlink href=../amp/#system_tables-asynchronous_metrics title="Permanent link"> </a></h2><p>Содержит метрики, которые периодически вычисляются в фоновом режиме. Например, объём используемой оперативной памяти.</p><p>Столбцы:</p><ul><li><code class=syntax>metric</code> (<a href=../../../sql-reference/data-types/string/amp/ >String</a>) — название метрики.</li><li><code class=syntax>value</code> (<a href=../../../sql-reference/data-types/float/amp/ >Float64</a>) — значение метрики.</li></ul><p><strong>Пример</strong></p><div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=o>*</span> <span class=k>FROM</span> <span class=k>system</span><span class=p>.</span><span class=n>asynchronous_metrics</span> <span class=k>LIMIT</span> <span class=mi>10</span>
</code></pre></div><div class=codehilite><pre><span></span><code class=syntax>┌─metric──────────────────────────────────┬──────value─┐
│ jemalloc.background_thread.run_interval │          0 │
│ jemalloc.background_thread.num_runs     │          0 │
│ jemalloc.background_thread.num_threads  │          0 │
│ jemalloc.retained                       │  422551552 │
│ jemalloc.mapped                         │ 1682989056 │
│ jemalloc.resident                       │ 1656446976 │
│ jemalloc.metadata_thp                   │          0 │
│ jemalloc.metadata                       │   10226856 │
│ UncompressedCacheCells                  │          0 │
│ MarkCacheFiles                          │          0 │
└─────────────────────────────────────────┴────────────┘
</code></pre></div><p><strong>Смотрите также</strong></p><ul><li><a href=../../monitoring/amp/ >Мониторинг</a> — основы мониторинга в ClickHouse.</li><li><a href=../amp/#system_tables-metrics>system.metrics</a> — таблица с мгновенно вычисляемыми метриками.</li><li><a href=../amp/#system_tables-events>system.events</a> — таблица с количеством произошедших событий.</li><li><a href=../amp/#system_tables-metric_log>system.metric_log</a> — таблица фиксирующая историю значений метрик из <code class=syntax>system.metrics</code> и <code class=syntax>system.events</code>.</li></ul><h2 id=system-clusters>system.clusters<a class=headerlink href=../amp/#system-clusters title="Permanent link"> </a></h2><p>Содержит информацию о доступных в конфигурационном файле кластерах и серверах, которые в них входят.<br> Столбцы:</p><div class=codehilite><pre><span></span><code class=syntax>cluster String — имя кластера.
shard_num UInt32 — номер шарда в кластере, начиная с 1.
shard_weight UInt32 — относительный вес шарда при записи данных
replica_num UInt32  — номер реплики в шарде, начиная с 1.
host_name String — хост, указанный в конфигурации.
host_address String — IP-адрес хоста, полученный из DNS.
port UInt16 — порт, на который обращаться для соединения с сервером.
user String — имя пользователя, которого использовать для соединения с сервером.
</code></pre></div><h2 id=system-columns>system.columns<a class=headerlink href=../amp/#system-columns title="Permanent link"> </a></h2><p>Содержит информацию о столбцах всех таблиц.</p><p>С помощью этой таблицы можно получить информацию аналогично запросу <a href=../../../sql-reference/statements/misc/amp/#misc-describe-table>DESCRIBE TABLE</a>, но для многих таблиц сразу.</p><p>Таблица <code class=syntax>system.columns</code> содержит столбцы (тип столбца указан в скобках):</p><ul><li><code class=syntax>database</code> (String) — имя базы данных.</li><li><code class=syntax>table</code> (String) — имя таблицы.</li><li><code class=syntax>name</code> (String) — имя столбца.</li><li><code class=syntax>type</code> (String) — тип столбца.</li><li><code class=syntax>default_kind</code> (String) — тип выражения (<code class=syntax>DEFAULT</code>, <code class=syntax>MATERIALIZED</code>, <code class=syntax>ALIAS</code>) значения по умолчанию, или пустая строка.</li><li><code class=syntax>default_expression</code> (String) — выражение для значения по умолчанию или пустая строка.</li><li><code class=syntax>data_compressed_bytes</code> (UInt64) — размер сжатых данных в байтах.</li><li><code class=syntax>data_uncompressed_bytes</code> (UInt64) — размер распакованных данных в байтах.</li><li><code class=syntax>marks_bytes</code> (UInt64) — размер засечек в байтах.</li><li><code class=syntax>comment</code> (String) — комментарий к столбцу или пустая строка.</li><li><code class=syntax>is_in_partition_key</code> (UInt8) — флаг, показывающий включение столбца в ключ партиционирования.</li><li><code class=syntax>is_in_sorting_key</code> (UInt8) — флаг, показывающий включение столбца в ключ сортировки.</li><li><code class=syntax>is_in_primary_key</code> (UInt8) — флаг, показывающий включение столбца в первичный ключ.</li><li><code class=syntax>is_in_sampling_key</code> (UInt8) — флаг, показывающий включение столбца в ключ выборки.</li></ul><h2 id=system-contributors>system.contributors<a class=headerlink href=../amp/#system-contributors title="Permanent link"> </a></h2><p>Содержит информацию о контрибьютерах. Контрибьютеры расположены в таблице в случайном порядке. Порядок определяется заново при каждом запросе.</p><p>Столбцы:</p><ul><li><code class=syntax>name</code> (String) — Имя контрибьютера (автора коммита) из git log.</li></ul><p><strong>Пример</strong></p><div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=o>*</span> <span class=k>FROM</span> <span class=k>system</span><span class=p>.</span><span class=n>contributors</span> <span class=k>LIMIT</span> <span class=mi>10</span>
</code></pre></div><div class=codehilite><pre><span></span><code class=syntax>┌─name─────────────┐
│ Olga Khvostikova │
│ Max Vetrov       │
│ LiuYangkuan      │
│ svladykin        │
│ zamulla          │
│ Šimon Podlipský  │
│ BayoNet          │
│ Ilya Khomutov    │
│ Amy Krishnevsky  │
│ Loud_Scream      │
└──────────────────┘
</code></pre></div><p>Чтобы найти себя в таблице, выполните запрос:</p><div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=o>*</span> <span class=k>FROM</span> <span class=k>system</span><span class=p>.</span><span class=n>contributors</span> <span class=k>WHERE</span> <span class=n>name</span><span class=o>=</span><span class=s1>'Olga Khvostikova'</span>
</code></pre></div><div class=codehilite><pre><span></span><code class=syntax>┌─name─────────────┐
│ Olga Khvostikova │
└──────────────────┘
</code></pre></div><h2 id=system-databases>system.databases<a class=headerlink href=../amp/#system-databases title="Permanent link"> </a></h2><p>Таблица содержит один столбец name типа String - имя базы данных.<br> Для каждой базы данных, о которой знает сервер, будет присутствовать соответствующая запись в таблице.<br> Эта системная таблица используется для реализации запроса <code class=syntax>SHOW DATABASES</code>.</p><h2 id=system_tables-data_type_families>system.data_type_families<a class=headerlink href=../amp/#system_tables-data_type_families title="Permanent link"> </a></h2><p>Содержит информацию о поддерживаемых <a href=../../sql-reference/data-types/amp/ >типах данных</a>.</p><p>Столбцы:</p><ul><li><code class=syntax>name</code> (<a href=../../../sql-reference/data-types/string/amp/ >String</a>) — имя типа данных.</li><li><code class=syntax>case_insensitive</code> (<a href=../../../sql-reference/data-types/int-uint/amp/ >UInt8</a>) — свойство, которое показывает, зависит ли имя типа данных в запросе от регистра. Например, допустимы и <code class=syntax>Date</code>, и <code class=syntax>date</code>.</li><li><code class=syntax>alias_to</code> (<a href=../../../sql-reference/data-types/string/amp/ >String</a>) — тип данных, для которого <code class=syntax>name</code> является алиасом.</li></ul><p><strong>Пример</strong></p><div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=o>*</span> <span class=k>FROM</span> <span class=k>system</span><span class=p>.</span><span class=n>data_type_families</span> <span class=k>WHERE</span> <span class=n>alias_to</span> <span class=o>=</span> <span class=s1>'String'</span>
</code></pre></div><div class=codehilite><pre><span></span><code class=syntax>┌─name───────┬─case_insensitive─┬─alias_to─┐
│ LONGBLOB   │                1 │ String   │
│ LONGTEXT   │                1 │ String   │
│ TINYTEXT   │                1 │ String   │
│ TEXT       │                1 │ String   │
│ VARCHAR    │                1 │ String   │
│ MEDIUMBLOB │                1 │ String   │
│ BLOB       │                1 │ String   │
│ TINYBLOB   │                1 │ String   │
│ CHAR       │                1 │ String   │
│ MEDIUMTEXT │                1 │ String   │
└────────────┴──────────────────┴──────────┘
</code></pre></div><p><strong>See Also</strong></p><ul><li><a href=../../../sql-reference/syntax/amp/ >Синтаксис</a> — поддерживаемый SQL синтаксис.</li></ul><h2 id=system_tables-detached_parts>system.detached_parts<a class=headerlink href=../amp/#system_tables-detached_parts title="Permanent link"> </a></h2><p>Содержит информацию об отсоединённых кусках таблиц семейства <a href=../../../engines/table-engines/mergetree-family/mergetree/amp/ >MergeTree</a>. Столбец <code class=syntax>reason</code> содержит причину, по которой кусок был отсоединён. Для кусов, отсоединённых пользователем, <code class=syntax>reason</code> содержит пустую строку.<br> Такие куски могут быть присоединены с помощью <a href=../../sql_reference/alter/amp/#alter_attach-partition>ALTER TABLE ATTACH PARTITION|PART</a>. Остальные столбцы описаны в <a href=../amp/#system_tables-parts>system.parts</a>.<br> Если имя куска некорректно, значения некоторых столбцов могут быть <code class=syntax>NULL</code>. Такие куски могут быть удалены с помощью <a href=../../sql_reference/alter/amp/#alter_drop-detached>ALTER TABLE DROP DETACHED PART</a>.</p><h2 id=system_tables-dictionaries>system.dictionaries<a class=headerlink href=../amp/#system_tables-dictionaries title="Permanent link"> </a></h2><p>Содержит информацию о <a href=../../../sql-reference/dictionaries/external-dictionaries/external-dicts/amp/ >внешних словарях</a>.</p><p>Столбцы:</p><ul><li><code class=syntax>database</code> (<a href=../../../sql-reference/data-types/string/amp/ >String</a>) — Имя базы данных, в которой находится словарь, созданный с помощью DDL-запроса. Пустая строка для других словарей.</li><li><code class=syntax>name</code> (<a href=../../../sql-reference/data-types/string/amp/ >String</a>) — <a href=../../../sql-reference/dictionaries/external-dictionaries/external-dicts-dict/amp/ >Имя словаря</a>.</li><li><code class=syntax>status</code> (<a href=../../../sql-reference/data-types/enum/amp/ >Enum8</a>) — Статус словаря. Возможные значения:<ul><li><code class=syntax>NOT_LOADED</code> — Словарь не загружен, потому что не использовался.</li><li><code class=syntax>LOADED</code> — Словарь загружен успешно.</li><li><code class=syntax>FAILED</code> — Словарь не загружен в результате ошибки.</li><li><code class=syntax>LOADING</code> — Словарь в процессе загрузки.</li><li><code class=syntax>LOADED_AND_RELOADING</code> — Словарь загружен успешно, сейчас перезагружается (частые причины: запрос <a href=../../../sql-reference/statements/system/amp/#query_language-system-reload-dictionary>SYSTEM RELOAD DICTIONARY</a>, таймаут, изменение настроек словаря).</li><li><code class=syntax>FAILED_AND_RELOADING</code> — Словарь не загружен в результате ошибки, сейчас перезагружается.</li></ul></li><li><code class=syntax>origin</code> (<a href=../../../sql-reference/data-types/string/amp/ >String</a>) — Путь к конфигурационному файлу, описывающему словарь.</li><li><code class=syntax>type</code> (<a href=../../../sql-reference/data-types/string/amp/ >String</a>) — Тип размещения словаря. <a href=../../../sql-reference/dictionaries/external-dictionaries/external-dicts-dict-layout/amp/ >Хранение словарей в памяти</a>.</li><li><code class=syntax>key</code> — <a href=../../../sql-reference/dictionaries/external-dictionaries/external-dicts-dict-structure/amp/#ext_dict_structure-key>Тип ключа</a>: Числовой ключ (<a href=../../../sql-reference/data-types/int-uint/amp/#uint-ranges>UInt64</a>) или Составной ключ (<a href=../../../sql-reference/data-types/string/amp/ >String</a>) — строка вида “(тип 1, тип 2, …, тип n)”.</li><li><code class=syntax>attribute.names</code> (<a href=../../../sql-reference/data-types/array/amp/ >Array</a>(<a href=../../../sql-reference/data-types/string/amp/ >String</a>)) — Массив <a href=../../../sql-reference/dictionaries/external-dictionaries/external-dicts-dict-structure/amp/#ext_dict_structure-attributes>имен атрибутов</a>, предоставляемых справочником.</li><li><code class=syntax>attribute.types</code> (<a href=../../../sql-reference/data-types/array/amp/ >Array</a>(<a href=../../../sql-reference/data-types/string/amp/ >String</a>)) — Соответствующий массив <a href=../../../sql-reference/dictionaries/external-dictionaries/external-dicts-dict-structure/amp/#ext_dict_structure-attributes>типов атрибутов</a>, предоставляемых справочником.</li><li><code class=syntax>bytes_allocated</code> (<a href=../../../sql-reference/data-types/int-uint/amp/#uint-ranges>UInt64</a>) — Объем оперативной памяти, используемый словарем.</li><li><code class=syntax>query_count</code> (<a href=../../../sql-reference/data-types/int-uint/amp/#uint-ranges>UInt64</a>) — Количество запросов с момента загрузки словаря или с момента последней успешной перезагрузки.</li><li><code class=syntax>hit_rate</code> (<a href=../../../sql-reference/data-types/float/amp/ >Float64</a>) — Для cache-словарей — процент закэшированных значений.</li><li><code class=syntax>element_count</code> (<a href=../../../sql-reference/data-types/int-uint/amp/#uint-ranges>UInt64</a>) — Количество элементов, хранящихся в словаре.</li><li><code class=syntax>load_factor</code> (<a href=../../../sql-reference/data-types/float/amp/ >Float64</a>) — Процент заполнения словаря (для хэшированного словаря — процент заполнения хэш-таблицы).</li><li><code class=syntax>source</code> (<a href=../../../sql-reference/data-types/string/amp/ >String</a>) — Текст, описывающий <a href=../../../sql-reference/dictionaries/external-dictionaries/external-dicts-dict-sources/amp/ >источник данных</a> для словаря.</li><li><code class=syntax>lifetime_min</code> (<a href=../../../sql-reference/data-types/int-uint/amp/#uint-ranges>UInt64</a>) — Минимальное <a href=../../../sql-reference/dictionaries/external-dictionaries/external-dicts-dict-lifetime/amp/ >время обновления</a> словаря в памяти, по истечении которого Clickhouse попытается перезагрузить словарь (если задано <code class=syntax>invalidate_query</code>, то только если он изменился). Задается в секундах.</li><li><code class=syntax>lifetime_max</code> (<a href=../../../sql-reference/data-types/int-uint/amp/#uint-ranges>UInt64</a>) — Максимальное <a href=../../../sql-reference/dictionaries/external-dictionaries/external-dicts-dict-lifetime/amp/ >время обновления</a> словаря в памяти, по истечении которого Clickhouse попытается перезагрузить словарь (если задано <code class=syntax>invalidate_query</code>, то только если он изменился). Задается в секундах.</li><li><code class=syntax>loading_start_time</code> (<a href=../../../sql-reference/data-types/datetime/amp/ >DateTime</a>) — Время начала загрузки словаря.</li><li><code class=syntax>loading_duration</code> (<a href=../../../sql-reference/data-types/float/amp/ >Float32</a>) — Время, затраченное на загрузку словаря.</li><li><code class=syntax>last_exception</code> (<a href=../../../sql-reference/data-types/string/amp/ >String</a>) — Текст ошибки, возникающей при создании или перезагрузке словаря, если словарь не удалось создать.</li></ul><p><strong>Пример</strong></p><p>Настройте словарь.</p><div class=codehilite><pre><span></span><code class=syntax><span class=k>CREATE</span> <span class=k>DICTIONARY</span> <span class=n>dictdb</span><span class=p>.</span><span class=n>dict</span>
<span class=p>(</span>
    <span class=o>`</span><span class=k>key</span><span class=o>`</span> <span class=n>Int64</span> <span class=k>DEFAULT</span> <span class=o>-</span><span class=mi>1</span><span class=p>,</span>
    <span class=o>`</span><span class=n>value_default</span><span class=o>`</span> <span class=n>String</span> <span class=k>DEFAULT</span> <span class=s1>'world'</span><span class=p>,</span>
    <span class=o>`</span><span class=n>value_expression</span><span class=o>`</span> <span class=n>String</span> <span class=k>DEFAULT</span> <span class=s1>'xxx'</span> <span class=n>EXPRESSION</span> <span class=s1>'toString(127 * 172)'</span>
<span class=p>)</span>
<span class=k>PRIMARY</span> <span class=k>KEY</span> <span class=k>key</span>
<span class=k>SOURCE</span><span class=p>(</span><span class=n>CLICKHOUSE</span><span class=p>(</span><span class=k>HOST</span> <span class=s1>'localhost'</span> <span class=n>PORT</span> <span class=mi>9000</span> <span class=k>USER</span> <span class=s1>'default'</span> <span class=k>TABLE</span> <span class=s1>'dicttbl'</span> <span class=n>DB</span> <span class=s1>'dictdb'</span><span class=p>))</span>
<span class=n>LIFETIME</span><span class=p>(</span><span class=k>MIN</span> <span class=mi>0</span> <span class=k>MAX</span> <span class=mi>1</span><span class=p>)</span>
<span class=n>LAYOUT</span><span class=p>(</span><span class=n>FLAT</span><span class=p>())</span>
</code></pre></div><p>Убедитесь, что словарь загружен.</p><div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=o>*</span> <span class=k>FROM</span> <span class=k>system</span><span class=p>.</span><span class=n>dictionaries</span>
</code></pre></div><div class=codehilite><pre><span></span><code class=syntax>┌─database─┬─name─┬─status─┬─origin──────┬─type─┬─key────┬─attribute.names──────────────────────┬─attribute.types─────┬─bytes_allocated─┬─query_count─┬─hit_rate─┬─element_count─┬───────────load_factor─┬─source─────────────────────┬─lifetime_min─┬─lifetime_max─┬──loading_start_time─┌──last_successful_update_time─┬──────loading_duration─┬─last_exception─┐
│ dictdb   │ dict │ LOADED │ dictdb.dict │ Flat │ UInt64 │ ['value_default','value_expression'] │ ['String','String'] │           74032 │           0 │        1 │             1 │ 0.0004887585532746823 │ ClickHouse: dictdb.dicttbl │            0 │            1 │ 2020-03-04 04:17:34 │   2020-03-04 04:30:34        │                 0.002 │                │
└──────────┴──────┴────────┴─────────────┴──────┴────────┴──────────────────────────────────────┴─────────────────────┴─────────────────┴─────────────┴──────────┴───────────────┴───────────────────────┴────────────────────────────┴──────────────┴──────────────┴─────────────────────┴──────────────────────────────┘───────────────────────┴────────────────┘
</code></pre></div><h2 id=system_tables-events>system.events<a class=headerlink href=../amp/#system_tables-events title="Permanent link"> </a></h2><p>Содержит информацию о количестве событий, произошедших в системе. Например, в таблице можно найти, сколько запросов <code class=syntax>SELECT</code> обработано с момента запуска сервера ClickHouse.</p><p>Столбцы:</p><ul><li><code class=syntax>event</code> (<a href=../../../sql-reference/data-types/string/amp/ >String</a>) — имя события.</li><li><code class=syntax>value</code> (<a href=../../../sql-reference/data-types/int-uint/amp/ >UInt64</a>) — количество произошедших событий.</li><li><code class=syntax>description</code> (<a href=../../../sql-reference/data-types/string/amp/ >String</a>) — описание события.</li></ul><p><strong>Пример</strong></p><div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=o>*</span> <span class=k>FROM</span> <span class=k>system</span><span class=p>.</span><span class=n>events</span> <span class=k>LIMIT</span> <span class=mi>5</span>
</code></pre></div><div class=codehilite><pre><span></span><code class=syntax>┌─event─────────────────────────────────┬─value─┬─description────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
│ Query                                 │    12 │ Number of queries to be interpreted and potentially executed. Does not include queries that failed to parse or were rejected due to AST size limits, quota limits or limits on the number of simultaneously running queries. May include internal queries initiated by ClickHouse itself. Does not count subqueries.                  │
│ SelectQuery                           │     8 │ Same as Query, but only for SELECT queries.                                                                                                                                                                                                                │
│ FileOpen                              │    73 │ Number of files opened.                                                                                                                                                                                                                                    │
│ ReadBufferFromFileDescriptorRead      │   155 │ Number of reads (read/pread) from a file descriptor. Does not include sockets.                                                                                                                                                                             │
│ ReadBufferFromFileDescriptorReadBytes │  9931 │ Number of bytes read from file descriptors. If the file is compressed, this will show the compressed data size.                                                                                                                                              │
└───────────────────────────────────────┴───────┴────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
</code></pre></div><p><strong>Смотрите также</strong></p><ul><li><a href=../amp/#system_tables-asynchronous_metrics>system.asynchronous_metrics</a> — таблица с периодически вычисляемыми метриками.</li><li><a href=../amp/#system_tables-metrics>system.metrics</a> — таблица с мгновенно вычисляемыми метриками.</li><li><a href=../amp/#system_tables-metric_log>system.metric_log</a> — таблица фиксирующая историю значений метрик из <code class=syntax>system.metrics</code> и <code class=syntax>system.events</code>.</li><li><a href=../../monitoring/amp/ >Мониторинг</a> — основы мониторинга в ClickHouse.</li></ul><h2 id=system-functions>system.functions<a class=headerlink href=../amp/#system-functions title="Permanent link"> </a></h2><p>Содержит информацию об обычных и агрегатных функциях.</p><p>Столбцы:</p><ul><li><code class=syntax>name</code> (<code class=syntax>String</code>) – Имя функции.</li><li><code class=syntax>is_aggregate</code> (<code class=syntax>UInt8</code>) – Признак, является ли функция агрегатной.</li></ul><h2 id=system-graphite-retentions>system.graphite_retentions<a class=headerlink href=../amp/#system-graphite-retentions title="Permanent link"> </a></h2><p>Содержит информацию о том, какие параметры <a href=../../server-configuration-parameters/settings/amp/#server_configuration_parameters-graphite>graphite_rollup</a> используются в таблицах с движками <a href=../../../engines/table-engines/mergetree-family/graphitemergetree/amp/ >*GraphiteMergeTree</a>.</p><p>Столбцы:</p><ul><li><code class=syntax>config_name</code> (String) - Имя параметра, используемого для <code class=syntax>graphite_rollup</code>.</li><li><code class=syntax>regexp</code> (String) - Шаблон имени метрики.</li><li><code class=syntax>function</code> (String) - Имя агрегирующей функции.</li><li><code class=syntax>age</code> (UInt64) - Минимальный возраст данных в секундах.</li><li><code class=syntax>precision</code> (UInt64) - Точность определения возраста данных в секундах.</li><li><code class=syntax>priority</code> (UInt16) - Приоритет раздела pattern.</li><li><code class=syntax>is_default</code> (UInt8) - Является ли раздел pattern дефолтным.</li><li><code class=syntax>Tables.database</code> (Array(String)) - Массив имён баз данных таблиц, использующих параметр <code class=syntax>config_name</code>.</li><li><code class=syntax>Tables.table</code> (Array(String)) - Массив имён таблиц, использующих параметр <code class=syntax>config_name</code>.</li></ul><h2 id=system-merges>system.merges<a class=headerlink href=../amp/#system-merges title="Permanent link"> </a></h2><p>Содержит информацию о производящихся прямо сейчас слияниях и мутациях кусков для таблиц семейства MergeTree.</p><p>Столбцы:</p><ul><li><code class=syntax>database String</code> — Имя базы данных, в которой находится таблица.</li><li><code class=syntax>table String</code> — Имя таблицы.</li><li><code class=syntax>elapsed Float64</code> — Время в секундах, прошедшее от начала выполнения слияния.</li><li><code class=syntax>progress Float64</code> — Доля выполненной работы от 0 до 1.</li><li><code class=syntax>num_parts UInt64</code> — Количество сливаемых кусков.</li><li><code class=syntax>result_part_name String</code> — Имя куска, который будет образован в результате слияния.</li><li><code class=syntax>is_mutation UInt8</code> - Является ли данный процесс мутацией куска.</li><li><code class=syntax>total_size_bytes_compressed UInt64</code> — Суммарный размер сжатых данных сливаемых кусков.</li><li><code class=syntax>total_size_marks UInt64</code> — Суммарное количество засечек в сливаемых кусках.</li><li><code class=syntax>bytes_read_uncompressed UInt64</code> — Количество прочитанных байт, разжатых.</li><li><code class=syntax>rows_read UInt64</code> — Количество прочитанных строк.</li><li><code class=syntax>bytes_written_uncompressed UInt64</code> — Количество записанных байт, несжатых.</li><li><code class=syntax>rows_written UInt64</code> — Количество записанных строк.</li></ul><h2 id=system_tables-metrics>system.metrics<a class=headerlink href=../amp/#system_tables-metrics title="Permanent link"> </a></h2><p>Содержит метрики, которые могут быть рассчитаны мгновенно или имеют текущее значение. Например, число одновременно обрабатываемых запросов или текущее значение задержки реплики. Эта таблица всегда актуальна.</p><p>Столбцы:</p><ul><li><code class=syntax>metric</code> (<a href=../../../sql-reference/data-types/string/amp/ >String</a>) — название метрики.</li><li><code class=syntax>value</code> (<a href=../../../sql-reference/data-types/int-uint/amp/ >Int64</a>) — значение метрики.</li><li><code class=syntax>description</code> (<a href=../../../sql-reference/data-types/string/amp/ >String</a>) — описание метрики.</li></ul><p>Список поддержанных метрик смотрите в файле <a href=https://github.com/ClickHouse/ClickHouse/blob/master/src/Common/CurrentMetrics.cpp rel="external nofollow noreferrer" target=_blank>src/Common/CurrentMetrics.cpp</a>.</p><p><strong>Пример</strong></p><div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=o>*</span> <span class=k>FROM</span> <span class=k>system</span><span class=p>.</span><span class=n>metrics</span> <span class=k>LIMIT</span> <span class=mi>10</span>
</code></pre></div><div class=codehilite><pre><span></span><code class=syntax>┌─metric─────────────────────┬─value─┬─description──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
│ Query                      │     1 │ Number of executing queries                                                                                                                                                                      │
│ Merge                      │     0 │ Number of executing background merges                                                                                                                                                            │
│ PartMutation               │     0 │ Number of mutations (ALTER DELETE/UPDATE)                                                                                                                                                        │
│ ReplicatedFetch            │     0 │ Number of data parts being fetched from replicas                                                                                                                                                │
│ ReplicatedSend             │     0 │ Number of data parts being sent to replicas                                                                                                                                                      │
│ ReplicatedChecks           │     0 │ Number of data parts checking for consistency                                                                                                                                                    │
│ BackgroundPoolTask         │     0 │ Number of active tasks in BackgroundProcessingPool (merges, mutations, fetches, or replication queue bookkeeping)                                                                                │
│ BackgroundSchedulePoolTask │     0 │ Number of active tasks in BackgroundSchedulePool. This pool is used for periodic ReplicatedMergeTree tasks, like cleaning old data parts, altering data parts, replica re-initialization, etc.   │
│ DiskSpaceReservedForMerge  │     0 │ Disk space reserved for currently running background merges. It is slightly more than the total size of currently merging parts.                                                                     │
│ DistributedSend            │     0 │ Number of connections to remote servers sending data that was INSERTed into Distributed tables. Both synchronous and asynchronous mode.                                                          │
└────────────────────────────┴───────┴──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
</code></pre></div><p><strong>Смотрите также</strong></p><ul><li><a href=../amp/#system_tables-asynchronous_metrics>system.asynchronous_metrics</a> — таблица с периодически вычисляемыми метриками.</li><li><a href=../amp/#system_tables-events>system.events</a> — таблица с количеством произошедших событий.</li><li><a href=../amp/#system_tables-metric_log>system.metric_log</a> — таблица фиксирующая историю значений метрик из <code class=syntax>system.metrics</code> и <code class=syntax>system.events</code>.</li><li><a href=../../monitoring/amp/ >Мониторинг</a> — основы мониторинга в ClickHouse.</li></ul><h2 id=system_tables-metric_log>system.metric_log<a class=headerlink href=../amp/#system_tables-metric_log title="Permanent link"> </a></h2><p>Содержит историю значений метрик из таблиц <code class=syntax>system.metrics</code> и <code class=syntax>system.events</code>, периодически сбрасываемую на диск.<br> Для включения сбора истории метрик в таблице <code class=syntax>system.metric_log</code> создайте <code class=syntax>/etc/clickhouse-server/config.d/metric_log.xml</code> следующего содержания:</p><div class=codehilite><pre><span></span><code class=syntax><span class=nt>&lt;yandex&gt;</span>
    <span class=nt>&lt;metric_log&gt;</span>
        <span class=nt>&lt;database&gt;</span>system<span class=nt>&lt;/database&gt;</span>
        <span class=nt>&lt;table&gt;</span>metric_log<span class=nt>&lt;/table&gt;</span>
        <span class=nt>&lt;flush_interval_milliseconds&gt;</span>7500<span class=nt>&lt;/flush_interval_milliseconds&gt;</span>
        <span class=nt>&lt;collect_interval_milliseconds&gt;</span>1000<span class=nt>&lt;/collect_interval_milliseconds&gt;</span>
    <span class=nt>&lt;/metric_log&gt;</span>
<span class=nt>&lt;/yandex&gt;</span>
</code></pre></div><p><strong>Пример</strong></p><div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=o>*</span> <span class=k>FROM</span> <span class=k>system</span><span class=p>.</span><span class=n>metric_log</span> <span class=k>LIMIT</span> <span class=mi>1</span> <span class=n>FORMAT</span> <span class=n>Vertical</span><span class=p>;</span>
</code></pre></div><div class=codehilite><pre><span></span><code class=syntax>Row 1:
──────
event_date:                                                 2020-02-18
event_time:                                                 2020-02-18 07:15:33
milliseconds:                                               554
ProfileEvent_Query:                                         0
ProfileEvent_SelectQuery:                                   0
ProfileEvent_InsertQuery:                                   0
ProfileEvent_FileOpen:                                      0
ProfileEvent_Seek:                                          0
ProfileEvent_ReadBufferFromFileDescriptorRead:              1
ProfileEvent_ReadBufferFromFileDescriptorReadFailed:        0
ProfileEvent_ReadBufferFromFileDescriptorReadBytes:         0
ProfileEvent_WriteBufferFromFileDescriptorWrite:            1
ProfileEvent_WriteBufferFromFileDescriptorWriteFailed:      0
ProfileEvent_WriteBufferFromFileDescriptorWriteBytes:       56
...
CurrentMetric_Query:                                        0
CurrentMetric_Merge:                                        0
CurrentMetric_PartMutation:                                 0
CurrentMetric_ReplicatedFetch:                              0
CurrentMetric_ReplicatedSend:                               0
CurrentMetric_ReplicatedChecks:                             0
...
</code></pre></div><p><strong>Смотрите также</strong></p><ul><li><a href=../amp/#system_tables-asynchronous_metrics>system.asynchronous_metrics</a> — таблица с периодически вычисляемыми метриками.</li><li><a href=../amp/#system_tables-events>system.events</a> — таблица с количеством произошедших событий.</li><li><a href=../amp/#system_tables-metrics>system.metrics</a> — таблица с мгновенно вычисляемыми метриками.</li><li><a href=../../monitoring/amp/ >Мониторинг</a> — основы мониторинга в ClickHouse.</li></ul><h2 id=system-numbers>system.numbers<a class=headerlink href=../amp/#system-numbers title="Permanent link"> </a></h2><p>Таблица содержит один столбец с именем number типа UInt64, содержащим почти все натуральные числа, начиная с нуля.<br> Эту таблицу можно использовать для тестов, а также если вам нужно сделать перебор.<br> Чтения из этой таблицы не распараллеливаются.</p><h2 id=system-numbers-mt>system.numbers_mt<a class=headerlink href=../amp/#system-numbers-mt title="Permanent link"> </a></h2><p>То же самое, что и system.numbers, но чтение распараллеливается. Числа могут возвращаться в произвольном порядке.<br> Используется для тестов.</p><h2 id=system-one>system.one<a class=headerlink href=../amp/#system-one title="Permanent link"> </a></h2><p>Таблица содержит одну строку с одним столбцом dummy типа UInt8, содержащим значение 0.<br> Эта таблица используется, если в SELECT запросе не указана секция FROM.<br> То есть, это - аналог таблицы DUAL, которую можно найти в других СУБД.</p><h2 id=system_tables-parts>system.parts<a class=headerlink href=../amp/#system_tables-parts title="Permanent link"> </a></h2><p>Содержит информацию о кусках данных таблиц семейства <a href=../../../engines/table-engines/mergetree-family/mergetree/amp/ >MergeTree</a>.</p><p>Каждая строка описывает один кусок данных.</p><p>Столбцы:</p><ul><li><p><code class=syntax>partition</code> (<code class=syntax>String</code>) – Имя партиции. Что такое партиция можно узнать из описания запроса <a href=../../../sql-reference/statements/alter/amp/#query_language_queries_alter>ALTER</a>.</p><p>Форматы:</p><ul><li><code class=syntax>YYYYMM</code> для автоматической схемы партиционирования по месяцам.</li><li><code class=syntax>any_string</code> при партиционировании вручную.</li></ul></li><li><p><code class=syntax>name</code> (<code class=syntax>String</code>) – имя куска.</p></li><li><p><code class=syntax>active</code> (<code class=syntax>UInt8</code>) – признак активности. Если кусок активен, то он используется таблицей, в противном случает он будет удален. Неактивные куски остаются после слияний.</p></li><li><p><code class=syntax>marks</code> (<code class=syntax>UInt64</code>) – количество засечек. Чтобы получить примерное количество строк в куске, умножьте <code class=syntax>marks</code> на гранулированность индекса (обычно 8192).</p></li><li><p><code class=syntax>rows</code> (<code class=syntax>UInt64</code>) – количество строк.</p></li><li><p><code class=syntax>bytes_on_disk</code> (<code class=syntax>UInt64</code>) – общий размер всех файлов кусков данных в байтах.</p></li><li><p><code class=syntax>data_compressed_bytes</code> (<code class=syntax>UInt64</code>) – общий размер сжатой информации в куске данных. Размер всех дополнительных файлов (например, файлов с засечками) не учитывается.</p></li><li><p><code class=syntax>data_uncompressed_bytes</code> (<code class=syntax>UInt64</code>) – общий размер распакованной информации куска данных. Размер всех дополнительных файлов (например, файлов с засечками) не учитывается.</p></li><li><p><code class=syntax>marks_bytes</code> (<code class=syntax>UInt64</code>) – размер файла с засечками.</p></li><li><p><code class=syntax>modification_time</code> (<code class=syntax>DateTime</code>) – время модификации директории с куском данных. Обычно соответствует времени создания куска.</p></li><li><p><code class=syntax>remove_time</code> (<code class=syntax>DateTime</code>) – время, когда кусок стал неактивным.</p></li><li><p><code class=syntax>refcount</code> (<code class=syntax>UInt32</code>) – количество мест, в котором кусок используется. Значение больше 2 говорит о том, что кусок участвует в запросах или в слияниях.</p></li><li><p><code class=syntax>min_date</code> (<code class=syntax>Date</code>) – минимальное значение ключа даты в куске данных.</p></li><li><p><code class=syntax>max_date</code> (<code class=syntax>Date</code>) – максимальное значение ключа даты в куске данных.</p></li><li><p><code class=syntax>min_time</code> (<code class=syntax>DateTime</code>) – минимальное значение даты и времени в куске данных.</p></li><li><p><code class=syntax>max_time</code>(<code class=syntax>DateTime</code>) – максимальное значение даты и времени в куске данных.</p></li><li><p><code class=syntax>partition_id</code> (<code class=syntax>String</code>) – ID партиции.</p></li><li><p><code class=syntax>min_block_number</code> (<code class=syntax>UInt64</code>) – минимальное число кусков, из которых состоит текущий после слияния.</p></li><li><p><code class=syntax>max_block_number</code> (<code class=syntax>UInt64</code>) – максимальное число кусков, из которых состоит текущий после слияния.</p></li><li><p><code class=syntax>level</code> (<code class=syntax>UInt32</code>) - глубина дерева слияний. Если слияний не было, то <code class=syntax>level=0</code>.</p></li><li><p><code class=syntax>data_version</code> (<code class=syntax>UInt64</code>) – число, которое используется для определения того, какие мутации необходимо применить к куску данных (мутации с версией большей, чем <code class=syntax>data_version</code>).</p></li><li><p><code class=syntax>primary_key_bytes_in_memory</code> (<code class=syntax>UInt64</code>) – объём памяти (в байтах), занимаемой значениями первичных ключей.</p></li><li><p><code class=syntax>primary_key_bytes_in_memory_allocated</code> (<code class=syntax>UInt64</code>) – объём памяти (в байтах) выделенный для размещения первичных ключей.</p></li><li><p><code class=syntax>is_frozen</code> (<code class=syntax>UInt8</code>) – Признак, показывающий существование бэкапа партиции. 1, бэкап есть. 0, бэкапа нет. Смотрите раздел <a href=../../../sql-reference/statements/alter/amp/#alter_freeze-partition>FREEZE PARTITION</a>.</p></li><li><p><code class=syntax>database</code> (<code class=syntax>String</code>) – имя базы данных.</p></li><li><p><code class=syntax>table</code> (<code class=syntax>String</code>) – имя таблицы.</p></li><li><p><code class=syntax>engine</code> (<code class=syntax>String</code>) – имя движка таблицы, без параметров.</p></li><li><p><code class=syntax>path</code> (<code class=syntax>String</code>) – абсолютный путь к папке с файлами кусков данных.</p></li><li><p><code class=syntax>disk</code> (<code class=syntax>String</code>) – имя диска, на котором находится кусок данных.</p></li><li><p><code class=syntax>hash_of_all_files</code> (<code class=syntax>String</code>) – значение <a href=../../../sql-reference/functions/hash-functions/amp/#hash_functions-siphash128>sipHash128</a> для сжатых файлов.</p></li><li><p><code class=syntax>hash_of_uncompressed_files</code> (<code class=syntax>String</code>) – значение <a href=../../../sql-reference/functions/hash-functions/amp/#hash_functions-siphash128>sipHash128</a> несжатых файлов (файлы с засечками, первичным ключом и пр.)</p></li><li><p><code class=syntax>uncompressed_hash_of_compressed_files</code> (<code class=syntax>String</code>) – значение <a href=../../../sql-reference/functions/hash-functions/amp/#hash_functions-siphash128>sipHash128</a> данных в сжатых файлах как если бы они были разжатыми.</p></li><li><p><code class=syntax>bytes</code> (<code class=syntax>UInt64</code>) – алиас для <code class=syntax>bytes_on_disk</code>.</p></li><li><p><code class=syntax>marks_size</code> (<code class=syntax>UInt64</code>) – алиас для <code class=syntax>marks_bytes</code>.</p></li></ul><h2 id=system_tables-part-log>system.part_log<a class=headerlink href=../amp/#system_tables-part-log title="Permanent link"> </a></h2><p>Системная таблица <code class=syntax>system.part_log</code> создается только в том случае, если задана серверная настройка <a href=../../server-configuration-parameters/settings/amp/#server_configuration_parameters-part-log>part_log</a>.</p><p>Содержит информацию о всех событиях, произошедших с <a href=../../../engines/table-engines/mergetree-family/custom-partitioning-key/amp/ >кусками данных</a> таблиц семейства <a href=../../../engines/table-engines/mergetree-family/mergetree/amp/ >MergeTree</a> (например, события добавления, удаления или слияния данных).</p><p>Столбцы:</p><ul><li><code class=syntax>event_type</code> (Enum) — тип события. Столбец может содержать одно из следующих значений:<ul><li><code class=syntax>NEW_PART</code> — вставка нового куска.</li><li><code class=syntax>MERGE_PARTS</code> — слияние кусков.</li><li><code class=syntax>DOWNLOAD_PART</code> — загрузка с реплики.</li><li><code class=syntax>REMOVE_PART</code> — удаление или отсоединение из таблицы с помощью <a href=../../../sql-reference/statements/alter/amp/#alter_detach-partition>DETACH PARTITION</a>.</li><li><code class=syntax>MUTATE_PART</code> — изменение куска.</li><li><code class=syntax>MOVE_PART</code> — перемещение куска между дисками.</li></ul></li><li><code class=syntax>event_date</code> (Date) — дата события.</li><li><code class=syntax>event_time</code> (DateTime) — время события.</li><li><code class=syntax>duration_ms</code> (UInt64) — длительность.</li><li><code class=syntax>database</code> (String) — имя базы данных, в которой находится кусок.</li><li><code class=syntax>table</code> (String) — имя таблицы, в которой находится кусок.</li><li><code class=syntax>part_name</code> (String) — имя куска.</li><li><code class=syntax>partition_id</code> (String) — идентификатор партиции, в которую был добавлен кусок. В столбце будет значение ‘all’, если таблица партициируется по выражению <code class=syntax>tuple()</code>.</li><li><code class=syntax>rows</code> (UInt64) — число строк в куске.</li><li><code class=syntax>size_in_bytes</code> (UInt64) — размер куска данных в байтах.</li><li><code class=syntax>merged_from</code> (Array(String)) — массив имён кусков, из которых образован текущий кусок в результате слияния (также столбец заполняется в случае скачивания уже смерженного куска).</li><li><code class=syntax>bytes_uncompressed</code> (UInt64) — количество прочитанных разжатых байт.</li><li><code class=syntax>read_rows</code> (UInt64) — сколько было прочитано строк при слиянии кусков.</li><li><code class=syntax>read_bytes</code> (UInt64) — сколько было прочитано байт при слиянии кусков.</li><li><code class=syntax>error</code> (UInt16) — код ошибки, возникшей при текущем событии.</li><li><code class=syntax>exception</code> (String) — текст ошибки.</li></ul><p>Системная таблица <code class=syntax>system.part_log</code> будет создана после первой вставки данных в таблицу <code class=syntax>MergeTree</code>.</p><h2 id=system_tables-processes>system.processes<a class=headerlink href=../amp/#system_tables-processes title="Permanent link"> </a></h2><p>Используется для реализации запроса <code class=syntax>SHOW PROCESSLIST</code>.</p><p>Столбцы:</p><ul><li><code class=syntax>user</code> (String) – пользователь, инициировавший запрос. При распределённом выполнении запросы отправляются на удалённые серверы от имени пользователя <code class=syntax>default</code>. Поле содержит имя пользователя для конкретного запроса, а не для запроса, который иницировал этот запрос.</li><li><code class=syntax>address</code> (String) – IP-адрес, с которого пришёл запрос. При распределённой обработке запроса аналогично. Чтобы определить откуда запрос пришел изначально, необходимо смотреть таблицу <code class=syntax>system.processes</code> на сервере-источнике запроса.</li><li><code class=syntax>elapsed</code> (Float64) – время в секундах с начала обработки запроса.</li><li><code class=syntax>rows_read</code> (UInt64) – количество прочитанных строк. При распределённой обработке запроса на сервере-инициаторе запроса представляет собой сумму по всем удалённым серверам.</li><li><code class=syntax>bytes_read</code> (UInt64) – количество прочитанных из таблиц байт, в несжатом виде. При распределённой обработке запроса на сервере-инициаторе запроса представляет собой сумму по всем удалённым серверам.</li><li><code class=syntax>total_rows_approx</code> (UInt64) – приблизительная оценка общего количества строк, которые должны быть прочитаны. При распределённой обработке запроса, на сервере-инициаторе запроса, представляет собой сумму по всем удалённым серверам. Может обновляться в процессе выполнения запроса, когда становятся известны новые источники для обработки.</li><li><code class=syntax>memory_usage</code> (UInt64) – потребление памяти запросом. Может не учитывать некоторые виды выделенной памяти. Смотрите описание настройки <a href=../../settings/query-complexity/amp/#settings_max_memory_usage>max_memory_usage</a>.</li><li><code class=syntax>query</code> (String) – текст запроса. Для запросов <code class=syntax>INSERT</code> не содержит встаявляемые данные.</li><li><code class=syntax>query_id</code> (String) – идентификатор запроса, если был задан.</li></ul><h2 id=system-tables-text-log>system.text_log<a class=headerlink href=../amp/#system-tables-text-log title="Permanent link"> </a></h2><p>Содержит записи логов. Уровень логирования для таблицы может быть ограничен параметром сервера <code class=syntax>text_log.level</code>.</p><p>Столбцы:</p><ul><li><code class=syntax>event_date</code> (Date) — Дата создания записи.</li><li><code class=syntax>event_time</code> (DateTime) — Время создания записи.</li><li><code class=syntax>microseconds</code> (UInt32) — Время создания записи в микросекундах.</li><li><code class=syntax>thread_name</code> (String) — Название потока, из которого была сделана запись.</li><li><code class=syntax>thread_id</code> (UInt64) — Идентификатор потока ОС.</li><li><code class=syntax>level</code> (Enum8) — Уровень логирования записи. Возможные значения:<ul><li><code class=syntax>1</code> или <code class=syntax>'Fatal'</code>.</li><li><code class=syntax>2</code> или <code class=syntax>'Critical'</code>.</li><li><code class=syntax>3</code> или <code class=syntax>'Error'</code>.</li><li><code class=syntax>4</code> или <code class=syntax>'Warning'</code>.</li><li><code class=syntax>5</code> или <code class=syntax>'Notice'</code>.</li><li><code class=syntax>6</code> или <code class=syntax>'Information'</code>.</li><li><code class=syntax>7</code> или <code class=syntax>'Debug'</code>.</li><li><code class=syntax>8</code> или <code class=syntax>'Trace'</code>.</li></ul></li><li><code class=syntax>query_id</code> (String) — Идентификатор запроса.</li><li><code class=syntax>logger_name</code> (LowCardinality(String)) — Название логгера (<code class=syntax>DDLWorker</code>).</li><li><code class=syntax>message</code> (String) — Само тело записи.</li><li><code class=syntax>revision</code> (UInt32) — Ревизия ClickHouse.</li><li><code class=syntax>source_file</code> (LowCardinality(String)) — Исходный файл, из которого была сделана запись.</li><li><code class=syntax>source_line</code> (UInt64) — Исходная строка, из которой была сделана запись.</li></ul><h2 id=system_tables-query_log>system.query_log<a class=headerlink href=../amp/#system_tables-query_log title="Permanent link"> </a></h2><p>Содержит информацию о выполняемых запросах, например, время начала обработки, продолжительность обработки, сообщения об ошибках.</p><div class="admonition note alert pb-0 mb-4 alert-primary" role=alert><p class="admonition-title alert-heading display-6 mb-2">Внимание</p><p>Таблица не содержит входных данных для запросов <code class=syntax>INSERT</code>.</p></div><p>Настойки логгирования можно изменить в секции серверной конфигурации <a href=../../server-configuration-parameters/settings/amp/#server_configuration_parameters-query-log>query_log</a>.</p><p>Можно отключить логгирование настройкой <a href=../../settings/settings/amp/#settings-log-queries>log_queries = 0</a>. По-возможности, не отключайте логгирование, поскольку информация из таблицы важна при решении проблем.</p><p>Период сброса данных в таблицу задаётся параметром <code class=syntax>flush_interval_milliseconds</code> в конфигурационной секции <a href=../../server-configuration-parameters/settings/amp/#server_configuration_parameters-query-log>query_log</a>. Чтобы принудительно записать логи из буффера памяти в таблицу, используйте запрос <a href=../../../sql-reference/statements/system/amp/#query_language-system-flush_logs>SYSTEM FLUSH LOGS</a>.</p><p>ClickHouse не удаляет данные из таблица автоматически. Смотрите <a href=../amp/#system-tables-introduction>Введение</a>.</p><p>Таблица <code class=syntax>system.query_log</code> содержит информацию о двух видах запросов:</p><ol><li>Первоначальные запросы, которые были выполнены непосредственно клиентом.</li><li>Дочерние запросы, инициированные другими запросами (для выполнения распределенных запросов). Для дочерних запросов информация о первоначальном запросе содержится в столбцах <code class=syntax>initial_*</code>.</li></ol><p>В зависимости от статуса (столбец <code class=syntax>type</code>) каждый запрос создаёт одну или две строки в таблице <code class=syntax>query_log</code>:</p><ol><li>Если запрос выполнен успешно, создаются два события типа <code class=syntax>QueryStart</code> и <code class=syntax>QueryFinish</code>.</li><li>Если во время обработки запроса возникла ошибка, создаются два события с типами <code class=syntax>QueryStart</code> и <code class=syntax>ExceptionWhileProcessing</code>.</li><li>Если ошибка произошла ещё до запуска запроса, создается одно событие с типом <code class=syntax>ExceptionBeforeStart</code>.</li></ol><p>Столбцы:</p><ul><li><code class=syntax>type</code> (<a href=../../../sql-reference/data-types/enum/amp/ >Enum8</a>) — тип события, произошедшего при выполнении запроса. Значения:<ul><li><code class=syntax>'QueryStart' = 1</code> — успешное начало выполнения запроса.</li><li><code class=syntax>'QueryFinish' = 2</code> — успешное завершение выполнения запроса.</li><li><code class=syntax>'ExceptionBeforeStart' = 3</code> — исключение перед началом обработки запроса.</li><li><code class=syntax>'ExceptionWhileProcessing' = 4</code> — исключение во время обработки запроса.</li></ul></li><li><code class=syntax>event_date</code> (<a href=../../../sql-reference/data-types/date/amp/ >Date</a>) — дата начала запроса.</li><li><code class=syntax>event_time</code> (<a href=../../../sql-reference/data-types/datetime/amp/ >DateTime</a>) — время начала запроса.</li><li><code class=syntax>query_start_time</code> (<a href=../../../sql-reference/data-types/datetime/amp/ >DateTime</a>) — время начала обработки запроса.</li><li><code class=syntax>query_duration_ms</code> (<a href=../../../sql-reference/data-types/int-uint/amp/#uint-ranges>UInt64</a>) — длительность выполнения запроса в миллисекундах.</li><li><code class=syntax>read_rows</code> (<a href=../../../sql-reference/data-types/int-uint/amp/#uint-ranges>UInt64</a>) — Общее количество строк, считанных из всех таблиц и табличных функций, участвующих в запросе. Включает в себя обычные подзапросы, подзапросы для <code class=syntax>IN</code> и <code class=syntax>JOIN</code>. Для распределенных запросов <code class=syntax>read_rows</code> включает в себя общее количество строк, прочитанных на всех репликах. Каждая реплика передает собственное значение <code class=syntax>read_rows</code>, а сервер-инициатор запроса суммирует все полученные и локальные значения. Объемы кэша не учитываюся.</li><li><code class=syntax>read_bytes</code> (<a href=../../../sql-reference/data-types/int-uint/amp/#uint-ranges>UInt64</a>) — Общее количество байтов, считанных из всех таблиц и табличных функций, участвующих в запросе. Включает в себя обычные подзапросы, подзапросы для <code class=syntax>IN</code> и <code class=syntax>JOIN</code>. Для распределенных запросов <code class=syntax>read_bytes</code> включает в себя общее количество байтов, прочитанных на всех репликах. Каждая реплика передает собственное значение <code class=syntax>read_bytes</code>, а сервер-инициатор запроса суммирует все полученные и локальные значения. Объемы кэша не учитываюся.</li><li><code class=syntax>written_rows</code> (<a href=../../../sql-reference/data-types/int-uint/amp/#uint-ranges>UInt64</a>) — количество записанных строк для запросов <code class=syntax>INSERT</code>. Для других запросов, значение столбца 0.</li><li><code class=syntax>written_bytes</code> (<a href=../../../sql-reference/data-types/int-uint/amp/#uint-ranges>UInt64</a>) — объём записанных данных в байтах для запросов <code class=syntax>INSERT</code>. Для других запросов, значение столбца 0.</li><li><code class=syntax>result_rows</code> (<a href=../../../sql-reference/data-types/int-uint/amp/#uint-ranges>UInt64</a>) — количество строк в результате запроса <code class=syntax>SELECT</code> или количество строк в запросе <code class=syntax>INSERT</code>.</li><li><code class=syntax>result_bytes</code> (<a href=../../../sql-reference/data-types/int-uint/amp/#uint-ranges>UInt64</a>) — объём RAM в байтах, использованный для хранения результата запроса.</li><li><code class=syntax>memory_usage</code> (<a href=../../../sql-reference/data-types/int-uint/amp/#uint-ranges>UInt64</a>) — потребление RAM запросом.</li><li><code class=syntax>query</code> (<a href=../../../sql-reference/data-types/string/amp/ >String</a>) — текст запроса.</li><li><code class=syntax>exception</code> (<a href=../../../sql-reference/data-types/string/amp/ >String</a>) — сообщение исключения, если запрос завершился по исключению.</li><li><code class=syntax>exception_code</code> (<a href=../../../sql-reference/data-types/int-uint/amp/ >Int32</a>) — код исключения. </li><li><code class=syntax>stack_trace</code> (<a href=../../../sql-reference/data-types/string/amp/ >String</a>) — <a href=https://en.wikipedia.org/wiki/Stack_trace rel="external nofollow noreferrer" target=_blank>stack trace</a>. Пустая строка, если запрос успешно завершен.</li><li><code class=syntax>is_initial_query</code> (<a href=../../../sql-reference/data-types/int-uint/amp/ >UInt8</a>) — вид запроса. Возможные значения:<ul><li>1 — запрос был инициирован клиентом.</li><li>0 — запрос был инициирован другим запросом при выполнении распределенного запроса.</li></ul></li><li><code class=syntax>user</code> (<a href=../../../sql-reference/data-types/string/amp/ >String</a>) — пользователь, запустивший текущий запрос.</li><li><code class=syntax>query_id</code> (<a href=../../../sql-reference/data-types/string/amp/ >String</a>) — ID запроса.</li><li><code class=syntax>address</code> (<a href=../../../sql-reference/data-types/domains/ipv6/amp/ >IPv6</a>) — IP адрес, с которого пришел запрос.</li><li><code class=syntax>port</code> (<a href=../../../sql-reference/data-types/int-uint/amp/ >UInt16</a>) — порт, с которого клиент сделал запрос</li><li><code class=syntax>initial_user</code> (<a href=../../../sql-reference/data-types/string/amp/ >String</a>) — пользователь, запустивший первоначальный запрос (для распределенных запросов).</li><li><code class=syntax>initial_query_id</code> (<a href=../../../sql-reference/data-types/string/amp/ >String</a>) — ID родительского запроса.</li><li><code class=syntax>initial_address</code> (<a href=../../../sql-reference/data-types/domains/ipv6/amp/ >IPv6</a>) — IP адрес, с которого пришел родительский запрос.</li><li><code class=syntax>initial_port</code> (<a href=../../../sql-reference/data-types/int-uint/amp/ >UInt16</a>) — порт, с которого клиент сделал родительский запрос.</li><li><code class=syntax>interface</code> (<a href=../../../sql-reference/data-types/int-uint/amp/ >UInt8</a>) — интерфейс, с которого ушёл запрос. Возможные значения:<ul><li>1 — TCP.</li><li>2 — HTTP.</li></ul></li><li><code class=syntax>os_user</code> (<a href=../../../sql-reference/data-types/string/amp/ >String</a>) — имя пользователя операционной системы, который запустил <a href=../../../interfaces/cli/amp/ >clickhouse-client</a>.</li><li><code class=syntax>client_hostname</code> (<a href=../../../sql-reference/data-types/string/amp/ >String</a>) — имя сервера, с которого присоединился <a href=../../../interfaces/cli/amp/ >clickhouse-client</a> или другой TCP клиент.</li><li><code class=syntax>client_name</code> (<a href=../../../sql-reference/data-types/string/amp/ >String</a>) — <a href=../../../interfaces/cli/amp/ >clickhouse-client</a> или другой TCP клиент.</li><li><code class=syntax>client_revision</code> (<a href=../../../sql-reference/data-types/int-uint/amp/ >UInt32</a>) — ревизия <a href=../../../interfaces/cli/amp/ >clickhouse-client</a> или другого TCP клиента.</li><li><code class=syntax>client_version_major</code> (<a href=../../../sql-reference/data-types/int-uint/amp/ >UInt32</a>) — старшая версия <a href=../../../interfaces/cli/amp/ >clickhouse-client</a> или другого TCP клиента.</li><li><code class=syntax>client_version_minor</code> (<a href=../../../sql-reference/data-types/int-uint/amp/ >UInt32</a>) — младшая версия <a href=../../../interfaces/cli/amp/ >clickhouse-client</a> или другого TCP клиента.</li><li><code class=syntax>client_version_patch</code> (<a href=../../../sql-reference/data-types/int-uint/amp/ >UInt32</a>) — патч <a href=../../../interfaces/cli/amp/ >clickhouse-client</a> или другого TCP клиента.</li><li><code class=syntax>http_method</code> (<a href=../../../sql-reference/data-types/int-uint/amp/ >UInt8</a>) — HTTP метод, инициировавший запрос. Возможные значения:<ul><li>0 — запрос запущен с интерфейса TCP.</li><li>1 — <code class=syntax>GET</code>.</li><li>2 — <code class=syntax>POST</code>.</li></ul></li><li><code class=syntax>http_user_agent</code> (<a href=../../../sql-reference/data-types/string/amp/ >String</a>) — HTTP заголовок <code class=syntax>UserAgent</code>.</li><li><code class=syntax>quota_key</code> (<a href=../../../sql-reference/data-types/string/amp/ >String</a>) — «ключ квоты» из настроек <a href=../../quotas/amp/ >квот</a> (см. <code class=syntax>keyed</code>).</li><li><code class=syntax>revision</code> (<a href=../../../sql-reference/data-types/int-uint/amp/ >UInt32</a>) — ревизия ClickHouse.</li><li><code class=syntax>thread_numbers</code> (<a href=../../../sql-reference/data-types/array/amp/ >Array(UInt32)</a>) — количество потоков, участвующих в обработке запросов.</li><li><code class=syntax>ProfileEvents.Names</code> (<a href=../../../sql-reference/data-types/array/amp/ >Array(String)</a>) — Счетчики для изменения различных метрик. Описание метрик можно получить из таблицы <a href=../amp/#system_tables-events>system.events</a>(#system_tables-events</li><li><code class=syntax>ProfileEvents.Values</code> (<a href=../../../sql-reference/data-types/array/amp/ >Array(UInt64)</a>) — метрики, перечисленные в столбце <code class=syntax>ProfileEvents.Names</code>.</li><li><code class=syntax>Settings.Names</code> (<a href=../../../sql-reference/data-types/array/amp/ >Array(String)</a>) — имена настроек, которые меняются, когда клиент выполняет запрос. Чтобы разрешить логирование изменений настроек, установите параметр <code class=syntax>log_query_settings</code> равным 1.</li><li><code class=syntax>Settings.Values</code> (<a href=../../../sql-reference/data-types/array/amp/ >Array(String)</a>) — Значения настроек, которые перечислены в столбце <code class=syntax>Settings.Names</code>.</li></ul><p><strong>Пример</strong></p><div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=o>*</span> <span class=k>FROM</span> <span class=k>system</span><span class=p>.</span><span class=n>query_log</span> <span class=k>LIMIT</span> <span class=mi>1</span> <span class=n>FORMAT</span> <span class=n>Vertical</span><span class=p>;</span>
</code></pre></div><div class=codehilite><pre><span></span><code class=syntax>Row 1:
──────
type:                 QueryStart
event_date:           2020-05-13
event_time:           2020-05-13 14:02:28
query_start_time:     2020-05-13 14:02:28
query_duration_ms:    0
read_rows:            0
read_bytes:           0
written_rows:         0
written_bytes:        0
result_rows:          0
result_bytes:         0
memory_usage:         0
query:                SELECT 1
exception_code:       0
exception:
stack_trace:
is_initial_query:     1
user:                 default
query_id:             5e834082-6f6d-4e34-b47b-cd1934f4002a
address:              ::ffff:127.0.0.1
port:                 57720
initial_user:         default
initial_query_id:     5e834082-6f6d-4e34-b47b-cd1934f4002a
initial_address:      ::ffff:127.0.0.1
initial_port:         57720
interface:            1
os_user:              bayonet
client_hostname:      clickhouse.ru-central1.internal
client_name:          ClickHouse client
client_revision:      54434
client_version_major: 20
client_version_minor: 4
client_version_patch: 1
http_method:          0
http_user_agent:
quota_key:
revision:             54434
thread_ids:           []
ProfileEvents.Names:  []
ProfileEvents.Values: []
Settings.Names:       ['use_uncompressed_cache','load_balancing','log_queries','max_memory_usage']
Settings.Values:      ['0','random','1','10000000000']
</code></pre></div><p><strong>Смотрите также</strong></p><ul><li><a href=../amp/#system_tables-query_thread_log>system.query_thread_log</a> — в этой таблице содержится информация о цепочке каждого выполненного запроса.</li></ul><h2 id=system_tables-query_thread_log>system.query_thread_log<a class=headerlink href=../amp/#system_tables-query_thread_log title="Permanent link"> </a></h2><p>Содержит информацию о потоках, которые выполняют запросы, например, имя потока, время его запуска, продолжительность обработки запроса.</p><p>Чтобы начать логирование:</p><ol><li>Настройте параметры <a href=../../server-configuration-parameters/settings/amp/#server_configuration_parameters-query_thread_log>query_thread_log</a> в конфигурации сервера.</li><li>Установите значение <a href=../../settings/settings/amp/#settings-log-query-threads>log_query_threads</a> равным 1.</li></ol><p>Интервал сброса данных в таблицу задаётся параметром <code class=syntax>flush_interval_milliseconds</code> в разделе настроек сервера <a href=../../server-configuration-parameters/settings/amp/#server_configuration_parameters-query_thread_log>query_thread_log</a>. Чтобы принудительно записать логи из буфера памяти в таблицу, используйте запрос <a href=../../../sql-reference/statements/system/amp/#query_language-system-flush_logs>SYSTEM FLUSH LOGS</a>.</p><p>ClickHouse не удаляет данные из таблицы автоматически. Подробности в разделе <a href=../amp/#system-tables-introduction>Введение</a>.</p><p>Столбцы:</p><ul><li><code class=syntax>event_date</code> (<a href=../../../sql-reference/data-types/date/amp/ >Date</a>) — дата завершения выполнения запроса потоком.</li><li><code class=syntax>event_time</code> (<a href=../../../sql-reference/data-types/datetime/amp/ >DateTime</a>) — дата и время завершения выполнения запроса потоком.</li><li><code class=syntax>query_start_time</code> (<a href=../../../sql-reference/data-types/datetime/amp/ >DateTime</a>) — время начала обработки запроса.</li><li><code class=syntax>query_duration_ms</code> (<a href=../../../sql-reference/data-types/int-uint/amp/#uint-ranges>UInt64</a>) — длительность обработки запроса в миллисекундах.</li><li><code class=syntax>read_rows</code> (<a href=../../../sql-reference/data-types/int-uint/amp/#uint-ranges>UInt64</a>) — количество прочитанных строк.</li><li><code class=syntax>read_bytes</code> (<a href=../../../sql-reference/data-types/int-uint/amp/#uint-ranges>UInt64</a>) — количество прочитанных байтов.</li><li><code class=syntax>written_rows</code> (<a href=../../../sql-reference/data-types/int-uint/amp/#uint-ranges>UInt64</a>) — количество записанных строк для запросов <code class=syntax>INSERT</code>. Для других запросов, значение столбца 0.</li><li><code class=syntax>written_bytes</code> (<a href=../../../sql-reference/data-types/int-uint/amp/#uint-ranges>UInt64</a>) — объём записанных данных в байтах для запросов <code class=syntax>INSERT</code>. Для других запросов, значение столбца 0.</li><li><code class=syntax>memory_usage</code> (<a href=../../../sql-reference/data-types/int-uint/amp/ >Int64</a>) — разница между выделенной и освобождённой памятью в контексте потока.</li><li><code class=syntax>peak_memory_usage</code> (<a href=../../../sql-reference/data-types/int-uint/amp/ >Int64</a>) — максимальная разница между выделенной и освобождённой памятью в контексте потока.</li><li><code class=syntax>thread_name</code> (<a href=../../../sql-reference/data-types/string/amp/ >String</a>) — Имя потока.</li><li><code class=syntax>thread_id</code> (<a href=../../../sql-reference/data-types/int-uint/amp/#uint-ranges>UInt64</a>) — tid (ID потока операционной системы).</li><li><code class=syntax>master_thread_id</code> (<a href=../../../sql-reference/data-types/int-uint/amp/#uint-ranges>UInt64</a>) — tid (ID потока операционной системы) главного потока.</li><li><code class=syntax>query</code> (<a href=../../../sql-reference/data-types/string/amp/ >String</a>) — текст запроса.</li><li><code class=syntax>is_initial_query</code> (<a href=../../../sql-reference/data-types/int-uint/amp/#uint-ranges>UInt8</a>) — вид запроса. Возможные значения:<ul><li>1 — запрос был инициирован клиентом.</li><li>0 — запрос был инициирован другим запросом при распределенном запросе.</li></ul></li><li><code class=syntax>user</code> (<a href=../../../sql-reference/data-types/string/amp/ >String</a>) — пользователь, запустивший текущий запрос.</li><li><code class=syntax>query_id</code> (<a href=../../../sql-reference/data-types/string/amp/ >String</a>) — ID запроса.</li><li><code class=syntax>address</code> (<a href=../../../sql-reference/data-types/domains/ipv6/amp/ >IPv6</a>) — IP адрес, с которого пришел запрос.</li><li><code class=syntax>port</code> (<a href=../../../sql-reference/data-types/int-uint/amp/#uint-ranges>UInt16</a>) — порт, с которого пришел запрос.</li><li><code class=syntax>initial_user</code> (<a href=../../../sql-reference/data-types/string/amp/ >String</a>) — пользователь, запустивший первоначальный запрос (для распределенных запросов).</li><li><code class=syntax>initial_query_id</code> (<a href=../../../sql-reference/data-types/string/amp/ >String</a>) — ID родительского запроса.</li><li><code class=syntax>initial_address</code> (<a href=../../../sql-reference/data-types/domains/ipv6/amp/ >IPv6</a>) — IP адрес, с которого пришел родительский запрос.</li><li><code class=syntax>initial_port</code> (<a href=../../../sql-reference/data-types/int-uint/amp/#uint-ranges>UInt16</a>) — порт, пришел родительский запрос.</li><li><code class=syntax>interface</code> (<a href=../../../sql-reference/data-types/int-uint/amp/#uint-ranges>UInt8</a>) — интерфейс, с которого ушёл запрос. Возможные значения:<ul><li>1 — TCP.</li><li>2 — HTTP.</li></ul></li><li><code class=syntax>os_user</code> (<a href=../../../sql-reference/data-types/string/amp/ >String</a>) — имя пользователя в OS, который запустил <a href=../../../interfaces/cli/amp/ >clickhouse-client</a>.</li><li><code class=syntax>client_hostname</code> (<a href=../../../sql-reference/data-types/string/amp/ >String</a>) — hostname клиентской машины, с которой присоединился <a href=../../../interfaces/cli/amp/ >clickhouse-client</a> или другой TCP клиент.</li><li><code class=syntax>client_name</code> (<a href=../../../sql-reference/data-types/string/amp/ >String</a>) — <a href=../../../interfaces/cli/amp/ >clickhouse-client</a> или другой TCP клиент.</li><li><code class=syntax>client_revision</code> (<a href=../../../sql-reference/data-types/int-uint/amp/ >UInt32</a>) — ревизия <a href=../../../interfaces/cli/amp/ >clickhouse-client</a> или другого TCP клиента.</li><li><code class=syntax>client_version_major</code> (<a href=../../../sql-reference/data-types/int-uint/amp/ >UInt32</a>) — старшая версия <a href=../../../interfaces/cli/amp/ >clickhouse-client</a> или другого TCP клиента.</li><li><code class=syntax>client_version_minor</code> (<a href=../../../sql-reference/data-types/int-uint/amp/ >UInt32</a>) — младшая версия <a href=../../../interfaces/cli/amp/ >clickhouse-client</a> или другого TCP клиента.</li><li><code class=syntax>client_version_patch</code> (<a href=../../../sql-reference/data-types/int-uint/amp/ >UInt32</a>) — патч <a href=../../../interfaces/cli/amp/ >clickhouse-client</a> или другого TCP клиента.</li><li><code class=syntax>http_method</code> (<a href=../../../sql-reference/data-types/int-uint/amp/#uint-ranges>UInt8</a>) — HTTP метод, инициировавший запрос. Возможные значения:<ul><li>0 — запрос запущен с интерфейса TCP.</li><li>1 — <code class=syntax>GET</code>.</li><li>2 — <code class=syntax>POST</code>.</li></ul></li><li><code class=syntax>http_user_agent</code> (<a href=../../../sql-reference/data-types/string/amp/ >String</a>) — HTTP заголовок <code class=syntax>UserAgent</code>.</li><li><code class=syntax>quota_key</code> (<a href=../../../sql-reference/data-types/string/amp/ >String</a>) — «ключ квоты» из настроек <a href=../../quotas/amp/ >квот</a> (см. <code class=syntax>keyed</code>).</li><li><code class=syntax>revision</code> (<a href=../../../sql-reference/data-types/int-uint/amp/ >UInt32</a>) — ревизия ClickHouse.</li><li><code class=syntax>ProfileEvents.Names</code> (<a href=../../../sql-reference/data-types/array/amp/ >Array(String)</a>) — Счетчики для изменения различных метрик для данного потока. Описание метрик можно получить из таблицы <a href=../amp/#system_tables-events>system.events</a>.</li><li><code class=syntax>ProfileEvents.Values</code> (<a href=../../../sql-reference/data-types/array/amp/ >Array(UInt64)</a>) — метрики для данного потока, перечисленные в столбце <code class=syntax>ProfileEvents.Names</code>.</li></ul><p><strong>Пример</strong></p><div class=codehilite><pre><span></span><code class=syntax> <span class=k>SELECT</span> <span class=o>*</span> <span class=k>FROM</span> <span class=k>system</span><span class=p>.</span><span class=n>query_thread_log</span> <span class=k>LIMIT</span> <span class=mi>1</span> <span class=n>FORMAT</span> <span class=n>Vertical</span>
</code></pre></div><div class=codehilite><pre><span></span><code class=syntax>Row 1:
──────
event_date:           2020-05-13
event_time:           2020-05-13 14:02:28
query_start_time:     2020-05-13 14:02:28
query_duration_ms:    0
read_rows:            1
read_bytes:           1
written_rows:         0
written_bytes:        0
memory_usage:         0
peak_memory_usage:    0
thread_name:          QueryPipelineEx
thread_id:            28952
master_thread_id:     28924
query:                SELECT 1
is_initial_query:     1
user:                 default
query_id:             5e834082-6f6d-4e34-b47b-cd1934f4002a
address:              ::ffff:127.0.0.1
port:                 57720
initial_user:         default
initial_query_id:     5e834082-6f6d-4e34-b47b-cd1934f4002a
initial_address:      ::ffff:127.0.0.1
initial_port:         57720
interface:            1
os_user:              bayonet
client_hostname:      clickhouse.ru-central1.internal
client_name:          ClickHouse client
client_revision:      54434
client_version_major: 20
client_version_minor: 4
client_version_patch: 1
http_method:          0
http_user_agent:
quota_key:
revision:             54434
ProfileEvents.Names:  ['ContextLock','RealTimeMicroseconds','UserTimeMicroseconds','OSCPUWaitMicroseconds','OSCPUVirtualTimeMicroseconds']
ProfileEvents.Values: [1,97,81,5,81]
...
</code></pre></div><p><strong>Смотрите также</strong></p><ul><li><a href=../amp/#system_tables-query_log>system.query_log</a> — описание системной таблицы <code class=syntax>query_log</code>, которая содержит общую информацию о выполненных запросах.</li></ul><h2 id=system_tables-trace_log>system.trace_log<a class=headerlink href=../amp/#system_tables-trace_log title="Permanent link"> </a></h2><p>Contains stack traces collected by the sampling query profiler.</p><p>ClickHouse creates this table when the <a href=../../server-configuration-parameters/settings/amp/#server_configuration_parameters-trace_log>trace_log</a> server configuration section is set. Also the <a href=../../settings/settings/amp/#query_profiler_real_time_period_ns>query_profiler_real_time_period_ns</a> and <a href=../../settings/settings/amp/#query_profiler_cpu_time_period_ns>query_profiler_cpu_time_period_ns</a> settings should be set.</p><p>To analyze logs, use the <code class=syntax>addressToLine</code>, <code class=syntax>addressToSymbol</code> and <code class=syntax>demangle</code> introspection functions.</p><p>Columns:</p><ul><li><p><code class=syntax>event_date</code>(<a href=../../../sql-reference/data-types/date/amp/ >Date</a>) — Date of sampling moment.</p></li><li><p><code class=syntax>event_time</code>(<a href=../../../sql-reference/data-types/datetime/amp/ >DateTime</a>) — Timestamp of sampling moment.</p></li><li><p><code class=syntax>revision</code>(<a href=../../../sql-reference/data-types/int-uint/amp/ >UInt32</a>) — ClickHouse server build revision.</p><div class=codehilite><pre><span></span><code class=syntax><span class=k>When</span> <span class=n>connecting</span> <span class=k>to</span> <span class=n>server</span> <span class=k>by</span> <span class=ss>`clickhouse-client`</span><span class=p>,</span> <span class=n>you</span> <span class=n>see</span> <span class=n>the</span> <span class=n>string</span> <span class=n>similar</span> <span class=k>to</span> <span class=ss>`Connected to ClickHouse server version 19.18.1 revision 54429.`</span><span class=p>.</span> <span class=n>This</span> <span class=n>field</span> <span class=n>contains</span> <span class=n>the</span> <span class=ss>`revision`</span><span class=p>,</span> <span class=n>but</span> <span class=k>not</span> <span class=n>the</span> <span class=ss>`version`</span> <span class=n>of</span> <span class=n>a</span> <span class=n>server</span><span class=p>.</span>
</code></pre></div></li><li><p><code class=syntax>timer_type</code>(<a href=../../../sql-reference/data-types/enum/amp/ >Enum8</a>) — Timer type:</p><div class=codehilite><pre><span></span><code class=syntax><span class=o>-</span> <span class=ss>`Real`</span> <span class=n>represents</span> <span class=n>wall</span><span class=o>-</span><span class=n>clock</span> <span class=kt>time</span><span class=p>.</span>
<span class=o>-</span> <span class=ss>`CPU`</span> <span class=n>represents</span> <span class=n>CPU</span> <span class=kt>time</span><span class=p>.</span>
</code></pre></div></li><li><p><code class=syntax>thread_number</code>(<a href=../../../sql-reference/data-types/int-uint/amp/ >UInt32</a>) — Thread identifier.</p></li><li><p><code class=syntax>query_id</code>(<a href=../../../sql-reference/data-types/string/amp/ >String</a>) — Query identifier that can be used to get details about a query that was running from the <a href=../amp/#system_tables-query_log>query_log</a> system table.</p></li><li><p><code class=syntax>trace</code>(<a href=../../../sql-reference/data-types/array/amp/ >Array(UInt64)</a>) — Stack trace at the moment of sampling. Each element is a virtual memory address inside ClickHouse server process.</p></li></ul><p><strong>Example</strong></p><div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=o>*</span> <span class=k>FROM</span> <span class=k>system</span><span class=p>.</span><span class=n>trace_log</span> <span class=k>LIMIT</span> <span class=mi>1</span> <span class=err>\</span><span class=k>G</span>
</code></pre></div><div class=codehilite><pre><span></span><code class=syntax>Row 1:
──────
event_date:    2019-11-15
event_time:    2019-11-15 15:09:38
revision:      54428
timer_type:    Real
thread_number: 48
query_id:      acc4d61f-5bd1-4a3e-bc91-2180be37c915
trace:         [94222141367858,94222152240175,94222152325351,94222152329944,94222152330796,94222151449980,94222144088167,94222151682763,94222144088167,94222151682763,94222144088167,94222144058283,94222144059248,94222091840750,94222091842302,94222091831228,94222189631488,140509950166747,140509942945935]
</code></pre></div><h2 id=system_tables-replicas>system.replicas<a class=headerlink href=../amp/#system_tables-replicas title="Permanent link"> </a></h2><p>Содержит информацию и статус для реплицируемых таблиц, расположенных на локальном сервере.<br> Эту таблицу можно использовать для мониторинга. Таблица содержит по строчке для каждой Replicated*-таблицы.</p><p>Пример:</p><div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=o>*</span>
<span class=k>FROM</span> <span class=k>system</span><span class=p>.</span><span class=n>replicas</span>
<span class=k>WHERE</span> <span class=k>table</span> <span class=o>=</span> <span class=s1>'visits'</span>
<span class=n>FORMAT</span> <span class=n>Vertical</span>
</code></pre></div><div class=codehilite><pre><span></span><code class=syntax>Row 1:
──────
database:                   merge
table:                      visits
engine:                     ReplicatedCollapsingMergeTree
is_leader:                  1
can_become_leader:          1
is_readonly:                0
is_session_expired:         0
future_parts:               1
parts_to_check:             0
zookeeper_path:             /clickhouse/tables/01-06/visits
replica_name:               example01-06-1.yandex.ru
replica_path:               /clickhouse/tables/01-06/visits/replicas/example01-06-1.yandex.ru
columns_version:            9
queue_size:                 1
inserts_in_queue:           0
merges_in_queue:            1
part_mutations_in_queue:    0
queue_oldest_time:          2020-02-20 08:34:30
inserts_oldest_time:        0000-00-00 00:00:00
merges_oldest_time:         2020-02-20 08:34:30
part_mutations_oldest_time: 0000-00-00 00:00:00
oldest_part_to_get:
oldest_part_to_merge_to:    20200220_20284_20840_7
oldest_part_to_mutate_to:
log_max_index:              596273
log_pointer:                596274
last_queue_update:          2020-02-20 08:34:32
absolute_delay:             0
total_replicas:             2
active_replicas:            2
</code></pre></div><p>Столбцы:</p><ul><li><code class=syntax>database</code> (<code class=syntax>String</code>) - имя БД.</li><li><code class=syntax>table</code> (<code class=syntax>String</code>) - имя таблицы.</li><li><code class=syntax>engine</code> (<code class=syntax>String</code>) - имя движка таблицы.</li><li><code class=syntax>is_leader</code> (<code class=syntax>UInt8</code>) - является ли реплика лидером.<br> В один момент времени, не более одной из реплик является лидером. Лидер отвечает за выбор фоновых слияний, которые следует произвести.<br> Замечу, что запись можно осуществлять на любую реплику (доступную и имеющую сессию в ZK), независимо от лидерства.</li><li><code class=syntax>can_become_leader</code> (<code class=syntax>UInt8</code>) - может ли реплика быть выбрана лидером.</li><li><code class=syntax>is_readonly</code> (<code class=syntax>UInt8</code>) - находится ли реплика в режиме «только для чтения»<br> Этот режим включается, если в конфиге нет секции с ZK; если при переинициализации сессии в ZK произошла неизвестная ошибка; во время переинициализации сессии с ZK.</li><li><code class=syntax>is_session_expired</code> (<code class=syntax>UInt8</code>) - истекла ли сессия с ZK. В основном, то же самое, что и <code class=syntax>is_readonly</code>.</li><li><code class=syntax>future_parts</code> (<code class=syntax>UInt32</code>) - количество кусков с данными, которые появятся в результате INSERT-ов или слияний, которых ещё предстоит сделать</li><li><code class=syntax>parts_to_check</code> (<code class=syntax>UInt32</code>) - количество кусков с данными в очереди на проверку. Кусок помещается в очередь на проверку, если есть подозрение, что он может быть битым.</li><li><code class=syntax>zookeeper_path</code> (<code class=syntax>String</code>) - путь к данным таблицы в ZK.</li><li><code class=syntax>replica_name</code> (<code class=syntax>String</code>) - имя реплики в ZK; разные реплики одной таблицы имеют разное имя.</li><li><code class=syntax>replica_path</code> (<code class=syntax>String</code>) - путь к данным реплики в ZK. То же самое, что конкатенация zookeeper_path/replicas/replica_path.</li><li><code class=syntax>columns_version</code> (<code class=syntax>Int32</code>) - номер версии структуры таблицы. Обозначает, сколько раз был сделан ALTER. Если на репликах разные версии, значит некоторые реплики сделали ещё не все ALTER-ы.</li><li><code class=syntax>queue_size</code> (<code class=syntax>UInt32</code>) - размер очереди действий, которые предстоит сделать. К действиям относятся вставки блоков данных, слияния, и некоторые другие действия. Как правило, совпадает с future_parts.</li><li><code class=syntax>inserts_in_queue</code> (<code class=syntax>UInt32</code>) - количество вставок блоков данных, которые предстоит сделать. Обычно вставки должны быстро реплицироваться. Если величина большая - значит что-то не так.</li><li><code class=syntax>merges_in_queue</code> (<code class=syntax>UInt32</code>) - количество слияний, которые предстоит сделать. Бывают длинные слияния - то есть, это значение может быть больше нуля продолжительное время.</li><li><code class=syntax>part_mutations_in_queue</code> (<code class=syntax>UInt32</code>) - количество мутаций, которые предстоит сделать.</li><li><code class=syntax>queue_oldest_time</code> (<code class=syntax>DateTime</code>) - если <code class=syntax>queue_size</code> больше 0, показывает, когда была добавлена в очередь самая старая операция.</li><li><code class=syntax>inserts_oldest_time</code> (<code class=syntax>DateTime</code>) - см. <code class=syntax>queue_oldest_time</code>.</li><li><code class=syntax>merges_oldest_time</code> (<code class=syntax>DateTime</code>) - см. <code class=syntax>queue_oldest_time</code>.</li><li><code class=syntax>part_mutations_oldest_time</code> (<code class=syntax>DateTime</code>) - см. <code class=syntax>queue_oldest_time</code>.</li></ul><p>Следующие 4 столбца имеют ненулевое значение только если активна сессия с ZK.</p><ul><li><code class=syntax>log_max_index</code> (<code class=syntax>UInt64</code>) - максимальный номер записи в общем логе действий.</li><li><code class=syntax>log_pointer</code> (<code class=syntax>UInt64</code>) - максимальный номер записи из общего лога действий, которую реплика скопировала в свою очередь для выполнения, плюс единица. Если log_pointer сильно меньше log_max_index, значит что-то не так.</li><li><code class=syntax>last_queue_update</code> (<code class=syntax>DateTime</code>) - When the queue was updated last time.</li><li><code class=syntax>absolute_delay</code> (<code class=syntax>UInt64</code>) - How big lag in seconds the current replica has.</li><li><code class=syntax>total_replicas</code> (<code class=syntax>UInt8</code>) - общее число известных реплик этой таблицы.</li><li><code class=syntax>active_replicas</code> (<code class=syntax>UInt8</code>) - число реплик этой таблицы, имеющих сессию в ZK; то есть, число работающих реплик.</li></ul><p>Если запрашивать все столбцы, то таблица может работать слегка медленно, так как на каждую строчку делается несколько чтений из ZK.<br> Если не запрашивать последние 4 столбца (log_max_index, log_pointer, total_replicas, active_replicas), то таблица работает быстро.</p><p>Например, так можно проверить, что всё хорошо:</p><div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span>
    <span class=k>database</span><span class=p>,</span>
    <span class=k>table</span><span class=p>,</span>
    <span class=n>is_leader</span><span class=p>,</span>
    <span class=n>is_readonly</span><span class=p>,</span>
    <span class=n>is_session_expired</span><span class=p>,</span>
    <span class=n>future_parts</span><span class=p>,</span>
    <span class=n>parts_to_check</span><span class=p>,</span>
    <span class=n>columns_version</span><span class=p>,</span>
    <span class=n>queue_size</span><span class=p>,</span>
    <span class=n>inserts_in_queue</span><span class=p>,</span>
    <span class=n>merges_in_queue</span><span class=p>,</span>
    <span class=n>log_max_index</span><span class=p>,</span>
    <span class=n>log_pointer</span><span class=p>,</span>
    <span class=n>total_replicas</span><span class=p>,</span>
    <span class=n>active_replicas</span>
<span class=k>FROM</span> <span class=k>system</span><span class=p>.</span><span class=n>replicas</span>
<span class=k>WHERE</span>
       <span class=n>is_readonly</span>
    <span class=k>OR</span> <span class=n>is_session_expired</span>
    <span class=k>OR</span> <span class=n>future_parts</span> <span class=o>&gt;</span> <span class=mi>20</span>
    <span class=k>OR</span> <span class=n>parts_to_check</span> <span class=o>&gt;</span> <span class=mi>10</span>
    <span class=k>OR</span> <span class=n>queue_size</span> <span class=o>&gt;</span> <span class=mi>20</span>
    <span class=k>OR</span> <span class=n>inserts_in_queue</span> <span class=o>&gt;</span> <span class=mi>10</span>
    <span class=k>OR</span> <span class=n>log_max_index</span> <span class=o>-</span> <span class=n>log_pointer</span> <span class=o>&gt;</span> <span class=mi>10</span>
    <span class=k>OR</span> <span class=n>total_replicas</span> <span class=o>&lt;</span> <span class=mi>2</span>
    <span class=k>OR</span> <span class=n>active_replicas</span> <span class=o>&lt;</span> <span class=n>total_replicas</span>
</code></pre></div><p>Если этот запрос ничего не возвращает - значит всё хорошо.</p><h2 id=system-tables-system-settings>system.settings<a class=headerlink href=../amp/#system-tables-system-settings title="Permanent link"> </a></h2><p>Содержит информацию о сессионных настройках для текущего пользователя.</p><p>Столбцы:</p><ul><li><code class=syntax>name</code> (<a href=../../../sql-reference/data-types/string/amp/ >String</a>) — имя настройки.</li><li><code class=syntax>value</code> (<a href=../../../sql-reference/data-types/string/amp/ >String</a>) — значение настройки.</li><li><code class=syntax>changed</code> (<a href=../../../sql-reference/data-types/int-uint/amp/#uint-ranges>UInt8</a>) — показывает, изменена ли настройка по отношению к значению по умолчанию.</li><li><code class=syntax>description</code> (<a href=../../../sql-reference/data-types/string/amp/ >String</a>) — краткое описание настройки.</li><li><code class=syntax>min</code> (<a href=../../../sql-reference/data-types/nullable/amp/ >Nullable</a>(<a href=../../../sql-reference/data-types/string/amp/ >String</a>)) — минимальное значение настройки, если задано <a href=../../settings/constraints-on-settings/amp/#constraints-on-settings>ограничение</a>. Если нет, то поле содержит <a href=../../../sql-reference/syntax/amp/#null-literal>NULL</a>.</li><li><code class=syntax>max</code> (<a href=../../../sql-reference/data-types/nullable/amp/ >Nullable</a>(<a href=../../../sql-reference/data-types/string/amp/ >String</a>)) — максимальное значение настройки, если задано <a href=../../settings/constraints-on-settings/amp/#constraints-on-settings>ограничение</a>. Если нет, то поле содержит <a href=../../../sql-reference/syntax/amp/#null-literal>NULL</a>.</li><li><code class=syntax>readonly</code> (<a href=../../../sql-reference/data-types/int-uint/amp/#uint-ranges>UInt8</a>) — Показывает, может ли пользователь изменять настройку:<ul><li><code class=syntax>0</code> — Текущий пользователь может изменять настройку.</li><li><code class=syntax>1</code> — Текущий пользователь не может изменять настройку.</li></ul></li></ul><p><strong>Пример</strong></p><p>Пример показывает как получить информацию о настройках, имена которых содержат <code class=syntax>min_i</code>.</p><div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=o>*</span>
<span class=k>FROM</span> <span class=k>system</span><span class=p>.</span><span class=n>settings</span>
<span class=k>WHERE</span> <span class=n>name</span> <span class=k>LIKE</span> <span class=s1>'%min_i%'</span>
</code></pre></div><div class=codehilite><pre><span></span><code class=syntax>┌─name────────────────────────────────────────┬─value─────┬─changed─┬─description───────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┬─min──┬─max──┬─readonly─┐
│ min_insert_block_size_rows                  │ 1048576   │       0 │ Squash blocks passed to INSERT query to specified size in rows, if blocks are not big enough.                                                                         │ ᴺᵁᴸᴸ │ ᴺᵁᴸᴸ │        0 │
│ min_insert_block_size_bytes                 │ 268435456 │       0 │ Squash blocks passed to INSERT query to specified size in bytes, if blocks are not big enough.                                                                        │ ᴺᵁᴸᴸ │ ᴺᵁᴸᴸ │        0 │
│ read_backoff_min_interval_between_events_ms │ 1000      │       0 │ Settings to reduce the number of threads in case of slow reads. Do not pay attention to the event, if the previous one has passed less than a certain amount of time. │ ᴺᵁᴸᴸ │ ᴺᵁᴸᴸ │        0 │
└─────────────────────────────────────────────┴───────────┴─────────┴───────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┴──────┴──────┴──────────┘
</code></pre></div><p>Использование <code class=syntax>WHERE changed</code> может быть полезно, например, если необходимо проверить:</p><ul><li>Что настройки корректно загрузились из конфигурационного файла и используются.</li><li>Настройки, изменённые в текущей сессии.</li></ul><!-- --><div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=o>*</span> <span class=k>FROM</span> <span class=k>system</span><span class=p>.</span><span class=n>settings</span> <span class=k>WHERE</span> <span class=n>changed</span> <span class=k>AND</span> <span class=n>name</span><span class=o>=</span><span class=s1>'load_balancing'</span>
</code></pre></div><p><strong>Cм. также</strong></p><ul><li><a href=../../settings/amp/#settings>Настройки</a></li><li><a href=../../settings/permissions-for-queries/amp/#settings_readonly>Разрешения для запросов</a></li><li><a href=../../settings/constraints-on-settings/amp/ >Ограничения для значений настроек</a></li></ul><h2 id=system.table_engines>system.table_engines<a class=headerlink href=../amp/#system.table_engines title="Permanent link"> </a></h2><div class=codehilite><pre><span></span><code class=syntax>┌─name───────────────────┬─value───────┬─changed─┐
│ max_threads            │ 8           │       1 │
│ use_uncompressed_cache │ 0           │       1 │
│ load_balancing         │ random      │       1 │
│ max_memory_usage       │ 10000000000 │       1 │
└────────────────────────┴─────────────┴─────────┘
</code></pre></div><h2 id=system-table-engines>system.table_engines<a class=headerlink href=../amp/#system-table-engines title="Permanent link"> </a></h2><p>Содержит информацию про движки таблиц, поддерживаемые сервером, а также об их возможностях.</p><p>Эта таблица содержит следующие столбцы (тип столбца показан в скобках):</p><ul><li><code class=syntax>name</code> (String) — имя движка.</li><li><code class=syntax>supports_settings</code> (UInt8) — флаг, показывающий поддержку секции <code class=syntax>SETTINGS</code>.</li><li><code class=syntax>supports_skipping_indices</code> (UInt8) — флаг, показывающий поддержку <a href=../table_engines/mergetree/amp/#table_engine-mergetree-data_skipping-indexes>индексов пропуска данных</a>.</li><li><code class=syntax>supports_ttl</code> (UInt8) — флаг, показывающий поддержку <a href=../table_engines/mergetree/amp/#table_engine-mergetree-ttl>TTL</a>.</li><li><code class=syntax>supports_sort_order</code> (UInt8) — флаг, показывающий поддержку секций <code class=syntax>PARTITION_BY</code>, <code class=syntax>PRIMARY_KEY</code>, <code class=syntax>ORDER_BY</code> и <code class=syntax>SAMPLE_BY</code>.</li><li><code class=syntax>supports_replication</code> (UInt8) — флаг, показывающий поддержку <a href=../../../engines/table-engines/mergetree-family/replication/amp/ >репликации</a>.</li><li><code class=syntax>supports_deduplication</code> (UInt8) — флаг, показывающий наличие в движке дедупликации данных.</li></ul><p>Пример:</p><div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=o>*</span>
<span class=k>FROM</span> <span class=k>system</span><span class=p>.</span><span class=n>table_engines</span>
<span class=k>WHERE</span> <span class=n>name</span> <span class=k>in</span> <span class=p>(</span><span class=s1>'Kafka'</span><span class=p>,</span> <span class=s1>'MergeTree'</span><span class=p>,</span> <span class=s1>'ReplicatedCollapsingMergeTree'</span><span class=p>)</span>
</code></pre></div><div class=codehilite><pre><span></span><code class=syntax>┌─name──────────────────────────┬─supports_settings─┬─supports_skipping_indices─┬─supports_sort_order─┬─supports_ttl─┬─supports_replication─┬─supports_deduplication─┐
│ Kafka                         │                 1 │                         0 │                   0 │            0 │                    0 │                      0 │
│ MergeTree                     │                 1 │                         1 │                   1 │            1 │                    0 │                      0 │
│ ReplicatedCollapsingMergeTree │                 1 │                         1 │                   1 │            1 │                    1 │                      1 │
└───────────────────────────────┴───────────────────┴───────────────────────────┴─────────────────────┴──────────────┴──────────────────────┴────────────────────────┘
</code></pre></div><p><strong>Смотрите также</strong></p><ul><li><a href=../../../engines/table-engines/mergetree-family/mergetree/amp/#mergetree-query-clauses>Секции движка</a> семейства MergeTree</li><li><a href=../../../engines/table-engines/integrations/kafka/amp/#table_engine-kafka-creating-a-table>Настройки</a> Kafka</li><li><a href=../../../engines/table-engines/special/join/amp/#join-limitations-and-settings>Настройки</a> Join</li></ul><h2 id=system-tables>system.tables<a class=headerlink href=../amp/#system-tables title="Permanent link"> </a></h2><p>Содержит метаданные каждой таблицы, о которой знает сервер. Отсоединённые таблицы не отображаются в <code class=syntax>system.tables</code>.</p><p>Эта таблица содержит следующие столбцы (тип столбца показан в скобках):</p><ul><li><code class=syntax>database String</code> — имя базы данных, в которой находится таблица.</li><li><code class=syntax>name</code> (String) — имя таблицы.</li><li><code class=syntax>engine</code> (String) — движок таблицы (без параметров).</li><li><code class=syntax>is_temporary</code> (UInt8) — флаг, указывающий на то, временная это таблица или нет.</li><li><code class=syntax>data_path</code> (String) — путь к данным таблицы в файловой системе.</li><li><code class=syntax>metadata_path</code> (String) — путь к табличным метаданным в файловой системе.</li><li><code class=syntax>metadata_modification_time</code> (DateTime) — время последней модификации табличных метаданных.</li><li><code class=syntax>dependencies_database</code> (Array(String)) — зависимости базы данных.</li><li><code class=syntax>dependencies_table</code> (Array(String)) — табличные зависимости (таблицы <a href=../../../engines/table-engines/special/materializedview/amp/ >MaterializedView</a>, созданные на базе текущей таблицы).</li><li><code class=syntax>create_table_query</code> (String) — запрос, которым создавалась таблица.</li><li><code class=syntax>engine_full</code> (String) — параметры табличного движка.</li><li><code class=syntax>partition_key</code> (String) — ключ партиционирования таблицы.</li><li><code class=syntax>sorting_key</code> (String) — ключ сортировки таблицы.</li><li><code class=syntax>primary_key</code> (String) - первичный ключ таблицы.</li><li><code class=syntax>sampling_key</code> (String) — ключ сэмплирования таблицы.</li><li><p><code class=syntax>storage_policy</code> (String) - политика хранения данных:</p><ul><li><a href=../../../engines/table-engines/mergetree-family/mergetree/amp/#table_engine-mergetree-multiple-volumes>MergeTree</a></li><li><a href=../../../engines/table-engines/special/distributed/amp/#distributed>Distributed</a></li></ul></li><li><p><code class=syntax>total_rows</code> (Nullable(UInt64)) - Общее количество строк, если есть возможность быстро определить точное количество строк в таблице, в противном случае <code class=syntax>Null</code> (включая базовую таблицу <code class=syntax>Buffer</code>).</p></li><li><p><code class=syntax>total_bytes</code> (Nullable(UInt64)) - Общее количество байт, если можно быстро определить точное количество байт для таблицы на накопителе, в противном случае <code class=syntax>Null</code> (<strong>не включает</strong> в себя никакого базового хранилища).</p><ul><li>Если таблица хранит данные на диске, возвращает используемое пространство на диске (т. е. сжатое).</li><li>Если таблица хранит данные в памяти, возвращает приблизительное количество используемых байт в памяти.</li></ul></li></ul><p>Таблица <code class=syntax>system.tables</code> используется при выполнении запроса <code class=syntax>SHOW TABLES</code>.</p><h2 id=system-zookeeper>system.zookeeper<a class=headerlink href=../amp/#system-zookeeper title="Permanent link"> </a></h2><p>Таблицы не существует, если ZooKeeper не сконфигурирован. Позволяет читать данные из ZooKeeper кластера, описанного в конфигурации.<br> В запросе обязательно в секции WHERE должно присутствовать условие на равенство path - путь в ZooKeeper, для детей которого вы хотите получить данные.</p><p>Запрос <code class=syntax>SELECT * FROM system.zookeeper WHERE path = '/clickhouse'</code> выведет данные по всем детям узла <code class=syntax>/clickhouse</code>.<br> Чтобы вывести данные по всем узлам в корне, напишите path = ‘/’.<br> Если узла, указанного в path не существует, то будет брошено исключение.</p><p>Столбцы:</p><ul><li><code class=syntax>name String</code> — Имя узла.</li><li><code class=syntax>path String</code> — Путь к узлу.</li><li><code class=syntax>value String</code> — Значение узла.</li><li><code class=syntax>dataLength Int32</code> — Размер значения.</li><li><code class=syntax>numChildren Int32</code> — Количество детей.</li><li><code class=syntax>czxid Int64</code> — Идентификатор транзакции, в которой узел был создан.</li><li><code class=syntax>mzxid Int64</code> — Идентификатор транзакции, в которой узел был последний раз изменён.</li><li><code class=syntax>pzxid Int64</code> — Идентификатор транзакции, последний раз удаливший или добавивший детей.</li><li><code class=syntax>ctime DateTime</code> — Время создания узла.</li><li><code class=syntax>mtime DateTime</code> — Время последней модификации узла.</li><li><code class=syntax>version Int32</code> — Версия узла - количество раз, когда узел был изменён.</li><li><code class=syntax>cversion Int32</code> — Количество добавлений или удалений детей.</li><li><code class=syntax>aversion Int32</code> — Количество изменений ACL.</li><li><code class=syntax>ephemeralOwner Int64</code> — Для эфемерных узлов - идентификатор сессии, которая владеет этим узлом.</li></ul><p>Пример:</p><div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=o>*</span>
<span class=k>FROM</span> <span class=k>system</span><span class=p>.</span><span class=n>zookeeper</span>
<span class=k>WHERE</span> <span class=n>path</span> <span class=o>=</span> <span class=s1>'/clickhouse/tables/01-08/visits/replicas'</span>
<span class=n>FORMAT</span> <span class=n>Vertical</span>
</code></pre></div><div class=codehilite><pre><span></span><code class=syntax>Row 1:
──────
name:           example01-08-1.yandex.ru
value:
czxid:          932998691229
mzxid:          932998691229
ctime:          2015-03-27 16:49:51
mtime:          2015-03-27 16:49:51
version:        0
cversion:       47
aversion:       0
ephemeralOwner: 0
dataLength:     0
numChildren:    7
pzxid:          987021031383
path:           /clickhouse/tables/01-08/visits/replicas

Row 2:
──────
name:           example01-08-2.yandex.ru
value:
czxid:          933002738135
mzxid:          933002738135
ctime:          2015-03-27 16:57:01
mtime:          2015-03-27 16:57:01
version:        0
cversion:       37
aversion:       0
ephemeralOwner: 0
dataLength:     0
numChildren:    7
pzxid:          987021252247
path:           /clickhouse/tables/01-08/visits/replicas
</code></pre></div><h2 id=system_tables-mutations>system.mutations<a class=headerlink href=../amp/#system_tables-mutations title="Permanent link"> </a></h2><p>Таблица содержит информацию о ходе выполнения <a href=../../../sql-reference/statements/alter/amp/#alter-mutations>мутаций</a> MergeTree-таблиц. Каждой команде мутации соответствует одна строка. В таблице есть следующие столбцы:</p><p><strong>database</strong>, <strong>table</strong> - имя БД и таблицы, к которой была применена мутация.</p><p><strong>mutation_id</strong> - ID запроса. Для реплицированных таблиц эти ID соответствуют именам записей в директории <code class=syntax>&lt;table_path_in_zookeeper&gt;/mutations/</code> в ZooKeeper, для нереплицированных - именам файлов в директории с данными таблицы.</p><p><strong>command</strong> - Команда мутации (часть запроса после <code class=syntax>ALTER TABLE [db.]table</code>).</p><p><strong>create_time</strong> - Время создания мутации.</p><p><strong>block_numbers.partition_id</strong>, <strong>block_numbers.number</strong> - Nested-столбец. Для мутаций реплицированных таблиц для каждой партиции содержит номер блока, полученный этой мутацией (в каждой партиции будут изменены только куски, содержащие блоки с номерами, меньшими номера, полученного мутацией в этой партиции). Для нереплицированных таблиц нумерация блоков сквозная по партициям, поэтому столбец содержит одну запись с единственным номером блока, полученным мутацией.</p><p><strong>parts_to_do</strong> - Количество кусков таблицы, которые ещё предстоит изменить.</p><p><strong>is_done</strong> - Завершена ли мутация. Замечание: даже если <code class=syntax>parts_to_do = 0</code>, для реплицированной таблицы возможна ситуация, когда мутация ещё не завершена из-за долго выполняющейся вставки, которая добавляет данные, которые нужно будет мутировать.</p><p>Если во время мутации какого-либо куска возникли проблемы, заполняются следующие столбцы:</p><p><strong>latest_failed_part</strong> - Имя последнего куска, мутация которого не удалась.</p><p><strong>latest_fail_time</strong> — время последней ошибки мутации.</p><p><strong>latest_fail_reason</strong> — причина последней ошибки мутации.</p><h2 id=system_tables-disks>system.disks<a class=headerlink href=../amp/#system_tables-disks title="Permanent link"> </a></h2><p>Cодержит информацию о дисках, заданных в <a href=../../../engines/table-engines/mergetree-family/mergetree/amp/#table_engine-mergetree-multiple-volumes_configure>конфигурации сервера</a>.</p><p>Столбцы:</p><ul><li><code class=syntax>name</code> (<a href=../../../sql-reference/data-types/string/amp/ >String</a>) — имя диска в конфигурации сервера.</li><li><code class=syntax>path</code> (<a href=../../../sql-reference/data-types/string/amp/ >String</a>) — путь к точке монтирования в файловой системе.</li><li><code class=syntax>free_space</code> (<a href=../../../sql-reference/data-types/int-uint/amp/ >UInt64</a>) — свободное место на диске в байтах.</li><li><code class=syntax>total_space</code> (<a href=../../../sql-reference/data-types/int-uint/amp/ >UInt64</a>) — объём диска в байтах.</li><li><code class=syntax>keep_free_space</code> (<a href=../../../sql-reference/data-types/int-uint/amp/ >UInt64</a>) — место, которое должно остаться свободным на диске в байтах. Задаётся значением параметра <code class=syntax>keep_free_space_bytes</code> конфигурации дисков.</li></ul><h2 id=system_tables-storage_policies>system.storage_policies<a class=headerlink href=../amp/#system_tables-storage_policies title="Permanent link"> </a></h2><p>Содержит информацию о политиках хранения и томах, заданных в <a href=../../../engines/table-engines/mergetree-family/mergetree/amp/#table_engine-mergetree-multiple-volumes_configure>конфигурации сервера</a>.</p><p>Столбцы:</p><ul><li><code class=syntax>policy_name</code> (<a href=../../../sql-reference/data-types/string/amp/ >String</a>) — имя политики хранения.</li><li><code class=syntax>volume_name</code> (<a href=../../../sql-reference/data-types/string/amp/ >String</a>) — имя тома, который содержится в политике хранения.</li><li><code class=syntax>volume_priority</code> (<a href=../../../sql-reference/data-types/int-uint/amp/ >UInt64</a>) — порядковый номер тома согласно конфигурации.</li><li><code class=syntax>disks</code> (<a href=../../../sql-reference/data-types/array/amp/ >Array(String)</a>) — имена дисков, содержащихся в политике хранения.</li><li><code class=syntax>max_data_part_size</code> (<a href=../../../sql-reference/data-types/int-uint/amp/ >UInt64</a>) — максимальный размер куска данных, который может храниться на дисках тома (0 — без ограничений).</li><li><code class=syntax>move_factor</code> (<a href=../../../sql-reference/data-types/float/amp/ >Float64</a>)` — доля свободного места, при превышении которой данные начинают перемещаться на следующий том.</li></ul><p>Если политика хранения содержит несколько томов, то каждому тому соответствует отдельная запись в таблице.</p><h2 id=system_tables-quotas>system.quotas<a class=headerlink href=../amp/#system_tables-quotas title="Permanent link"> </a></h2><p>Содержит информацию о <a href=../../quotas/amp/ >квотах</a>.</p><p>Столбцы:<br> - <code class=syntax>name</code> (<a href=../../../sql-reference/data-types/string/amp/ >String</a>) — Имя квоты.<br> - <code class=syntax>id</code> (<a href=../../../sql-reference/data-types/uuid/amp/ >UUID</a>) — ID квоты.<br> - <code class=syntax>storage</code>(<a href=../../../sql-reference/data-types/string/amp/ >String</a>) — Хранилище квот. Возможные значения: "users.xml", если квота задана в файле users.xml, "disk" — если квота задана в SQL-запросе.<br> - <code class=syntax>keys</code> (<a href=../../../sql-reference/data-types/array/amp/ >Array</a>(<a href=../../../sql-reference/data-types/enum/amp/ >Enum8</a>)) — Ключ определяет совместное использование квоты. Если два соединения используют одну и ту же квоту, они совместно используют один и тот же объем ресурсов. Значения: <br> - <code class=syntax>[]</code> — Все пользователи используют одну и ту же квоту.<br> - <code class=syntax>['user_name']</code> — Соединения с одинаковым именем пользователя используют одну и ту же квоту. <br> - <code class=syntax>['ip_address']</code> — Соединения с одинаковым IP-адресом используют одну и ту же квоту. <br> - <code class=syntax>['client_key']</code> — Соединения с одинаковым ключом используют одну и ту же квоту. Ключ может быть явно задан клиентом. При использовании <a href=../../../interfaces/cli/amp/ >clickhouse-client</a>, передайте ключевое значение в параметре <code class=syntax>--quota-key</code>, или используйте параметр <code class=syntax>quota_key</code> файле настроек клиента. В случае использования HTTP интерфейса, используйте заголовок <code class=syntax>X-ClickHouse-Quota</code>.<br> - <code class=syntax>['user_name', 'client_key']</code> — Соединения с одинаковым ключом используют одну и ту же квоту. Если ключ не предоставлен клиентом, то квота отслеживается для <code class=syntax>user_name</code>.<br> - <code class=syntax>['client_key', 'ip_address']</code> — Соединения с одинаковым ключом используют одну и ту же квоту. Если ключ не предоставлен клиентом, то квота отслеживается для <code class=syntax>ip_address</code>.<br> - <code class=syntax>durations</code> (<a href=../../../sql-reference/data-types/array/amp/ >Array</a>(<a href=../../../sql-reference/data-types/int-uint/amp/ >UInt64</a>)) — Длины временных интервалов для расчета потребления ресурсов, в секундах. <br> - <code class=syntax>apply_to_all</code> (<a href=../../../sql-reference/data-types/int-uint/amp/#uint-ranges>UInt8</a>) — Логическое значение. Он показывает, к каким пользователям применяется квота. Значения:<br> - <code class=syntax>0</code> — Квота применяется к пользователям, перечисленным в списке <code class=syntax>apply_to_list</code>.<br> - <code class=syntax>1</code> — Квота применяется к пользователям, за исключением тех, что перечислены в списке <code class=syntax>apply_to_except</code>.<br> - <code class=syntax>apply_to_list</code> (<a href=../../../sql-reference/data-types/array/amp/ >Array</a>(<a href=../../../sql-reference/data-types/string/amp/ >String</a>)) — Список имен пользователей/<a href=../../access-rights/amp/#role-management>ролей</a> к которым применяется квота.<br> - <code class=syntax>apply_to_except</code> (<a href=../../../sql-reference/data-types/array/amp/ >Array</a>(<a href=../../../sql-reference/data-types/string/amp/ >String</a>)) — Список имен пользователей/ролей к которым квота применяться не должна.</p><h2 id=system_tables-quota_limits>system.quota_limits<a class=headerlink href=../amp/#system_tables-quota_limits title="Permanent link"> </a></h2><p>Содержит информацию о максимумах для всех интервалов всех квот. Одной квоте могут соответствовать любое количество строк или ноль.</p><p>Столбцы:<br> - <code class=syntax>quota_name</code> (<a href=../../../sql-reference/data-types/string/amp/ >String</a>) — Имя квоты.<br> - <code class=syntax>duration</code> (<a href=../../../sql-reference/data-types/int-uint/amp/ >UInt32</a>) — Длина временного интервала для расчета потребления ресурсов, в секундах. <br> - <code class=syntax>is_randomized_interval</code> (<a href=../../../sql-reference/data-types/int-uint/amp/#uint-ranges>UInt8</a>) — Логическое значение. Оно показывает, является ли интервал рандомизированным. Интервал всегда начинается в одно и то же время, если он не рандомизирован. Например, интервал в 1 минуту всегда начинается с целого числа минут (то есть он может начинаться в 11:20:00, но никогда не начинается в 11:20:01), интервал в один день всегда начинается в полночь UTC. Если интервал рандомизирован, то самый первый интервал начинается в произвольное время, а последующие интервалы начинаются один за другим. Значения:<br> - <code class=syntax>0</code> — Интервал рандомизирован.<br> - <code class=syntax>1</code> — Интервал не рандомизирован.<br> - <code class=syntax>max_queries</code> (<a href=../../../sql-reference/data-types/nullable/amp/ >Nullable</a>(<a href=../../../sql-reference/data-types/int-uint/amp/ >UInt64</a>)) — Максимальное число запросов.<br> - <code class=syntax>max_errors</code> (<a href=../../../sql-reference/data-types/nullable/amp/ >Nullable</a>(<a href=../../../sql-reference/data-types/int-uint/amp/ >UInt64</a>)) — Максимальное количество ошибок.<br> - <code class=syntax>max_result_rows</code> (<a href=../../../sql-reference/data-types/nullable/amp/ >Nullable</a>(<a href=../../../sql-reference/data-types/int-uint/amp/ >UInt64</a>)) — Максимальное количество строк результата.<br> - <code class=syntax>max_result_bytes</code> (<a href=../../../sql-reference/data-types/nullable/amp/ >Nullable</a>(<a href=../../../sql-reference/data-types/int-uint/amp/ >UInt64</a>)) — Максимальный объем оперативной памяти в байтах, используемый для хранения результата запроса.<br> - <code class=syntax>max_read_rows</code> (<a href=../../../sql-reference/data-types/nullable/amp/ >Nullable</a>(<a href=../../../sql-reference/data-types/int-uint/amp/ >UInt64</a>)) — Максимальное количество строк, считываемых из всех таблиц и табличных функций, участвующих в запросе.<br> - <code class=syntax>max_read_bytes</code> (<a href=../../../sql-reference/data-types/nullable/amp/ >Nullable</a>(<a href=../../../sql-reference/data-types/int-uint/amp/ >UInt64</a>)) — Максимальное количество байтов, считываемых из всех таблиц и табличных функций, участвующих в запросе.<br> - <code class=syntax>max_execution_time</code> (<a href=../../../sql-reference/data-types/nullable/amp/ >Nullable</a>(<a href=../../../sql-reference/data-types/float/amp/ >Float64</a>)) — Максимальное время выполнения запроса, в секундах.</p><h2 id=system_tables-quota_usage>system.quota_usage<a class=headerlink href=../amp/#system_tables-quota_usage title="Permanent link"> </a></h2><p>Использование квоты текущим пользователем: сколько используется и сколько осталось.</p><p>Столбцы:<br> - <code class=syntax>quota_name</code> (<a href=../../../sql-reference/data-types/string/amp/ >String</a>) — Имя квоты.<br> - <code class=syntax>quota_key</code>(<a href=../../../sql-reference/data-types/string/amp/ >String</a>) — Значение ключа. Например, если keys = <code class=syntax>ip_address</code>, <code class=syntax>quota_key</code> может иметь значение '192.168.1.1'.<br> - <code class=syntax>start_time</code>(<a href=../../../sql-reference/data-types/nullable/amp/ >Nullable</a>(<a href=../../../sql-reference/data-types/datetime/amp/ >DateTime</a>)) — Время начала расчета потребления ресурсов.<br> - <code class=syntax>end_time</code>(<a href=../../../sql-reference/data-types/nullable/amp/ >Nullable</a>(<a href=../../../sql-reference/data-types/datetime/amp/ >DateTime</a>)) — Время окончания расчета потребления ресурс<br> - <code class=syntax>duration</code> (<a href=../../../sql-reference/data-types/nullable/amp/ >Nullable</a>(<a href=../../../sql-reference/data-types/int-uint/amp/ >UInt64</a>)) — Длина временного интервала для расчета потребления ресурсов, в секундах.<br> - <code class=syntax>queries</code> (<a href=../../../sql-reference/data-types/nullable/amp/ >Nullable</a>(<a href=../../../sql-reference/data-types/int-uint/amp/ >UInt64</a>)) — Общее количество запросов на этом интервале.<br> - <code class=syntax>max_queries</code> (<a href=../../../sql-reference/data-types/nullable/amp/ >Nullable</a>(<a href=../../../sql-reference/data-types/int-uint/amp/ >UInt64</a>)) — Максимальное количество запросов.<br> - <code class=syntax>errors</code> (<a href=../../../sql-reference/data-types/nullable/amp/ >Nullable</a>(<a href=../../../sql-reference/data-types/int-uint/amp/ >UInt64</a>)) — Число запросов, вызвавших ошибки.<br> - <code class=syntax>max_errors</code> (<a href=../../../sql-reference/data-types/nullable/amp/ >Nullable</a>(<a href=../../../sql-reference/data-types/int-uint/amp/ >UInt64</a>)) — Максимальное число ошибок.<br> - <code class=syntax>result_rows</code> (<a href=../../../sql-reference/data-types/nullable/amp/ >Nullable</a>(<a href=../../../sql-reference/data-types/int-uint/amp/ >UInt64</a>)) — Общее количество строк результата.<br> - <code class=syntax>max_result_rows</code> (<a href=../../../sql-reference/data-types/nullable/amp/ >Nullable</a>(<a href=../../../sql-reference/data-types/int-uint/amp/ >UInt64</a>)) — Максимальное количество строк результата.<br> - <code class=syntax>result_bytes</code> (<a href=../../../sql-reference/data-types/nullable/amp/ >Nullable</a>(<a href=../../../sql-reference/data-types/int-uint/amp/ >UInt64</a>)) — Объем оперативной памяти в байтах, используемый для хранения результата запроса.<br> - <code class=syntax>max_result_bytes</code> (<a href=../../../sql-reference/data-types/nullable/amp/ >Nullable</a>(<a href=../../../sql-reference/data-types/int-uint/amp/ >UInt64</a>)) — Максимальный объем оперативной памяти, используемый для хранения результата запроса, в байтах.<br> - <code class=syntax>read_rows</code> (<a href=../../../sql-reference/data-types/nullable/amp/ >Nullable</a>(<a href=../../../sql-reference/data-types/int-uint/amp/ >UInt64</a>)) — Общее число исходных строк, считываемых из таблиц для выполнения запроса на всех удаленных серверах.<br> - <code class=syntax>max_read_rows</code> (<a href=../../../sql-reference/data-types/nullable/amp/ >Nullable</a>(<a href=../../../sql-reference/data-types/int-uint/amp/ >UInt64</a>)) — Максимальное количество строк, считываемых из всех таблиц и табличных функций, участвующих в запросах.<br> - <code class=syntax>read_bytes</code> (<a href=../../../sql-reference/data-types/nullable/amp/ >Nullable</a>(<a href=../../../sql-reference/data-types/int-uint/amp/ >UInt64</a>)) — Общее количество байт, считанных из всех таблиц и табличных функций, участвующих в запросах.<br> - <code class=syntax>max_read_bytes</code> (<a href=../../../sql-reference/data-types/nullable/amp/ >Nullable</a>(<a href=../../../sql-reference/data-types/int-uint/amp/ >UInt64</a>)) — Максимальное количество байт, считываемых из всех таблиц и табличных функций.<br> - <code class=syntax>execution_time</code> (<a href=../../../sql-reference/data-types/nullable/amp/ >Nullable</a>(<a href=../../../sql-reference/data-types/float/amp/ >Float64</a>)) — Общее время выполнения запроса, в секундах.<br> - <code class=syntax>max_execution_time</code> (<a href=../../../sql-reference/data-types/nullable/amp/ >Nullable</a>(<a href=../../../sql-reference/data-types/float/amp/ >Float64</a>)) — Максимальное время выполнения запроса.</p><h2 id=system_tables-quotas_usage>system.quotas_usage<a class=headerlink href=../amp/#system_tables-quotas_usage title="Permanent link"> </a></h2><p>Использование квот всеми пользователями.</p><p>Столбцы:<br> - <code class=syntax>quota_name</code> (<a href=../../../sql-reference/data-types/string/amp/ >String</a>) — Имя квоты.<br> - <code class=syntax>quota_key</code> (<a href=../../../sql-reference/data-types/string/amp/ >String</a>) — Ключ квоты.<br> - <code class=syntax>is_current</code> (<a href=../../../sql-reference/data-types/int-uint/amp/#uint-ranges>UInt8</a>) — Квота используется для текущего пользователя.<br> - <code class=syntax>start_time</code> (<a href=../../../sql-reference/data-types/nullable/amp/ >Nullable</a>(<a href=../../../sql-reference/data-types/datetime/amp/ >DateTime</a>))) — Время начала расчета потребления ресурсов.<br> - <code class=syntax>end_time</code> (<a href=../../../sql-reference/data-types/nullable/amp/ >Nullable</a>(<a href=../../../sql-reference/data-types/datetime/amp/ >DateTime</a>))) — Время окончания расчета потребления ресурсов.<br> - <code class=syntax>duration</code> (<a href=../../../sql-reference/data-types/nullable/amp/ >Nullable</a>(<a href=../../../sql-reference/data-types/int-uint/amp/ >UInt32</a>)) — Длина временного интервала для расчета потребления ресурсов, в секундах.<br> - <code class=syntax>queries</code> (<a href=../../../sql-reference/data-types/nullable/amp/ >Nullable</a>(<a href=../../../sql-reference/data-types/int-uint/amp/ >UInt64</a>)) — Общее количество запросов на этом интервале.<br> - <code class=syntax>max_queries</code> (<a href=../../../sql-reference/data-types/nullable/amp/ >Nullable</a>(<a href=../../../sql-reference/data-types/int-uint/amp/ >UInt64</a>)) — Максимальное число запросов.<br> - <code class=syntax>errors</code> (<a href=../../../sql-reference/data-types/nullable/amp/ >Nullable</a>(<a href=../../../sql-reference/data-types/int-uint/amp/ >UInt64</a>)) — Число запросов, вызвавших ошибки.<br> - <code class=syntax>max_errors</code> (<a href=../../../sql-reference/data-types/nullable/amp/ >Nullable</a>(<a href=../../../sql-reference/data-types/int-uint/amp/ >UInt64</a>)) — Максимальное число ошибок.<br> - <code class=syntax>result_rows</code> (<a href=../../../sql-reference/data-types/nullable/amp/ >Nullable</a>(<a href=../../../sql-reference/data-types/int-uint/amp/ >UInt64</a>)) — The total number of rows given as a result.<br> - <code class=syntax>max_result_rows</code> (<a href=../../../sql-reference/data-types/nullable/amp/ >Nullable</a>(<a href=../../../sql-reference/data-types/int-uint/amp/ >UInt64</a>)) — Maximum of source rows read from tables.<br> - <code class=syntax>result_bytes</code> (<a href=../../../sql-reference/data-types/nullable/amp/ >Nullable</a>(<a href=../../../sql-reference/data-types/int-uint/amp/ >UInt64</a>)) — Объем оперативной памяти в байтах, используемый для хранения результата запроса.<br> - <code class=syntax>max_result_bytes</code> (<a href=../../../sql-reference/data-types/nullable/amp/ >Nullable</a>(<a href=../../../sql-reference/data-types/int-uint/amp/ >UInt64</a>)) — Максимальный объем оперативной памяти, используемый для хранения результата запроса, в байтах.<br> - <code class=syntax>read_rows</code> (<a href=../../../sql-reference/data-types/nullable/amp/ >Nullable</a>(<a href=../../../sql-reference/data-types/int-uint/amp/ >UInt64</a>)) — Общее число исходных строк, считываемых из таблиц для выполнения запроса на всех удаленных серверах.<br> - <code class=syntax>max_read_rows</code> (<a href=../../../sql-reference/data-types/nullable/amp/ >Nullable</a>(<a href=../../../sql-reference/data-types/int-uint/amp/ >UInt64</a>)) — Максимальное количество строк, считываемых из всех таблиц и табличных функций, участвующих в запросах.<br> - <code class=syntax>read_bytes</code> (<a href=../../../sql-reference/data-types/nullable/amp/ >Nullable</a>(<a href=../../../sql-reference/data-types/int-uint/amp/ >UInt64</a>)) — Общее количество байт, считанных из всех таблиц и табличных функций, участвующих в запросах.<br> - <code class=syntax>max_read_bytes</code> (<a href=../../../sql-reference/data-types/nullable/amp/ >Nullable</a>(<a href=../../../sql-reference/data-types/int-uint/amp/ >UInt64</a>)) — Максимальное количество байт, считываемых из всех таблиц и табличных функций.<br> - <code class=syntax>execution_time</code> (<a href=../../../sql-reference/data-types/nullable/amp/ >Nullable</a>(<a href=../../../sql-reference/data-types/float/amp/ >Float64</a>)) — Общее время выполнения запроса, в секундах.<br> - <code class=syntax>max_execution_time</code> (<a href=../../../sql-reference/data-types/nullable/amp/ >Nullable</a>(<a href=../../../sql-reference/data-types/float/amp/ >Float64</a>)) — Максимальное время выполнения запроса.</p><p><a href=https://clickhouse.tech/docs/ru/operations/system_tables/ target=_blank>Оригинальная статья</a> <!--hide--></p>
        </div>
      </div>
      <div class="row">
        <div class="col">
          
<div class="alert alert-light my-3">
  <p class="float-right mb-0">Рейтинг: RATING_VALUE - RATING_COUNT голосов</p>
  <span class="alert-heading display-6">Рейтинг статьи</span>
  <div id="rating-stars" class="display-6 mb-0"
     
  >RATING_STARS</div>
</div>

<div id="content-footer" class="text-muted pt-3 mb-5">
    <div class="float-md-right">©2016–2020 Yandex LLC</div>
    <div>Собрано из <a href="https://github.com/ClickHouse/ClickHouse/commit/782f2179ce4ad0b9a9c898a5f32557555b59e4d0" rel="external nofollow noreferrer" target="_blank" class="text-reset">782f2179ce</a>, опубликовано <span title="2018-07-16T18:50:55+03:00">2018-07-16</span>, изменено <span title="2020-07-14T09:57:39+03:00">2020-07-14</span>
    
    </div>
</div>

        </div>
      </div>
      <div id="to-full-website" class="row fixed-bottom text-center bg-white py-3">
        <div class="col">
          <a class="btn btn-lg btn-outline-orange" href="https://clickhouse.tech/docs/ru/operations/system-tables/">To full website</a>
        </div>
      </div>
    </div>
    <amp-analytics type="metrika">
      <script type="application/json">{
"vars": {
  "counterId": "18343495",
  "triggers": {
    "notBounce": {
      "on": "timer",
      "timerSpec": {
        "immediate": false,
        "interval": 15,
        "maxTimerLength": 16
      },
      "request": "notBounce"
    }
  }
}
}</script>
  </amp-analytics>
  </body>
</html>
