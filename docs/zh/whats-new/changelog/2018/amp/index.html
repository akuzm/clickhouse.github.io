










    



    



    



    
    






    <!doctype html>
<html ⚡ lang="zh">
  <head>
    <meta charset="utf-8">
    <script async src="https://cdn.ampproject.org/v0.js"></script>
    <title>2018 | ClickHouse文档</title>
    <link rel="canonical" href="https://clickhouse.tech/docs/zh/whats-new/changelog/2018/" />
    <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">
    
<script type="application/ld+json">[{
"@context": "http://schema.org",
"@type": "TechArticle",
"headline": "2018 | ClickHouse文档",
"mainEntityOfPage": "https://clickhouse.tech/docs/zh/whats-new/changelog/2018/",

"datePublished": "2020-04-08T17:22:25+03:00",
"dateModified": "2020-05-15T07:34:54+03:00",

"image": "https://clickhouse.tech/images/logo-209x60.png",
"author": {
  "@type": "Project",
  "name": "ClickHouse"
},
"publisher": {
  "@type": "Organization",
  "name": "Yandex LLC",
  "logo": {
    "@type": "ImageObject",
    "url": "https://clickhouse.tech/images/yandex.png",
    "width": 163,
    "height": 60
  }
}}, {
"@context": "http://schema.org",
"@type": "Episode",
"name": "2018 | ClickHouse文档",
"aggregateRating": {
  "@type": "AggregateRating",
  "ratingValue": RATING_VALUE,
  "ratingCount": RATING_COUNT
}
}]</script>

    
    <style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>
    <style amp-custom>:root{--blue:#007bff;--indigo:#6610f2;--purple:#6f42c1;--pink:#e83e8c;--red:#dc3545;--orange:#fd7e14;--yellow:#ffc107;--green:#28a745;--teal:#20c997;--cyan:#17a2b8;--white:#fff;--gray:#6c757d;--gray-dark:#343a40;--primary:#007bff;--secondary:#6c757d;--success:#28a745;--info:#17a2b8;--warning:#ffc107;--danger:#dc3545;--light:#f8f9fa;--dark:#343a40;--breakpoint-xs:0;--breakpoint-sm:576px;--breakpoint-md:768px;--breakpoint-lg:992px;--breakpoint-xl:1200px;--font-family-sans-serif:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";--font-family-monospace:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace}*,::after,::before{box-sizing:border-box}html{font-family:sans-serif;line-height:1.15;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent}footer{display:block}body{margin:0;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-size:1rem;font-weight:400;line-height:1.5;color:#212529;text-align:left;background-color:#fff}[tabindex="-1"]:focus:not(:focus-visible){outline:0}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:.5rem}p{margin-top:0;margin-bottom:1rem}dl,ul{margin-top:0;margin-bottom:1rem}ul ul{margin-bottom:0}dd{margin-bottom:.5rem;margin-left:0}b{font-weight:bolder}a{color:#007bff;text-decoration:none;background-color:transparent}a:hover{color:#0056b3;text-decoration:underline}a:not([href]){color:inherit;text-decoration:none}a:not([href]):hover{color:inherit;text-decoration:none}code{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:1em}img{vertical-align:middle;border-style:none}svg{overflow:hidden;vertical-align:middle}table{border-collapse:collapse}input,select{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}input{overflow:visible}select{text-transform:none}select{word-wrap:normal}[type=button],[type=reset],[type=submit]{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled){cursor:pointer}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner{padding:0;border-style:none}input[type=checkbox],input[type=radio]{box-sizing:border-box;padding:0}input[type=date],input[type=datetime-local],input[type=month],input[type=time]{-webkit-appearance:listbox}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:none}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}output{display:inline-block}[hidden]{display:none}.h1,.h2,.h3,.h4,.h5,.h6,h1,h2,h3,h4,h5,h6{margin-bottom:.5rem;font-weight:500;line-height:1.2}.h1,h1{font-size:2.5rem}.h2,h2{font-size:2rem}.h3,h3{font-size:1.75rem}.h4,h4{font-size:1.5rem}.h5,h5{font-size:1.25rem}.h6,h6{font-size:1rem}.lead{font-size:1.25rem;font-weight:300}.display-1{font-size:6rem;font-weight:300;line-height:1.2}.display-2{font-size:5.5rem;font-weight:300;line-height:1.2}.display-3{font-size:4.5rem;font-weight:300;line-height:1.2}.display-4{font-size:3.5rem;font-weight:300;line-height:1.2}.list-inline{padding-left:0;list-style:none}.img-fluid{max-width:100%;height:auto}code{font-size:87.5%;color:#e83e8c;word-wrap:break-word}a>code{color:inherit}.container{width:100%;padding-right:15px;padding-left:15px;margin-right:auto;margin-left:auto}@media(min-width:576px){.container{max-width:540px}}@media(min-width:768px){.container{max-width:720px}}@media(min-width:992px){.container{max-width:960px}}@media(min-width:1200px){.container{max-width:1140px}}.container-fluid,.container-lg,.container-md{width:100%;padding-right:15px;padding-left:15px;margin-right:auto;margin-left:auto}@media(min-width:576px){.container{max-width:540px}}@media(min-width:768px){.container,.container-md{max-width:720px}}@media(min-width:992px){.container,.container-lg,.container-md{max-width:960px}}@media(min-width:1200px){.container,.container-lg,.container-md{max-width:1140px}}.row{display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-right:-15px;margin-left:-15px}.col,.col-1,.col-10,.col-11,.col-12,.col-2,.col-3,.col-4,.col-5,.col-6,.col-7,.col-8,.col-9,.col-lg,.col-lg-1,.col-lg-10,.col-lg-11,.col-lg-12,.col-lg-2,.col-lg-3,.col-lg-4,.col-lg-5,.col-lg-6,.col-lg-7,.col-lg-8,.col-lg-9,.col-md,.col-md-1,.col-md-10,.col-md-11,.col-md-12,.col-md-2,.col-md-3,.col-md-4,.col-md-5,.col-md-6,.col-md-7,.col-md-8,.col-md-9{position:relative;width:100%;padding-right:15px;padding-left:15px}.col{-ms-flex-preferred-size:0;flex-basis:0;-ms-flex-positive:1;flex-grow:1;max-width:100%}.col-1{-ms-flex:0 0 8.333333%;flex:0 0 8.333333%;max-width:8.333333%}.col-2{-ms-flex:0 0 16.666667%;flex:0 0 16.666667%;max-width:16.666667%}.col-3{-ms-flex:0 0 25%;flex:0 0 25%;max-width:25%}.col-4{-ms-flex:0 0 33.333333%;flex:0 0 33.333333%;max-width:33.333333%}.col-5{-ms-flex:0 0 41.666667%;flex:0 0 41.666667%;max-width:41.666667%}.col-6{-ms-flex:0 0 50%;flex:0 0 50%;max-width:50%}.col-7{-ms-flex:0 0 58.333333%;flex:0 0 58.333333%;max-width:58.333333%}.col-8{-ms-flex:0 0 66.666667%;flex:0 0 66.666667%;max-width:66.666667%}.col-9{-ms-flex:0 0 75%;flex:0 0 75%;max-width:75%}.col-10{-ms-flex:0 0 83.333333%;flex:0 0 83.333333%;max-width:83.333333%}.col-11{-ms-flex:0 0 91.666667%;flex:0 0 91.666667%;max-width:91.666667%}.col-12{-ms-flex:0 0 100%;flex:0 0 100%;max-width:100%}.order-last{-ms-flex-order:13;order:13}.order-0{-ms-flex-order:0;order:0}.order-1{-ms-flex-order:1;order:1}.order-2{-ms-flex-order:2;order:2}.order-3{-ms-flex-order:3;order:3}.order-4{-ms-flex-order:4;order:4}.order-5{-ms-flex-order:5;order:5}.order-6{-ms-flex-order:6;order:6}.order-7{-ms-flex-order:7;order:7}.order-8{-ms-flex-order:8;order:8}.order-9{-ms-flex-order:9;order:9}.order-10{-ms-flex-order:10;order:10}.order-11{-ms-flex-order:11;order:11}.order-12{-ms-flex-order:12;order:12}.offset-1{margin-left:8.333333%}.offset-2{margin-left:16.666667%}.offset-3{margin-left:25%}.offset-4{margin-left:33.333333%}.offset-5{margin-left:41.666667%}.offset-6{margin-left:50%}.offset-7{margin-left:58.333333%}.offset-8{margin-left:66.666667%}.offset-9{margin-left:75%}.offset-10{margin-left:83.333333%}.offset-11{margin-left:91.666667%}@media(min-width:768px){.col-md{-ms-flex-preferred-size:0;flex-basis:0;-ms-flex-positive:1;flex-grow:1;max-width:100%}.col-md-1{-ms-flex:0 0 8.333333%;flex:0 0 8.333333%;max-width:8.333333%}.col-md-2{-ms-flex:0 0 16.666667%;flex:0 0 16.666667%;max-width:16.666667%}.col-md-3{-ms-flex:0 0 25%;flex:0 0 25%;max-width:25%}.col-md-4{-ms-flex:0 0 33.333333%;flex:0 0 33.333333%;max-width:33.333333%}.col-md-5{-ms-flex:0 0 41.666667%;flex:0 0 41.666667%;max-width:41.666667%}.col-md-6{-ms-flex:0 0 50%;flex:0 0 50%;max-width:50%}.col-md-7{-ms-flex:0 0 58.333333%;flex:0 0 58.333333%;max-width:58.333333%}.col-md-8{-ms-flex:0 0 66.666667%;flex:0 0 66.666667%;max-width:66.666667%}.col-md-9{-ms-flex:0 0 75%;flex:0 0 75%;max-width:75%}.col-md-10{-ms-flex:0 0 83.333333%;flex:0 0 83.333333%;max-width:83.333333%}.col-md-11{-ms-flex:0 0 91.666667%;flex:0 0 91.666667%;max-width:91.666667%}.col-md-12{-ms-flex:0 0 100%;flex:0 0 100%;max-width:100%}.order-md-last{-ms-flex-order:13;order:13}.order-md-0{-ms-flex-order:0;order:0}.order-md-1{-ms-flex-order:1;order:1}.order-md-2{-ms-flex-order:2;order:2}.order-md-3{-ms-flex-order:3;order:3}.order-md-4{-ms-flex-order:4;order:4}.order-md-5{-ms-flex-order:5;order:5}.order-md-6{-ms-flex-order:6;order:6}.order-md-7{-ms-flex-order:7;order:7}.order-md-8{-ms-flex-order:8;order:8}.order-md-9{-ms-flex-order:9;order:9}.order-md-10{-ms-flex-order:10;order:10}.order-md-11{-ms-flex-order:11;order:11}.order-md-12{-ms-flex-order:12;order:12}.offset-md-0{margin-left:0}.offset-md-1{margin-left:8.333333%}.offset-md-2{margin-left:16.666667%}.offset-md-3{margin-left:25%}.offset-md-4{margin-left:33.333333%}.offset-md-5{margin-left:41.666667%}.offset-md-6{margin-left:50%}.offset-md-7{margin-left:58.333333%}.offset-md-8{margin-left:66.666667%}.offset-md-9{margin-left:75%}.offset-md-10{margin-left:83.333333%}.offset-md-11{margin-left:91.666667%}}@media(min-width:992px){.col-lg{-ms-flex-preferred-size:0;flex-basis:0;-ms-flex-positive:1;flex-grow:1;max-width:100%}.col-lg-1{-ms-flex:0 0 8.333333%;flex:0 0 8.333333%;max-width:8.333333%}.col-lg-2{-ms-flex:0 0 16.666667%;flex:0 0 16.666667%;max-width:16.666667%}.col-lg-3{-ms-flex:0 0 25%;flex:0 0 25%;max-width:25%}.col-lg-4{-ms-flex:0 0 33.333333%;flex:0 0 33.333333%;max-width:33.333333%}.col-lg-5{-ms-flex:0 0 41.666667%;flex:0 0 41.666667%;max-width:41.666667%}.col-lg-6{-ms-flex:0 0 50%;flex:0 0 50%;max-width:50%}.col-lg-7{-ms-flex:0 0 58.333333%;flex:0 0 58.333333%;max-width:58.333333%}.col-lg-8{-ms-flex:0 0 66.666667%;flex:0 0 66.666667%;max-width:66.666667%}.col-lg-9{-ms-flex:0 0 75%;flex:0 0 75%;max-width:75%}.col-lg-10{-ms-flex:0 0 83.333333%;flex:0 0 83.333333%;max-width:83.333333%}.col-lg-11{-ms-flex:0 0 91.666667%;flex:0 0 91.666667%;max-width:91.666667%}.col-lg-12{-ms-flex:0 0 100%;flex:0 0 100%;max-width:100%}.order-lg-last{-ms-flex-order:13;order:13}.order-lg-0{-ms-flex-order:0;order:0}.order-lg-1{-ms-flex-order:1;order:1}.order-lg-2{-ms-flex-order:2;order:2}.order-lg-3{-ms-flex-order:3;order:3}.order-lg-4{-ms-flex-order:4;order:4}.order-lg-5{-ms-flex-order:5;order:5}.order-lg-6{-ms-flex-order:6;order:6}.order-lg-7{-ms-flex-order:7;order:7}.order-lg-8{-ms-flex-order:8;order:8}.order-lg-9{-ms-flex-order:9;order:9}.order-lg-10{-ms-flex-order:10;order:10}.order-lg-11{-ms-flex-order:11;order:11}.order-lg-12{-ms-flex-order:12;order:12}.offset-lg-0{margin-left:0}.offset-lg-1{margin-left:8.333333%}.offset-lg-2{margin-left:16.666667%}.offset-lg-3{margin-left:25%}.offset-lg-4{margin-left:33.333333%}.offset-lg-5{margin-left:41.666667%}.offset-lg-6{margin-left:50%}.offset-lg-7{margin-left:58.333333%}.offset-lg-8{margin-left:66.666667%}.offset-lg-9{margin-left:75%}.offset-lg-10{margin-left:83.333333%}.offset-lg-11{margin-left:91.666667%}}.table{width:100%;margin-bottom:1rem;color:#212529}.table-primary{background-color:#b8daff}.table-light{background-color:#fdfdfe}.table-dark{background-color:#c6c8ca}.table-dark{color:#fff;background-color:#343a40}.form-group{margin-bottom:1rem}.form-text{display:block;margin-top:.25rem}.form-row{display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-right:-5px;margin-left:-5px}.form-row>.col,.form-row>[class*=col-]{padding-right:5px;padding-left:5px}.form-check{position:relative;display:block;padding-left:1.25rem}.form-check-input{position:absolute;margin-top:.3rem;margin-left:-1.25rem}.form-check-inline{display:-ms-inline-flexbox;display:inline-flex;-ms-flex-align:center;align-items:center;padding-left:0;margin-right:.75rem}.form-check-inline .form-check-input{position:static;margin-top:0;margin-right:.3125rem;margin-left:0}.invalid-feedback{display:none;width:100%;margin-top:.25rem;font-size:80%;color:#dc3545}.is-invalid~.invalid-feedback{display:block}.custom-select.is-invalid{border-color:#dc3545;padding-right:calc(.75em+2.3125rem);background:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='4' height='5' viewBox='0 0 4 5'%3e%3cpath fill='%23343a40' d='M2 0L0 2h4zm0 5L0 3h4z'/%3e%3c/svg%3e") no-repeat right .75rem center/8px 10px,url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' fill='none' stroke='%23dc3545' viewBox='0 0 12 12'%3e%3ccircle cx='6' cy='6' r='4.5'/%3e%3cpath stroke-linejoin='round' d='M5.8 3.6h.4L6 6.5z'/%3e%3ccircle cx='6' cy='8.2' r='.6' fill='%23dc3545' stroke='none'/%3e%3c/svg%3e") #fff no-repeat center right 1.75rem/calc(.75em+.375rem) calc(.75em+.375rem)}.custom-select.is-invalid:focus{border-color:#dc3545;box-shadow:0 0 0 .2rem rgba(220,53,69,.25)}.form-check-input.is-invalid~.invalid-feedback{display:block}.form-inline{display:-ms-flexbox;display:flex;-ms-flex-flow:row wrap;flex-flow:row wrap;-ms-flex-align:center;align-items:center}.form-inline .form-check{width:100%}@media(min-width:576px){.form-inline .form-group{display:-ms-flexbox;display:flex;-ms-flex:0 0 auto;flex:0 0 auto;-ms-flex-flow:row wrap;flex-flow:row wrap;-ms-flex-align:center;align-items:center;margin-bottom:0}.form-inline .custom-select,.form-inline .input-group{width:auto}.form-inline .form-check{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:auto;padding-left:0}.form-inline .form-check-input{position:relative;-ms-flex-negative:0;flex-shrink:0;margin-top:0;margin-right:.25rem;margin-left:0}}.btn{display:inline-block;font-weight:400;color:#212529;text-align:center;vertical-align:middle;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-color:transparent;border:1px solid transparent;padding:.375rem .75rem;font-size:1rem;line-height:1.5;border-radius:.25rem;transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out}@media(prefers-reduced-motion:reduce){.btn{transition:none}}.btn:hover{color:#212529;text-decoration:none}.btn:focus{outline:0;box-shadow:0 0 0 .2rem rgba(0,123,255,.25)}.btn:disabled{opacity:.65}.btn-primary{color:#fff;background-color:#007bff;border-color:#007bff}.btn-primary:hover{color:#fff;background-color:#0069d9;border-color:#0062cc}.btn-primary:focus{color:#fff;background-color:#0069d9;border-color:#0062cc;box-shadow:0 0 0 .2rem rgba(38,143,255,.5)}.btn-primary:disabled{color:#fff;background-color:#007bff;border-color:#007bff}.btn-light{color:#212529;background-color:#f8f9fa;border-color:#f8f9fa}.btn-light:hover{color:#212529;background-color:#e2e6ea;border-color:#dae0e5}.btn-light:focus{color:#212529;background-color:#e2e6ea;border-color:#dae0e5;box-shadow:0 0 0 .2rem rgba(216,217,219,.5)}.btn-light:disabled{color:#212529;background-color:#f8f9fa;border-color:#f8f9fa}.btn-dark{color:#fff;background-color:#343a40;border-color:#343a40}.btn-dark:hover{color:#fff;background-color:#23272b;border-color:#1d2124}.btn-dark:focus{color:#fff;background-color:#23272b;border-color:#1d2124;box-shadow:0 0 0 .2rem rgba(82,88,93,.5)}.btn-dark:disabled{color:#fff;background-color:#343a40;border-color:#343a40}.btn-outline-primary{color:#007bff;border-color:#007bff}.btn-outline-primary:hover{color:#fff;background-color:#007bff;border-color:#007bff}.btn-outline-primary:focus{box-shadow:0 0 0 .2rem rgba(0,123,255,.5)}.btn-outline-primary:disabled{color:#007bff;background-color:transparent}.btn-outline-light{color:#f8f9fa;border-color:#f8f9fa}.btn-outline-light:hover{color:#212529;background-color:#f8f9fa;border-color:#f8f9fa}.btn-outline-light:focus{box-shadow:0 0 0 .2rem rgba(248,249,250,.5)}.btn-outline-light:disabled{color:#f8f9fa;background-color:transparent}.btn-outline-dark{color:#343a40;border-color:#343a40}.btn-outline-dark:hover{color:#fff;background-color:#343a40;border-color:#343a40}.btn-outline-dark:focus{box-shadow:0 0 0 .2rem rgba(52,58,64,.5)}.btn-outline-dark:disabled{color:#343a40;background-color:transparent}.btn-link{font-weight:400;color:#007bff;text-decoration:none}.btn-link:hover{color:#0056b3;text-decoration:underline}.btn-link:focus{text-decoration:underline;box-shadow:none}.btn-link:disabled{color:#6c757d;pointer-events:none}.btn-group-lg>.btn,.btn-lg{padding:.5rem 1rem;font-size:1.25rem;line-height:1.5;border-radius:.3rem}.btn-block{display:block;width:100%}.btn-block+.btn-block{margin-top:.5rem}input[type=button].btn-block,input[type=reset].btn-block,input[type=submit].btn-block{width:100%}.btn-group,.btn-group-vertical{position:relative;display:-ms-inline-flexbox;display:inline-flex;vertical-align:middle}.btn-group-vertical>.btn,.btn-group>.btn{position:relative;-ms-flex:1 1 auto;flex:1 1 auto}.btn-group-vertical>.btn:hover,.btn-group>.btn:hover{z-index:1}.btn-group-vertical>.btn:active,.btn-group-vertical>.btn:focus,.btn-group>.btn:active,.btn-group>.btn:focus{z-index:1}.btn-group>.btn-group:not(:first-child),.btn-group>.btn:not(:first-child){margin-left:-1px}.btn-group>.btn-group:not(:last-child)>.btn{border-top-right-radius:0;border-bottom-right-radius:0}.btn-group>.btn-group:not(:first-child)>.btn,.btn-group>.btn:not(:first-child){border-top-left-radius:0;border-bottom-left-radius:0}.btn-group-vertical{-ms-flex-direction:column;flex-direction:column;-ms-flex-align:start;align-items:flex-start;-ms-flex-pack:center;justify-content:center}.btn-group-vertical>.btn,.btn-group-vertical>.btn-group{width:100%}.btn-group-vertical>.btn-group:not(:first-child),.btn-group-vertical>.btn:not(:first-child){margin-top:-1px}.btn-group-vertical>.btn-group:not(:last-child)>.btn{border-bottom-right-radius:0;border-bottom-left-radius:0}.btn-group-vertical>.btn-group:not(:first-child)>.btn,.btn-group-vertical>.btn:not(:first-child){border-top-left-radius:0;border-top-right-radius:0}.input-group{position:relative;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;-ms-flex-align:stretch;align-items:stretch;width:100%}.input-group>.custom-file,.input-group>.custom-select{position:relative;-ms-flex:1 1 0;flex:1 1 0;min-width:0;margin-bottom:0}.input-group>.custom-file+.custom-file,.input-group>.custom-file+.custom-select,.input-group>.custom-select+.custom-file,.input-group>.custom-select+.custom-select{margin-left:-1px}.input-group>.custom-select:focus{z-index:3}.input-group>.custom-file .custom-file-input:focus{z-index:4}.input-group>.custom-select:not(:last-child){border-top-right-radius:0;border-bottom-right-radius:0}.input-group>.custom-select:not(:first-child){border-top-left-radius:0;border-bottom-left-radius:0}.input-group>.custom-file{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}.input-group-text{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;padding:.375rem .75rem;margin-bottom:0;font-size:1rem;font-weight:400;line-height:1.5;color:#495057;text-align:center;white-space:nowrap;background-color:#e9ecef;border:1px solid #ced4da;border-radius:.25rem}.input-group-text input[type=checkbox],.input-group-text input[type=radio]{margin-top:0}.input-group-lg>.custom-select{height:calc(1.5em+1rem+2px)}.input-group-lg>.custom-select{padding:.5rem 1rem;font-size:1.25rem;line-height:1.5;border-radius:.3rem}.input-group-lg>.custom-select{padding-right:1.75rem}.custom-select{display:inline-block;width:100%;height:calc(1.5em+.75rem+2px);padding:.375rem 1.75rem .375rem .75rem;font-size:1rem;font-weight:400;line-height:1.5;color:#495057;vertical-align:middle;background:#fff url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='4' height='5' viewBox='0 0 4 5'%3e%3cpath fill='%23343a40' d='M2 0L0 2h4zm0 5L0 3h4z'/%3e%3c/svg%3e") no-repeat right .75rem center/8px 10px;border:1px solid #ced4da;border-radius:.25rem;-webkit-appearance:none;-moz-appearance:none;appearance:none}.custom-select:focus{border-color:#80bdff;outline:0;box-shadow:0 0 0 .2rem rgba(0,123,255,.25)}.custom-select:focus::-ms-value{color:#495057;background-color:#fff}.custom-select[multiple],.custom-select[size]:not([size="1"]){height:auto;padding-right:.75rem;background-image:none}.custom-select:disabled{color:#6c757d;background-color:#e9ecef}.custom-select::-ms-expand{display:none}.custom-select:-moz-focusring{color:transparent;text-shadow:0 0 0 #495057}.custom-select-lg{height:calc(1.5em+1rem+2px);padding-top:.5rem;padding-bottom:.5rem;padding-left:1rem;font-size:1.25rem}.custom-file{position:relative;display:inline-block;width:100%;height:calc(1.5em+.75rem+2px);margin-bottom:0}.custom-file-input{position:relative;z-index:2;width:100%;height:calc(1.5em+.75rem+2px);margin:0;opacity:0}.custom-range{width:100%;height:1.4rem;padding:0;background-color:transparent;-webkit-appearance:none;-moz-appearance:none;appearance:none}.custom-range:focus{outline:0}.custom-range:focus::-webkit-slider-thumb{box-shadow:0 0 0 1px #fff,0 0 0 .2rem rgba(0,123,255,.25)}.custom-range:focus::-moz-range-thumb{box-shadow:0 0 0 1px #fff,0 0 0 .2rem rgba(0,123,255,.25)}.custom-range:focus::-ms-thumb{box-shadow:0 0 0 1px #fff,0 0 0 .2rem rgba(0,123,255,.25)}.custom-range::-moz-focus-outer{border:0}.custom-range::-webkit-slider-thumb{width:1rem;height:1rem;margin-top:-.25rem;background-color:#007bff;border:0;border-radius:1rem;-webkit-transition:background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;transition:background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;-webkit-appearance:none;appearance:none}@media(prefers-reduced-motion:reduce){.custom-range::-webkit-slider-thumb{-webkit-transition:none;transition:none}}.custom-range::-webkit-slider-thumb:active{background-color:#b3d7ff}.custom-range::-webkit-slider-runnable-track{width:100%;height:.5rem;color:transparent;cursor:pointer;background-color:#dee2e6;border-color:transparent;border-radius:1rem}.custom-range::-moz-range-thumb{width:1rem;height:1rem;background-color:#007bff;border:0;border-radius:1rem;-moz-transition:background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;transition:background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;-moz-appearance:none;appearance:none}@media(prefers-reduced-motion:reduce){.custom-range::-moz-range-thumb{-moz-transition:none;transition:none}}.custom-range::-moz-range-thumb:active{background-color:#b3d7ff}.custom-range::-moz-range-track{width:100%;height:.5rem;color:transparent;cursor:pointer;background-color:#dee2e6;border-color:transparent;border-radius:1rem}.custom-range::-ms-thumb{width:1rem;height:1rem;margin-top:0;margin-right:.2rem;margin-left:.2rem;background-color:#007bff;border:0;border-radius:1rem;-ms-transition:background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;transition:background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;appearance:none}@media(prefers-reduced-motion:reduce){.custom-range::-ms-thumb{-ms-transition:none;transition:none}}.custom-range::-ms-thumb:active{background-color:#b3d7ff}.custom-range::-ms-track{width:100%;height:.5rem;color:transparent;cursor:pointer;background-color:transparent;border-color:transparent;border-width:.5rem}.custom-range::-ms-fill-lower{background-color:#dee2e6;border-radius:1rem}.custom-range::-ms-fill-upper{margin-right:15px;background-color:#dee2e6;border-radius:1rem}.custom-range:disabled::-webkit-slider-thumb{background-color:#adb5bd}.custom-range:disabled::-webkit-slider-runnable-track{cursor:default}.custom-range:disabled::-moz-range-thumb{background-color:#adb5bd}.custom-range:disabled::-moz-range-track{cursor:default}.custom-range:disabled::-ms-thumb{background-color:#adb5bd}.custom-select{transition:background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out}@media(prefers-reduced-motion:reduce){.custom-select{transition:none}}.alert{position:relative;padding:.75rem 1.25rem;margin-bottom:1rem;border:1px solid transparent;border-radius:.25rem}.alert-heading{color:inherit}.alert-link{font-weight:700}.alert-primary{color:#004085;background-color:#cce5ff;border-color:#b8daff}.alert-primary .alert-link{color:#002752}.alert-light{color:#818182;background-color:#fefefe;border-color:#fdfdfe}.alert-light .alert-link{color:#686868}.alert-dark{color:#1b1e21;background-color:#d6d8d9;border-color:#c6c8ca}.alert-dark .alert-link{color:#040505}@-webkit-keyframes progress-bar-stripes{from{background-position:1rem 0}to{background-position:0 0}}@keyframes progress-bar-stripes{from{background-position:1rem 0}to{background-position:0 0}}.list-group{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;padding-left:0;margin-bottom:0}.close{float:right;font-size:1.5rem;font-weight:700;line-height:1;color:#000;text-shadow:0 1px 0 #fff;opacity:.5}.close:hover{color:#000;text-decoration:none}@-webkit-keyframes spinner-border{to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes spinner-border{to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-webkit-keyframes spinner-grow{0%{-webkit-transform:scale(0);transform:scale(0)}50%{opacity:1}}@keyframes spinner-grow{0%{-webkit-transform:scale(0);transform:scale(0)}50%{opacity:1}}.bg-primary{background-color:#007bff}a.bg-primary:focus,a.bg-primary:hover{background-color:#0062cc}.bg-light{background-color:#f8f9fa}a.bg-light:focus,a.bg-light:hover{background-color:#dae0e5}.bg-dark{background-color:#343a40}a.bg-dark:focus,a.bg-dark:hover{background-color:#1d2124}.bg-white{background-color:#fff}.d-none{display:none}.d-inline{display:inline}.d-inline-block{display:inline-block}.d-block{display:block}.d-table{display:table}.d-table-row{display:table-row}@media(min-width:768px){.d-md-none{display:none}.d-md-inline{display:inline}.d-md-inline-block{display:inline-block}.d-md-block{display:block}.d-md-table{display:table}.d-md-table-row{display:table-row}}@media(min-width:992px){.d-lg-none{display:none}.d-lg-inline{display:inline}.d-lg-inline-block{display:inline-block}.d-lg-block{display:block}.d-lg-table{display:table}.d-lg-table-row{display:table-row}}.float-left{float:left}.float-right{float:right}.float-none{float:none}@media(min-width:768px){.float-md-left{float:left}.float-md-right{float:right}.float-md-none{float:none}}@media(min-width:992px){.float-lg-left{float:left}.float-lg-right{float:right}.float-lg-none{float:none}}.overflow-hidden{overflow:hidden}.fixed-top{position:fixed;top:0;right:0;left:0;z-index:1030}.fixed-bottom{position:fixed;right:0;bottom:0;left:0;z-index:1030}.h-25{height:25%}.h-50{height:50%}.h-75{height:75%}.h-100{height:100%}.m-0{margin:0}.my-0{margin-top:0}.mr-0{margin-right:0}.mb-0,.my-0{margin-bottom:0}.m-1{margin:.25rem}.my-1{margin-top:.25rem}.mr-1{margin-right:.25rem}.mb-1,.my-1{margin-bottom:.25rem}.m-2{margin:.5rem}.my-2{margin-top:.5rem}.mr-2{margin-right:.5rem}.mb-2,.my-2{margin-bottom:.5rem}.m-3{margin:1rem}.my-3{margin-top:1rem}.mr-3{margin-right:1rem}.mb-3,.my-3{margin-bottom:1rem}.m-4{margin:1.5rem}.my-4{margin-top:1.5rem}.mr-4{margin-right:1.5rem}.mb-4,.my-4{margin-bottom:1.5rem}.m-5{margin:3rem}.my-5{margin-top:3rem}.mr-5{margin-right:3rem}.mb-5,.my-5{margin-bottom:3rem}.p-0{padding:0}.pt-0,.py-0{padding-top:0}.pb-0,.py-0{padding-bottom:0}.p-1{padding:.25rem}.pt-1,.py-1{padding-top:.25rem}.pb-1,.py-1{padding-bottom:.25rem}.p-2{padding:.5rem}.pt-2,.py-2{padding-top:.5rem}.pb-2,.py-2{padding-bottom:.5rem}.p-3{padding:1rem}.pt-3,.py-3{padding-top:1rem}.pb-3,.py-3{padding-bottom:1rem}.p-4{padding:1.5rem}.pt-4,.py-4{padding-top:1.5rem}.pb-4,.py-4{padding-bottom:1.5rem}.p-5{padding:3rem}.pt-5,.py-5{padding-top:3rem}.pb-5,.py-5{padding-bottom:3rem}.m-n1{margin:-.25rem}.my-n1{margin-top:-.25rem}.mr-n1{margin-right:-.25rem}.mb-n1,.my-n1{margin-bottom:-.25rem}.m-n2{margin:-.5rem}.my-n2{margin-top:-.5rem}.mr-n2{margin-right:-.5rem}.mb-n2,.my-n2{margin-bottom:-.5rem}.m-n3{margin:-1rem}.my-n3{margin-top:-1rem}.mr-n3{margin-right:-1rem}.mb-n3,.my-n3{margin-bottom:-1rem}.m-n4{margin:-1.5rem}.my-n4{margin-top:-1.5rem}.mr-n4{margin-right:-1.5rem}.mb-n4,.my-n4{margin-bottom:-1.5rem}.m-n5{margin:-3rem}.my-n5{margin-top:-3rem}.mr-n5{margin-right:-3rem}.mb-n5,.my-n5{margin-bottom:-3rem}@media(min-width:768px){.m-md-0{margin:0}.my-md-0{margin-top:0}.mr-md-0{margin-right:0}.mb-md-0,.my-md-0{margin-bottom:0}.m-md-1{margin:.25rem}.my-md-1{margin-top:.25rem}.mr-md-1{margin-right:.25rem}.mb-md-1,.my-md-1{margin-bottom:.25rem}.m-md-2{margin:.5rem}.my-md-2{margin-top:.5rem}.mr-md-2{margin-right:.5rem}.mb-md-2,.my-md-2{margin-bottom:.5rem}.m-md-3{margin:1rem}.my-md-3{margin-top:1rem}.mr-md-3{margin-right:1rem}.mb-md-3,.my-md-3{margin-bottom:1rem}.m-md-4{margin:1.5rem}.my-md-4{margin-top:1.5rem}.mr-md-4{margin-right:1.5rem}.mb-md-4,.my-md-4{margin-bottom:1.5rem}.m-md-5{margin:3rem}.my-md-5{margin-top:3rem}.mr-md-5{margin-right:3rem}.mb-md-5,.my-md-5{margin-bottom:3rem}.p-md-0{padding:0}.pt-md-0,.py-md-0{padding-top:0}.pb-md-0,.py-md-0{padding-bottom:0}.p-md-1{padding:.25rem}.pt-md-1,.py-md-1{padding-top:.25rem}.pb-md-1,.py-md-1{padding-bottom:.25rem}.p-md-2{padding:.5rem}.pt-md-2,.py-md-2{padding-top:.5rem}.pb-md-2,.py-md-2{padding-bottom:.5rem}.p-md-3{padding:1rem}.pt-md-3,.py-md-3{padding-top:1rem}.pb-md-3,.py-md-3{padding-bottom:1rem}.p-md-4{padding:1.5rem}.pt-md-4,.py-md-4{padding-top:1.5rem}.pb-md-4,.py-md-4{padding-bottom:1.5rem}.p-md-5{padding:3rem}.pt-md-5,.py-md-5{padding-top:3rem}.pb-md-5,.py-md-5{padding-bottom:3rem}.m-md-n1{margin:-.25rem}.my-md-n1{margin-top:-.25rem}.mr-md-n1{margin-right:-.25rem}.mb-md-n1,.my-md-n1{margin-bottom:-.25rem}.m-md-n2{margin:-.5rem}.my-md-n2{margin-top:-.5rem}.mr-md-n2{margin-right:-.5rem}.mb-md-n2,.my-md-n2{margin-bottom:-.5rem}.m-md-n3{margin:-1rem}.my-md-n3{margin-top:-1rem}.mr-md-n3{margin-right:-1rem}.mb-md-n3,.my-md-n3{margin-bottom:-1rem}.m-md-n4{margin:-1.5rem}.my-md-n4{margin-top:-1.5rem}.mr-md-n4{margin-right:-1.5rem}.mb-md-n4,.my-md-n4{margin-bottom:-1.5rem}.m-md-n5{margin:-3rem}.my-md-n5{margin-top:-3rem}.mr-md-n5{margin-right:-3rem}.mb-md-n5,.my-md-n5{margin-bottom:-3rem}}@media(min-width:992px){.m-lg-0{margin:0}.my-lg-0{margin-top:0}.mr-lg-0{margin-right:0}.mb-lg-0,.my-lg-0{margin-bottom:0}.m-lg-1{margin:.25rem}.my-lg-1{margin-top:.25rem}.mr-lg-1{margin-right:.25rem}.mb-lg-1,.my-lg-1{margin-bottom:.25rem}.m-lg-2{margin:.5rem}.my-lg-2{margin-top:.5rem}.mr-lg-2{margin-right:.5rem}.mb-lg-2,.my-lg-2{margin-bottom:.5rem}.m-lg-3{margin:1rem}.my-lg-3{margin-top:1rem}.mr-lg-3{margin-right:1rem}.mb-lg-3,.my-lg-3{margin-bottom:1rem}.m-lg-4{margin:1.5rem}.my-lg-4{margin-top:1.5rem}.mr-lg-4{margin-right:1.5rem}.mb-lg-4,.my-lg-4{margin-bottom:1.5rem}.m-lg-5{margin:3rem}.my-lg-5{margin-top:3rem}.mr-lg-5{margin-right:3rem}.mb-lg-5,.my-lg-5{margin-bottom:3rem}.p-lg-0{padding:0}.pt-lg-0,.py-lg-0{padding-top:0}.pb-lg-0,.py-lg-0{padding-bottom:0}.p-lg-1{padding:.25rem}.pt-lg-1,.py-lg-1{padding-top:.25rem}.pb-lg-1,.py-lg-1{padding-bottom:.25rem}.p-lg-2{padding:.5rem}.pt-lg-2,.py-lg-2{padding-top:.5rem}.pb-lg-2,.py-lg-2{padding-bottom:.5rem}.p-lg-3{padding:1rem}.pt-lg-3,.py-lg-3{padding-top:1rem}.pb-lg-3,.py-lg-3{padding-bottom:1rem}.p-lg-4{padding:1.5rem}.pt-lg-4,.py-lg-4{padding-top:1.5rem}.pb-lg-4,.py-lg-4{padding-bottom:1.5rem}.p-lg-5{padding:3rem}.pt-lg-5,.py-lg-5{padding-top:3rem}.pb-lg-5,.py-lg-5{padding-bottom:3rem}.m-lg-n1{margin:-.25rem}.my-lg-n1{margin-top:-.25rem}.mr-lg-n1{margin-right:-.25rem}.mb-lg-n1,.my-lg-n1{margin-bottom:-.25rem}.m-lg-n2{margin:-.5rem}.my-lg-n2{margin-top:-.5rem}.mr-lg-n2{margin-right:-.5rem}.mb-lg-n2,.my-lg-n2{margin-bottom:-.5rem}.m-lg-n3{margin:-1rem}.my-lg-n3{margin-top:-1rem}.mr-lg-n3{margin-right:-1rem}.mb-lg-n3,.my-lg-n3{margin-bottom:-1rem}.m-lg-n4{margin:-1.5rem}.my-lg-n4{margin-top:-1.5rem}.mr-lg-n4{margin-right:-1.5rem}.mb-lg-n4,.my-lg-n4{margin-bottom:-1.5rem}.m-lg-n5{margin:-3rem}.my-lg-n5{margin-top:-3rem}.mr-lg-n5{margin-right:-3rem}.mb-lg-n5,.my-lg-n5{margin-bottom:-3rem}}.text-truncate{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.text-left{text-align:left}.text-right{text-align:right}.text-center{text-align:center}@media(min-width:768px){.text-md-left{text-align:left}.text-md-right{text-align:right}.text-md-center{text-align:center}}@media(min-width:992px){.text-lg-left{text-align:left}.text-lg-right{text-align:right}.text-lg-center{text-align:center}}.text-white{color:#fff}.text-primary{color:#007bff}a.text-primary:focus,a.text-primary:hover{color:#0056b3}.text-light{color:#f8f9fa}a.text-light:focus,a.text-light:hover{color:#cbd3da}.text-dark{color:#343a40}a.text-dark:focus,a.text-dark:hover{color:#121416}.text-body{color:#212529}.text-muted{color:#6c757d}.text-black-50{color:rgba(0,0,0,.5)}.text-white-50{color:rgba(255,255,255,.5)}.text-decoration-none{text-decoration:none}.text-reset{color:inherit}.visible{visibility:visible}@media print{*,::after,::before{text-shadow:none;box-shadow:none}a:not(.btn){text-decoration:underline}img{page-break-inside:avoid}h2,h3,p{orphans:3;widows:3}h2,h3{page-break-after:avoid}@page{size:a3}body{min-width:992px}.container{min-width:992px}.table{border-collapse:collapse}.table-dark{color:inherit}}@-webkit-keyframes sbx-reset-in{0%{-webkit-transform:translate3d(-20%,0,0);transform:translate3d(-20%,0,0);opacity:0}100%{-webkit-transform:none;transform:none;opacity:1}}@keyframes sbx-reset-in{0%{-webkit-transform:translate3d(-20%,0,0);transform:translate3d(-20%,0,0);opacity:0}100%{-webkit-transform:none;transform:none;opacity:1}}body{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Noto Sans","Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji"}a:link,a:visited{color:#f14600;text-decoration:none}a:active,a:hover{text-decoration:underline}.btn:disabled{cursor:default;opacity:.4}#logo-text{width:180px;margin-left:12px}.display-5{font-size:2rem;font-weight:300;line-height:1.2}.display-6{font-size:1.75rem;font-weight:300;line-height:1.2}.bg-dark-alt,.bg-dark-alt:focus{background:#36363f}.bg-orange,.bg-orange:focus{background:#f14600}.text-dark-alt{color:#36363f}.btn-dark-alt{background:#36363f}.btn-dark-alt:focus{background:#36363f}.btn-outline-orange{border-color:#f14600;color:#f14600}.btn-orange,.btn-outline-orange:hover{background:#f14600;color:#fff}.btn:active,.btn:hover{text-decoration:none}.text-orange{color:#f14600}.bg-number{position:absolute;font-size:900%;font-weight:700;color:rgba(241,70,0,.1);line-height:1;margin-top:-1rem}.headerlink{text-decoration:none;margin-left:.5rem}body[data-spy] #content{overflow-x:scroll}#content table{border:1px solid #dee2e6;width:100%;margin-bottom:1rem;overflow-x:auto}#content code{color:#111;background:#eee}@media print{body{min-width:0}code,h1,h2,h3,h4,h5,h6,img,li,p{page-break-inside:avoid}}@media(prefers-color-scheme:dark){#to-full-website,body.amp,body[data-spy]{background:#1c1c1c;color:#efefef}.invert-dark{filter:invert(100%)}#content table{border:1px solid #2a2b2c}#content code{background:#444;color:#eee}}.syntax{background:#f8f9fa;color:#2f1e2e}.syntax .c{color:#8d8687}.syntax .n{color:#2f1e2e}.syntax .o{color:#5bc4bf}.syntax .p{color:#2f1e2e}.syntax .c1{color:#8d8687}.syntax .ld{color:#48b685}.syntax .m{color:#f99b15}.syntax .s{color:#48b685}.syntax .no{color:#ef6155}.syntax .py{color:#2f1e2e}.syntax .s2{color:#48b685}.syntax .s1{color:#48b685}@media(prefers-color-scheme:dark){.syntax .ld{color:#64ffbb}.syntax .s{color:#64ffbb}.syntax .s2{color:#64ffbb}.syntax .s1{color:#64ffbb}.syntax .c{color:#64ffbb}.syntax .n{color:#f8f9fa}.syntax .p{color:#f8f9fa}.syntax .py{color:#f8f9fa}}</style>
    <script async custom-element="amp-analytics" src="https://cdn.ampproject.org/v0/amp-analytics-0.1.js"></script>
    <script async custom-element="amp-iframe" src="https://cdn.ampproject.org/v0/amp-iframe-0.1.js"></script>
  </head>
  <body class="amp" dir="ltr">
    <div class="container-fluid container-lg pb-5">
      <div class="row pt-3 mb-3">
        <div class="col">
          <a href="/" class="text-decoration-none">
            <amp-img class="d-inline-block mr-3" layout="fixed" width="40" height="36" src="/images/logo.svg" alt="ClickHouse logo" title="ClickHouse logo"></amp-img><amp-img class="invert-dark d-inline-block" layout="fixed" width="238" height="36" src="/images/clickhouse-black.svg" alt="ClickHouse" title="ClickHouse"></amp-img>
          </a>
        </div>
      </div>
      <div class="row">
        <div id="content" class="col">
          
    <div class="alert alert-primary" role="alert">
      <p class="display-5 mb-2">帮助通缉！</p>
      <p class="lead">本文档页面的以下内容已经过机器翻译。 但与其他网站不同，它不是在飞行中完成。 这个翻译的文本生活在github存储库旁边的主ClickHouse代码库，并等待同胞母语，使其更具人类可读性。 <a href="/docs/en/whats-new/changelog/2018/" class="alert-link">您也可以使用原始的英文版本作为参考。</a></p>
      <p class="lead">
          <a class="btn btn-lg btn-primary text-white" href="https://github.com/ClickHouse/ClickHouse/edit/master/docs/zh/whats-new/changelog/2018.md" target="_blank" rel="external nofollow noreferrer">
              通过编辑此页面帮助ClickHouse文档
          </a>
      </p>
    </div>

          <h2 id=clickhouse-release-18-16>ClickHouse释放18.16<a class=headerlink href=../amp/#clickhouse-release-18-16 title="Permanent link"> </a></h2><h3 id=clickhouse-release-18-16-1-2018-12-21>碌莽禄,拢,010-68520682\&lt;url&gt;<a class=headerlink href=../amp/#clickhouse-release-18-16-1-2018-12-21 title="Permanent link"> </a></h3><h4 id=bug-fixes>错误修复:<a class=headerlink href=../amp/#bug-fixes title="Permanent link"> </a></h4><ul><li>修复了导致使用ODBC源更新字典时出现问题的错误。 <a href=https://github.com/ClickHouse/ClickHouse/issues/3825 rel="external nofollow noreferrer" target=_blank>#3825</a>, <a href=https://github.com/ClickHouse/ClickHouse/issues/3829 rel="external nofollow noreferrer" target=_blank>#3829</a></li><li>聚集函数的JIT编译现在适用于低心率列。 <a href=https://github.com/ClickHouse/ClickHouse/issues/3838 rel="external nofollow noreferrer" target=_blank>#3838</a></li></ul><h4 id=improvements>改进:<a class=headerlink href=../amp/#improvements title="Permanent link"> </a></h4><ul><li>添加了 <code class=syntax>low_cardinality_allow_in_native_format</code> 设置（默认情况下启用）。 如果禁用，则选择查询的LowCardinality列将转换为普通列，插入查询将需要普通列。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3879 rel="external nofollow noreferrer" target=_blank>#3879</a></li></ul><h4 id=build-improvements>构建改进:<a class=headerlink href=../amp/#build-improvements title="Permanent link"> </a></h4><ul><li>修复了基于macOS和ARM的构建。</li></ul><h3 id=clickhouse-release-18-16-0-2018-12-14>碌莽禄,拢,010-68520682\&lt;url&gt;<a class=headerlink href=../amp/#clickhouse-release-18-16-0-2018-12-14 title="Permanent link"> </a></h3><h4 id=new-features>新功能:<a class=headerlink href=../amp/#new-features title="Permanent link"> </a></h4><ul><li><code class=syntax>DEFAULT</code> 在以半结构化输入格式加载数据时，会计算表达式是否缺少字段 (<code class=syntax>JSONEachRow</code>, <code class=syntax>TSKV</code>). 该功能与启用 <code class=syntax>insert_sample_with_metadata</code> 设置。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3555 rel="external nofollow noreferrer" target=_blank>#3555</a></li><li>该 <code class=syntax>ALTER TABLE</code> 查询现在有 <code class=syntax>MODIFY ORDER BY</code> 用于在添加或删除表列时更改排序键的操作。 这是在表有用 <code class=syntax>MergeTree</code> 基于此排序键合并时执行其他任务的系列，例如 <code class=syntax>SummingMergeTree</code>, <code class=syntax>AggregatingMergeTree</code>，等等。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3581 rel="external nofollow noreferrer" target=_blank>#3581</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/3755 rel="external nofollow noreferrer" target=_blank>#3755</a></li><li>对于在表 <code class=syntax>MergeTree</code> 家庭，现在你可以指定一个不同的排序键 (<code class=syntax>ORDER BY</code>）和索引 (<code class=syntax>PRIMARY KEY</code>). 排序键可以长于索引。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3581 rel="external nofollow noreferrer" target=_blank>#3581</a></li><li>添加了 <code class=syntax>hdfs</code> 表功能和 <code class=syntax>HDFS</code> 用于将数据导入和导出到HDFS的表引擎。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3617 rel="external nofollow noreferrer" target=_blank>晨兴-xc</a></li><li>增加了使用base64的功能: <code class=syntax>base64Encode</code>, <code class=syntax>base64Decode</code>, <code class=syntax>tryBase64Decode</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/3350 rel="external nofollow noreferrer" target=_blank>Alexander Krasheninnikov</a></li><li>现在，您可以使用一个参数来配置的精度 <code class=syntax>uniqCombined</code> 聚合函数（选择HyperLogLog单元格的数量）。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3406 rel="external nofollow noreferrer" target=_blank>#3406</a></li><li>添加了 <code class=syntax>system.contributors</code> 包含在ClickHouse中进行提交的所有人的名称的表。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3452 rel="external nofollow noreferrer" target=_blank>#3452</a></li><li>增加了省略分区的能力 <code class=syntax>ALTER TABLE ... FREEZE</code> 查询以便一次备份所有分区。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3514 rel="external nofollow noreferrer" target=_blank>#3514</a></li><li>已添加 <code class=syntax>dictGet</code> 和 <code class=syntax>dictGetOrDefault</code> 不需要指定返回值类型的函数。 该类型是从字典描述自动确定的。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3564 rel="external nofollow noreferrer" target=_blank>阿莫斯鸟</a></li><li>现在，您可以在表描述中为列指定注释，并使用以下方式对其进行更改 <code class=syntax>ALTER</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/3377 rel="external nofollow noreferrer" target=_blank>#3377</a></li><li>阅读支持 <code class=syntax>Join</code> 使用简单键键入表格。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3728 rel="external nofollow noreferrer" target=_blank>阿莫斯鸟</a></li><li>现在，您可以指定选项 <code class=syntax>join_use_nulls</code>, <code class=syntax>max_rows_in_join</code>, <code class=syntax>max_bytes_in_join</code>，和 <code class=syntax>join_overflow_mode</code> 当创建一个 <code class=syntax>Join</code> 键入表。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3728 rel="external nofollow noreferrer" target=_blank>阿莫斯鸟</a></li><li>添加了 <code class=syntax>joinGet</code> 功能，允许您使用 <code class=syntax>Join</code> 像字典一样键入表格。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3728 rel="external nofollow noreferrer" target=_blank>阿莫斯鸟</a></li><li>添加了 <code class=syntax>partition_key</code>, <code class=syntax>sorting_key</code>, <code class=syntax>primary_key</code>，和 <code class=syntax>sampling_key</code> 列到 <code class=syntax>system.tables</code> 表以便提供关于表键的信息。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3609 rel="external nofollow noreferrer" target=_blank>#3609</a></li><li>添加了 <code class=syntax>is_in_partition_key</code>, <code class=syntax>is_in_sorting_key</code>, <code class=syntax>is_in_primary_key</code>，和 <code class=syntax>is_in_sampling_key</code> 列到 <code class=syntax>system.columns</code> 桌子 <a href=https://github.com/ClickHouse/ClickHouse/pull/3609 rel="external nofollow noreferrer" target=_blank>#3609</a></li><li>添加了 <code class=syntax>min_time</code> 和 <code class=syntax>max_time</code> 列到 <code class=syntax>system.parts</code> 桌子 当分区键是由以下表达式组成的表达式时，将填充这些列 <code class=syntax>DateTime</code> 列。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3800 rel="external nofollow noreferrer" target=_blank>Emmanuel Donin de Rosière</a></li></ul><h4 id=bug-fixes-1>错误修复:<a class=headerlink href=../amp/#bug-fixes-1 title="Permanent link"> </a></h4><ul><li>修复和性能改进 <code class=syntax>LowCardinality</code> 数据类型。 <code class=syntax>GROUP BY</code> 使用 <code class=syntax>LowCardinality(Nullable(...))</code>. 获取的值 <code class=syntax>extremes</code>. 处理高阶函数。 <code class=syntax>LEFT ARRAY JOIN</code>. 分布 <code class=syntax>GROUP BY</code>. 返回的函数 <code class=syntax>Array</code>. 执行 <code class=syntax>ORDER BY</code>. 写入 <code class=syntax>Distributed</code> 表（nicelulu）。 向后兼容 <code class=syntax>INSERT</code> 从实现旧客户端的查询 <code class=syntax>Native</code> 协议 支持 <code class=syntax>LowCardinality</code> 为 <code class=syntax>JOIN</code>. 在单个流中工作时提高性能。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3823 rel="external nofollow noreferrer" target=_blank>#3823</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/3803 rel="external nofollow noreferrer" target=_blank>#3803</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/3799 rel="external nofollow noreferrer" target=_blank>#3799</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/3769 rel="external nofollow noreferrer" target=_blank>#3769</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/3744 rel="external nofollow noreferrer" target=_blank>#3744</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/3681 rel="external nofollow noreferrer" target=_blank>#3681</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/3651 rel="external nofollow noreferrer" target=_blank>#3651</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/3649 rel="external nofollow noreferrer" target=_blank>#3649</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/3641 rel="external nofollow noreferrer" target=_blank>#3641</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/3632 rel="external nofollow noreferrer" target=_blank>#3632</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/3568 rel="external nofollow noreferrer" target=_blank>#3568</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/3523 rel="external nofollow noreferrer" target=_blank>#3523</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/3518 rel="external nofollow noreferrer" target=_blank>#3518</a></li><li>固定如何 <code class=syntax>select_sequential_consistency</code> 选项工作。 以前，启用此设置时，在开始写入新分区后，有时会返回不完整的结果。 <a href=https://github.com/ClickHouse/ClickHouse/pull/2863 rel="external nofollow noreferrer" target=_blank>#2863</a></li><li>执行DDL时正确指定数据库 <code class=syntax>ON CLUSTER</code> 查询和 <code class=syntax>ALTER UPDATE/DELETE</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/3772 rel="external nofollow noreferrer" target=_blank>#3772</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/3460 rel="external nofollow noreferrer" target=_blank>#3460</a></li><li>为视图中的子查询正确指定了数据库。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3521 rel="external nofollow noreferrer" target=_blank>#3521</a></li><li>修正了一个错误 <code class=syntax>PREWHERE</code> 与 <code class=syntax>FINAL</code> 为 <code class=syntax>VersionedCollapsingMergeTree</code>. <a href=https://github.com/ClickHouse/ClickHouse/commit/7167bfd7b365538f7a91c4307ad77e552ab4e8c1 rel="external nofollow noreferrer" target=_blank>7167bfd7</a></li><li>现在你可以使用 <code class=syntax>KILL QUERY</code> 取消尚未启动的查询，因为它们正在等待锁定表。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3517 rel="external nofollow noreferrer" target=_blank>#3517</a></li><li>更正日期和时间计算，如果时钟被移回午夜（这发生在伊朗，并发生在莫斯科1981年至1983年）。 以前，这导致时间比必要的时间早一天重置，并且还导致文本格式的日期和时间格式不正确。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3819 rel="external nofollow noreferrer" target=_blank>#3819</a></li><li>修正了某些情况下的错误 <code class=syntax>VIEW</code> 和省略数据库的子查询。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3521 rel="external nofollow noreferrer" target=_blank>张冬</a></li><li>修正了一个争用条件时，同时从读取 <code class=syntax>MATERIALIZED VIEW</code> 和删除 <code class=syntax>MATERIALIZED VIEW</code> 由于不锁定内部 <code class=syntax>MATERIALIZED VIEW</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/3404 rel="external nofollow noreferrer" target=_blank>#3404</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/3694 rel="external nofollow noreferrer" target=_blank>#3694</a></li><li>修正了错误 <code class=syntax>Lock handler cannot be nullptr.</code> <a href=https://github.com/ClickHouse/ClickHouse/pull/3689 rel="external nofollow noreferrer" target=_blank>#3689</a></li><li>固定查询处理时 <code class=syntax>compile_expressions</code> 选项已启用（默认情况下启用）。 非确定性常量表达式，如 <code class=syntax>now</code> 功能不再展开。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3457 rel="external nofollow noreferrer" target=_blank>#3457</a></li><li>修复了在指定非常量比例参数时发生的崩溃 <code class=syntax>toDecimal32/64/128</code> 功能。</li><li>修复了尝试插入数组时的错误 <code class=syntax>NULL</code> 中的元素 <code class=syntax>Values</code> 格式化为类型的列 <code class=syntax>Array</code> 没有 <code class=syntax>Nullable</code> （如果 <code class=syntax>input_format_values_interpret_expressions</code> = 1). <a href=https://github.com/ClickHouse/ClickHouse/pull/3487 rel="external nofollow noreferrer" target=_blank>#3487</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/3503 rel="external nofollow noreferrer" target=_blank>#3503</a></li><li>固定连续错误登录 <code class=syntax>DDLWorker</code> 如果动物园管理员不可用。 <a href=https://github.com/ClickHouse/ClickHouse/commit/8f50c620334988b28018213ec0092fe6423847e2 rel="external nofollow noreferrer" target=_blank>8f50c620</a></li><li>修正了返回类型 <code class=syntax>quantile*</code> 从功能 <code class=syntax>Date</code> 和 <code class=syntax>DateTime</code> 参数的类型。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3580 rel="external nofollow noreferrer" target=_blank>#3580</a></li><li>修正了 <code class=syntax>WITH</code> 子句，如果它指定了一个没有表达式的简单别名。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3570 rel="external nofollow noreferrer" target=_blank>#3570</a></li><li>固定处理具有命名子查询和限定列名的查询时 <code class=syntax>enable_optimize_predicate_expression</code> 被启用。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3588 rel="external nofollow noreferrer" target=_blank>张冬</a></li><li>修正了错误 <code class=syntax>Attempt to attach to nullptr thread group</code> 使用实例化视图时。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3623 rel="external nofollow noreferrer" target=_blank>Marek Vavruša</a></li><li>修正了传递某些不正确的参数时崩溃 <code class=syntax>arrayReverse</code> 功能。 <a href=https://github.com/ClickHouse/ClickHouse/commit/73e3a7b662161d6005e7727d8a711b930386b871 rel="external nofollow noreferrer" target=_blank>73e3a7b6</a></li><li>修正了缓冲区溢出 <code class=syntax>extractURLParameter</code> 功能。 改进的性能。 添加了包含零字节的字符串的正确处理。 <a href=https://github.com/ClickHouse/ClickHouse/commit/141e9799e49201d84ea8e951d1bed4fb6d3dacb5 rel="external nofollow noreferrer" target=_blank>141e9799</a></li><li>在固定缓冲区溢出 <code class=syntax>lowerUTF8</code> 和 <code class=syntax>upperUTF8</code> 功能。 删除了执行这些功能的能力 <code class=syntax>FixedString</code> 类型参数。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3662 rel="external nofollow noreferrer" target=_blank>#3662</a></li><li>修复了删除时罕见的竞争条件 <code class=syntax>MergeTree</code> 桌子 <a href=https://github.com/ClickHouse/ClickHouse/pull/3680 rel="external nofollow noreferrer" target=_blank>#3680</a></li><li>修正了从读取时的争用条件 <code class=syntax>Buffer</code> 表和同时执行 <code class=syntax>ALTER</code> 或 <code class=syntax>DROP</code> 在目标桌上。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3719 rel="external nofollow noreferrer" target=_blank>#3719</a></li><li>修正了一个段错误，如果 <code class=syntax>max_temporary_non_const_columns</code> 超过限制。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3788 rel="external nofollow noreferrer" target=_blank>#3788</a></li></ul><h4 id=improvements-1>改进:<a class=headerlink href=../amp/#improvements-1 title="Permanent link"> </a></h4><ul><li>服务器不会将处理后的配置文件写入 <code class=syntax>/etc/clickhouse-server/</code> 目录。 相反，它将它们保存在 <code class=syntax>preprocessed_configs</code> 里面的目录 <code class=syntax>path</code>. 这意味着 <code class=syntax>/etc/clickhouse-server/</code> 目录没有写访问权限 <code class=syntax>clickhouse</code> 用户，从而提高了安全性。 <a href=https://github.com/ClickHouse/ClickHouse/pull/2443 rel="external nofollow noreferrer" target=_blank>#2443</a></li><li>该 <code class=syntax>min_merge_bytes_to_use_direct_io</code> 默认情况下，选项设置为10GiB。 将在MergeTree系列中执行形成大部分表的合并 <code class=syntax>O_DIRECT</code> 模式，这可以防止过多的页高速缓存逐出。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3504 rel="external nofollow noreferrer" target=_blank>#3504</a></li><li>当表数量非常多时，加速服务器启动。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3398 rel="external nofollow noreferrer" target=_blank>#3398</a></li><li>添加了连接池和HTTP <code class=syntax>Keep-Alive</code> 用于副本之间的连接。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3594 rel="external nofollow noreferrer" target=_blank>#3594</a></li><li>如果查询语法无效，则 <code class=syntax>400 Bad Request</code> 代码在返回 <code class=syntax>HTTP</code> 接口（500以前返回）。 <a href=https://github.com/ClickHouse/ClickHouse/commit/31bc680ac5f4bb1d0360a8ba4696fa84bb47d6ab rel="external nofollow noreferrer" target=_blank>31bc680a</a></li><li>该 <code class=syntax>join_default_strictness</code> 选项设置为 <code class=syntax>ALL</code> 默认情况下为兼容性。 <a href=https://github.com/ClickHouse/ClickHouse/commit/120e2cbe2ff4fbad626c28042d9b28781c805afe rel="external nofollow noreferrer" target=_blank>120e2cbe</a></li><li>删除日志记录 <code class=syntax>stderr</code> 从 <code class=syntax>re2</code> 无效或复杂正则表达式的库。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3723 rel="external nofollow noreferrer" target=_blank>#3723</a></li><li>添加的 <code class=syntax>Kafka</code> 表引擎：在开始从Kafka读取之前检查订阅；表的kafka_max_block_size设置。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3396 rel="external nofollow noreferrer" target=_blank>Marek Vavruša</a></li><li>该 <code class=syntax>cityHash64</code>, <code class=syntax>farmHash64</code>, <code class=syntax>metroHash64</code>, <code class=syntax>sipHash64</code>, <code class=syntax>halfMD5</code>, <code class=syntax>murmurHash2_32</code>, <code class=syntax>murmurHash2_64</code>, <code class=syntax>murmurHash3_32</code>，和 <code class=syntax>murmurHash3_64</code> 函数现在适用于任意数量的参数和元组形式的参数。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3451 rel="external nofollow noreferrer" target=_blank>#3451</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/3519 rel="external nofollow noreferrer" target=_blank>#3519</a></li><li>该 <code class=syntax>arrayReverse</code> 函数现在适用于任何类型的数组。 <a href=https://github.com/ClickHouse/ClickHouse/commit/73e3a7b662161d6005e7727d8a711b930386b871 rel="external nofollow noreferrer" target=_blank>73e3a7b6</a></li><li>增加了一个可选参数：插槽大小的 <code class=syntax>timeSlots</code> 功能。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3724 rel="external nofollow noreferrer" target=_blank>基里尔*什瓦科夫</a></li><li>为 <code class=syntax>FULL</code> 和 <code class=syntax>RIGHT JOIN</code>，该 <code class=syntax>max_block_size</code> 设置用于右表中未连接的数据流。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3699 rel="external nofollow noreferrer" target=_blank>阿莫斯鸟</a></li><li>添加了 <code class=syntax>--secure</code> 命令行参数 <code class=syntax>clickhouse-benchmark</code> 和 <code class=syntax>clickhouse-performance-test</code> 启用TLS。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3688 rel="external nofollow noreferrer" target=_blank>#3688</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/3690 rel="external nofollow noreferrer" target=_blank>#3690</a></li><li>类型转换时的结构 <code class=syntax>Buffer</code> 表的类型与目标表的结构不匹配。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3603 rel="external nofollow noreferrer" target=_blank>维塔利*巴拉诺夫</a></li><li>添加了 <code class=syntax>tcp_keep_alive_timeout</code> 在指定的时间间隔内不活动后启用保持活动数据包的选项。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3441 rel="external nofollow noreferrer" target=_blank>#3441</a></li><li>删除不必要的引用值的分区键中 <code class=syntax>system.parts</code> 表，如果它由单列组成。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3652 rel="external nofollow noreferrer" target=_blank>#3652</a></li><li>模函数适用于 <code class=syntax>Date</code> 和 <code class=syntax>DateTime</code> 数据类型。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3385 rel="external nofollow noreferrer" target=_blank>#3385</a></li><li>添加同义词的 <code class=syntax>POWER</code>, <code class=syntax>LN</code>, <code class=syntax>LCASE</code>, <code class=syntax>UCASE</code>, <code class=syntax>REPLACE</code>, <code class=syntax>LOCATE</code>, <code class=syntax>SUBSTR</code>，和 <code class=syntax>MID</code> 功能。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3774 rel="external nofollow noreferrer" target=_blank>#3774</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/3763 rel="external nofollow noreferrer" target=_blank>#3763</a> 为了与SQL标准兼容，某些函数名称不区分大小写。 添加语法糖 <code class=syntax>SUBSTRING(expr FROM start FOR length)</code> 对于与SQL的兼容性。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3804 rel="external nofollow noreferrer" target=_blank>#3804</a></li><li>增加了以下能力 <code class=syntax>mlock</code> 对应于存储器页 <code class=syntax>clickhouse-server</code> 可执行代码，以防止它被强制出内存。 默认情况下禁用此功能。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3553 rel="external nofollow noreferrer" target=_blank>#3553</a></li><li>从读取时改进的性能 <code class=syntax>O_DIRECT</code> （与 <code class=syntax>min_bytes_to_use_direct_io</code> 选项启用）。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3405 rel="external nofollow noreferrer" target=_blank>#3405</a></li><li>的改进的性能 <code class=syntax>dictGet...OrDefault</code> 常量键参数和非常量默认参数的函数。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3563 rel="external nofollow noreferrer" target=_blank>阿莫斯鸟</a></li><li>该 <code class=syntax>firstSignificantSubdomain</code> 功能现在处理域 <code class=syntax>gov</code>, <code class=syntax>mil</code>，和 <code class=syntax>edu</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/3601 rel="external nofollow noreferrer" target=_blank>Igor Hatarist</a> 改进的性能。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3628 rel="external nofollow noreferrer" target=_blank>#3628</a></li><li>能够指定用于启动的自定义环境变量 <code class=syntax>clickhouse-server</code> 使用 <code class=syntax>SYS-V init.d</code> 通过定义脚本 <code class=syntax>CLICKHOUSE_PROGRAM_ENV</code> 在 <code class=syntax>/etc/default/clickhouse</code>.<br><a href=https://github.com/ClickHouse/ClickHouse/pull/3612 rel="external nofollow noreferrer" target=_blank>Pavlo Bashynskyi</a></li><li>Clickhouse-server init脚本的正确返回代码。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3516 rel="external nofollow noreferrer" target=_blank>#3516</a></li><li>该 <code class=syntax>system.metrics</code> 表现在有 <code class=syntax>VersionInteger</code> 公制和 <code class=syntax>system.build_options</code> 有添加的行 <code class=syntax>VERSION_INTEGER</code>，其中包含ClickHouse版本的数字形式，例如 <code class=syntax>18016000</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/3644 rel="external nofollow noreferrer" target=_blank>#3644</a></li><li>删除比较的能力 <code class=syntax>Date</code> 输入一个数字，以避免潜在的错误，如 <code class=syntax>date = 2018-12-17</code>，其中日期周围的引号被错误省略。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3687 rel="external nofollow noreferrer" target=_blank>#3687</a></li><li>修正了有状态函数的行为，如 <code class=syntax>rowNumberInAllBlocks</code>. 他们之前输出的结果是由于在查询分析期间启动而大一个数字。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3729 rel="external nofollow noreferrer" target=_blank>阿莫斯鸟</a></li><li>如果 <code class=syntax>force_restore_data</code> 文件无法删除，将显示错误消息。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3794 rel="external nofollow noreferrer" target=_blank>阿莫斯鸟</a></li></ul><h4 id=build-improvements-1>构建改进:<a class=headerlink href=../amp/#build-improvements-1 title="Permanent link"> </a></h4><ul><li>更新了 <code class=syntax>jemalloc</code> 库，它修复了潜在的内存泄漏。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3557 rel="external nofollow noreferrer" target=_blank>阿莫斯鸟</a></li><li>分析与 <code class=syntax>jemalloc</code> 默认情况下为了调试生成启用。 <a href=https://github.com/ClickHouse/ClickHouse/commit/2cc82f5cbe266421cd4c1165286c2c47e5ffcb15 rel="external nofollow noreferrer" target=_blank>2cc82f5c</a></li><li>增加了运行集成测试的能力，当只 <code class=syntax>Docker</code> 安装在系统上。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3650 rel="external nofollow noreferrer" target=_blank>#3650</a></li><li>在SELECT查询中添加了模糊表达式测试。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3442 rel="external nofollow noreferrer" target=_blank>#3442</a></li><li>为提交添加了一个压力测试，它以并行和随机顺序执行功能测试，以检测更多的竞争条件。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3438 rel="external nofollow noreferrer" target=_blank>#3438</a></li><li>改进了在Docker映像中启动clickhouse-server的方法。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3663 rel="external nofollow noreferrer" target=_blank>Elghazal Ahmed</a></li><li>对于Docker映像，增加了对使用数据库中的文件初始化数据库的支持 <code class=syntax>/docker-entrypoint-initdb.d</code> 目录。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3695 rel="external nofollow noreferrer" target=_blank>康斯坦丁*列别杰夫</a></li><li>修复了基于ARM的构建。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3709 rel="external nofollow noreferrer" target=_blank>#3709</a></li></ul><h4 id=backward-incompatible-changes>向后不兼容的更改:<a class=headerlink href=../amp/#backward-incompatible-changes title="Permanent link"> </a></h4><ul><li>删除比较的能力 <code class=syntax>Date</code> 用数字键入。 而不是 <code class=syntax>toDate('2018-12-18') = 17883</code>，必须使用显式类型转换 <code class=syntax>= toDate(17883)</code> <a href=https://github.com/ClickHouse/ClickHouse/pull/3687 rel="external nofollow noreferrer" target=_blank>#3687</a></li></ul><h2 id=clickhouse-release-18-14>ClickHouse释放18.14<a class=headerlink href=../amp/#clickhouse-release-18-14 title="Permanent link"> </a></h2><h3 id=clickhouse-release-18-14-19-2018-12-19>碌莽禄,拢,010-68520682\&lt;url&gt;<a class=headerlink href=../amp/#clickhouse-release-18-14-19-2018-12-19 title="Permanent link"> </a></h3><h4 id=bug-fixes-2>错误修复:<a class=headerlink href=../amp/#bug-fixes-2 title="Permanent link"> </a></h4><ul><li>修复了导致使用ODBC源更新字典时出现问题的错误。 <a href=https://github.com/ClickHouse/ClickHouse/issues/3825 rel="external nofollow noreferrer" target=_blank>#3825</a>, <a href=https://github.com/ClickHouse/ClickHouse/issues/3829 rel="external nofollow noreferrer" target=_blank>#3829</a></li><li>执行DDL时正确指定数据库 <code class=syntax>ON CLUSTER</code> 查询。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3460 rel="external nofollow noreferrer" target=_blank>#3460</a></li><li>修正了一个段错误，如果 <code class=syntax>max_temporary_non_const_columns</code> 超过限制。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3788 rel="external nofollow noreferrer" target=_blank>#3788</a></li></ul><h4 id=build-improvements-2>构建改进:<a class=headerlink href=../amp/#build-improvements-2 title="Permanent link"> </a></h4><ul><li>修复了基于ARM的构建。</li></ul><h3 id=clickhouse-release-18-14-18-2018-12-04>碌莽禄,拢,010-68520682\&lt;url&gt;戮卤篓拢,010-68520682\&lt;url&gt;<a class=headerlink href=../amp/#clickhouse-release-18-14-18-2018-12-04 title="Permanent link"> </a></h3><h4 id=bug-fixes-3>错误修复:<a class=headerlink href=../amp/#bug-fixes-3 title="Permanent link"> </a></h4><ul><li>修正错误 <code class=syntax>dictGet...</code> 类型字典的函数 <code class=syntax>range</code>，如果其中一个参数是恒定的，而另一个则不是。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3751 rel="external nofollow noreferrer" target=_blank>#3751</a></li><li>修复了导致消息的错误 <code class=syntax>netlink: '...': attribute type 1 has an invalid length</code> 要打印在Linux内核日志中，这只发生在足够新鲜的Linux内核版本上。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3749 rel="external nofollow noreferrer" target=_blank>#3749</a></li><li>在功能固定段错误 <code class=syntax>empty</code> 对于争论 <code class=syntax>FixedString</code> 类型。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3703 rel="external nofollow noreferrer" target=_blank>丹尼尔，道广明</a></li><li>修正了使用大值时过多的内存分配 <code class=syntax>max_query_size</code> 设置（内存块 <code class=syntax>max_query_size</code> 字节被预先分配一次）。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3720 rel="external nofollow noreferrer" target=_blank>#3720</a></li></ul><h4 id=build-changes>构建更改:<a class=headerlink href=../amp/#build-changes title="Permanent link"> </a></h4><ul><li>使用操作系统包中的版本7的LLVM/Clang库修复构建（这些库用于运行时查询编译）。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3582 rel="external nofollow noreferrer" target=_blank>#3582</a></li></ul><h3 id=clickhouse-release-18-14-17-2018-11-30>碌莽禄,拢,010-68520682\&lt;url&gt;戮卤篓拢,010-68520682\&lt;url&gt;<a class=headerlink href=../amp/#clickhouse-release-18-14-17-2018-11-30 title="Permanent link"> </a></h3><h4 id=bug-fixes-4>错误修复:<a class=headerlink href=../amp/#bug-fixes-4 title="Permanent link"> </a></h4><ul><li>修复了ODBC桥进程未与主服务器进程终止的情况。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3642 rel="external nofollow noreferrer" target=_blank>#3642</a></li><li>固定同步插入 <code class=syntax>Distributed</code> 具有不同于远程表的列列表的列列表的表。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3673 rel="external nofollow noreferrer" target=_blank>#3673</a></li><li>修复了丢弃MergeTree表时可能导致崩溃的罕见竞争条件。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3643 rel="external nofollow noreferrer" target=_blank>#3643</a></li><li>修复了查询线程创建失败时的查询死锁 <code class=syntax>Resource temporarily unavailable</code> 错误 <a href=https://github.com/ClickHouse/ClickHouse/pull/3643 rel="external nofollow noreferrer" target=_blank>#3643</a></li><li>修正了解析 <code class=syntax>ENGINE</code> 条款时 <code class=syntax>CREATE AS table</code> 语法被使用和 <code class=syntax>ENGINE</code> 子句之前指定 <code class=syntax>AS table</code> （错误导致忽略指定的引擎）。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3692 rel="external nofollow noreferrer" target=_blank>#3692</a></li></ul><h3 id=clickhouse-release-18-14-15-2018-11-21>碌莽禄,拢,010-68520682\&lt;url&gt;戮卤篓拢,010-68520682\&lt;url&gt;<a class=headerlink href=../amp/#clickhouse-release-18-14-15-2018-11-21 title="Permanent link"> </a></h3><h4 id=bug-fixes-5>错误修复:<a class=headerlink href=../amp/#bug-fixes-5 title="Permanent link"> </a></h4><ul><li>反序列化类型的列时，高估了内存块的大小 <code class=syntax>Array(String)</code> 这导致 “Memory limit exceeded” 错误。 该问题出现在版本18.12.13中。 <a href=https://github.com/ClickHouse/ClickHouse/issues/3589 rel="external nofollow noreferrer" target=_blank>#3589</a></li></ul><h3 id=clickhouse-release-18-14-14-2018-11-20>碌莽禄,拢,010-68520682\&lt;url&gt;戮卤篓拢,010-68520682\&lt;url&gt;<a class=headerlink href=../amp/#clickhouse-release-18-14-14-2018-11-20 title="Permanent link"> </a></h3><h4 id=bug-fixes-6>错误修复:<a class=headerlink href=../amp/#bug-fixes-6 title="Permanent link"> </a></h4><ul><li>固定 <code class=syntax>ON CLUSTER</code> 当群集配置为安全时进行查询（标志 <code class=syntax>&lt;secure&gt;</code>). <a href=https://github.com/ClickHouse/ClickHouse/pull/3599 rel="external nofollow noreferrer" target=_blank>#3599</a></li></ul><h4 id=build-changes-1>构建更改:<a class=headerlink href=../amp/#build-changes-1 title="Permanent link"> </a></h4><ul><li>固定的问题（llvm-7从系统，macos) <a href=https://github.com/ClickHouse/ClickHouse/pull/3582 rel="external nofollow noreferrer" target=_blank>#3582</a></li></ul><h3 id=clickhouse-release-18-14-13-2018-11-08>碌莽禄,拢,010-68520682\&lt;url&gt;戮卤篓拢,010-68520682\&lt;url&gt;<a class=headerlink href=../amp/#clickhouse-release-18-14-13-2018-11-08 title="Permanent link"> </a></h3><h4 id=bug-fixes-7>错误修复:<a class=headerlink href=../amp/#bug-fixes-7 title="Permanent link"> </a></h4><ul><li>修正了 <code class=syntax>Block structure mismatch in MergingSorted stream</code> 错误 <a href=https://github.com/ClickHouse/ClickHouse/issues/3162 rel="external nofollow noreferrer" target=_blank>#3162</a></li><li>固定 <code class=syntax>ON CLUSTER</code> 查询的情况下，当安全连接被打开的群集配置（ <code class=syntax>&lt;secure&gt;</code> 标志）。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3465 rel="external nofollow noreferrer" target=_blank>#3465</a></li><li>修复了查询中使用的错误 <code class=syntax>SAMPLE</code>, <code class=syntax>PREWHERE</code> 和别名列。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3543 rel="external nofollow noreferrer" target=_blank>#3543</a></li><li>修正了一个罕见的 <code class=syntax>unknown compression method</code> 错误时 <code class=syntax>min_bytes_to_use_direct_io</code> 设置已启用。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3544 rel="external nofollow noreferrer" target=_blank>3544</a></li></ul><h4 id=performance-improvements>性能改进:<a class=headerlink href=../amp/#performance-improvements title="Permanent link"> </a></h4><ul><li>查询的固定性能回归 <code class=syntax>GROUP BY</code> 在AMD EPYC处理器上执行时，uint16或Date类型的列。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3512 rel="external nofollow noreferrer" target=_blank>Igor Lapko</a></li><li>修正了处理长字符串的查询的性能回归。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3530 rel="external nofollow noreferrer" target=_blank>#3530</a></li></ul><h4 id=build-improvements-3>构建改进:<a class=headerlink href=../amp/#build-improvements-3 title="Permanent link"> </a></h4><ul><li>简化阿卡迪亚构建的改进。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3475 rel="external nofollow noreferrer" target=_blank>#3475</a>, <a href=https://github.com/ClickHouse/ClickHouse/pull/3535 rel="external nofollow noreferrer" target=_blank>#3535</a></li></ul><h3 id=clickhouse-release-18-14-12-2018-11-02>碌莽禄,拢,010-68520682\&lt;url&gt;戮卤篓拢,010-68520682\&lt;url&gt;<a class=headerlink href=../amp/#clickhouse-release-18-14-12-2018-11-02 title="Permanent link"> </a></h3><h4 id=bug-fixes-8>错误修复:<a class=headerlink href=../amp/#bug-fixes-8 title="Permanent link"> </a></h4><ul><li>修复了加入两个未命名的子查询时的崩溃。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3505 rel="external nofollow noreferrer" target=_blank>#3505</a></li><li>修正了生成不正确的查询（用空 <code class=syntax>WHERE</code> 子句）查询外部数据库时。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3477 rel="external nofollow noreferrer" target=_blank>hotid</a></li><li>修正了在ODBC字典中使用不正确的超时值。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3511 rel="external nofollow noreferrer" target=_blank>Marek Vavruša</a></li></ul><h3 id=clickhouse-release-18-14-11-2018-10-29>碌莽禄,拢,010-68520682\&lt;url&gt;戮卤篓拢,010-68520682\&lt;url&gt;<a class=headerlink href=../amp/#clickhouse-release-18-14-11-2018-10-29 title="Permanent link"> </a></h3><h4 id=bug-fixes-9>错误修复:<a class=headerlink href=../amp/#bug-fixes-9 title="Permanent link"> </a></h4><ul><li>修正了错误 <code class=syntax>Block structure mismatch in UNION stream: different number of columns</code> 在限制查询。 <a href=https://github.com/ClickHouse/ClickHouse/issues/2156 rel="external nofollow noreferrer" target=_blank>#2156</a></li><li>修复了在嵌套结构中包含数组的表中合并数据时出现的错误。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3397 rel="external nofollow noreferrer" target=_blank>#3397</a></li><li>修正了不正确的查询结果，如果 <code class=syntax>merge_tree_uniform_read_distribution</code> 设置被禁用（默认情况下启用）。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3429 rel="external nofollow noreferrer" target=_blank>#3429</a></li><li>修复了在本机格式的分布式表中插入错误。 <a href=https://github.com/ClickHouse/ClickHouse/issues/3411 rel="external nofollow noreferrer" target=_blank>#3411</a></li></ul><h3 id=clickhouse-release-18-14-10-2018-10-23>碌莽禄,拢,010-68520682\&lt;url&gt;戮卤篓拢,010-68520682\&lt;url&gt;<a class=headerlink href=../amp/#clickhouse-release-18-14-10-2018-10-23 title="Permanent link"> </a></h3><ul><li>该 <code class=syntax>compile_expressions</code> 默认情况下禁用设置（表达式的JIT编译）。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3410 rel="external nofollow noreferrer" target=_blank>#3410</a></li><li>该 <code class=syntax>enable_optimize_predicate_expression</code> 默认情况下禁用设置。</li></ul><h3 id=clickhouse-release-18-14-9-2018-10-16>碌莽禄,拢,010-68520682\&lt;url&gt;戮卤篓拢,010-68520682\&lt;url&gt;<a class=headerlink href=../amp/#clickhouse-release-18-14-9-2018-10-16 title="Permanent link"> </a></h3><h4 id=new-features-1>新功能:<a class=headerlink href=../amp/#new-features-1 title="Permanent link"> </a></h4><ul><li>该 <code class=syntax>WITH CUBE</code> 修饰符 <code class=syntax>GROUP BY</code> （替代语法 <code class=syntax>GROUP BY CUBE(...)</code> 也可用）。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3172 rel="external nofollow noreferrer" target=_blank>#3172</a></li><li>添加了 <code class=syntax>formatDateTime</code> 功能。 <a href=https://github.com/ClickHouse/ClickHouse/pull/2770 rel="external nofollow noreferrer" target=_blank>Alexandr Krasheninnikov</a></li><li>添加了 <code class=syntax>JDBC</code> 表引擎和 <code class=syntax>jdbc</code> 表功能（需要安装clickhouse-jdbc桥）。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3210 rel="external nofollow noreferrer" target=_blank>Alexandr Krasheninnikov</a></li><li>增加了使用ISO周编号的功能: <code class=syntax>toISOWeek</code>, <code class=syntax>toISOYear</code>, <code class=syntax>toStartOfISOYear</code>，和 <code class=syntax>toDayOfYear</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/3146 rel="external nofollow noreferrer" target=_blank>#3146</a></li><li>现在你可以使用 <code class=syntax>Nullable</code> 列 <code class=syntax>MySQL</code> 和 <code class=syntax>ODBC</code> 桌子 <a href=https://github.com/ClickHouse/ClickHouse/pull/3362 rel="external nofollow noreferrer" target=_blank>#3362</a></li><li>嵌套的数据结构可以被读取为嵌套的对象 <code class=syntax>JSONEachRow</code> 格式。 添加了 <code class=syntax>input_format_import_nested_json</code> 设置。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3144 rel="external nofollow noreferrer" target=_blank>维罗曼*云坎</a></li><li>并行处理可用于许多 <code class=syntax>MATERIALIZED VIEW</code>s插入数据时。 见 <code class=syntax>parallel_view_processing</code> 设置。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3208 rel="external nofollow noreferrer" target=_blank>Marek Vavruša</a></li><li>添加了 <code class=syntax>SYSTEM FLUSH LOGS</code> 查询（强制日志刷新到系统表，如 <code class=syntax>query_log</code>) <a href=https://github.com/ClickHouse/ClickHouse/pull/3321 rel="external nofollow noreferrer" target=_blank>#3321</a></li><li>现在，您可以使用预定义 <code class=syntax>database</code> 和 <code class=syntax>table</code> 声明时的宏 <code class=syntax>Replicated</code> 桌子 <a href=https://github.com/ClickHouse/ClickHouse/pull/3251 rel="external nofollow noreferrer" target=_blank>#3251</a></li><li>增加了阅读的能力 <code class=syntax>Decimal</code> 工程表示法中的类型值（表示十的幂）。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3153 rel="external nofollow noreferrer" target=_blank>#3153</a></li></ul><h4 id=experimental-features>实验特点:<a class=headerlink href=../amp/#experimental-features title="Permanent link"> </a></h4><ul><li>对GROUP BY子句进行优化 <code class=syntax>LowCardinality data types.</code> <a href=https://github.com/ClickHouse/ClickHouse/pull/3138 rel="external nofollow noreferrer" target=_blank>#3138</a></li><li>表达式的优化计算 <code class=syntax>LowCardinality data types.</code> <a href=https://github.com/ClickHouse/ClickHouse/pull/3200 rel="external nofollow noreferrer" target=_blank>#3200</a></li></ul><h4 id=improvements-2>改进:<a class=headerlink href=../amp/#improvements-2 title="Permanent link"> </a></h4><ul><li>显着减少查询的内存消耗 <code class=syntax>ORDER BY</code> 和 <code class=syntax>LIMIT</code>. 见 <code class=syntax>max_bytes_before_remerge_sort</code> 设置。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3205 rel="external nofollow noreferrer" target=_blank>#3205</a></li><li>在没有 <code class=syntax>JOIN</code> (<code class=syntax>LEFT</code>, <code class=syntax>INNER</code>, …), <code class=syntax>INNER JOIN</code> 是假定的。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3147 rel="external nofollow noreferrer" target=_blank>#3147</a></li><li>限定星号在以下查询中正常工作 <code class=syntax>JOIN</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/3202 rel="external nofollow noreferrer" target=_blank>张冬</a></li><li>该 <code class=syntax>ODBC</code> 表引擎正确地选择用于引用远程数据库的SQL方言中的标识符的方法。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3210 rel="external nofollow noreferrer" target=_blank>Alexandr Krasheninnikov</a></li><li>该 <code class=syntax>compile_expressions</code> 默认情况下启用设置（表达式的JIT编译）。</li><li>修复了同时删除数据库/表（如果存在）和创建数据库/表（如果不存在）的行为。 前情提要 <code class=syntax>CREATE DATABASE ... IF NOT EXISTS</code> 查询可能会返回错误消息 “File … already exists” 和 <code class=syntax>CREATE TABLE ... IF NOT EXISTS</code> 和 <code class=syntax>DROP TABLE IF EXISTS</code> 查询可能会返回 <code class=syntax>Table ... is creating or attaching right now</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/3101 rel="external nofollow noreferrer" target=_blank>#3101</a></li><li>当从MySQL或ODBC表中查询时，LIKE和IN表达式具有常量右半部分被传递到远程服务器。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3182 rel="external nofollow noreferrer" target=_blank>#3182</a></li><li>当从MySQL和ODBC表查询时，与WHERE子句中常量表达式的比较会传递给远程服务器。 以前，只通过与常量的比较。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3182 rel="external nofollow noreferrer" target=_blank>#3182</a></li><li>正确计算终端中的行宽 <code class=syntax>Pretty</code> 格式，包括带有象形文字的字符串。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3257 rel="external nofollow noreferrer" target=_blank>阿莫斯鸟</a>.</li><li><code class=syntax>ON CLUSTER</code> 可以指定 <code class=syntax>ALTER UPDATE</code> 查询。</li><li>提高了读取数据的性能 <code class=syntax>JSONEachRow</code> 格式。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3332 rel="external nofollow noreferrer" target=_blank>#3332</a></li><li>添加同义词的 <code class=syntax>LENGTH</code> 和 <code class=syntax>CHARACTER_LENGTH</code> 功能的兼容性。 该 <code class=syntax>CONCAT</code> 函数不再区分大小写。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3306 rel="external nofollow noreferrer" target=_blank>#3306</a></li><li>添加了 <code class=syntax>TIMESTAMP</code> 的同义词 <code class=syntax>DateTime</code> 类型。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3390 rel="external nofollow noreferrer" target=_blank>#3390</a></li><li>服务器日志中始终为query_id保留空间，即使日志行与查询无关。 这使得使用第三方工具更容易分析服务器文本日志。</li><li>当查询超过整数千兆字节的下一级别时，会记录查询的内存消耗。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3205 rel="external nofollow noreferrer" target=_blank>#3205</a></li><li>为使用本机协议的客户端库错误发送的列少于服务器预期的插入查询时的情况添加了兼容模式。 使用clickhouse-cpp库时，这种情况是可能的。 以前，此方案会导致服务器崩溃。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3171 rel="external nofollow noreferrer" target=_blank>#3171</a></li><li>在用户定义的WHERE表达式中 <code class=syntax>clickhouse-copier</code>，您现在可以使用 <code class=syntax>partition_key</code> 别名（用于按源表分区进行其他过滤）。 如果分区方案在复制过程中发生更改，但仅稍有更改，这很有用。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3166 rel="external nofollow noreferrer" target=_blank>#3166</a></li><li>的工作流程 <code class=syntax>Kafka</code> 引擎已被移动到后台线程池中，以便在高负载下自动降低数据读取速度。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3215 rel="external nofollow noreferrer" target=_blank>Marek Vavruša</a>.</li><li>支持阅读 <code class=syntax>Tuple</code> 和 <code class=syntax>Nested</code> 结构的值，如 <code class=syntax>struct</code> 在 <code class=syntax>Cap'n'Proto format</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/3216 rel="external nofollow noreferrer" target=_blank>Marek Vavruša</a></li><li>顶级域名列表 <code class=syntax>firstSignificantSubdomain</code> 功能现在包括域 <code class=syntax>biz</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/3219 rel="external nofollow noreferrer" target=_blank>decaseal</a></li><li>在外部字典的配置, <code class=syntax>null_value</code> 被解释为默认数据类型的值。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3330 rel="external nofollow noreferrer" target=_blank>#3330</a></li><li>支持 <code class=syntax>intDiv</code> 和 <code class=syntax>intDivOrZero</code> 功能 <code class=syntax>Decimal</code>. <a href=https://github.com/ClickHouse/ClickHouse/commit/b48402e8712e2b9b151e0eef8193811d433a1264 rel="external nofollow noreferrer" target=_blank>b48402e8</a></li><li>支持 <code class=syntax>Date</code>, <code class=syntax>DateTime</code>, <code class=syntax>UUID</code>，和 <code class=syntax>Decimal</code> 类型作为键 <code class=syntax>sumMap</code> 聚合函数。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3281 rel="external nofollow noreferrer" target=_blank>#3281</a></li><li>支持 <code class=syntax>Decimal</code> 外部字典中的数据类型。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3324 rel="external nofollow noreferrer" target=_blank>#3324</a></li><li>支持 <code class=syntax>Decimal</code> 数据类型in <code class=syntax>SummingMergeTree</code> 桌子 <a href=https://github.com/ClickHouse/ClickHouse/pull/3348 rel="external nofollow noreferrer" target=_blank>#3348</a></li><li>增加了专业化 <code class=syntax>UUID</code> 在 <code class=syntax>if</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/3366 rel="external nofollow noreferrer" target=_blank>#3366</a></li><li>减少的数量 <code class=syntax>open</code> 和 <code class=syntax>close</code> 从读取时系统调用 <code class=syntax>MergeTree table</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/3283 rel="external nofollow noreferrer" target=_blank>#3283</a></li><li>A <code class=syntax>TRUNCATE TABLE</code> 查询可以在任何副本上执行（将查询传递给领导副本）。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3375 rel="external nofollow noreferrer" target=_blank>基里尔*什瓦科夫</a></li></ul><h4 id=bug-fixes-10>错误修复:<a class=headerlink href=../amp/#bug-fixes-10 title="Permanent link"> </a></h4><ul><li>修正了一个问题 <code class=syntax>Dictionary</code> 表 <code class=syntax>range_hashed</code> 字典 此错误发生在版本18.12.17中。 <a href=https://github.com/ClickHouse/ClickHouse/pull/1702 rel="external nofollow noreferrer" target=_blank>#1702</a></li><li>修正了加载时的错误 <code class=syntax>range_hashed</code> 字典（消息 <code class=syntax>Unsupported type Nullable (...)</code>). 此错误发生在版本18.12.17中。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3362 rel="external nofollow noreferrer" target=_blank>#3362</a></li><li>在固定的错误 <code class=syntax>pointInPolygon</code> 函数由于不准确的计算的多边形与大量的顶点位于彼此靠近的积累。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3331 rel="external nofollow noreferrer" target=_blank>#3331</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/3341 rel="external nofollow noreferrer" target=_blank>#3341</a></li><li>如果在合并数据部分之后，结果部分的校验和与另一个副本中相同合并的结果不同，则删除合并的结果并从另一个副本下载数据部分（这是正确的行为）。 但是在下载数据部分之后，由于该部分已经存在的错误（因为合并后数据部分被删除了一些延迟），因此无法将其添加到工作集中。 这导致周期性尝试下载相同的数据。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3194 rel="external nofollow noreferrer" target=_blank>#3194</a></li><li>修正了查询总内存消耗的不正确计算（由于计算不正确， <code class=syntax>max_memory_usage_for_all_queries</code> 设置工作不正确， <code class=syntax>MemoryTracking</code> 度量值不正确）。 此错误发生在版本18.12.13中。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3344 rel="external nofollow noreferrer" target=_blank>Marek Vavruša</a></li><li>修正的功能 <code class=syntax>CREATE TABLE ... ON CLUSTER ... AS SELECT ...</code> 此错误发生在版本18.12.13中。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3247 rel="external nofollow noreferrer" target=_blank>#3247</a></li><li>修正了数据结构的不必要的准备 <code class=syntax>JOIN</code>如果发起查询的服务器上 <code class=syntax>JOIN</code> 仅在远程服务器上执行。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3340 rel="external nofollow noreferrer" target=_blank>#3340</a></li><li>在固定的错误 <code class=syntax>Kafka</code> 引擎：开始读取数据时异常后的死锁，并在完成时锁定 <a href=https://github.com/ClickHouse/ClickHouse/pull/3215 rel="external nofollow noreferrer" target=_blank>Marek Vavruša</a>.</li><li>为 <code class=syntax>Kafka</code> 表，可选 <code class=syntax>schema</code> 参数未被传递（的架构 <code class=syntax>Cap'n'Proto</code> 格式）。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3150 rel="external nofollow noreferrer" target=_blank>Vojtech Splichal</a></li><li>如果ZooKeeper服务器的整体服务器接受连接，但随后立即关闭它，而不是响应握手，ClickHouse选择连接另一台服务器。 以前，这会产生错误 <code class=syntax>Cannot read all data. Bytes read: 0. Bytes expected: 4.</code> 服务器无法启动。 <a href=https://github.com/ClickHouse/ClickHouse/commit/8218cf3a5f39a43401953769d6d12a0bb8d29da9 rel="external nofollow noreferrer" target=_blank>8218cf3a</a></li><li>如果ZooKeeper服务器的整体包含DNS查询返回错误的服务器，则忽略这些服务器。 <a href=https://github.com/ClickHouse/ClickHouse/commit/17b8e209221061325ad7ba0539f03c6e65f87f29 rel="external nofollow noreferrer" target=_blank>17b8e209</a></li><li>固定类型之间的转换 <code class=syntax>Date</code> 和 <code class=syntax>DateTime</code> 当在插入数据 <code class=syntax>VALUES</code> 格式（如果 <code class=syntax>input_format_values_interpret_expressions = 1</code>). 以前，转换是在Unix Epoch时间中的天数和Unix时间戳的数值之间进行的，这会导致意外的结果。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3229 rel="external nofollow noreferrer" target=_blank>#3229</a></li><li>修正类型之间的转换 <code class=syntax>Decimal</code> 和整数。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3211 rel="external nofollow noreferrer" target=_blank>#3211</a></li><li>在固定的错误 <code class=syntax>enable_optimize_predicate_expression</code> 设置。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3231 rel="external nofollow noreferrer" target=_blank>张冬</a></li><li>如果使用非默认的CSV分隔符，则修复了CSV格式的浮点数解析错误，例如 <code class=syntax>;</code> <a href=https://github.com/ClickHouse/ClickHouse/pull/3155 rel="external nofollow noreferrer" target=_blank>#3155</a></li><li>修正了 <code class=syntax>arrayCumSumNonNegative</code> 函数（它不累加负值，如果累加器小于零）。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3163 rel="external nofollow noreferrer" target=_blank>Aleksey Studnev</a></li><li>固定如何 <code class=syntax>Merge</code> 表工作的顶部 <code class=syntax>Distributed</code> 使用时的表 <code class=syntax>PREWHERE</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/3165 rel="external nofollow noreferrer" target=_blank>#3165</a></li><li>在错误修复 <code class=syntax>ALTER UPDATE</code> 查询。</li><li>在固定的错误 <code class=syntax>odbc</code> 表功能，出现在版本18.12。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3197 rel="external nofollow noreferrer" target=_blank>#3197</a></li><li>修正了聚合函数的操作 <code class=syntax>StateArray</code> 组合子 <a href=https://github.com/ClickHouse/ClickHouse/pull/3188 rel="external nofollow noreferrer" target=_blank>#3188</a></li><li>修正了划分时崩溃 <code class=syntax>Decimal</code> 值为零。 <a href=https://github.com/ClickHouse/ClickHouse/commit/69dd6609193beb4e7acd3e6ad216eca0ccfb8179 rel="external nofollow noreferrer" target=_blank>69dd6609</a></li><li>使用固定输出类型的操作 <code class=syntax>Decimal</code> 和整数参数。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3224 rel="external nofollow noreferrer" target=_blank>#3224</a></li><li>修正了在段错误 <code class=syntax>GROUP BY</code> 上 <code class=syntax>Decimal128</code>. <a href=https://github.com/ClickHouse/ClickHouse/commit/3359ba06c39fcd05bfdb87d6c64154819621e13a rel="external nofollow noreferrer" target=_blank>3359ba06</a></li><li>该 <code class=syntax>log_query_threads</code> 设置（关于查询执行的每个线程的日志记录信息）现在生效，只有当 <code class=syntax>log_queries</code> 选项（有关查询的日志记录信息）设置为1。 由于 <code class=syntax>log_query_threads</code> 默认情况下，即使禁用了查询日志记录，也会先前记录有关线程的信息。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3241 rel="external nofollow noreferrer" target=_blank>#3241</a></li><li>修正了分位数聚合函数的分布式操作中的错误（错误消息 <code class=syntax>Not found column quantile...</code>). <a href=https://github.com/ClickHouse/ClickHouse/commit/292a885533b8e3b41ce8993867069d14cbd5a664 rel="external nofollow noreferrer" target=_blank>292a8855</a></li><li>修复了同时在18.12.17版服务器和旧服务器的集群上工作时的兼容性问题。 对于具有固定和非固定长度的GROUP BY键的分布式查询，如果要聚合大量数据，则返回的数据并不总是完全聚合（两个不同的行包含相同的聚合键）。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3254 rel="external nofollow noreferrer" target=_blank>#3254</a></li><li>固定处理替换 <code class=syntax>clickhouse-performance-test</code>，如果查询只包含测试中声明的替换的一部分。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3263 rel="external nofollow noreferrer" target=_blank>#3263</a></li><li>修复了使用时的错误 <code class=syntax>FINAL</code> 与 <code class=syntax>PREWHERE</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/3298 rel="external nofollow noreferrer" target=_blank>#3298</a></li><li>修复了使用时的错误 <code class=syntax>PREWHERE</code> 在过程中添加的列 <code class=syntax>ALTER</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/3298 rel="external nofollow noreferrer" target=_blank>#3298</a></li><li>增加了一个检查没有 <code class=syntax>arrayJoin</code> 为 <code class=syntax>DEFAULT</code> 和 <code class=syntax>MATERIALIZED</code> 表达式。 前情提要, <code class=syntax>arrayJoin</code> 插入数据时导致错误。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3337 rel="external nofollow noreferrer" target=_blank>#3337</a></li><li>增加了一个检查没有 <code class=syntax>arrayJoin</code> 在一个 <code class=syntax>PREWHERE</code> 条款 以前，这导致了类似的消息 <code class=syntax>Size ... doesn't match</code> 或 <code class=syntax>Unknown compression method</code> 执行查询时。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3357 rel="external nofollow noreferrer" target=_blank>#3357</a></li><li>修复了优化后可能发生的极少数情况下的段错误，并将相等性评估与相应的IN表达式链接起来。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3339 rel="external nofollow noreferrer" target=_blank>刘一民-字节舞</a></li><li>小幅更正 <code class=syntax>clickhouse-benchmark</code>:以前，客户端信息没有发送到服务器;现在关闭时更准确地计算执行的查询数量，并限制迭代次数。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3351 rel="external nofollow noreferrer" target=_blank>#3351</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/3352 rel="external nofollow noreferrer" target=_blank>#3352</a></li></ul><h4 id=backward-incompatible-changes-1>向后不兼容的更改:<a class=headerlink href=../amp/#backward-incompatible-changes-1 title="Permanent link"> </a></h4><ul><li>删除了 <code class=syntax>allow_experimental_decimal_type</code> 选项。 该 <code class=syntax>Decimal</code> 数据类型可供默认使用。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3329 rel="external nofollow noreferrer" target=_blank>#3329</a></li></ul><h2 id=clickhouse-release-18-12>ClickHouse释放18.12<a class=headerlink href=../amp/#clickhouse-release-18-12 title="Permanent link"> </a></h2><h3 id=clickhouse-release-18-12-17-2018-09-16>碌莽禄,拢,010-68520682\&lt;url&gt;<a class=headerlink href=../amp/#clickhouse-release-18-12-17-2018-09-16 title="Permanent link"> </a></h3><h4 id=new-features-2>新功能:<a class=headerlink href=../amp/#new-features-2 title="Permanent link"> </a></h4><ul><li><code class=syntax>invalidate_query</code> （指定查询来检查是否需要更新外部字典的能力）实现了 <code class=syntax>clickhouse</code> 资料来源。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3126 rel="external nofollow noreferrer" target=_blank>#3126</a></li><li>增加了使用的能力 <code class=syntax>UInt*</code>, <code class=syntax>Int*</code>，和 <code class=syntax>DateTime</code> 数据类型（与 <code class=syntax>Date</code> 类型）作为 <code class=syntax>range_hashed</code> 定义范围边界的外部字典键。 现在 <code class=syntax>NULL</code> 可用于指定开放范围。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3123 rel="external nofollow noreferrer" target=_blank>瓦西里*内姆科夫</a></li><li>该 <code class=syntax>Decimal</code> 类型现在支持 <code class=syntax>var*</code> 和 <code class=syntax>stddev*</code> 聚合函数。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3129 rel="external nofollow noreferrer" target=_blank>#3129</a></li><li>该 <code class=syntax>Decimal</code> 类型现在支持数学函数 (<code class=syntax>exp</code>, <code class=syntax>sin</code> 等等。) <a href=https://github.com/ClickHouse/ClickHouse/pull/3129 rel="external nofollow noreferrer" target=_blank>#3129</a></li><li>该 <code class=syntax>system.part_log</code> 表现在有 <code class=syntax>partition_id</code> 列。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3089 rel="external nofollow noreferrer" target=_blank>#3089</a></li></ul><h4 id=bug-fixes-11>错误修复:<a class=headerlink href=../amp/#bug-fixes-11 title="Permanent link"> </a></h4><ul><li><code class=syntax>Merge</code> 现在正常工作 <code class=syntax>Distributed</code> 桌子 <a href=https://github.com/ClickHouse/ClickHouse/pull/3159 rel="external nofollow noreferrer" target=_blank>张冬</a></li><li>修复了不兼容（不必要的依赖 <code class=syntax>glibc</code> 版本），这使得它不可能运行ClickHouse的 <code class=syntax>Ubuntu Precise</code> 和旧版本。 在版本18.12.13中出现了不兼容。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3130 rel="external nofollow noreferrer" target=_blank>#3130</a></li><li>在固定的错误 <code class=syntax>enable_optimize_predicate_expression</code> 设置。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3107 rel="external nofollow noreferrer" target=_blank>张冬</a></li><li>修复了在早于18.12.13的版本上使用副本集群并同时在具有较新版本的服务器上创建表的新副本时出现的向后兼容性的一个小问题（如消息中所示 <code class=syntax>Can not clone replica, because the ... updated to new ClickHouse version</code>，这是合乎逻辑的，但不应该发生）。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3122 rel="external nofollow noreferrer" target=_blank>#3122</a></li></ul><h4 id=backward-incompatible-changes-2>向后不兼容的更改:<a class=headerlink href=../amp/#backward-incompatible-changes-2 title="Permanent link"> </a></h4><ul><li>该 <code class=syntax>enable_optimize_predicate_expression</code> 默认情况下启用选项（这是相当乐观的）。 如果发生与搜索列名相关的查询分析错误，请设置 <code class=syntax>enable_optimize_predicate_expression</code> 为0。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3107 rel="external nofollow noreferrer" target=_blank>张冬</a></li></ul><h3 id=clickhouse-release-18-12-14-2018-09-13>碌莽禄,拢,0755-88888888<a class=headerlink href=../amp/#clickhouse-release-18-12-14-2018-09-13 title="Permanent link"> </a></h3><h4 id=new-features-3>新功能:<a class=headerlink href=../amp/#new-features-3 title="Permanent link"> </a></h4><ul><li>增加了对 <code class=syntax>ALTER UPDATE</code> 查询。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3035 rel="external nofollow noreferrer" target=_blank>#3035</a></li><li>添加了 <code class=syntax>allow_ddl</code> 选项，它限制用户对DDL查询的访问。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3104 rel="external nofollow noreferrer" target=_blank>#3104</a></li><li>添加了 <code class=syntax>min_merge_bytes_to_use_direct_io</code> 备选案文 <code class=syntax>MergeTree</code> 引擎允许您为合并的总大小设置阈值（当超过阈值时，将使用O_DIRECT处理数据部分文件）。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3117 rel="external nofollow noreferrer" target=_blank>#3117</a></li><li>该 <code class=syntax>system.merges</code> 系统表现在包含 <code class=syntax>partition_id</code> 列。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3099 rel="external nofollow noreferrer" target=_blank>#3099</a></li></ul><h4 id=improvements-3>改进<a class=headerlink href=../amp/#improvements-3 title="Permanent link"> </a></h4><ul><li>如果数据部分在变异期间保持不变，则副本不会下载该数据部分。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3103 rel="external nofollow noreferrer" target=_blank>#3103</a></li><li>使用时，自动完成可用于设置名称 <code class=syntax>clickhouse-client</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/3106 rel="external nofollow noreferrer" target=_blank>#3106</a></li></ul><h4 id=bug-fixes-12>错误修复:<a class=headerlink href=../amp/#bug-fixes-12 title="Permanent link"> </a></h4><ul><li>添加了一个检查是元素的数组的大小 <code class=syntax>Nested</code> 插入时的类型字段。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3118 rel="external nofollow noreferrer" target=_blank>#3118</a></li><li>修正了一个错误更新外部字典与 <code class=syntax>ODBC</code> 来源和 <code class=syntax>hashed</code> 存储。 此错误发生在版本18.12.13中。</li><li>修复了使用以下命令从查询创建临时表时出现的崩溃 <code class=syntax>IN</code> 条件。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3098 rel="external nofollow noreferrer" target=_blank>张冬</a></li><li>修复了聚合函数中可能具有的数组的错误 <code class=syntax>NULL</code> 元素。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3097 rel="external nofollow noreferrer" target=_blank>张冬</a></li></ul><h3 id=clickhouse-release-18-12-13-2018-09-10>碌莽禄,拢,010-68520682\&lt;url&gt;<a class=headerlink href=../amp/#clickhouse-release-18-12-13-2018-09-10 title="Permanent link"> </a></h3><h4 id=new-features-4>新功能:<a class=headerlink href=../amp/#new-features-4 title="Permanent link"> </a></h4><ul><li>添加了 <code class=syntax>DECIMAL(digits, scale)</code> 数据类型 (<code class=syntax>Decimal32(scale)</code>, <code class=syntax>Decimal64(scale)</code>, <code class=syntax>Decimal128(scale)</code>). 要启用它，请使用以下设置 <code class=syntax>allow_experimental_decimal_type</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/2846 rel="external nofollow noreferrer" target=_blank>#2846</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/2970 rel="external nofollow noreferrer" target=_blank>#2970</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/3008 rel="external nofollow noreferrer" target=_blank>#3008</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/3047 rel="external nofollow noreferrer" target=_blank>#3047</a></li><li>新 <code class=syntax>WITH ROLLUP</code> 修饰符 <code class=syntax>GROUP BY</code> （替代语法: <code class=syntax>GROUP BY ROLLUP(...)</code>). <a href=https://github.com/ClickHouse/ClickHouse/pull/2948 rel="external nofollow noreferrer" target=_blank>#2948</a></li><li>在具有JOIN的查询中，星形字符将扩展为符合SQL标准的所有表中的列列表。 您可以通过设置恢复旧行为 <code class=syntax>asterisk_left_columns_only</code> 在用户配置级别上为1。 <a href=https://github.com/ClickHouse/ClickHouse/pull/2787 rel="external nofollow noreferrer" target=_blank>张冬</a></li><li>增加了对连接表函数的支持。 <a href=https://github.com/ClickHouse/ClickHouse/pull/2907 rel="external nofollow noreferrer" target=_blank>张冬</a></li><li>在clickhouse-client中按Tab键进行自动完成。 <a href=https://github.com/ClickHouse/ClickHouse/pull/2447 rel="external nofollow noreferrer" target=_blank>谢尔盖*谢尔宾</a></li><li>Clickhouse-client中的Ctrl+C清除输入的查询。 <a href=https://github.com/ClickHouse/ClickHouse/pull/2877 rel="external nofollow noreferrer" target=_blank>#2877</a></li><li>添加了 <code class=syntax>join_default_strictness</code> 设置（值: <code class=syntax>"</code>, <code class=syntax>'any'</code>, <code class=syntax>'all'</code>). 这允许您不指定 <code class=syntax>ANY</code> 或 <code class=syntax>ALL</code> 为 <code class=syntax>JOIN</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/2982 rel="external nofollow noreferrer" target=_blank>#2982</a></li><li>与查询处理相关的服务器日志的每一行都显示了查询ID。 <a href=https://github.com/ClickHouse/ClickHouse/pull/2482 rel="external nofollow noreferrer" target=_blank>#2482</a></li><li>现在，您可以在clickhouse-client中获取查询执行日志（使用 <code class=syntax>send_logs_level</code> 设置）。 通过分布式查询处理，日志从所有服务器级联。 <a href=https://github.com/ClickHouse/ClickHouse/pull/2482 rel="external nofollow noreferrer" target=_blank>#2482</a></li><li>该 <code class=syntax>system.query_log</code> 和 <code class=syntax>system.processes</code> (<code class=syntax>SHOW PROCESSLIST</code>）表现在有关所有更改的设置信息，当你运行一个查询（的嵌套结构 <code class=syntax>Settings</code> 数据）。 添加了 <code class=syntax>log_query_settings</code> 设置。 <a href=https://github.com/ClickHouse/ClickHouse/pull/2482 rel="external nofollow noreferrer" target=_blank>#2482</a></li><li>该 <code class=syntax>system.query_log</code> 和 <code class=syntax>system.processes</code> 表现在显示有关参与查询执行的线程数的信息（请参阅 <code class=syntax>thread_numbers</code> 列）。 <a href=https://github.com/ClickHouse/ClickHouse/pull/2482 rel="external nofollow noreferrer" target=_blank>#2482</a></li><li>已添加 <code class=syntax>ProfileEvents</code> 用于度量通过网络读取和写入磁盘以及读取和写入磁盘所花费的时间、网络错误的数量以及在网络带宽受限时所花费的等待时间。 <a href=https://github.com/ClickHouse/ClickHouse/pull/2482 rel="external nofollow noreferrer" target=_blank>#2482</a></li><li>已添加 <code class=syntax>ProfileEvents</code>包含来自rusage的系统指标的计数器（您可以使用它们获取有关用户空间和内核、页面错误和上下文切换的CPU使用率的信息），以及taskstats指标（使用它们获取有关I/O等待时间、CPU等待时间以及读取和记录的数据量的信息，无论是否包含页面缓存）。 <a href=https://github.com/ClickHouse/ClickHouse/pull/2482 rel="external nofollow noreferrer" target=_blank>#2482</a></li><li>该 <code class=syntax>ProfileEvents</code> 计数器应用于全局和每个查询，以及每个查询执行线程，它允许您按查询详细分析资源消耗情况。 <a href=https://github.com/ClickHouse/ClickHouse/pull/2482 rel="external nofollow noreferrer" target=_blank>#2482</a></li><li>添加了 <code class=syntax>system.query_thread_log</code> 表，其中包含有关每个查询执行线程的信息。 添加了 <code class=syntax>log_query_threads</code> 设置。 <a href=https://github.com/ClickHouse/ClickHouse/pull/2482 rel="external nofollow noreferrer" target=_blank>#2482</a></li><li>该 <code class=syntax>system.metrics</code> 和 <code class=syntax>system.events</code> 表现在有内置文档。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3016 rel="external nofollow noreferrer" target=_blank>#3016</a></li><li>添加了 <code class=syntax>arrayEnumerateDense</code> 功能。 <a href=https://github.com/ClickHouse/ClickHouse/pull/2975 rel="external nofollow noreferrer" target=_blank>阿莫斯鸟</a></li><li>添加了 <code class=syntax>arrayCumSumNonNegative</code> 和 <code class=syntax>arrayDifference</code> 功能。 <a href=https://github.com/ClickHouse/ClickHouse/pull/2942 rel="external nofollow noreferrer" target=_blank>Aleksey Studnev</a></li><li>添加了 <code class=syntax>retention</code> 聚合函数。 <a href=https://github.com/ClickHouse/ClickHouse/pull/2887 rel="external nofollow noreferrer" target=_blank>李尚迪</a></li><li>现在，您可以使用plus运算符添加（合并）聚合函数的状态，并将聚合函数的状态乘以非负常数。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3062 rel="external nofollow noreferrer" target=_blank>#3062</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/3034 rel="external nofollow noreferrer" target=_blank>#3034</a></li><li>MergeTree系列中的表现在具有虚拟列 <code class=syntax>_partition_id</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/3089 rel="external nofollow noreferrer" target=_blank>#3089</a></li></ul><h4 id=experimental-features-1>实验特点:<a class=headerlink href=../amp/#experimental-features-1 title="Permanent link"> </a></h4><ul><li>添加了 <code class=syntax>LowCardinality(T)</code> 数据类型。 此数据类型自动创建值的本地字典，并允许数据处理而无需解压字典。 <a href=https://github.com/ClickHouse/ClickHouse/pull/2830 rel="external nofollow noreferrer" target=_blank>#2830</a></li><li>添加了JIT编译函数的缓存和编译前使用次数的计数器。 要JIT编译表达式，请启用 <code class=syntax>compile_expressions</code> 设置。 <a href=https://github.com/ClickHouse/ClickHouse/pull/2990 rel="external nofollow noreferrer" target=_blank>#2990</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/3077 rel="external nofollow noreferrer" target=_blank>#3077</a></li></ul><h4 id=improvements-4>改进:<a class=headerlink href=../amp/#improvements-4 title="Permanent link"> </a></h4><ul><li>修复了放弃副本时复制日志无限积累的问题。 为延迟较长的副本添加了有效的恢复模式。</li><li>改进的性能 <code class=syntax>GROUP BY</code> 当其中一个是string，其他是固定长度时，具有多个聚合字段。</li><li>使用时提高性能 <code class=syntax>PREWHERE</code> 并与表达式的隐式转移 <code class=syntax>PREWHERE</code>.</li><li>改进文本格式的解析性能 (<code class=syntax>CSV</code>, <code class=syntax>TSV</code>). <a href=https://github.com/ClickHouse/ClickHouse/pull/2977 rel="external nofollow noreferrer" target=_blank>阿莫斯鸟</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/2980 rel="external nofollow noreferrer" target=_blank>#2980</a></li><li>改进了读取二进制格式字符串和数组的性能。 <a href=https://github.com/ClickHouse/ClickHouse/pull/2955 rel="external nofollow noreferrer" target=_blank>阿莫斯鸟</a></li><li>提高性能和减少内存消耗的查询 <code class=syntax>system.tables</code> 和 <code class=syntax>system.columns</code> 当单个服务器上有非常大量的表时。 <a href=https://github.com/ClickHouse/ClickHouse/pull/2953 rel="external nofollow noreferrer" target=_blank>#2953</a></li><li>修复了大量查询导致错误的情况下的性能问题（ <code class=syntax>_dl_addr</code> 功能是可见的 <code class=syntax>perf top</code>，但服务器没有使用太多的CPU）。 <a href=https://github.com/ClickHouse/ClickHouse/pull/2938 rel="external nofollow noreferrer" target=_blank>#2938</a></li><li>条件被转换到视图中（当 <code class=syntax>enable_optimize_predicate_expression</code> 被启用）。 <a href=https://github.com/ClickHouse/ClickHouse/pull/2907 rel="external nofollow noreferrer" target=_blank>张冬</a></li><li>改进的功能 <code class=syntax>UUID</code> 数据类型。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3074 rel="external nofollow noreferrer" target=_blank>#3074</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/2985 rel="external nofollow noreferrer" target=_blank>#2985</a></li><li>该 <code class=syntax>UUID</code> -Alchemist字典支持数据类型。 <a href=https://github.com/ClickHouse/ClickHouse/pull/2822 rel="external nofollow noreferrer" target=_blank>#2822</a></li><li>该 <code class=syntax>visitParamExtractRaw</code> 函数与嵌套结构正常工作。 <a href=https://github.com/ClickHouse/ClickHouse/pull/2974 rel="external nofollow noreferrer" target=_blank>张冬</a></li><li>当 <code class=syntax>input_format_skip_unknown_fields</code> 启用设置，在对象字段 <code class=syntax>JSONEachRow</code> 格式被正确跳过。 <a href=https://github.com/ClickHouse/ClickHouse/pull/2958 rel="external nofollow noreferrer" target=_blank>BlahGeek</a></li><li>对于一个 <code class=syntax>CASE</code> 表达式与条件，你现在可以省略 <code class=syntax>ELSE</code>，这相当于 <code class=syntax>ELSE NULL</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/2920 rel="external nofollow noreferrer" target=_blank>#2920</a></li><li>现在可以在使用ZooKeeper时配置操作超时。 <a href=https://github.com/ClickHouse/ClickHouse/pull/2971 rel="external nofollow noreferrer" target=_blank>urykhy</a></li><li>您可以指定偏移量 <code class=syntax>LIMIT n, m</code> 作为 <code class=syntax>LIMIT n OFFSET m</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/2840 rel="external nofollow noreferrer" target=_blank>#2840</a></li><li>您可以使用 <code class=syntax>SELECT TOP n</code> 语法作为替代 <code class=syntax>LIMIT</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/2840 rel="external nofollow noreferrer" target=_blank>#2840</a></li><li>增加了队列的大小写入系统表，因此 <code class=syntax>SystemLog parameter queue is full</code> 错误不经常发生。</li><li>该 <code class=syntax>windowFunnel</code> aggregate函数现在支持满足多个条件的事件。 <a href=https://github.com/ClickHouse/ClickHouse/pull/2801 rel="external nofollow noreferrer" target=_blank>阿莫斯鸟</a></li><li>重复的列可以用于 <code class=syntax>USING</code> 条款 <code class=syntax>JOIN</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/3006 rel="external nofollow noreferrer" target=_blank>#3006</a></li><li><code class=syntax>Pretty</code> 格式现在对列对齐宽度有限制。 使用 <code class=syntax>output_format_pretty_max_column_pad_width</code> 设置。 如果一个值较宽，它仍将完整显示，但表中的其他单元格不会太宽。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3003 rel="external nofollow noreferrer" target=_blank>#3003</a></li><li>该 <code class=syntax>odbc</code> 表函数现在允许您指定数据库/模式名称。 <a href=https://github.com/ClickHouse/ClickHouse/pull/2885 rel="external nofollow noreferrer" target=_blank>阿莫斯鸟</a></li><li>增加了使用在指定的用户名的能力 <code class=syntax>clickhouse-client</code> 配置文件。 <a href=https://github.com/ClickHouse/ClickHouse/pull/2909 rel="external nofollow noreferrer" target=_blank>弗拉基米尔*科兹宾</a></li><li>该 <code class=syntax>ZooKeeperExceptions</code> 计数器已被分成三个计数器: <code class=syntax>ZooKeeperUserExceptions</code>, <code class=syntax>ZooKeeperHardwareExceptions</code>，和 <code class=syntax>ZooKeeperOtherExceptions</code>.</li><li><code class=syntax>ALTER DELETE</code> 查询适用于实例化视图。</li><li>在定期运行清理线程时添加了随机化 <code class=syntax>ReplicatedMergeTree</code> 表，以避免周期性负载尖峰时有一个非常大的数量 <code class=syntax>ReplicatedMergeTree</code> 桌子</li><li>支持 <code class=syntax>ATTACH TABLE ... ON CLUSTER</code> 查询。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3025 rel="external nofollow noreferrer" target=_blank>#3025</a></li></ul><h4 id=bug-fixes-13>错误修复:<a class=headerlink href=../amp/#bug-fixes-13 title="Permanent link"> </a></h4><ul><li>修正了一个问题 <code class=syntax>Dictionary</code> 表（抛出 <code class=syntax>Size of offsets doesn't match size of column</code> 或 <code class=syntax>Unknown compression method</code> 例外）。 此错误出现在版本18.10.3中。 <a href=https://github.com/ClickHouse/ClickHouse/issues/2913 rel="external nofollow noreferrer" target=_blank>#2913</a></li><li>修复了合并时的错误 <code class=syntax>CollapsingMergeTree</code> 如果其中一个数据部分为空（这些部分在合并或合并期间形成 <code class=syntax>ALTER DELETE</code> 如果所有数据被删除），和 <code class=syntax>vertical</code> 算法被用于合并。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3049 rel="external nofollow noreferrer" target=_blank>#3049</a></li><li>在固定的竞争条件 <code class=syntax>DROP</code> 或 <code class=syntax>TRUNCATE</code> 为 <code class=syntax>Memory</code> 表与同时 <code class=syntax>SELECT</code>，这可能导致服务器崩溃。 此错误出现在版本1.1.54388中。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3038 rel="external nofollow noreferrer" target=_blank>#3038</a></li><li>修正了插入时数据丢失的可能性 <code class=syntax>Replicated</code> 表如果 <code class=syntax>Session is expired</code> 错误返回（数据丢失可以通过检测 <code class=syntax>ReplicatedDataLoss</code> 公制）。 此错误发生在版本1.1.54378。 <a href=https://github.com/ClickHouse/ClickHouse/pull/2939 rel="external nofollow noreferrer" target=_blank>#2939</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/2949 rel="external nofollow noreferrer" target=_blank>#2949</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/2964 rel="external nofollow noreferrer" target=_blank>#2964</a></li><li>在修复段错误 <code class=syntax>JOIN ... ON</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/3000 rel="external nofollow noreferrer" target=_blank>#3000</a></li><li>修正了错误搜索列名时 <code class=syntax>WHERE</code> 表达式完全由限定列名组成，例如 <code class=syntax>WHERE table.column</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/2994 rel="external nofollow noreferrer" target=_blank>#2994</a></li><li>修正了 “Not found column” 如果从远程服务器请求由IN表达式和子查询组成的单个列，则在执行分布式查询时发生错误。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3087 rel="external nofollow noreferrer" target=_blank>#3087</a></li><li>修正了 <code class=syntax>Block structure mismatch in UNION stream: different number of columns</code> 如果其中一个分片是本地的，而另一个分片不是，则发生分布式查询的错误，并优化移动到 <code class=syntax>PREWHERE</code> 被触发。 <a href=https://github.com/ClickHouse/ClickHouse/pull/2226 rel="external nofollow noreferrer" target=_blank>#2226</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/3037 rel="external nofollow noreferrer" target=_blank>#3037</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/3055 rel="external nofollow noreferrer" target=_blank>#3055</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/3065 rel="external nofollow noreferrer" target=_blank>#3065</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/3073 rel="external nofollow noreferrer" target=_blank>#3073</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/3090 rel="external nofollow noreferrer" target=_blank>#3090</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/3093 rel="external nofollow noreferrer" target=_blank>#3093</a></li><li>修正了 <code class=syntax>pointInPolygon</code> 非凸多边形的某些情况下的函数。 <a href=https://github.com/ClickHouse/ClickHouse/pull/2910 rel="external nofollow noreferrer" target=_blank>#2910</a></li><li>修正了比较时不正确的结果 <code class=syntax>nan</code> 与整数。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3024 rel="external nofollow noreferrer" target=_blank>#3024</a></li><li>修正了一个错误 <code class=syntax>zlib-ng</code> 在极少数情况下可能导致segfault的库。 <a href=https://github.com/ClickHouse/ClickHouse/pull/2854 rel="external nofollow noreferrer" target=_blank>#2854</a></li><li>修复了插入到表中时的内存泄漏 <code class=syntax>AggregateFunction</code> 列，如果聚合函数的状态不简单（分别分配内存），并且如果单个插入请求导致多个小块。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3084 rel="external nofollow noreferrer" target=_blank>#3084</a></li><li>修复了创建和删除相同的竞争条件 <code class=syntax>Buffer</code> 或 <code class=syntax>MergeTree</code> 同时表。</li><li>修复了比较由某些非平凡类型（如元组）组成的元组时出现段错误的可能性。 <a href=https://github.com/ClickHouse/ClickHouse/pull/2989 rel="external nofollow noreferrer" target=_blank>#2989</a></li><li>修正了运行某些时段错误的可能性 <code class=syntax>ON CLUSTER</code> 查询。 <a href=https://github.com/ClickHouse/ClickHouse/pull/2960 rel="external nofollow noreferrer" target=_blank>张冬</a></li><li>修正了一个错误 <code class=syntax>arrayDistinct</code> 功能 <code class=syntax>Nullable</code> 数组元素。 <a href=https://github.com/ClickHouse/ClickHouse/pull/2845 rel="external nofollow noreferrer" target=_blank>#2845</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/2937 rel="external nofollow noreferrer" target=_blank>#2937</a></li><li>该 <code class=syntax>enable_optimize_predicate_expression</code> 选项现在正确支持的情况下 <code class=syntax>SELECT *</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/2929 rel="external nofollow noreferrer" target=_blank>张冬</a></li><li>修复了重新初始化ZooKeeper会话时的段错误。 <a href=https://github.com/ClickHouse/ClickHouse/pull/2917 rel="external nofollow noreferrer" target=_blank>#2917</a></li><li>与ZooKeeper工作时固定的潜在阻塞。</li><li>修正了不正确的代码添加嵌套的数据结构中 <code class=syntax>SummingMergeTree</code>.</li><li>在为聚合函数的状态分配内存时，会正确考虑对齐，这使得在实现聚合函数的状态时可以使用需要对齐的操作。 <a href=https://github.com/ClickHouse/ClickHouse/pull/2808 rel="external nofollow noreferrer" target=_blank>晨兴-xc</a></li></ul><h4 id=security-fix>安全修复:<a class=headerlink href=../amp/#security-fix title="Permanent link"> </a></h4><ul><li>安全使用ODBC数据源。 与ODBC驱动程序的交互使用单独的 <code class=syntax>clickhouse-odbc-bridge</code> 过程。 第三方ODBC驱动程序中的错误不再导致服务器稳定性问题或漏洞。 <a href=https://github.com/ClickHouse/ClickHouse/pull/2828 rel="external nofollow noreferrer" target=_blank>#2828</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/2879 rel="external nofollow noreferrer" target=_blank>#2879</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/2886 rel="external nofollow noreferrer" target=_blank>#2886</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/2893 rel="external nofollow noreferrer" target=_blank>#2893</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/2921 rel="external nofollow noreferrer" target=_blank>#2921</a></li><li>修正了在文件路径的不正确的验证 <code class=syntax>catBoostPool</code> 表功能。 <a href=https://github.com/ClickHouse/ClickHouse/pull/2894 rel="external nofollow noreferrer" target=_blank>#2894</a></li><li>系统表的内容 (<code class=syntax>tables</code>, <code class=syntax>databases</code>, <code class=syntax>parts</code>, <code class=syntax>columns</code>, <code class=syntax>parts_columns</code>, <code class=syntax>merges</code>, <code class=syntax>mutations</code>, <code class=syntax>replicas</code>，和 <code class=syntax>replication_queue</code>）根据用户对数据库的配置访问权限进行过滤 (<code class=syntax>allow_databases</code>). <a href=https://github.com/ClickHouse/ClickHouse/pull/2856 rel="external nofollow noreferrer" target=_blank>张冬</a></li></ul><h4 id=backward-incompatible-changes-3>向后不兼容的更改:<a class=headerlink href=../amp/#backward-incompatible-changes-3 title="Permanent link"> </a></h4><ul><li>在具有JOIN的查询中，星形字符将扩展为符合SQL标准的所有表中的列列表。 您可以通过设置恢复旧行为 <code class=syntax>asterisk_left_columns_only</code> 在用户配置级别上为1。</li></ul><h4 id=build-changes-2>构建更改:<a class=headerlink href=../amp/#build-changes-2 title="Permanent link"> </a></h4><ul><li>大多数集成测试现在可以通过commit运行。</li><li>代码样式检查也可以通过提交运行。</li><li>该 <code class=syntax>memcpy</code> 在CentOS7/Fedora上构建时，正确选择实现。 <a href=https://github.com/ClickHouse/ClickHouse/pull/2912 rel="external nofollow noreferrer" target=_blank>Etienne Champetier</a></li><li>当使用clang来构建时，来自一些警告 <code class=syntax>-Weverything</code> 已添加，除了常规 <code class=syntax>-Wall-Wextra -Werror</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/2957 rel="external nofollow noreferrer" target=_blank>#2957</a></li><li>调试生成使用 <code class=syntax>jemalloc</code> 调试选项。</li><li>用于与ZooKeeper交互的库接口被声明为抽象。 <a href=https://github.com/ClickHouse/ClickHouse/pull/2950 rel="external nofollow noreferrer" target=_blank>#2950</a></li></ul><h2 id=clickhouse-release-18-10>ClickHouse释放18.10<a class=headerlink href=../amp/#clickhouse-release-18-10 title="Permanent link"> </a></h2><h3 id=clickhouse-release-18-10-3-2018-08-13>碌莽禄,拢,010-68520682\&lt;url&gt;<a class=headerlink href=../amp/#clickhouse-release-18-10-3-2018-08-13 title="Permanent link"> </a></h3><h4 id=new-features-5>新功能:<a class=headerlink href=../amp/#new-features-5 title="Permanent link"> </a></h4><ul><li>HTTPS可用于复制。 <a href=https://github.com/ClickHouse/ClickHouse/pull/2760 rel="external nofollow noreferrer" target=_blank>#2760</a></li><li>新增功能 <code class=syntax>murmurHash2_64</code>, <code class=syntax>murmurHash3_32</code>, <code class=syntax>murmurHash3_64</code>，和 <code class=syntax>murmurHash3_128</code> 除了现有的 <code class=syntax>murmurHash2_32</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/2791 rel="external nofollow noreferrer" target=_blank>#2791</a></li><li>支持ClickHouse ODBC驱动程序中的可空类型 (<code class=syntax>ODBCDriver2</code> 输出格式）。 <a href=https://github.com/ClickHouse/ClickHouse/pull/2834 rel="external nofollow noreferrer" target=_blank>#2834</a></li><li>支持 <code class=syntax>UUID</code> 在关键列。</li></ul><h4 id=improvements-5>改进:<a class=headerlink href=../amp/#improvements-5 title="Permanent link"> </a></h4><ul><li>当群集从配置文件中删除时，可以在不重新启动服务器的情况下删除群集。 <a href=https://github.com/ClickHouse/ClickHouse/pull/2777 rel="external nofollow noreferrer" target=_blank>#2777</a></li><li>从配置文件中删除外部字典时，可以在不重新启动服务器的情况下删除它们。 <a href=https://github.com/ClickHouse/ClickHouse/pull/2779 rel="external nofollow noreferrer" target=_blank>#2779</a></li><li>已添加 <code class=syntax>SETTINGS</code> 支持 <code class=syntax>Kafka</code> 表引擎。 <a href=https://github.com/ClickHouse/ClickHouse/pull/2781 rel="external nofollow noreferrer" target=_blank>Alexander Marshalov</a></li><li>改进的 <code class=syntax>UUID</code> 数据类型（尚未完成）。 <a href=https://github.com/ClickHouse/ClickHouse/pull/2618 rel="external nofollow noreferrer" target=_blank>#2618</a></li><li>支持合并后的空部件 <code class=syntax>SummingMergeTree</code>, <code class=syntax>CollapsingMergeTree</code> 和 <code class=syntax>VersionedCollapsingMergeTree</code> 引擎 <a href=https://github.com/ClickHouse/ClickHouse/pull/2815 rel="external nofollow noreferrer" target=_blank>#2815</a></li><li>已完成突变的旧记录将被删除 (<code class=syntax>ALTER DELETE</code>). <a href=https://github.com/ClickHouse/ClickHouse/pull/2784 rel="external nofollow noreferrer" target=_blank>#2784</a></li><li>添加了 <code class=syntax>system.merge_tree_settings</code> 桌子 <a href=https://github.com/ClickHouse/ClickHouse/pull/2841 rel="external nofollow noreferrer" target=_blank>基里尔*什瓦科夫</a></li><li>该 <code class=syntax>system.tables</code> 表现在具有依赖列: <code class=syntax>dependencies_database</code> 和 <code class=syntax>dependencies_table</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/2851 rel="external nofollow noreferrer" target=_blank>张冬</a></li><li>添加了 <code class=syntax>max_partition_size_to_drop</code> 配置选项。 <a href=https://github.com/ClickHouse/ClickHouse/pull/2782 rel="external nofollow noreferrer" target=_blank>#2782</a></li><li>添加了 <code class=syntax>output_format_json_escape_forward_slashes</code> 选项。 <a href=https://github.com/ClickHouse/ClickHouse/pull/2812 rel="external nofollow noreferrer" target=_blank>Alexander Bocharov</a></li><li>添加了 <code class=syntax>max_fetch_partition_retries_count</code> 设置。 <a href=https://github.com/ClickHouse/ClickHouse/pull/2831 rel="external nofollow noreferrer" target=_blank>#2831</a></li><li>添加了 <code class=syntax>prefer_localhost_replica</code> 用于禁用本地副本的首选项以及在不进程间交互的情况下转到本地副本的设置。 <a href=https://github.com/ClickHouse/ClickHouse/pull/2832 rel="external nofollow noreferrer" target=_blank>#2832</a></li><li>该 <code class=syntax>quantileExact</code> 聚合函数返回 <code class=syntax>nan</code> 在聚合在一个空的情况下 <code class=syntax>Float32</code> 或 <code class=syntax>Float64</code> 预备 <a href=https://github.com/ClickHouse/ClickHouse/pull/2855 rel="external nofollow noreferrer" target=_blank>李尚迪</a></li></ul><h4 id=bug-fixes-14>错误修复:<a class=headerlink href=../amp/#bug-fixes-14 title="Permanent link"> </a></h4><ul><li>删除了ODBC的连接字符串参数的不必要的转义，这使得无法建立连接。 此错误发生在版本18.6.0中。</li><li>修正了处理逻辑 <code class=syntax>REPLACE PARTITION</code> 复制队列中的命令。 如果有两个 <code class=syntax>REPLACE</code> 对于同一个分区的命令，不正确的逻辑可能会导致其中一个保留在复制队列中而无法执行。 <a href=https://github.com/ClickHouse/ClickHouse/pull/2814 rel="external nofollow noreferrer" target=_blank>#2814</a></li><li>修正了一个合并错误，当所有的数据部分都是空的（从合并或从形成的部分 <code class=syntax>ALTER DELETE</code> 如果所有数据都被删除）。 此错误出现在18.1.0版本。 <a href=https://github.com/ClickHouse/ClickHouse/pull/2930 rel="external nofollow noreferrer" target=_blank>#2930</a></li><li>修复了并发错误 <code class=syntax>Set</code> 或 <code class=syntax>Join</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/2823 rel="external nofollow noreferrer" target=_blank>阿莫斯鸟</a></li><li>修正了 <code class=syntax>Block structure mismatch in UNION stream: different number of columns</code> 发生的错误 <code class=syntax>UNION ALL</code> 子查询内的查询，如果一个 <code class=syntax>SELECT</code> 查询包含重复的列名。 <a href=https://github.com/ClickHouse/ClickHouse/pull/2094 rel="external nofollow noreferrer" target=_blank>张冬</a></li><li>修复了连接到MySQL服务器时发生异常时的内存泄漏。</li><li>在查询错误的情况下修复了不正确的clickhouse客户端响应代码。</li><li>修正了包含DISTINCT的实例化视图的不正确行为。 <a href=https://github.com/ClickHouse/ClickHouse/issues/2795 rel="external nofollow noreferrer" target=_blank>#2795</a></li></ul><h4 id=backward-incompatible-changes-4>向后不兼容的更改<a class=headerlink href=../amp/#backward-incompatible-changes-4 title="Permanent link"> </a></h4><ul><li>删除了对分布式表的检查表查询的支持。</li></ul><h4 id=build-changes-3>构建更改:<a class=headerlink href=../amp/#build-changes-3 title="Permanent link"> </a></h4><ul><li>分配器已被替换: <code class=syntax>jemalloc</code> 现在用来代替 <code class=syntax>tcmalloc</code>. 在某些情况下，这增加了速度高达20％。 但是，有些查询已经减慢了20％。 在某些情况下，内存消耗减少了大约10%，稳定性得到了提高。 由于竞争激烈的负载，用户空间和系统中的CPU使用率略有增加。 <a href=https://github.com/ClickHouse/ClickHouse/pull/2773 rel="external nofollow noreferrer" target=_blank>#2773</a></li><li>从子模块使用libressl。 <a href=https://github.com/ClickHouse/ClickHouse/pull/1983 rel="external nofollow noreferrer" target=_blank>#1983</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/2807 rel="external nofollow noreferrer" target=_blank>#2807</a></li><li>从子模块使用unixodbc。 <a href=https://github.com/ClickHouse/ClickHouse/pull/2789 rel="external nofollow noreferrer" target=_blank>#2789</a></li><li>从子模块中使用mariadb-connector-c。 <a href=https://github.com/ClickHouse/ClickHouse/pull/2785 rel="external nofollow noreferrer" target=_blank>#2785</a></li><li>将功能性测试文件添加到存储库中，这些文件取决于测试数据的可用性（暂时不包含测试数据本身）。</li></ul><h2 id=clickhouse-release-18-6>ClickHouse释放18.6<a class=headerlink href=../amp/#clickhouse-release-18-6 title="Permanent link"> </a></h2><h3 id=clickhouse-release-18-6-0-2018-08-02>碌莽禄,拢,010-68520682\&lt;url&gt;戮卤篓拢,010-68520682\&lt;url&gt;<a class=headerlink href=../amp/#clickhouse-release-18-6-0-2018-08-02 title="Permanent link"> </a></h3><h4 id=new-features-6>新功能:<a class=headerlink href=../amp/#new-features-6 title="Permanent link"> </a></h4><ul><li>增加了对ON表达式的支持，以便在语法上加入:<br><code class=syntax>JOIN ON Expr([table.]column ...) = Expr([table.]column, ...) [AND Expr([table.]column, ...) = Expr([table.]column, ...) ...]</code><br> 表达式必须是由AND运算符连接的等式链。 等式的每一侧都可以是其中一个表的列上的任意表达式。 支持使用完全限定的列名 (<code class=syntax>table.name</code>, <code class=syntax>database.table.name</code>, <code class=syntax>table_alias.name</code>, <code class=syntax>subquery_alias.name</code>）对于正确的表。 <a href=https://github.com/ClickHouse/ClickHouse/pull/2742 rel="external nofollow noreferrer" target=_blank>#2742</a></li><li>可以启用HTTPS进行复制。 <a href=https://github.com/ClickHouse/ClickHouse/pull/2760 rel="external nofollow noreferrer" target=_blank>#2760</a></li></ul><h4 id=improvements-6>改进:<a class=headerlink href=../amp/#improvements-6 title="Permanent link"> </a></h4><ul><li>服务器将其版本的补丁组件传递给客户端。 有关修补程序版本组件的数据位于 <code class=syntax>system.processes</code> 和 <code class=syntax>query_log</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/2646 rel="external nofollow noreferrer" target=_blank>#2646</a></li></ul><h2 id=clickhouse-release-18-5>ClickHouse释放18.5<a class=headerlink href=../amp/#clickhouse-release-18-5 title="Permanent link"> </a></h2><h3 id=clickhouse-release-18-5-1-2018-07-31>碌莽禄,拢,010-68520682\&lt;url&gt;戮卤篓拢,010-68520682\&lt;url&gt;<a class=headerlink href=../amp/#clickhouse-release-18-5-1-2018-07-31 title="Permanent link"> </a></h3><h4 id=new-features-7>新功能:<a class=headerlink href=../amp/#new-features-7 title="Permanent link"> </a></h4><ul><li>添加了哈希函数 <code class=syntax>murmurHash2_32</code> <a href=https://github.com/ClickHouse/ClickHouse/pull/2756 rel="external nofollow noreferrer" target=_blank>#2756</a>.</li></ul><h4 id=improvements-7>改进:<a class=headerlink href=../amp/#improvements-7 title="Permanent link"> </a></h4><ul><li>现在你可以使用 <code class=syntax>from_env</code> <a href=https://github.com/ClickHouse/ClickHouse/pull/2741 rel="external nofollow noreferrer" target=_blank>#2741</a> 从环境变量设置配置文件中的值的属性。</li><li>增加了不区分大小写的版本 <code class=syntax>coalesce</code>, <code class=syntax>ifNull</code>，和 <code class=syntax>nullIf functions</code> <a href=https://github.com/ClickHouse/ClickHouse/pull/2752 rel="external nofollow noreferrer" target=_blank>#2752</a>.</li></ul><h4 id=bug-fixes-15>错误修复:<a class=headerlink href=../amp/#bug-fixes-15 title="Permanent link"> </a></h4><ul><li>修复了启动副本时可能出现的错误 <a href=https://github.com/ClickHouse/ClickHouse/pull/2759 rel="external nofollow noreferrer" target=_blank>#2759</a>.</li></ul><h2 id=clickhouse-release-18-4>ClickHouse释放18.4<a class=headerlink href=../amp/#clickhouse-release-18-4 title="Permanent link"> </a></h2><h3 id=clickhouse-release-18-4-0-2018-07-28>碌莽禄,拢,010-68520682\&lt;url&gt;<a class=headerlink href=../amp/#clickhouse-release-18-4-0-2018-07-28 title="Permanent link"> </a></h3><h4 id=new-features-8>新功能:<a class=headerlink href=../amp/#new-features-8 title="Permanent link"> </a></h4><ul><li>添加系统表: <code class=syntax>formats</code>, <code class=syntax>data_type_families</code>, <code class=syntax>aggregate_function_combinators</code>, <code class=syntax>table_functions</code>, <code class=syntax>table_engines</code>, <code class=syntax>collations</code> <a href=https://github.com/ClickHouse/ClickHouse/pull/2721 rel="external nofollow noreferrer" target=_blank>#2721</a>.</li><li>增加了使用表函数代替表作为参数的能力 <code class=syntax>remote</code> 或 <code class=syntax>cluster table function</code> <a href=https://github.com/ClickHouse/ClickHouse/pull/2708 rel="external nofollow noreferrer" target=_blank>#2708</a>.</li><li>支持 <code class=syntax>HTTP Basic</code> 复制协议中的身份验证 <a href=https://github.com/ClickHouse/ClickHouse/pull/2727 rel="external nofollow noreferrer" target=_blank>#2727</a>.</li><li>该 <code class=syntax>has</code> 函数现在允许搜索数组中的数值 <code class=syntax>Enum</code> 值 <a href=https://github.com/ClickHouse/ClickHouse/pull/2699 rel="external nofollow noreferrer" target=_blank>Maxim Khrisanfov</a>.</li><li>支持添加任意消息分隔符从读取时 <code class=syntax>Kafka</code> <a href=https://github.com/ClickHouse/ClickHouse/pull/2701 rel="external nofollow noreferrer" target=_blank>阿莫斯鸟</a>.</li></ul><h4 id=improvements-8>改进:<a class=headerlink href=../amp/#improvements-8 title="Permanent link"> </a></h4><ul><li>该 <code class=syntax>ALTER TABLE t DELETE WHERE</code> 查询不会重写未受WHERE条件影响的数据部分 <a href=https://github.com/ClickHouse/ClickHouse/pull/2694 rel="external nofollow noreferrer" target=_blank>#2694</a>.</li><li>该 <code class=syntax>use_minimalistic_checksums_in_zookeeper</code> 备选案文 <code class=syntax>ReplicatedMergeTree</code> 默认情况下启用表。 此设置在版本1.1.54378，2018-04-16中添加。 不能再安装超过1.1.54378的版本。</li><li>支持运行 <code class=syntax>KILL</code> 和 <code class=syntax>OPTIMIZE</code> 指定的查询 <code class=syntax>ON CLUSTER</code> <a href=https://github.com/ClickHouse/ClickHouse/pull/2689 rel="external nofollow noreferrer" target=_blank>张冬</a>.</li></ul><h4 id=bug-fixes-16>错误修复:<a class=headerlink href=../amp/#bug-fixes-16 title="Permanent link"> </a></h4><ul><li>修正了错误 <code class=syntax>Column ... is not under an aggregate function and not in GROUP BY</code> 用于具有IN表达式的聚合。 此错误出现在18.1.0版本。 (<a href=https://github.com/ClickHouse/ClickHouse/commit/bbdd780be0be06a0f336775941cdd536878dd2c2 rel="external nofollow noreferrer" target=_blank>bbdd780b</a>)</li><li>修正了一个错误 <code class=syntax>windowFunnel aggregate function</code> <a href=https://github.com/ClickHouse/ClickHouse/pull/2735 rel="external nofollow noreferrer" target=_blank>张冬</a>.</li><li>修正了一个错误 <code class=syntax>anyHeavy</code> 聚合函数 (<a href=https://github.com/ClickHouse/ClickHouse/commit/a2101df25a6a0fba99aa71f8793d762af2b801ee rel="external nofollow noreferrer" target=_blank>a2101df2</a>)</li><li>使用时固定服务器崩溃 <code class=syntax>countArray()</code> 聚合函数。</li></ul><h4 id=backward-incompatible-changes-5>向后不兼容的更改:<a class=headerlink href=../amp/#backward-incompatible-changes-5 title="Permanent link"> </a></h4><ul><li>参数 <code class=syntax>Kafka</code> 发动机从改变 <code class=syntax>Kafka(kafka_broker_list, kafka_topic_list, kafka_group_name, kafka_format[, kafka_schema, kafka_num_consumers])</code> 到 <code class=syntax>Kafka(kafka_broker_list, kafka_topic_list, kafka_group_name, kafka_format[, kafka_row_delimiter, kafka_schema, kafka_num_consumers])</code>. 如果你的表使用 <code class=syntax>kafka_schema</code> 或 <code class=syntax>kafka_num_consumers</code> 参数，你必须手动编辑元数据文件 <code class=syntax>path/metadata/database/table.sql</code> 并添加 <code class=syntax>kafka_row_delimiter</code> 参数 <code class=syntax>''</code> 价值。</li></ul><h2 id=clickhouse-release-18-1>ClickHouse释放18.1<a class=headerlink href=../amp/#clickhouse-release-18-1 title="Permanent link"> </a></h2><h3 id=clickhouse-release-18-1-0-2018-07-23>碌莽禄,拢,010-68520682\&lt;url&gt;<a class=headerlink href=../amp/#clickhouse-release-18-1-0-2018-07-23 title="Permanent link"> </a></h3><h4 id=new-features-9>新功能:<a class=headerlink href=../amp/#new-features-9 title="Permanent link"> </a></h4><ul><li>支持 <code class=syntax>ALTER TABLE t DELETE WHERE</code> 非复制MergeTree表的查询 (<a href=https://github.com/ClickHouse/ClickHouse/pull/2634 rel="external nofollow noreferrer" target=_blank>#2634</a>).</li><li>支持任意类型的 <code class=syntax>uniq*</code> 聚合函数族 (<a href=https://github.com/ClickHouse/ClickHouse/issues/2010 rel="external nofollow noreferrer" target=_blank>#2010</a>).</li><li>支持比较运算符中的任意类型 (<a href=https://github.com/ClickHouse/ClickHouse/issues/2026 rel="external nofollow noreferrer" target=_blank>#2026</a>).</li><li>该 <code class=syntax>users.xml</code> 文件允许设置子网掩码的格式 <code class=syntax>10.0.0.1/255.255.255.0</code>. 这对于在中间使用零的IPv6网络使用掩码是必要的 (<a href=https://github.com/ClickHouse/ClickHouse/pull/2637 rel="external nofollow noreferrer" target=_blank>#2637</a>).</li><li>添加了 <code class=syntax>arrayDistinct</code> 功能 (<a href=https://github.com/ClickHouse/ClickHouse/pull/2670 rel="external nofollow noreferrer" target=_blank>#2670</a>).</li><li>SummingMergeTree引擎现在可以使用AggregateFunction类型列 (<a href=https://github.com/ClickHouse/ClickHouse/pull/2566 rel="external nofollow noreferrer" target=_blank>康斯坦丁*潘</a>).</li></ul><h4 id=improvements-9>改进:<a class=headerlink href=../amp/#improvements-9 title="Permanent link"> </a></h4><ul><li>更改了发布版本的编号方案。 现在第一部分包含发布年份（公元，莫斯科时区，减去2000），第二部分包含主要更改的数量（大多数版本的增加），第三部分是补丁版本。 除非在更新日志中另有说明，否则版本仍然向后兼容。</li><li>更快地将浮点数转换为字符串 (<a href=https://github.com/ClickHouse/ClickHouse/pull/2664 rel="external nofollow noreferrer" target=_blank>阿莫斯鸟</a>).</li><li>如果在插入过程中由于解析错误而跳过某些行（这可能与 <code class=syntax>input_allow_errors_num</code> 和 <code class=syntax>input_allow_errors_ratio</code> 启用设置），跳过的行数现在写入服务器日志 (<a href=https://github.com/ClickHouse/ClickHouse/pull/2669 rel="external nofollow noreferrer" target=_blank>列奥纳多*切奇</a>).</li></ul><h4 id=bug-fixes-17>错误修复:<a class=headerlink href=../amp/#bug-fixes-17 title="Permanent link"> </a></h4><ul><li>修复了临时表的截断命令 (<a href=https://github.com/ClickHouse/ClickHouse/pull/2624 rel="external nofollow noreferrer" target=_blank>阿莫斯鸟</a>).</li><li>修复了读取响应时出现网络错误时ZooKeeper客户端库中罕见的死锁 (<a href=https://github.com/ClickHouse/ClickHouse/commit/c315200e64b87e44bdf740707fc857d1fdf7e947 rel="external nofollow noreferrer" target=_blank>c315200</a>).</li><li>修复了转换为可空类型期间的错误 (<a href=https://github.com/ClickHouse/ClickHouse/issues/1322 rel="external nofollow noreferrer" target=_blank>#1322</a>).</li><li>修正了不正确的结果 <code class=syntax>maxIntersection()</code> 函数时间间隔的边界重合 (<a href=https://github.com/ClickHouse/ClickHouse/pull/2657 rel="external nofollow noreferrer" target=_blank>Michael Furmur</a>).</li><li>修复了函数参数中OR表达式链的不正确转换 (<a href=https://github.com/ClickHouse/ClickHouse/pull/2663 rel="external nofollow noreferrer" target=_blank>晨兴-xc</a>).</li><li>修复了包含 <code class=syntax>IN (subquery)</code> 另一个子查询中的表达式 (<a href=https://github.com/ClickHouse/ClickHouse/issues/2571 rel="external nofollow noreferrer" target=_blank>#2571</a>).</li><li>修复了分布式查询中使用不同版本的服务器之间的不兼容性 <code class=syntax>CAST</code> 不是大写字母的函数 (<a href=https://github.com/ClickHouse/ClickHouse/commit/fe8c4d64e434cacd4ceef34faa9005129f2190a5 rel="external nofollow noreferrer" target=_blank>fe8c4d6</a>).</li><li>添加了对外部数据库管理系统查询的缺少标识符引用 (<a href=https://github.com/ClickHouse/ClickHouse/issues/2635 rel="external nofollow noreferrer" target=_blank>#2635</a>).</li></ul><h4 id=backward-incompatible-changes-6>向后不兼容的更改:<a class=headerlink href=../amp/#backward-incompatible-changes-6 title="Permanent link"> </a></h4><ul><li>将包含数字零的字符串转换为DateTime不起作用。 示例: <code class=syntax>SELECT toDateTime('0')</code>. 这也是原因 <code class=syntax>DateTime DEFAULT '0'</code> 在表中不起作用，以及 <code class=syntax>&lt;null_value&gt;0&lt;/null_value&gt;</code> 在字典里 解决方案：替换 <code class=syntax>0</code> 与 <code class=syntax>0000-00-00 00:00:00</code>.</li></ul><h2 id=clickhouse-release-1-1>ClickHouse释放1.1<a class=headerlink href=../amp/#clickhouse-release-1-1 title="Permanent link"> </a></h2><h3 id=clickhouse-release-1-1-54394-2018-07-12>碌莽禄,拢,010-68520682\&lt;url&gt;戮卤篓拢,010-68520682\&lt;url&gt;<a class=headerlink href=../amp/#clickhouse-release-1-1-54394-2018-07-12 title="Permanent link"> </a></h3><h4 id=new-features-10>新功能:<a class=headerlink href=../amp/#new-features-10 title="Permanent link"> </a></h4><ul><li>添加了 <code class=syntax>histogram</code> 聚合函数 (<a href=https://github.com/ClickHouse/ClickHouse/pull/2521 rel="external nofollow noreferrer" target=_blank>米哈伊尔*苏林</a>).</li><li>现在 <code class=syntax>OPTIMIZE TABLE ... FINAL</code> 可以在不指定分区的情况下使用 <code class=syntax>ReplicatedMergeTree</code> (<a href=https://github.com/ClickHouse/ClickHouse/pull/2600 rel="external nofollow noreferrer" target=_blank>阿莫斯鸟</a>).</li></ul><h4 id=bug-fixes-18>错误修复:<a class=headerlink href=../amp/#bug-fixes-18 title="Permanent link"> </a></h4><ul><li>修复了在发送和下载复制数据时读取和写入套接字超时非常小的问题（一秒钟），这使得在网络或磁盘上存在负载时无法下载更大的部分（导致周期性尝试下载部分）。 此错误发生在版本1.1.54388。</li><li>修复了在ZooKeeper中使用chroot时在表中插入重复数据块的问题。</li><li>该 <code class=syntax>has</code> 函数现在可以正常工作用于具有可为空元素的数组 (<a href=https://github.com/ClickHouse/ClickHouse/issues/2115 rel="external nofollow noreferrer" target=_blank>#2115</a>).</li><li>该 <code class=syntax>system.tables</code> 在分布式查询中使用表现在可以正常工作。 该 <code class=syntax>metadata_modification_time</code> 和 <code class=syntax>engine_full</code> 列现在是非虚拟的。 修复了仅从表中查询这些列时发生的错误。</li><li>固定如何空 <code class=syntax>TinyLog</code> 表插入一个空数据块后工作 (<a href=https://github.com/ClickHouse/ClickHouse/issues/2563 rel="external nofollow noreferrer" target=_blank>#2563</a>).</li><li>该 <code class=syntax>system.zookeeper</code> 如果ZooKeeper中节点的值为NULL，表就可以工作。</li></ul><h3 id=clickhouse-release-1-1-54390-2018-07-06>碌莽禄,拢,010-68520682\&lt;url&gt;戮卤篓拢,010-68520682\&lt;url&gt;<a class=headerlink href=../amp/#clickhouse-release-1-1-54390-2018-07-06 title="Permanent link"> </a></h3><h4 id=new-features-11>新功能:<a class=headerlink href=../amp/#new-features-11 title="Permanent link"> </a></h4><ul><li>查询可以在发送 <code class=syntax>multipart/form-data</code> 格式（在 <code class=syntax>query</code> 字段），如果外部数据也被发送用于查询处理，这是有用的 (<a href=https://github.com/ClickHouse/ClickHouse/pull/2490 rel="external nofollow noreferrer" target=_blank>Olga Hvostikova</a>).</li><li>增加了在读取CSV格式数据时启用或禁用处理单引号或双引号的功能。 您可以在 <code class=syntax>format_csv_allow_single_quotes</code> 和 <code class=syntax>format_csv_allow_double_quotes</code> 设置 (<a href=https://github.com/ClickHouse/ClickHouse/pull/2574 rel="external nofollow noreferrer" target=_blank>阿莫斯鸟</a>).</li><li>现在 <code class=syntax>OPTIMIZE TABLE ... FINAL</code> 可以在不指定非复制变体的分区的情况下使用 <code class=syntax>MergeTree</code> (<a href=https://github.com/ClickHouse/ClickHouse/pull/2599 rel="external nofollow noreferrer" target=_blank>阿莫斯鸟</a>).</li></ul><h4 id=improvements-10>改进:<a class=headerlink href=../amp/#improvements-10 title="Permanent link"> </a></h4><ul><li>在可以使用表索引时使用IN运算符提高性能、减少内存消耗并正确跟踪内存消耗 (<a href=https://github.com/ClickHouse/ClickHouse/pull/2584 rel="external nofollow noreferrer" target=_blank>#2584</a>).</li><li>删除添加数据部分时校验和的冗余检查。 当存在大量副本时，这一点很重要，因为在这些情况下，检查的总数等于N^2。</li><li>增加了对 <code class=syntax>Array(Tuple(...))</code> 对于参数 <code class=syntax>arrayEnumerateUniq</code> 功能 (<a href=https://github.com/ClickHouse/ClickHouse/pull/2573 rel="external nofollow noreferrer" target=_blank>#2573</a>).</li><li>已添加 <code class=syntax>Nullable</code> 支持 <code class=syntax>runningDifference</code> 功能 (<a href=https://github.com/ClickHouse/ClickHouse/pull/2594 rel="external nofollow noreferrer" target=_blank>#2594</a>).</li><li>当存在大量表达式时，改进了查询分析性能 (<a href=https://github.com/ClickHouse/ClickHouse/pull/2572 rel="external nofollow noreferrer" target=_blank>#2572</a>).</li><li>更快地选择用于合并的数据部分 <code class=syntax>ReplicatedMergeTree</code> 桌子 更快地恢复ZooKeeper会话 (<a href=https://github.com/ClickHouse/ClickHouse/pull/2597 rel="external nofollow noreferrer" target=_blank>#2597</a>).</li><li>该 <code class=syntax>format_version.txt</code> 文件 <code class=syntax>MergeTree</code> 如果表丢失，则重新创建表，如果在没有文件的情况下复制目录结构后启动ClickHouse，这是有意义的 (<a href=https://github.com/ClickHouse/ClickHouse/pull/2593 rel="external nofollow noreferrer" target=_blank>Ciprian Hacman</a>).</li></ul><h4 id=bug-fixes-19>错误修复:<a class=headerlink href=../amp/#bug-fixes-19 title="Permanent link"> </a></h4><ul><li>修复了与ZooKeeper一起工作时的错误，这可能会导致无法在重新启动服务器之前恢复表的会话和只读状态。</li><li>修复了与ZooKeeper一起工作时的错误，如果会话中断，可能会导致旧节点不被删除。</li><li>修正了一个错误 <code class=syntax>quantileTDigest</code> Float参数的函数（此错误在版本1.1.54388中引入) (<a href=https://github.com/ClickHouse/ClickHouse/pull/2553 rel="external nofollow noreferrer" target=_blank>米哈伊尔*苏林</a>).</li><li>修复了MergeTree表索引中的一个错误，如果主键列位于函数内部，用于在相同大小的有符号和无符号整数之间转换类型 (<a href=https://github.com/ClickHouse/ClickHouse/pull/2603 rel="external nofollow noreferrer" target=_blank>#2603</a>).</li><li>如果修复段错误 <code class=syntax>macros</code> 使用，但它们不在配置文件中 (<a href=https://github.com/ClickHouse/ClickHouse/pull/2570 rel="external nofollow noreferrer" target=_blank>#2570</a>).</li><li>修复了重新连接客户端时切换到默认数据库的问题 (<a href=https://github.com/ClickHouse/ClickHouse/pull/2583 rel="external nofollow noreferrer" target=_blank>#2583</a>).</li><li>修正了当发生的错误 <code class=syntax>use_index_for_in_with_subqueries</code> 设置被禁用。</li></ul><h4 id=security-fix-1>安全修复:<a class=headerlink href=../amp/#security-fix-1 title="Permanent link"> </a></h4><ul><li>当连接到MySQL时，发送文件不再可能 (<code class=syntax>LOAD DATA LOCAL INFILE</code>).</li></ul><h3 id=clickhouse-release-1-1-54388-2018-06-28>碌莽禄,拢,010-68520682\&lt;url&gt;戮卤篓拢,010-68520682\&lt;url&gt;<a class=headerlink href=../amp/#clickhouse-release-1-1-54388-2018-06-28 title="Permanent link"> </a></h3><h4 id=new-features-12>新功能:<a class=headerlink href=../amp/#new-features-12 title="Permanent link"> </a></h4><ul><li>支持 <code class=syntax>ALTER TABLE t DELETE WHERE</code> 查询复制的表。 添加了 <code class=syntax>system.mutations</code> 表来跟踪这种类型的查询的进度。</li><li>支持 <code class=syntax>ALTER TABLE t [REPLACE|ATTACH] PARTITION</code> 查询*MergeTree表。</li><li>支持 <code class=syntax>TRUNCATE TABLE</code> 查询 (<a href=https://github.com/ClickHouse/ClickHouse/pull/2260 rel="external nofollow noreferrer" target=_blank>张冬</a>)</li><li>几个新的 <code class=syntax>SYSTEM</code> 复制表的查询 (<code class=syntax>RESTART REPLICAS</code>, <code class=syntax>SYNC REPLICA</code>, <code class=syntax>[STOP|START] [MERGES|FETCHES|SENDS REPLICATED|REPLICATION QUEUES]</code>).</li><li>增加了使用MySQL引擎和相应的表函数写入表的能力 (<a href=https://github.com/ClickHouse/ClickHouse/pull/2294 rel="external nofollow noreferrer" target=_blank>三弟</a>).</li><li>添加了 <code class=syntax>url()</code> 表功能和 <code class=syntax>URL</code> 表引擎 (<a href=https://github.com/ClickHouse/ClickHouse/pull/2501 rel="external nofollow noreferrer" target=_blank>Alexander Sapin</a>).</li><li>添加了 <code class=syntax>windowFunnel</code> 聚合函数 (<a href=https://github.com/ClickHouse/ClickHouse/pull/2352 rel="external nofollow noreferrer" target=_blank>三弟</a>).</li><li>新 <code class=syntax>startsWith</code> 和 <code class=syntax>endsWith</code> 字符串的函数 (<a href=https://github.com/ClickHouse/ClickHouse/pull/2429 rel="external nofollow noreferrer" target=_blank>Vadim Plakhtinsky</a>).</li><li>该 <code class=syntax>numbers()</code> 表函数现在允许您指定偏移量 (<a href=https://github.com/ClickHouse/ClickHouse/pull/2535 rel="external nofollow noreferrer" target=_blank>张冬</a>).</li><li>密码 <code class=syntax>clickhouse-client</code> 可以交互输入。</li><li>服务器日志现在可以发送到系统日志 (<a href=https://github.com/ClickHouse/ClickHouse/pull/2459 rel="external nofollow noreferrer" target=_blank>Alexander Krasheninnikov</a>).</li><li>支持使用共享库源登录字典 (<a href=https://github.com/ClickHouse/ClickHouse/pull/2472 rel="external nofollow noreferrer" target=_blank>Alexander Sapin</a>).</li><li>支持自定义CSV分隔符 (<a href=https://github.com/ClickHouse/ClickHouse/pull/2263 rel="external nofollow noreferrer" target=_blank>伊万*朱可夫</a>)</li><li>添加了 <code class=syntax>date_time_input_format</code> 设置。 如果将此设置切换到 <code class=syntax>'best_effort'</code>，日期时间值将以各种格式读取。</li><li>添加了 <code class=syntax>clickhouse-obfuscator</code> 用于数据混ob的实用程序。 用法示例：发布性能测试中使用的数据。</li></ul><h4 id=experimental-features-2>实验特点:<a class=headerlink href=../amp/#experimental-features-2 title="Permanent link"> </a></h4><ul><li>增加了计算能力 <code class=syntax>and</code> 只有在需要的地方才能参数 (<a href=https://github.com/ClickHouse/ClickHouse/pull/2272 rel="external nofollow noreferrer" target=_blank>阿纳斯塔西娅Tsarkova</a>)</li><li>Jit编译为本机代码现在可用于某些表达式 (<a href=https://github.com/ClickHouse/ClickHouse/pull/2277 rel="external nofollow noreferrer" target=_blank>pyos</a>).</li></ul><h4 id=bug-fixes-20>错误修复:<a class=headerlink href=../amp/#bug-fixes-20 title="Permanent link"> </a></h4><ul><li>对于具有以下内容的查询，不再显示重复项 <code class=syntax>DISTINCT</code> 和 <code class=syntax>ORDER BY</code>.</li><li>查询与 <code class=syntax>ARRAY JOIN</code> 和 <code class=syntax>arrayFilter</code> 不再返回不正确的结果。</li><li>修复了从嵌套结构读取数组列时的错误 (<a href=https://github.com/ClickHouse/ClickHouse/issues/2066 rel="external nofollow noreferrer" target=_blank>#2066</a>).</li><li>修复了使用HAVING子句分析查询时出现的错误，如 <code class=syntax>HAVING tuple IN (...)</code>.</li><li>修复了使用递归别名分析查询时出现的错误。</li><li>修复了从REPLACINGMERGETREE读取过滤所有行的PREWHERE中的条件时出现的错误 (<a href=https://github.com/ClickHouse/ClickHouse/issues/2525 rel="external nofollow noreferrer" target=_blank>#2525</a>).</li><li>在HTTP界面中使用会话时，未应用用户配置文件设置。</li><li>修复了如何从clickhouse-local中的命令行参数应用设置。</li><li>ZooKeeper客户端库现在使用从服务器接收的会话超时。</li><li>修正了ZooKeeper客户端库中的一个错误，当客户端等待服务器响应时间超过超时时间。</li><li>修剪部分的查询与分区键列的条件 (<a href=https://github.com/ClickHouse/ClickHouse/issues/2342 rel="external nofollow noreferrer" target=_blank>#2342</a>).</li><li>合并后，现在可以 <code class=syntax>CLEAR COLUMN IN PARTITION</code> (<a href=https://github.com/ClickHouse/ClickHouse/issues/2315 rel="external nofollow noreferrer" target=_blank>#2315</a>).</li><li>ODBC表函数中的类型映射已修复 (<a href=https://github.com/ClickHouse/ClickHouse/pull/2268 rel="external nofollow noreferrer" target=_blank>三弟</a>).</li><li>类型比较已修复 <code class=syntax>DateTime</code> 有和没有时区 (<a href=https://github.com/ClickHouse/ClickHouse/pull/2400 rel="external nofollow noreferrer" target=_blank>Alexander Bocharov</a>).</li><li>修正了语法解析和格式化的 <code class=syntax>CAST</code> 接线员</li><li>固定插入到分布式表引擎的实例化视图中 (<a href=https://github.com/ClickHouse/ClickHouse/pull/2411 rel="external nofollow noreferrer" target=_blank>Babacar Diassé</a>).</li><li>修正了从写入数据时的争用条件 <code class=syntax>Kafka</code> 引擎到实例化视图 (<a href=https://github.com/ClickHouse/ClickHouse/pull/2448 rel="external nofollow noreferrer" target=_blank>刘杨宽</a>).</li><li>固定ssrf中的remote()表函数。</li><li>固定退出行为 <code class=syntax>clickhouse-client</code> 在多行模式下 (<a href=https://github.com/ClickHouse/ClickHouse/issues/2510 rel="external nofollow noreferrer" target=_blank>#2510</a>).</li></ul><h4 id=improvements-11>改进:<a class=headerlink href=../amp/#improvements-11 title="Permanent link"> </a></h4><ul><li>复制表中的后台任务现在在线程池中执行，而不是在单独的线程中执行 (<a href=https://github.com/ClickHouse/ClickHouse/pull/1722 rel="external nofollow noreferrer" target=_blank>Silviu Caragea</a>).</li><li>改进的LZ4压缩性能。</li><li>更快地分析具有大量联接和子查询的查询。</li><li>当有太多的网络错误时，DNS缓存现在会自动更新。</li><li>如果由于其中一个实例化视图包含太多部件而无法插入表格插入，则不再发生表格插入。</li><li>纠正了事件计数器中的差异 <code class=syntax>Query</code>, <code class=syntax>SelectQuery</code>，和 <code class=syntax>InsertQuery</code>.</li><li>像这样的表达式 <code class=syntax>tuple IN (SELECT tuple)</code> 如果元组类型匹配，则允许。</li><li>即使您没有配置ZooKeeper，具有复制表的服务器也可以启动。</li><li>在计算可用CPU内核数时，现在考虑了cgroups的限制 (<a href=https://github.com/ClickHouse/ClickHouse/pull/2325 rel="external nofollow noreferrer" target=_blank>Atri Sharma</a>).</li><li>在systemd配置文件中添加了配置目录的chown (<a href=https://github.com/ClickHouse/ClickHouse/pull/2421 rel="external nofollow noreferrer" target=_blank>米哈伊尔Shiryaev</a>).</li></ul><h4 id=build-changes-4>构建更改:<a class=headerlink href=../amp/#build-changes-4 title="Permanent link"> </a></h4><ul><li>Gcc8编译器可用于构建。</li><li>增加了从子模块构建llvm的能力。</li><li>Librdkafka库的版本已更新为v0.11.4。</li><li>增加了使用系统libcpuid库的能力。 库版本已更新为0.4.0。</li><li>使用vectorclass库修复了构建 (<a href=https://github.com/ClickHouse/ClickHouse/pull/2274 rel="external nofollow noreferrer" target=_blank>Babacar Diassé</a>).</li><li>Cmake现在默认情况下为ninja生成文件（如使用 <code class=syntax>-G Ninja</code>).</li><li>添加了使用libtinfo库而不是libtermcap的功能 (<a href=https://github.com/ClickHouse/ClickHouse/pull/2519 rel="external nofollow noreferrer" target=_blank>Georgy Kondratiev</a>).</li><li>修复了Fedora Rawhide中的头文件冲突 (<a href=https://github.com/ClickHouse/ClickHouse/issues/2520 rel="external nofollow noreferrer" target=_blank>#2520</a>).</li></ul><h4 id=backward-incompatible-changes-7>向后不兼容的更改:<a class=headerlink href=../amp/#backward-incompatible-changes-7 title="Permanent link"> </a></h4><ul><li>删除逃逸 <code class=syntax>Vertical</code> 和 <code class=syntax>Pretty*</code> 格式和删除 <code class=syntax>VerticalRaw</code> 格式。</li><li>如果在分布式查询中同时使用版本1.1.54388（或更高版本）的服务器和版本较旧的服务器，并且查询具有 <code class=syntax>cast(x, 'Type')</code> 表达式没有 <code class=syntax>AS</code> 关键字并没有这个词 <code class=syntax>cast</code> 以大写形式，将引发一个异常，并显示如下消息 <code class=syntax>Not found column cast(0, 'UInt8') in block</code>. 解决方案：更新整个群集上的服务器。</li></ul><h3 id=clickhouse-release-1-1-54385-2018-06-01>碌莽禄,拢,010-68520682\&lt;url&gt;戮卤篓拢,010-68520682<a class=headerlink href=../amp/#clickhouse-release-1-1-54385-2018-06-01 title="Permanent link"> </a></h3><h4 id=bug-fixes-21>错误修复:<a class=headerlink href=../amp/#bug-fixes-21 title="Permanent link"> </a></h4><ul><li>修复了在某些情况下导致ZooKeeper操作阻塞的错误。</li></ul><h3 id=clickhouse-release-1-1-54383-2018-05-22>碌莽禄,拢,010-68520682\&lt;url&gt;戮卤篓拢,010-68520682\&lt;url&gt;<a class=headerlink href=../amp/#clickhouse-release-1-1-54383-2018-05-22 title="Permanent link"> </a></h3><h4 id=bug-fixes-22>错误修复:<a class=headerlink href=../amp/#bug-fixes-22 title="Permanent link"> </a></h4><ul><li>修正了如果一个表有许多副本，复制队列的放缓。</li></ul><h3 id=clickhouse-release-1-1-54381-2018-05-14>碌莽禄,拢,010-68520682\&lt;url&gt;戮卤篓拢,010-68520682\&lt;url&gt;<a class=headerlink href=../amp/#clickhouse-release-1-1-54381-2018-05-14 title="Permanent link"> </a></h3><h4 id=bug-fixes-23>错误修复:<a class=headerlink href=../amp/#bug-fixes-23 title="Permanent link"> </a></h4><ul><li>修复了ClickHouse与ZooKeeper服务器断开连接时，ZooKeeper中的节点泄漏问题。</li></ul><h3 id=clickhouse-release-1-1-54380-2018-04-21>碌莽禄,拢,010-68520682\&lt;url&gt;戮卤篓拢,010-68520682\&lt;url&gt;<a class=headerlink href=../amp/#clickhouse-release-1-1-54380-2018-04-21 title="Permanent link"> </a></h3><h4 id=new-features-13>新功能:<a class=headerlink href=../amp/#new-features-13 title="Permanent link"> </a></h4><ul><li>增加了表功能 <code class=syntax>file(path, format, structure)</code>. 从读取字节的示例 <code class=syntax>/dev/urandom</code>: <code class=syntax>ln -s /dev/urandom /var/lib/clickhouse/user_files/random``clickhouse-client -q "SELECT * FROM file('random', 'RowBinary', 'd UInt8') LIMIT 10"</code>.</li></ul><h4 id=improvements-12>改进:<a class=headerlink href=../amp/#improvements-12 title="Permanent link"> </a></h4><ul><li>子查询可以包装在 <code class=syntax>()</code> 括号以增强查询的可读性。 例如: <code class=syntax>(SELECT 1) UNION ALL (SELECT 1)</code>.</li><li>简单 <code class=syntax>SELECT</code> 从查询 <code class=syntax>system.processes</code> 表不包括在 <code class=syntax>max_concurrent_queries</code> 限制。</li></ul><h4 id=bug-fixes-24>错误修复:<a class=headerlink href=../amp/#bug-fixes-24 title="Permanent link"> </a></h4><ul><li>修正了不正确的行为 <code class=syntax>IN</code> 从中选择时的运算符 <code class=syntax>MATERIALIZED VIEW</code>.</li><li>修正了不正确的过滤分区索引的表达式，如 <code class=syntax>partition_key_column IN (...)</code>.</li><li>固定无法执行 <code class=syntax>OPTIMIZE</code> 在以下情况下对非领导副本进行查询 <code class=syntax>REANAME</code> 在桌子上进行。</li><li>修复了执行时的授权错误 <code class=syntax>OPTIMIZE</code> 或 <code class=syntax>ALTER</code> 对非领导副本的查询。</li><li>固定的冻结 <code class=syntax>KILL QUERY</code>.</li><li>修复了ZooKeeper客户端库中的错误，这导致了手表丢失，分布式的DDL队列冻结，并在复制队列中的速度变慢，如果非空 <code class=syntax>chroot</code> 前缀在ZooKeeper配置中使用。</li></ul><h4 id=backward-incompatible-changes-8>向后不兼容的更改:<a class=headerlink href=../amp/#backward-incompatible-changes-8 title="Permanent link"> </a></h4><ul><li>删除对如下表达式的支持 <code class=syntax>(a, b) IN (SELECT (a, b))</code> （可以使用等效表达式 <code class=syntax>(a, b) IN (SELECT a, b)</code>). 在以前的版本中，这些表达式导致未确定 <code class=syntax>WHERE</code> 过滤或导致的错误。</li></ul><h3 id=clickhouse-release-1-1-54378-2018-04-16>碌莽禄,拢,010-68520682\&lt;url&gt;戮卤篓拢,010-68520682\&lt;url&gt;<a class=headerlink href=../amp/#clickhouse-release-1-1-54378-2018-04-16 title="Permanent link"> </a></h3><h4 id=new-features-14>新功能:<a class=headerlink href=../amp/#new-features-14 title="Permanent link"> </a></h4><ul><li>可以在不重新启动服务器的情况下更改日志记录级别。</li><li>添加了 <code class=syntax>SHOW CREATE DATABASE</code> 查询。</li><li>该 <code class=syntax>query_id</code> 可以传递给 <code class=syntax>clickhouse-client</code> （肘部空间）。</li><li>新设置: <code class=syntax>max_network_bandwidth_for_all_users</code>.</li><li>增加了对 <code class=syntax>ALTER TABLE ... PARTITION ...</code> 为 <code class=syntax>MATERIALIZED VIEW</code>.</li><li>在系统表中以未压缩形式添加有关数据部件大小的信息。</li><li>对分布式表的服务器到服务器加密支持 (<code class=syntax>&lt;secure&gt;1&lt;/secure&gt;</code> 在副本配置中 <code class=syntax>&lt;remote_servers&gt;</code>).</li><li>表级别的配置 <code class=syntax>ReplicatedMergeTree</code> 家庭，以最大限度地减少存储在Zookeeper的数据量: : <code class=syntax>use_minimalistic_checksums_in_zookeeper = 1</code></li><li>的配置 <code class=syntax>clickhouse-client</code> 提示。 默认情况下，服务器名称现在输出到提示符。 可以更改服务器的显示名称。 它也发送了 <code class=syntax>X-ClickHouse-Display-Name</code> HTTP头（基里尔Shvakov）。</li><li>多个逗号分隔 <code class=syntax>topics</code> 可为指定 <code class=syntax>Kafka</code> 发动机（托比亚斯*亚当森)</li><li>当查询停止时 <code class=syntax>KILL QUERY</code> 或 <code class=syntax>replace_running_query</code>，客户端接收 <code class=syntax>Query was canceled</code> 异常而不是不完整的结果。</li></ul><h4 id=improvements-13>改进:<a class=headerlink href=../amp/#improvements-13 title="Permanent link"> </a></h4><ul><li><code class=syntax>ALTER TABLE ... DROP/DETACH PARTITION</code> 查询在复制队列的前面运行。</li><li><code class=syntax>SELECT ... FINAL</code> 和 <code class=syntax>OPTIMIZE ... FINAL</code> 即使表具有单个数据部分，也可以使用。</li><li>A <code class=syntax>query_log</code> 如果手动删除（基里尔Shvakov），则会在飞行中重新创建表格。</li><li>该 <code class=syntax>lengthUTF8</code> 功能运行速度更快（zhang2014）。</li><li>在同步刀片的性能提高 <code class=syntax>Distributed</code> 表 (<code class=syntax>insert_distributed_sync = 1</code>）当有一个非常大的数量的碎片。</li><li>服务器接受 <code class=syntax>send_timeout</code> 和 <code class=syntax>receive_timeout</code> 从客户端设置并在连接到客户端时应用它们（它们以相反的顺序应用：服务器套接字的 <code class=syntax>send_timeout</code> 被设置为 <code class=syntax>receive_timeout</code> 值，反之亦然）。</li><li>更强大的崩溃恢复异步插入 <code class=syntax>Distributed</code> 桌子</li><li>的返回类型 <code class=syntax>countEqual</code> 功能从更改 <code class=syntax>UInt32</code> 到 <code class=syntax>UInt64</code> (谢磊).</li></ul><h4 id=bug-fixes-25>错误修复:<a class=headerlink href=../amp/#bug-fixes-25 title="Permanent link"> </a></h4><ul><li>修正了一个错误 <code class=syntax>IN</code> 当表达式的左侧是 <code class=syntax>Nullable</code>.</li><li>使用元组时，现在返回正确的结果 <code class=syntax>IN</code> 当某些元组组件位于表索引中时。</li><li>该 <code class=syntax>max_execution_time</code> limit现在可以正常使用分布式查询。</li><li>在计算复合列的大小时修正错误 <code class=syntax>system.columns</code> 桌子</li><li>修复了创建临时表时的错误 <code class=syntax>CREATE TEMPORARY TABLE IF NOT EXISTS.</code></li><li>修正错误 <code class=syntax>StorageKafka</code> (##2075)</li><li>修复了某些聚合函数的无效参数导致的服务器崩溃。</li><li>修正了防止错误 <code class=syntax>DETACH DATABASE</code> 查询停止后台任务 <code class=syntax>ReplicatedMergeTree</code> 桌子</li><li><code class=syntax>Too many parts</code> 插入到聚合实例化视图时，状态不太可能发生（##2084）。</li><li>如果替换必须在同一级别上跟随另一个替换，则更正了配置中替换的递归处理。</li><li>更正了创建元数据文件时的语法 <code class=syntax>VIEW</code> 这使用一个查询 <code class=syntax>UNION ALL</code>.</li><li><code class=syntax>SummingMergeTree</code> 现在可以正常使用复合键对嵌套数据结构进行求和。</li><li>修复了在选择领导者时出现竞争条件的可能性 <code class=syntax>ReplicatedMergeTree</code> 桌子</li></ul><h4 id=build-changes-5>构建更改:<a class=headerlink href=../amp/#build-changes-5 title="Permanent link"> </a></h4><ul><li>构建支持 <code class=syntax>ninja</code> 而不是 <code class=syntax>make</code> 和用途 <code class=syntax>ninja</code> 默认情况下，构建版本。</li><li>重命名的软件包: <code class=syntax>clickhouse-server-base</code> 在 <code class=syntax>clickhouse-common-static</code>; <code class=syntax>clickhouse-server-common</code> 在 <code class=syntax>clickhouse-server</code>; <code class=syntax>clickhouse-common-dbg</code> 在 <code class=syntax>clickhouse-common-static-dbg</code>. 要安装，请使用 <code class=syntax>clickhouse-server clickhouse-client</code>. 具有旧名称的软件包仍将加载到存储库中，以便向后兼容。</li></ul><h4 id=backward-incompatible-changes-9>向后不兼容的更改:<a class=headerlink href=../amp/#backward-incompatible-changes-9 title="Permanent link"> </a></h4><ul><li>如果在左侧指定了数组，则删除了IN表达式的特殊解释。 以前，表达式 <code class=syntax>arr IN (set)</code> 被解释为 “at least one <code class=syntax>arr</code> element belongs to the <code class=syntax>set</code>”. 要在新版本中获得相同的行为，请编写 <code class=syntax>arrayExists(x -&gt; x IN (set), arr)</code>.</li><li>禁用套接字选项的不正确使用 <code class=syntax>SO_REUSEPORT</code>，默认情况下，Poco库中未正确启用。 请注意，在Linux上，不再有任何理由同时指定地址 <code class=syntax>::</code> 和 <code class=syntax>0.0.0.0</code> for listen – use just <code class=syntax>::</code>，它允许监听通过IPv4和IPv6的连接（使用默认的内核配置设置）。 您还可以通过指定以下命令恢复到以前版本中的行为 <code class=syntax>&lt;listen_reuse_port&gt;1&lt;/listen_reuse_port&gt;</code> 在配置。</li></ul><h3 id=clickhouse-release-1-1-54370-2018-03-16>碌莽禄,拢,010-68520682\&lt;url&gt;戮卤篓拢,010-68520682\&lt;url&gt;<a class=headerlink href=../amp/#clickhouse-release-1-1-54370-2018-03-16 title="Permanent link"> </a></h3><h4 id=new-features-15>新功能:<a class=headerlink href=../amp/#new-features-15 title="Permanent link"> </a></h4><ul><li>添加了 <code class=syntax>system.macros</code> 更改配置文件时，宏的表和自动更新。</li><li>添加了 <code class=syntax>SYSTEM RELOAD CONFIG</code> 查询。</li><li>添加了 <code class=syntax>maxIntersections(left_col, right_col)</code> 聚合函数，它返回同时相交间隔的最大数目 <code class=syntax>[left; right]</code>. 该 <code class=syntax>maxIntersectionsPosition(left, right)</code> 函数返回的开始 “maximum” 间隔。 (<a href=https://github.com/ClickHouse/ClickHouse/pull/2012 rel="external nofollow noreferrer" target=_blank>Michael Furmur</a>).</li></ul><h4 id=improvements-14>改进:<a class=headerlink href=../amp/#improvements-14 title="Permanent link"> </a></h4><ul><li>当在一个插入数据 <code class=syntax>Replicated</code> 表，较少的请求是由 <code class=syntax>ZooKeeper</code> （和大多数用户级错误已经从消失 <code class=syntax>ZooKeeper</code> 日志）。</li><li>添加了为数据集创建别名的功能。 示例: <code class=syntax>WITH (1, 2, 3) AS set SELECT number IN set FROM system.numbers LIMIT 10</code>.</li></ul><h4 id=bug-fixes-26>错误修复:<a class=headerlink href=../amp/#bug-fixes-26 title="Permanent link"> </a></h4><ul><li>修正了 <code class=syntax>Illegal PREWHERE</code> 从合并表读取时出错 <code class=syntax>Distributed</code>桌子</li><li>添加了修复，允许您在仅支持IPv4的Docker容器中启动clickhouse-server。</li><li>修正了从系统读取时的争用条件 <code class=syntax>system.parts_columns tables.</code></li><li>同步插入到一个过程中删除双缓冲 <code class=syntax>Distributed</code> 表，这可能导致连接超时。</li><li>修正了一个错误，导致过长的等待不可用的副本开始之前 <code class=syntax>SELECT</code> 查询。</li><li>在固定不正确的日期 <code class=syntax>system.parts</code> 桌子</li><li>修正了一个错误，使得它无法在插入数据 <code class=syntax>Replicated</code> 表if <code class=syntax>chroot</code> 是非空的配置 <code class=syntax>ZooKeeper</code> 集群。</li><li>修正了一个空的垂直合并算法 <code class=syntax>ORDER BY</code> 桌子</li><li>恢复了在对远程表的查询中使用字典的能力，即使这些字典不存在于请求者服务器上。 此功能在版本1.1.54362中丢失。</li><li>恢复查询的行为，如 <code class=syntax>SELECT * FROM remote('server2', default.table) WHERE col IN (SELECT col2 FROM default.table)</code> 当右侧的 <code class=syntax>IN</code> 应该使用远程 <code class=syntax>default.table</code> 而不是当地的 此行为在版本1.1.54358中被破坏。</li><li>删除了无关的错误级别日志记录 <code class=syntax>Not found column ... in block</code>.</li></ul><h3 id=clickhouse-release-1-1-54362-2018-03-11>碌莽禄,拢,010-68520682\&lt;url&gt;戮卤篓拢,010-68520682\&lt;url&gt;<a class=headerlink href=../amp/#clickhouse-release-1-1-54362-2018-03-11 title="Permanent link"> </a></h3><h4 id=new-features-16>新功能:<a class=headerlink href=../amp/#new-features-16 title="Permanent link"> </a></h4><ul><li>聚合不 <code class=syntax>GROUP BY</code> 对于一个空集（如 <code class=syntax>SELECT count(*) FROM table WHERE 0</code>）现在返回一个结果，其中一行为聚合函数带有null值，符合SQL标准。 要恢复旧行为（返回一个空结果），请设置 <code class=syntax>empty_result_for_aggregation_by_empty_set</code> 到1。</li><li>增加了类型转换 <code class=syntax>UNION ALL</code>. 不同的别名被允许 <code class=syntax>SELECT</code> 在职位 <code class=syntax>UNION ALL</code>，符合SQL标准。</li><li>任意表达式支持 <code class=syntax>LIMIT BY</code> 条款 以前，只能使用以下内容产生的列 <code class=syntax>SELECT</code>.</li><li>的索引 <code class=syntax>MergeTree</code> 表用于以下情况 <code class=syntax>IN</code> 应用于来自主键列的表达式元组。 示例: <code class=syntax>WHERE (UserID, EventDate) IN ((123, '2000-01-01'), ...)</code> (Anastasiya Tsarkova)</li><li>添加了 <code class=syntax>clickhouse-copier</code> 用于在群集之间复制和重新分布数据的工具（测试版）。</li><li>添加了一致的哈希函数: <code class=syntax>yandexConsistentHash</code>, <code class=syntax>jumpConsistentHash</code>, <code class=syntax>sumburConsistentHash</code>. 它们可以用作分片密钥，以减少后续重新分片期间的网络流量。</li><li>新增功能: <code class=syntax>arrayAny</code>, <code class=syntax>arrayAll</code>, <code class=syntax>hasAny</code>, <code class=syntax>hasAll</code>, <code class=syntax>arrayIntersect</code>, <code class=syntax>arrayResize</code>.</li><li>添加了 <code class=syntax>arrayCumSum</code> 功能（哈维桑塔纳）。</li><li>添加了 <code class=syntax>parseDateTimeBestEffort</code>, <code class=syntax>parseDateTimeBestEffortOrZero</code>，和 <code class=syntax>parseDateTimeBestEffortOrNull</code> 用于从包含各种可能格式的文本的字符串中读取DateTime的函数。</li><li>数据可以在更新期间从外部字典部分重新加载（加载只是记录，其中指定字段的值大于先前的下载）（Arsen Hakobyan）。</li><li>添加了 <code class=syntax>cluster</code> 表功能。 示例: <code class=syntax>cluster(cluster_name, db, table)</code>. 该 <code class=syntax>remote</code> 表函数可以接受集群名称作为第一个参数，如果它被指定为标识符。</li><li>该 <code class=syntax>remote</code> 和 <code class=syntax>cluster</code> 表函数可用于 <code class=syntax>INSERT</code> 查询。</li><li>添加了 <code class=syntax>create_table_query</code> 和 <code class=syntax>engine_full</code> 虚拟列到 <code class=syntax>system.tables</code>桌子 该 <code class=syntax>metadata_modification_time</code> 列是虚拟的。</li><li>添加了 <code class=syntax>data_path</code> 和 <code class=syntax>metadata_path</code> 列 <code class=syntax>system.tables</code>和<code class=syntax>system.databases</code> 表，并添加了 <code class=syntax>path</code> 列到 <code class=syntax>system.parts</code> 和 <code class=syntax>system.parts_columns</code> 桌子</li><li>添加了关于合并的其他信息 <code class=syntax>system.part_log</code> 桌子</li><li>一个任意的分区键可以用于 <code class=syntax>system.query_log</code> 表（基里尔Shvakov）。</li><li>该 <code class=syntax>SHOW TABLES</code> 查询现在还显示临时表。 添加临时表和 <code class=syntax>is_temporary</code> 列到 <code class=syntax>system.tables</code> （张2014）。</li><li>已添加 <code class=syntax>DROP TEMPORARY TABLE</code> 和 <code class=syntax>EXISTS TEMPORARY TABLE</code> 查询（zhang2014）。</li><li>支持 <code class=syntax>SHOW CREATE TABLE</code> 对于临时表（zhang2014）。</li><li>添加了 <code class=syntax>system_profile</code> 内部进程使用的设置的配置参数。</li><li>支持加载 <code class=syntax>object_id</code> 作为一个属性 <code class=syntax>MongoDB</code> 字典（帕维尔*利特维年科）。</li><li>阅读 <code class=syntax>null</code> 作为加载数据的外部字典与时的默认值 <code class=syntax>MongoDB</code> 资料来源（帕维尔*利特维年科）。</li><li>阅读 <code class=syntax>DateTime</code> 在值 <code class=syntax>Values</code> 从不带单引号的Unix时间戳格式化。</li><li>故障转移支持 <code class=syntax>remote</code> 当某些副本缺少请求的表时，表函数。</li><li>运行时可以在命令行中复盖配置设置 <code class=syntax>clickhouse-server</code>. 示例: <code class=syntax>clickhouse-server -- --logger.level=information</code>.</li><li>实施了 <code class=syntax>empty</code> 从功能 <code class=syntax>FixedString</code> 参数：如果字符串完全由空字节组成，则函数返回1(zhang2014)。</li><li>添加了 <code class=syntax>listen_try</code>如果某些地址无法侦听，则在不退出的情况下侦听至少一个侦听地址的配置参数（对于禁用IPv4或IPv6支持的系统非常有用）。</li><li>添加了 <code class=syntax>VersionedCollapsingMergeTree</code> 表引擎。</li><li>对于行和任意数字类型的支持 <code class=syntax>library</code> 字典源.</li><li><code class=syntax>MergeTree</code> 表可以在没有主键的情况下使用（您需要指定 <code class=syntax>ORDER BY tuple()</code>).</li><li>A <code class=syntax>Nullable</code> 类型可以是 <code class=syntax>CAST</code> 到非-<code class=syntax>Nullable</code> 如果参数不是，则键入 <code class=syntax>NULL</code>.</li><li><code class=syntax>RENAME TABLE</code> 可以进行 <code class=syntax>VIEW</code>.</li><li>添加了 <code class=syntax>throwIf</code> 功能。</li><li>添加了 <code class=syntax>odbc_default_field_size</code> 选项，它允许您扩展从ODBC源加载的值的最大大小（默认情况下为1024）。</li><li>该 <code class=syntax>system.processes</code> 表和 <code class=syntax>SHOW PROCESSLIST</code> 现在有 <code class=syntax>is_cancelled</code> 和 <code class=syntax>peak_memory_usage</code> 列。</li></ul><h4 id=improvements-15>改进:<a class=headerlink href=../amp/#improvements-15 title="Permanent link"> </a></h4><ul><li>结果的限制和配额不再应用于以下内容的中间数据 <code class=syntax>INSERT SELECT</code> 查询或 <code class=syntax>SELECT</code> 子查询。</li><li>更少的虚假触发 <code class=syntax>force_restore_data</code> 当检查的状态 <code class=syntax>Replicated</code> 服务器启动时的表。</li><li>添加了 <code class=syntax>allow_distributed_ddl</code> 选项。</li><li>表达式中不允许使用非确定性函数 <code class=syntax>MergeTree</code> 表键。</li><li>从替换文件 <code class=syntax>config.d</code> 目录按字母顺序加载。</li><li>的改进的性能 <code class=syntax>arrayElement</code> 函数在常量多维数组的情况下，以空数组作为元素之一。 示例: <code class=syntax>[[1], []][x]</code>.</li><li>当使用具有非常大的替换（例如，非常大的IP网络列表）的配置文件时，服务器现在启动速度更快。</li><li>运行查询时，表值函数运行一次。 前情提要, <code class=syntax>remote</code> 和 <code class=syntax>mysql</code> 表值函数执行两次相同的查询以从远程服务器检索表结构。</li><li>该 <code class=syntax>MkDocs</code> 使用文档生成器。</li><li>当您尝试删除表列时 <code class=syntax>DEFAULT</code>/<code class=syntax>MATERIALIZED</code> 取决于其他列的表达式，会抛出异常（zhang2014）。</li><li>增加了解析文本格式的空行作为数字0的能力 <code class=syntax>Float</code> 数据类型。 此功能以前可用，但在版本1.1.54342中丢失。</li><li><code class=syntax>Enum</code> 值可以用于 <code class=syntax>min</code>, <code class=syntax>max</code>, <code class=syntax>sum</code> 和其他一些功能。 在这些情况下，它使用相应的数值。 此功能以前可用，但在版本1.1.54337中丢失。</li><li>已添加 <code class=syntax>max_expanded_ast_elements</code> 递归扩展别名后限制AST的大小。</li></ul><h4 id=bug-fixes-27>错误修复:<a class=headerlink href=../amp/#bug-fixes-27 title="Permanent link"> </a></h4><ul><li>修复了错误地从子查询中删除不必要的列或未从包含以下内容的子查询中删除不必要列的情况 <code class=syntax>UNION ALL</code>.</li><li>修正了合并的错误 <code class=syntax>ReplacingMergeTree</code> 桌子</li><li>在固定的同步插入 <code class=syntax>Distributed</code> 表 (<code class=syntax>insert_distributed_sync = 1</code>).</li><li>固定段错误的某些用途 <code class=syntax>FULL</code> 和 <code class=syntax>RIGHT JOIN</code> 在子查询中使用重复的列。</li><li>固定段错误的某些用途 <code class=syntax>replace_running_query</code> 和 <code class=syntax>KILL QUERY</code>.</li><li>固定的顺序 <code class=syntax>source</code> 和 <code class=syntax>last_exception</code> 在列 <code class=syntax>system.dictionaries</code> 桌子</li><li>修正了一个错误，当 <code class=syntax>DROP DATABASE</code> 查询没有删除带有元数据的文件。</li><li>修正了 <code class=syntax>DROP DATABASE</code> 查询为 <code class=syntax>Dictionary</code> 数据库。</li><li>固定的低精度 <code class=syntax>uniqHLL12</code> 和 <code class=syntax>uniqCombined</code> 功能基数大于100万个项目（Alex克斯Bocharov）。</li><li>修复了在必要时计算隐式默认值，以便同时计算默认显式表达式 <code class=syntax>INSERT</code> 查询（zhang2014）。</li><li>修正了一个罕见的情况下，当一个查询 <code class=syntax>MergeTree</code> 表不能完成（陈星-xc）。</li><li>修正了运行时发生的崩溃 <code class=syntax>CHECK</code> 查询为 <code class=syntax>Distributed</code> 如果所有分片都是本地的（chenxing.xc)。</li><li>修复了使用正则表达式的函数的轻微性能回归。</li><li>修复了从复杂表达式创建多维数组时的性能回归。</li><li>修正了一个错误，可能会导致一个额外的 <code class=syntax>FORMAT</code> 部分出现在一个 <code class=syntax>.sql</code> 具有元数据的文件。</li><li>修复了导致 <code class=syntax>max_table_size_to_drop</code> 尝试删除时应用的限制 <code class=syntax>MATERIALIZED VIEW</code> 查看显式指定的表。</li><li>修复了与旧客户端的不兼容性（旧客户端有时会发送数据 <code class=syntax>DateTime('timezone')</code> 类型，他们不明白）。</li><li>修复了阅读时的错误 <code class=syntax>Nested</code> 使用以下方式添加的结构的列元素 <code class=syntax>ALTER</code> 但是，这是空的旧分区，当这些列的条件移动到 <code class=syntax>PREWHERE</code>.</li><li>修正了通过虚拟过滤表时的错误 <code class=syntax>_table</code> 查询中的列 <code class=syntax>Merge</code> 桌子</li><li>修复了使用时的错误 <code class=syntax>ALIAS</code> 列 <code class=syntax>Distributed</code> 桌子</li><li>修正了一个错误，使得动态编译不可能从聚合函数的查询 <code class=syntax>quantile</code> 家人</li><li>修复了查询执行管道中极少数情况下使用时发生的争用条件 <code class=syntax>Merge</code> 具有大量表的表，并且当使用 <code class=syntax>GLOBAL</code> 子查询。</li><li>修复了将不同大小的数组传递给 <code class=syntax>arrayReduce</code> 使用来自多个参数的聚合函数时的函数。</li><li>禁止使用与查询 <code class=syntax>UNION ALL</code> 在一个 <code class=syntax>MATERIALIZED VIEW</code>.</li><li>修正了初始化过程中的错误 <code class=syntax>part_log</code> 服务器启动时的系统表（默认情况下, <code class=syntax>part_log</code> 被禁用）。</li></ul><h4 id=backward-incompatible-changes-10>向后不兼容的更改:<a class=headerlink href=../amp/#backward-incompatible-changes-10 title="Permanent link"> </a></h4><ul><li>删除了 <code class=syntax>distributed_ddl_allow_replicated_alter</code> 选项。 默认情况下启用此行为。</li><li>删除了 <code class=syntax>strict_insert_defaults</code> 设置。 如果您使用此功能，请写入 <code class=syntax>clickhouse-feedback@yandex-team.com</code>.</li><li>删除了 <code class=syntax>UnsortedMergeTree</code> 引擎</li></ul><h3 id=clickhouse-release-1-1-54343-2018-02-05>碌莽禄,拢,010-68520682\&lt;url&gt;戮漏鹿芦,酶,虏卤赂拢,110102005602<a class=headerlink href=../amp/#clickhouse-release-1-1-54343-2018-02-05 title="Permanent link"> </a></h3><ul><li>在分布式DDL查询和分布式表的构造函数中添加了用于定义集群名称的宏支持: <code class=syntax>CREATE TABLE distr ON CLUSTER '{cluster}' (...) ENGINE = Distributed('{cluster}', 'db', 'table')</code>.</li><li>现在像查询 <code class=syntax>SELECT ... FROM table WHERE expr IN (subquery)</code> 使用处理 <code class=syntax>table</code> 指数。</li><li>在插入到复制表时改进了重复项的处理，因此它们不再减慢复制队列的执行速度。</li></ul><h3 id=clickhouse-release-1-1-54342-2018-01-22>碌莽禄,拢,010-68520682\&lt;url&gt;戮卤篓拢,010-68520682<a class=headerlink href=../amp/#clickhouse-release-1-1-54342-2018-01-22 title="Permanent link"> </a></h3><p>此版本包含以前版本1.1.54337的错误修复:</p><ul><li>修正了1.1.54337中的回归：如果默认用户具有只读访问权限，则服务器拒绝启动消息 <code class=syntax>Cannot create database in readonly mode</code>.</li><li>修正了1.1.54337中的回归：在具有systemd的系统上，无论配置如何，日志总是写入syslog;看门狗脚本仍然使用init。d。</li><li>修正了1.1.54337中的回归：Docker映像中错误的默认配置。</li><li>修正GraphiteMergeTree的非确定性行为（您可以在日志消息中看到它 <code class=syntax>Data after merge is not byte-identical to the data on another replicas</code>).</li><li>修复了优化查询到复制表后可能导致合并不一致的错误（您可能会在日志消息中看到它 <code class=syntax>Part ... intersects the previous part</code>).</li><li>当目标表中存在具体化列时，缓冲区表现在可以正常工作（by zhang2014）。</li><li>修复了实现NULL的错误。</li></ul><h3 id=clickhouse-release-1-1-54337-2018-01-18>碌莽禄,拢,010-68520682\&lt;url&gt;<a class=headerlink href=../amp/#clickhouse-release-1-1-54337-2018-01-18 title="Permanent link"> </a></h3><h4 id=new-features-17>新功能:<a class=headerlink href=../amp/#new-features-17 title="Permanent link"> </a></h4><ul><li>增加了对多维数组和元组存储的支持 (<code class=syntax>Tuple</code> 表中的数据类型）。</li><li>支持表函数 <code class=syntax>DESCRIBE</code> 和 <code class=syntax>INSERT</code> 查询。 增加了对子查询的支持 <code class=syntax>DESCRIBE</code>. 例: <code class=syntax>DESC TABLE remote('host', default.hits)</code>; <code class=syntax>DESC TABLE (SELECT 1)</code>; <code class=syntax>INSERT INTO TABLE FUNCTION remote('host', default.hits)</code>. 支持 <code class=syntax>INSERT INTO TABLE</code> 除了 <code class=syntax>INSERT INTO</code>.</li><li>改进了对时区的支持。 该 <code class=syntax>DateTime</code> 数据类型可以使用用于以文本格式进行分析和格式化的时区进行注释。 示例: <code class=syntax>DateTime('Europe/Moscow')</code>. 当在函数中指定时区时 <code class=syntax>DateTime</code> 参数，返回类型将跟踪时区，并且值将按预期显示。</li><li>新增功能 <code class=syntax>toTimeZone</code>, <code class=syntax>timeDiff</code>, <code class=syntax>toQuarter</code>, <code class=syntax>toRelativeQuarterNum</code>. 该 <code class=syntax>toRelativeHour</code>/<code class=syntax>Minute</code>/<code class=syntax>Second</code> 函数可以采用类型的值 <code class=syntax>Date</code> 作为参数。 该 <code class=syntax>now</code> 函数名称区分大小写。</li><li>添加了 <code class=syntax>toStartOfFifteenMinutes</code> 功能（基里尔Shvakov）。</li><li>添加了 <code class=syntax>clickhouse format</code> 用于格式化查询的工具。</li><li>添加了 <code class=syntax>format_schema_path</code> configuration parameter (Marek Vavruşa). It is used for specifying a schema in <code class=syntax>Cap'n Proto</code> 格式。 架构文件只能位于指定的目录中。</li><li>增加了对配置替换的支持 (<code class=syntax>incl</code> 和 <code class=syntax>conf.d</code>）外部字典和模型的配置（帕维尔*亚库宁）。</li><li>添加了一列文档 <code class=syntax>system.settings</code> 表（基里尔Shvakov）。</li><li>添加了 <code class=syntax>system.parts_columns</code> 表中的每个数据部分的列大小信息 <code class=syntax>MergeTree</code> 桌子</li><li>添加了 <code class=syntax>system.models</code> 包含已加载信息的表 <code class=syntax>CatBoost</code> 机器学习模型。</li><li>添加了 <code class=syntax>mysql</code> 和 <code class=syntax>odbc</code> 表函数和对应 <code class=syntax>MySQL</code> 和 <code class=syntax>ODBC</code> 用于访问远程数据库的表引擎。 此功能处于测试阶段。</li><li>增加了传递类型参数的可能性 <code class=syntax>AggregateFunction</code> 为 <code class=syntax>groupArray</code> 聚合函数（这样你就可以创建一些聚合函数的状态数组）。</li><li>删除了对聚合函数组合器的各种组合的限制。 例如，您可以使用 <code class=syntax>avgForEachIf</code> 以及 <code class=syntax>avgIfForEach</code> 聚合函数，它们具有不同的行为。</li><li>该 <code class=syntax>-ForEach</code> 聚合函数combinator是针对多个参数的聚合函数的情况进行扩展的。</li><li>增加了对聚合函数的支持 <code class=syntax>Nullable</code> 即使是函数返回非参数的情况-<code class=syntax>Nullable</code> 结果（添加Silviu Caragea的贡献）。 示例: <code class=syntax>groupArray</code>, <code class=syntax>groupUniqArray</code>, <code class=syntax>topK</code>.</li><li>添加了 <code class=syntax>max_client_network_bandwidth</code> 为 <code class=syntax>clickhouse-client</code> （基里尔*什瓦科夫）。</li><li>用户与 <code class=syntax>readonly = 2</code> setting are allowed to work with TEMPORARY tables (CREATE, DROP, INSERT…) (Kirill Shvakov).</li><li>增加了对使用多个消费者的支持 <code class=syntax>Kafka</code> 引擎 扩展的配置选项 <code class=syntax>Kafka</code> (Marek Vavruša).</li><li>添加了 <code class=syntax>intExp3</code> 和 <code class=syntax>intExp4</code> 功能。</li><li>添加了 <code class=syntax>sumKahan</code> 聚合函数。</li><li>添加了to*Number*OrNull函数，其中*Number*是数字类型。</li><li>增加了对 <code class=syntax>WITH</code> a的子句 <code class=syntax>INSERT SELECT</code> 查询（作者：zhang2014）。</li><li>添加设置: <code class=syntax>http_connection_timeout</code>, <code class=syntax>http_send_timeout</code>, <code class=syntax>http_receive_timeout</code>. 特别是，这些设置用于下载用于复制的数据部分。 如果网络过载，更改这些设置可以更快地进行故障转移。</li><li>增加了对 <code class=syntax>ALTER</code> 对于类型的表 <code class=syntax>Null</code> (Anastasiya Tsarkova)</li><li>该 <code class=syntax>reinterpretAsString</code> 函数扩展为连续存储在内存中的所有数据类型。</li><li>添加了 <code class=syntax>--silent</code> 选项的 <code class=syntax>clickhouse-local</code> 工具 它禁止在stderr中打印查询执行信息。</li><li>增加了对读取类型值的支持 <code class=syntax>Date</code> 从使用单个数字而不是两个数字（Amos Bird）指定月份和/或月份日的格式的文本。</li></ul><h4 id=performance-optimizations>性能优化:<a class=headerlink href=../amp/#performance-optimizations title="Permanent link"> </a></h4><ul><li>改进聚合函数的性能 <code class=syntax>min</code>, <code class=syntax>max</code>, <code class=syntax>any</code>, <code class=syntax>anyLast</code>, <code class=syntax>anyHeavy</code>, <code class=syntax>argMin</code>, <code class=syntax>argMax</code> 从字符串参数。</li><li>改进功能的性能 <code class=syntax>isInfinite</code>, <code class=syntax>isFinite</code>, <code class=syntax>isNaN</code>, <code class=syntax>roundToExp2</code>.</li><li>改进了解析和格式化的性能 <code class=syntax>Date</code> 和 <code class=syntax>DateTime</code> 以文本格式键入值。</li><li>改进了解析浮点数的性能和精度。</li><li>降低内存使用量 <code class=syntax>JOIN</code> 在左部分和右部分具有不包含在相同名称的列的情况下 <code class=syntax>USING</code> .</li><li>改进聚合函数的性能 <code class=syntax>varSamp</code>, <code class=syntax>varPop</code>, <code class=syntax>stddevSamp</code>, <code class=syntax>stddevPop</code>, <code class=syntax>covarSamp</code>, <code class=syntax>covarPop</code>, <code class=syntax>corr</code> 通过降低计算稳定性。 旧函数的名称下可用 <code class=syntax>varSampStable</code>, <code class=syntax>varPopStable</code>, <code class=syntax>stddevSampStable</code>, <code class=syntax>stddevPopStable</code>, <code class=syntax>covarSampStable</code>, <code class=syntax>covarPopStable</code>, <code class=syntax>corrStable</code>.</li></ul><h4 id=bug-fixes-28>错误修复:<a class=headerlink href=../amp/#bug-fixes-28 title="Permanent link"> </a></h4><ul><li>固定数据重复数据删除运行后 <code class=syntax>DROP</code> 或 <code class=syntax>DETACH PARTITION</code> 查询。 在以前的版本中，删除分区并再次插入相同的数据不起作用，因为插入的块被认为是重复的。</li><li>修复了可能导致错误解释的错误 <code class=syntax>WHERE</code> 条款 <code class=syntax>CREATE MATERIALIZED VIEW</code> 查询与 <code class=syntax>POPULATE</code> .</li><li>修正了在使用 <code class=syntax>root_path</code> 在参数 <code class=syntax>zookeeper_servers</code> 配置。</li><li>通过固定意外的结果 <code class=syntax>Date</code> 论据 <code class=syntax>toStartOfDay</code> .</li><li>修正了 <code class=syntax>addMonths</code> 和 <code class=syntax>subtractMonths</code> 函数和算术 <code class=syntax>INTERVAL n MONTH</code> 在情况下，当结果有前一年。</li><li>增加了缺少的支持 <code class=syntax>UUID</code> 数据类型 <code class=syntax>DISTINCT</code> , <code class=syntax>JOIN</code> ，和 <code class=syntax>uniq</code> 聚合函数和外部字典（叶夫根尼伊万诺夫）。 支持 <code class=syntax>UUID</code> 仍然是不完整的。</li><li>固定 <code class=syntax>SummingMergeTree</code> 行为的情况下，当行相加为零。</li><li>各种修复 <code class=syntax>Kafka</code> engine (Marek Vavruša).</li><li>修正了不正确的行为 <code class=syntax>Join</code> 表引擎（阿莫斯鸟）。</li><li>修复了FreeBSD和OS X下不正确的分配器行为。</li><li>该 <code class=syntax>extractAll</code> 函数现在支持空匹配。</li><li>修复了阻止使用的错误 <code class=syntax>libressl</code> 而不是 <code class=syntax>openssl</code> .</li><li>修正了 <code class=syntax>CREATE TABLE AS SELECT</code> 从临时表查询。</li><li>修复了更新复制队列的非原子性。 这可能导致副本在服务器重新启动之前不同步。</li><li>修正了可能的溢出 <code class=syntax>gcd</code> , <code class=syntax>lcm</code> 和 <code class=syntax>modulo</code> (<code class=syntax>%</code> 运营商）（Maks Skorokhod）。</li><li><code class=syntax>-preprocessed</code> 现在更改后创建文件 <code class=syntax>umask</code> (<code class=syntax>umask</code> 可以在配置中更改）。</li><li>修正了部分的背景检查中的错误 (<code class=syntax>MergeTreePartChecker</code> ）使用自定义分区密钥时。</li><li>元组的固定解析（的值 <code class=syntax>Tuple</code> 数据类型）的文本格式。</li><li>改进了有关传递到的不兼容类型的错误消息 <code class=syntax>multiIf</code> , <code class=syntax>array</code> 和其他一些功能。</li><li>重新设计的支持 <code class=syntax>Nullable</code> 类型。 修复了可能导致服务器崩溃的错误。 修正了与几乎所有其他错误 <code class=syntax>NULL</code> 支持：insert SELECT中的类型转换不正确，HAVING和PREWHERE中对Nullable的支持不足, <code class=syntax>join_use_nulls</code> 模式，可以为Null的类型作为参数 <code class=syntax>OR</code> 操作员等。</li><li>修正了与数据类型的内部语义相关的各种错误。 例子：不必要的总结 <code class=syntax>Enum</code> 输入字段 <code class=syntax>SummingMergeTree</code> ;对齐 <code class=syntax>Enum</code> 类型 <code class=syntax>Pretty</code> 格式等。</li><li>对复合列的允许组合进行更严格的检查。</li><li>修复了指定一个非常大的参数时的溢出 <code class=syntax>FixedString</code> 数据类型。</li><li>修正了一个错误 <code class=syntax>topK</code> 一般情况下的聚合函数。</li><li>在聚合函数的n元变体的参数中添加了对数组大小相等性的缺失检查。 <code class=syntax>-Array</code> combinator</li><li>修正了一个错误 <code class=syntax>--pager</code> 为 <code class=syntax>clickhouse-client</code> （作者：ks1322）。</li><li>固定的精度 <code class=syntax>exp10</code> 功能。</li><li>固定的行为 <code class=syntax>visitParamExtract</code> 功能更好地符合文档。</li><li>修复了指定不正确的数据类型时的崩溃。</li><li>固定的行为 <code class=syntax>DISTINCT</code> 在所有列都是常量的情况下。</li><li>在使用的情况下固定的查询格式 <code class=syntax>tupleElement</code> 使用复数常量表达式作为元组元素索引的函数。</li><li>修正了一个错误 <code class=syntax>Dictionary</code> 表 <code class=syntax>range_hashed</code> 字典</li><li>修正了导致结果中的过多行的错误 <code class=syntax>FULL</code> 和 <code class=syntax>RIGHT JOIN</code> （阿莫斯鸟）。</li><li>修复了在创建和删除临时文件时的服务器崩溃 <code class=syntax>config.d</code> 配置重新加载期间的目录。</li><li>修正了 <code class=syntax>SYSTEM DROP DNS CACHE</code> 查询：缓存已刷新，但群集节点的地址未更新。</li><li>固定的行为 <code class=syntax>MATERIALIZED VIEW</code> 执行后 <code class=syntax>DETACH TABLE</code> for the table under the view (Marek Vavruša).</li></ul><h4 id=build-improvements-4>构建改进:<a class=headerlink href=../amp/#build-improvements-4 title="Permanent link"> </a></h4><ul><li>该 <code class=syntax>pbuilder</code> 工具用于构建。 构建过程几乎完全独立于构建主机环境。</li><li>单个构建用于不同的操作系统版本。 软件包和二进制文件已经与各种Linux系统兼容。</li><li>添加了 <code class=syntax>clickhouse-test</code> 包。 它可用于运行功能测试。</li><li>现在可以将源代码包发布到存储库。 它可以用来在不使用GitHub的情况下重现构建。</li><li>增加了有限的集成与特拉维斯CI。 由于Travis中的构建时间限制，仅测试调试构建并运行有限的测试子集。</li><li>增加了对 <code class=syntax>Cap'n'Proto</code> 在默认构建中。</li><li>更改文档来源的格式 <code class=syntax>Restricted Text</code> 到 <code class=syntax>Markdown</code>.</li><li>增加了对 <code class=syntax>systemd</code> （弗拉基米尔*斯米尔诺夫）。 默认情况下，由于与某些操作系统映像不兼容，它被禁用，并且可以手动启用。</li><li>用于动态代码生成, <code class=syntax>clang</code> 和 <code class=syntax>lld</code> 嵌入到 <code class=syntax>clickhouse</code> 二进制 它们也可以被调用为 <code class=syntax>clickhouse clang</code> 和 <code class=syntax>clickhouse lld</code> .</li><li>从代码中删除GNU扩展的使用。 启用 <code class=syntax>-Wextra</code> 选项。 当与建设 <code class=syntax>clang</code> 默认值为 <code class=syntax>libc++</code> 而不是 <code class=syntax>libstdc++</code>.</li><li>提取 <code class=syntax>clickhouse_parsers</code> 和 <code class=syntax>clickhouse_common_io</code> 库，以加快各种工具的构建。</li></ul><h4 id=backward-incompatible-changes-11>向后不兼容的更改:<a class=headerlink href=../amp/#backward-incompatible-changes-11 title="Permanent link"> </a></h4><ul><li>标记的格式 <code class=syntax>Log</code> 键入包含以下内容的表 <code class=syntax>Nullable</code> 列以向后不兼容的方式进行了更改。 如果你有这些表，你应该将它们转换为 <code class=syntax>TinyLog</code> 在启动新服务器版本之前键入。 要做到这一点，替换 <code class=syntax>ENGINE = Log</code> 与 <code class=syntax>ENGINE = TinyLog</code> 在相应的 <code class=syntax>.sql</code> 文件中的 <code class=syntax>metadata</code> 目录。 如果你的桌子没有 <code class=syntax>Nullable</code> 列或表的类型不是 <code class=syntax>Log</code>，那么你什么都不需要做。</li><li>删除了 <code class=syntax>experimental_allow_extended_storage_definition_syntax</code> 设置。 现在，此功能默认启用。</li><li>该 <code class=syntax>runningIncome</code> 函数重命名为 <code class=syntax>runningDifferenceStartingWithFirstvalue</code> 为了避免混confusion。</li><li>删除了 <code class=syntax>FROM ARRAY JOIN arr</code> 在FROM with no table(Amos Bird)之后直接指定数组连接时的语法。</li><li>删除了 <code class=syntax>BlockTabSeparated</code> 仅用于演示目的的格式。</li><li>更改聚合函数的状态格式 <code class=syntax>varSamp</code>, <code class=syntax>varPop</code>, <code class=syntax>stddevSamp</code>, <code class=syntax>stddevPop</code>, <code class=syntax>covarSamp</code>, <code class=syntax>covarPop</code>, <code class=syntax>corr</code>. 如果您已将这些聚合函数的状态存储在表中（使用 <code class=syntax>AggregateFunction</code> 数据类型或具体化视图与相应的状态），请写信给<a href=../mailto:clickhouse-feedback@yandex-team.comamp/ >clickhouse-feedback@yandex-team.com</a>.</li><li>在以前的服务器版本中，有一个未记录的功能：如果聚合函数依赖于参数，则仍然可以在AggregateFunction数据类型中指定它而不带参数。 示例: <code class=syntax>AggregateFunction(quantiles, UInt64)</code> 而不是 <code class=syntax>AggregateFunction(quantiles(0.5, 0.9), UInt64)</code>. 此功能已丢失。 虽然它没有记录，但我们计划在未来的版本中再次支持它。</li><li>枚举数据类型不能用于最小/最大聚合函数。 这种能力将在下一个版本中返回。</li></ul><h4 id=please-note-when-upgrading>升级时请注意:<a class=headerlink href=../amp/#please-note-when-upgrading title="Permanent link"> </a></h4><ul><li>当在群集上执行滚动更新时，当某些副本运行旧版本的ClickHouse，而某些副本运行新版本时，复制会暂时停止，并且消息 <code class=syntax>unknown parameter 'shard'</code> 出现在日志中。 更新集群的所有副本后，复制将继续。</li><li>如果群集服务器上运行不同版本的ClickHouse，则使用以下函数的分布式查询可能会产生不正确的结果: <code class=syntax>varSamp</code>, <code class=syntax>varPop</code>, <code class=syntax>stddevSamp</code>, <code class=syntax>stddevPop</code>, <code class=syntax>covarSamp</code>, <code class=syntax>covarPop</code>, <code class=syntax>corr</code>. 您应该更新所有群集节点。</li></ul><h2 id=changelog-for-2017><a href=../../2017/amp/#clickhouse-release-1-1-54327-2017-12-21>更新日志2017</a><a class=headerlink href=../amp/#changelog-for-2017 title="Permanent link"> </a></h2>
        </div>
      </div>
      <div class="row">
        <div class="col">
          
<div class="alert alert-light my-3">
  <p class="float-right mb-0">评分: RATING_VALUE - RATING_COUNT 所得票数</p>
  <span class="alert-heading display-6">文章评级</span>
  <div id="rating-stars" class="display-6 mb-0"
     
  >RATING_STARS</div>
</div>

<div id="content-footer" class="text-muted pt-3 mb-5">
    <div class="float-md-right">©2016–2020 Yandex LLC</div>
    <div>建于 <a href="https://github.com/ClickHouse/ClickHouse/commit/782f2179ce4ad0b9a9c898a5f32557555b59e4d0" rel="external nofollow noreferrer" target="_blank" class="text-reset">782f2179ce</a>, 发表于 <span title="2020-04-08T17:22:25+03:00">2020-04-08</span>, 修改于 <span title="2020-05-15T07:34:54+03:00">2020-05-15</span>
    
    </div>
</div>

        </div>
      </div>
      <div id="to-full-website" class="row fixed-bottom text-center bg-white py-3">
        <div class="col">
          <a class="btn btn-lg btn-outline-orange" href="https://clickhouse.tech/docs/zh/whats-new/changelog/2018/">To full website</a>
        </div>
      </div>
    </div>
    <amp-analytics type="metrika">
      <script type="application/json">{
"vars": {
  "counterId": "18343495",
  "triggers": {
    "notBounce": {
      "on": "timer",
      "timerSpec": {
        "immediate": false,
        "interval": 15,
        "maxTimerLength": 16
      },
      "request": "notBounce"
    }
  }
}
}</script>
  </amp-analytics>
  </body>
</html>
