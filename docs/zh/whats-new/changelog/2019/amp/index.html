










    



    



    



    
    






    <!doctype html>
<html ⚡ lang="zh">
  <head>
    <meta charset="utf-8">
    <script async src="https://cdn.ampproject.org/v0.js"></script>
    <title>2019 | ClickHouse文档</title>
    <link rel="canonical" href="https://clickhouse.tech/docs/zh/whats-new/changelog/2019/" />
    <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">
    
<script type="application/ld+json">[{
"@context": "http://schema.org",
"@type": "TechArticle",
"headline": "2019 | ClickHouse文档",
"mainEntityOfPage": "https://clickhouse.tech/docs/zh/whats-new/changelog/2019/",

"datePublished": "2020-04-08T17:22:25+03:00",
"dateModified": "2020-05-15T07:34:54+03:00",

"image": "https://clickhouse.tech/images/logo-209x60.png",
"author": {
  "@type": "Project",
  "name": "ClickHouse"
},
"publisher": {
  "@type": "Organization",
  "name": "Yandex LLC",
  "logo": {
    "@type": "ImageObject",
    "url": "https://clickhouse.tech/images/yandex.png",
    "width": 163,
    "height": 60
  }
}}, {
"@context": "http://schema.org",
"@type": "Episode",
"name": "2019 | ClickHouse文档",
"aggregateRating": {
  "@type": "AggregateRating",
  "ratingValue": RATING_VALUE,
  "ratingCount": RATING_COUNT
}
}]</script>

    
    <style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>
    <style amp-custom>:root{--blue:#007bff;--indigo:#6610f2;--purple:#6f42c1;--pink:#e83e8c;--red:#dc3545;--orange:#fd7e14;--yellow:#ffc107;--green:#28a745;--teal:#20c997;--cyan:#17a2b8;--white:#fff;--gray:#6c757d;--gray-dark:#343a40;--primary:#007bff;--secondary:#6c757d;--success:#28a745;--info:#17a2b8;--warning:#ffc107;--danger:#dc3545;--light:#f8f9fa;--dark:#343a40;--breakpoint-xs:0;--breakpoint-sm:576px;--breakpoint-md:768px;--breakpoint-lg:992px;--breakpoint-xl:1200px;--font-family-sans-serif:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";--font-family-monospace:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace}*,::after,::before{box-sizing:border-box}html{font-family:sans-serif;line-height:1.15;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent}footer,header,main{display:block}body{margin:0;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-size:1rem;font-weight:400;line-height:1.5;color:#212529;text-align:left;background-color:#fff}[tabindex="-1"]:focus:not(:focus-visible){outline:0}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:.5rem}p{margin-top:0;margin-bottom:1rem}address{margin-bottom:1rem;font-style:normal;line-height:inherit}ul{margin-top:0;margin-bottom:1rem}ul ul{margin-bottom:0}dd{margin-bottom:.5rem;margin-left:0}b{font-weight:bolder}small{font-size:80%}a{color:#007bff;text-decoration:none;background-color:transparent}a:hover{color:#0056b3;text-decoration:underline}a:not([href]){color:inherit;text-decoration:none}a:not([href]):hover{color:inherit;text-decoration:none}code{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:1em}img{vertical-align:middle;border-style:none}svg{overflow:hidden;vertical-align:middle}table{border-collapse:collapse}input,select{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}input{overflow:visible}select{text-transform:none}select{word-wrap:normal}[type=button],[type=reset],[type=submit]{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled){cursor:pointer}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner{padding:0;border-style:none}input[type=checkbox],input[type=radio]{box-sizing:border-box;padding:0}input[type=date],input[type=datetime-local],input[type=month],input[type=time]{-webkit-appearance:listbox}progress{vertical-align:baseline}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:none}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}summary{display:list-item;cursor:pointer}template{display:none}[hidden]{display:none}.h1,.h2,.h3,.h4,.h5,.h6,h1,h2,h3,h4,h5,h6{margin-bottom:.5rem;font-weight:500;line-height:1.2}.h1,h1{font-size:2.5rem}.h2,h2{font-size:2rem}.h3,h3{font-size:1.75rem}.h4,h4{font-size:1.5rem}.h5,h5{font-size:1.25rem}.h6,h6{font-size:1rem}.lead{font-size:1.25rem;font-weight:300}.display-1{font-size:6rem;font-weight:300;line-height:1.2}.display-2{font-size:5.5rem;font-weight:300;line-height:1.2}.display-3{font-size:4.5rem;font-weight:300;line-height:1.2}.display-4{font-size:3.5rem;font-weight:300;line-height:1.2}.small,small{font-size:80%;font-weight:400}.list-inline{padding-left:0;list-style:none}.img-fluid{max-width:100%;height:auto}code{font-size:87.5%;color:#e83e8c;word-wrap:break-word}a>code{color:inherit}.container{width:100%;padding-right:15px;padding-left:15px;margin-right:auto;margin-left:auto}@media(min-width:576px){.container{max-width:540px}}@media(min-width:768px){.container{max-width:720px}}@media(min-width:992px){.container{max-width:960px}}@media(min-width:1200px){.container{max-width:1140px}}.container-fluid,.container-lg,.container-md{width:100%;padding-right:15px;padding-left:15px;margin-right:auto;margin-left:auto}@media(min-width:576px){.container{max-width:540px}}@media(min-width:768px){.container,.container-md{max-width:720px}}@media(min-width:992px){.container,.container-lg,.container-md{max-width:960px}}@media(min-width:1200px){.container,.container-lg,.container-md{max-width:1140px}}.row{display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-right:-15px;margin-left:-15px}.col,.col-1,.col-10,.col-11,.col-12,.col-2,.col-3,.col-4,.col-5,.col-6,.col-7,.col-8,.col-9,.col-lg,.col-lg-1,.col-lg-10,.col-lg-11,.col-lg-12,.col-lg-2,.col-lg-3,.col-lg-4,.col-lg-5,.col-lg-6,.col-lg-7,.col-lg-8,.col-lg-9,.col-md,.col-md-1,.col-md-10,.col-md-11,.col-md-12,.col-md-2,.col-md-3,.col-md-4,.col-md-5,.col-md-6,.col-md-7,.col-md-8,.col-md-9{position:relative;width:100%;padding-right:15px;padding-left:15px}.col{-ms-flex-preferred-size:0;flex-basis:0;-ms-flex-positive:1;flex-grow:1;max-width:100%}.col-1{-ms-flex:0 0 8.333333%;flex:0 0 8.333333%;max-width:8.333333%}.col-2{-ms-flex:0 0 16.666667%;flex:0 0 16.666667%;max-width:16.666667%}.col-3{-ms-flex:0 0 25%;flex:0 0 25%;max-width:25%}.col-4{-ms-flex:0 0 33.333333%;flex:0 0 33.333333%;max-width:33.333333%}.col-5{-ms-flex:0 0 41.666667%;flex:0 0 41.666667%;max-width:41.666667%}.col-6{-ms-flex:0 0 50%;flex:0 0 50%;max-width:50%}.col-7{-ms-flex:0 0 58.333333%;flex:0 0 58.333333%;max-width:58.333333%}.col-8{-ms-flex:0 0 66.666667%;flex:0 0 66.666667%;max-width:66.666667%}.col-9{-ms-flex:0 0 75%;flex:0 0 75%;max-width:75%}.col-10{-ms-flex:0 0 83.333333%;flex:0 0 83.333333%;max-width:83.333333%}.col-11{-ms-flex:0 0 91.666667%;flex:0 0 91.666667%;max-width:91.666667%}.col-12{-ms-flex:0 0 100%;flex:0 0 100%;max-width:100%}.order-first{-ms-flex-order:-1;order:-1}.order-last{-ms-flex-order:13;order:13}.order-0{-ms-flex-order:0;order:0}.order-1{-ms-flex-order:1;order:1}.order-2{-ms-flex-order:2;order:2}.order-3{-ms-flex-order:3;order:3}.order-4{-ms-flex-order:4;order:4}.order-5{-ms-flex-order:5;order:5}.order-6{-ms-flex-order:6;order:6}.order-7{-ms-flex-order:7;order:7}.order-8{-ms-flex-order:8;order:8}.order-9{-ms-flex-order:9;order:9}.order-10{-ms-flex-order:10;order:10}.order-11{-ms-flex-order:11;order:11}.order-12{-ms-flex-order:12;order:12}.offset-1{margin-left:8.333333%}.offset-2{margin-left:16.666667%}.offset-3{margin-left:25%}.offset-4{margin-left:33.333333%}.offset-5{margin-left:41.666667%}.offset-6{margin-left:50%}.offset-7{margin-left:58.333333%}.offset-8{margin-left:66.666667%}.offset-9{margin-left:75%}.offset-10{margin-left:83.333333%}.offset-11{margin-left:91.666667%}@media(min-width:768px){.col-md{-ms-flex-preferred-size:0;flex-basis:0;-ms-flex-positive:1;flex-grow:1;max-width:100%}.col-md-1{-ms-flex:0 0 8.333333%;flex:0 0 8.333333%;max-width:8.333333%}.col-md-2{-ms-flex:0 0 16.666667%;flex:0 0 16.666667%;max-width:16.666667%}.col-md-3{-ms-flex:0 0 25%;flex:0 0 25%;max-width:25%}.col-md-4{-ms-flex:0 0 33.333333%;flex:0 0 33.333333%;max-width:33.333333%}.col-md-5{-ms-flex:0 0 41.666667%;flex:0 0 41.666667%;max-width:41.666667%}.col-md-6{-ms-flex:0 0 50%;flex:0 0 50%;max-width:50%}.col-md-7{-ms-flex:0 0 58.333333%;flex:0 0 58.333333%;max-width:58.333333%}.col-md-8{-ms-flex:0 0 66.666667%;flex:0 0 66.666667%;max-width:66.666667%}.col-md-9{-ms-flex:0 0 75%;flex:0 0 75%;max-width:75%}.col-md-10{-ms-flex:0 0 83.333333%;flex:0 0 83.333333%;max-width:83.333333%}.col-md-11{-ms-flex:0 0 91.666667%;flex:0 0 91.666667%;max-width:91.666667%}.col-md-12{-ms-flex:0 0 100%;flex:0 0 100%;max-width:100%}.order-md-first{-ms-flex-order:-1;order:-1}.order-md-last{-ms-flex-order:13;order:13}.order-md-0{-ms-flex-order:0;order:0}.order-md-1{-ms-flex-order:1;order:1}.order-md-2{-ms-flex-order:2;order:2}.order-md-3{-ms-flex-order:3;order:3}.order-md-4{-ms-flex-order:4;order:4}.order-md-5{-ms-flex-order:5;order:5}.order-md-6{-ms-flex-order:6;order:6}.order-md-7{-ms-flex-order:7;order:7}.order-md-8{-ms-flex-order:8;order:8}.order-md-9{-ms-flex-order:9;order:9}.order-md-10{-ms-flex-order:10;order:10}.order-md-11{-ms-flex-order:11;order:11}.order-md-12{-ms-flex-order:12;order:12}.offset-md-0{margin-left:0}.offset-md-1{margin-left:8.333333%}.offset-md-2{margin-left:16.666667%}.offset-md-3{margin-left:25%}.offset-md-4{margin-left:33.333333%}.offset-md-5{margin-left:41.666667%}.offset-md-6{margin-left:50%}.offset-md-7{margin-left:58.333333%}.offset-md-8{margin-left:66.666667%}.offset-md-9{margin-left:75%}.offset-md-10{margin-left:83.333333%}.offset-md-11{margin-left:91.666667%}}@media(min-width:992px){.col-lg{-ms-flex-preferred-size:0;flex-basis:0;-ms-flex-positive:1;flex-grow:1;max-width:100%}.col-lg-1{-ms-flex:0 0 8.333333%;flex:0 0 8.333333%;max-width:8.333333%}.col-lg-2{-ms-flex:0 0 16.666667%;flex:0 0 16.666667%;max-width:16.666667%}.col-lg-3{-ms-flex:0 0 25%;flex:0 0 25%;max-width:25%}.col-lg-4{-ms-flex:0 0 33.333333%;flex:0 0 33.333333%;max-width:33.333333%}.col-lg-5{-ms-flex:0 0 41.666667%;flex:0 0 41.666667%;max-width:41.666667%}.col-lg-6{-ms-flex:0 0 50%;flex:0 0 50%;max-width:50%}.col-lg-7{-ms-flex:0 0 58.333333%;flex:0 0 58.333333%;max-width:58.333333%}.col-lg-8{-ms-flex:0 0 66.666667%;flex:0 0 66.666667%;max-width:66.666667%}.col-lg-9{-ms-flex:0 0 75%;flex:0 0 75%;max-width:75%}.col-lg-10{-ms-flex:0 0 83.333333%;flex:0 0 83.333333%;max-width:83.333333%}.col-lg-11{-ms-flex:0 0 91.666667%;flex:0 0 91.666667%;max-width:91.666667%}.col-lg-12{-ms-flex:0 0 100%;flex:0 0 100%;max-width:100%}.order-lg-first{-ms-flex-order:-1;order:-1}.order-lg-last{-ms-flex-order:13;order:13}.order-lg-0{-ms-flex-order:0;order:0}.order-lg-1{-ms-flex-order:1;order:1}.order-lg-2{-ms-flex-order:2;order:2}.order-lg-3{-ms-flex-order:3;order:3}.order-lg-4{-ms-flex-order:4;order:4}.order-lg-5{-ms-flex-order:5;order:5}.order-lg-6{-ms-flex-order:6;order:6}.order-lg-7{-ms-flex-order:7;order:7}.order-lg-8{-ms-flex-order:8;order:8}.order-lg-9{-ms-flex-order:9;order:9}.order-lg-10{-ms-flex-order:10;order:10}.order-lg-11{-ms-flex-order:11;order:11}.order-lg-12{-ms-flex-order:12;order:12}.offset-lg-0{margin-left:0}.offset-lg-1{margin-left:8.333333%}.offset-lg-2{margin-left:16.666667%}.offset-lg-3{margin-left:25%}.offset-lg-4{margin-left:33.333333%}.offset-lg-5{margin-left:41.666667%}.offset-lg-6{margin-left:50%}.offset-lg-7{margin-left:58.333333%}.offset-lg-8{margin-left:66.666667%}.offset-lg-9{margin-left:75%}.offset-lg-10{margin-left:83.333333%}.offset-lg-11{margin-left:91.666667%}}.table{width:100%;margin-bottom:1rem;color:#212529}.table-primary{background-color:#b8daff}.table-light{background-color:#fdfdfe}.table-dark{background-color:#c6c8ca}.table-dark{color:#fff;background-color:#343a40}.invalid-feedback{display:none;width:100%;margin-top:.25rem;font-size:80%;color:#dc3545}.is-invalid~.invalid-feedback{display:block}.custom-select.is-invalid{border-color:#dc3545;padding-right:calc(.75em+2.3125rem);background:url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='4' height='5' viewBox='0 0 4 5'%3e%3cpath fill='%23343a40' d='M2 0L0 2h4zm0 5L0 3h4z'/%3e%3c/svg%3e") no-repeat right .75rem center/8px 10px,url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' fill='none' stroke='%23dc3545' viewBox='0 0 12 12'%3e%3ccircle cx='6' cy='6' r='4.5'/%3e%3cpath stroke-linejoin='round' d='M5.8 3.6h.4L6 6.5z'/%3e%3ccircle cx='6' cy='8.2' r='.6' fill='%23dc3545' stroke='none'/%3e%3c/svg%3e") #fff no-repeat center right 1.75rem/calc(.75em+.375rem) calc(.75em+.375rem)}.custom-select.is-invalid:focus{border-color:#dc3545;box-shadow:0 0 0 .2rem rgba(220,53,69,.25)}.btn{display:inline-block;font-weight:400;color:#212529;text-align:center;vertical-align:middle;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-color:transparent;border:1px solid transparent;padding:.375rem .75rem;font-size:1rem;line-height:1.5;border-radius:.25rem;transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out}@media(prefers-reduced-motion:reduce){.btn{transition:none}}.btn:hover{color:#212529;text-decoration:none}.btn:focus{outline:0;box-shadow:0 0 0 .2rem rgba(0,123,255,.25)}.btn:disabled{opacity:.65}.btn-primary{color:#fff;background-color:#007bff;border-color:#007bff}.btn-primary:hover{color:#fff;background-color:#0069d9;border-color:#0062cc}.btn-primary:focus{color:#fff;background-color:#0069d9;border-color:#0062cc;box-shadow:0 0 0 .2rem rgba(38,143,255,.5)}.btn-primary:disabled{color:#fff;background-color:#007bff;border-color:#007bff}.btn-light{color:#212529;background-color:#f8f9fa;border-color:#f8f9fa}.btn-light:hover{color:#212529;background-color:#e2e6ea;border-color:#dae0e5}.btn-light:focus{color:#212529;background-color:#e2e6ea;border-color:#dae0e5;box-shadow:0 0 0 .2rem rgba(216,217,219,.5)}.btn-light:disabled{color:#212529;background-color:#f8f9fa;border-color:#f8f9fa}.btn-dark{color:#fff;background-color:#343a40;border-color:#343a40}.btn-dark:hover{color:#fff;background-color:#23272b;border-color:#1d2124}.btn-dark:focus{color:#fff;background-color:#23272b;border-color:#1d2124;box-shadow:0 0 0 .2rem rgba(82,88,93,.5)}.btn-dark:disabled{color:#fff;background-color:#343a40;border-color:#343a40}.btn-outline-primary{color:#007bff;border-color:#007bff}.btn-outline-primary:hover{color:#fff;background-color:#007bff;border-color:#007bff}.btn-outline-primary:focus{box-shadow:0 0 0 .2rem rgba(0,123,255,.5)}.btn-outline-primary:disabled{color:#007bff;background-color:transparent}.btn-outline-light{color:#f8f9fa;border-color:#f8f9fa}.btn-outline-light:hover{color:#212529;background-color:#f8f9fa;border-color:#f8f9fa}.btn-outline-light:focus{box-shadow:0 0 0 .2rem rgba(248,249,250,.5)}.btn-outline-light:disabled{color:#f8f9fa;background-color:transparent}.btn-outline-dark{color:#343a40;border-color:#343a40}.btn-outline-dark:hover{color:#fff;background-color:#343a40;border-color:#343a40}.btn-outline-dark:focus{box-shadow:0 0 0 .2rem rgba(52,58,64,.5)}.btn-outline-dark:disabled{color:#343a40;background-color:transparent}.btn-link{font-weight:400;color:#007bff;text-decoration:none}.btn-link:hover{color:#0056b3;text-decoration:underline}.btn-link:focus{text-decoration:underline;box-shadow:none}.btn-link:disabled{color:#6c757d;pointer-events:none}.btn-group-lg>.btn,.btn-lg{padding:.5rem 1rem;font-size:1.25rem;line-height:1.5;border-radius:.3rem}.btn-block{display:block;width:100%}.btn-block+.btn-block{margin-top:.5rem}input[type=button].btn-block,input[type=reset].btn-block,input[type=submit].btn-block{width:100%}.btn-group{position:relative;display:-ms-inline-flexbox;display:inline-flex;vertical-align:middle}.btn-group>.btn{position:relative;-ms-flex:1 1 auto;flex:1 1 auto}.btn-group>.btn:hover{z-index:1}.btn-group>.btn:active,.btn-group>.btn:focus{z-index:1}.btn-group>.btn-group:not(:first-child),.btn-group>.btn:not(:first-child){margin-left:-1px}.btn-group>.btn-group:not(:last-child)>.btn{border-top-right-radius:0;border-bottom-right-radius:0}.btn-group>.btn-group:not(:first-child)>.btn,.btn-group>.btn:not(:first-child){border-top-left-radius:0;border-bottom-left-radius:0}.input-group{position:relative;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;-ms-flex-align:stretch;align-items:stretch;width:100%}.input-group>.custom-file,.input-group>.custom-select{position:relative;-ms-flex:1 1 0;flex:1 1 0;min-width:0;margin-bottom:0}.input-group>.custom-file+.custom-file,.input-group>.custom-file+.custom-select,.input-group>.custom-select+.custom-file,.input-group>.custom-select+.custom-select{margin-left:-1px}.input-group>.custom-select:focus{z-index:3}.input-group>.custom-file .custom-file-input:focus{z-index:4}.input-group>.custom-select:not(:last-child){border-top-right-radius:0;border-bottom-right-radius:0}.input-group>.custom-select:not(:first-child){border-top-left-radius:0;border-bottom-left-radius:0}.input-group>.custom-file{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}.input-group-text{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;padding:.375rem .75rem;margin-bottom:0;font-size:1rem;font-weight:400;line-height:1.5;color:#495057;text-align:center;white-space:nowrap;background-color:#e9ecef;border:1px solid #ced4da;border-radius:.25rem}.input-group-text input[type=checkbox],.input-group-text input[type=radio]{margin-top:0}.input-group-lg>.custom-select{height:calc(1.5em+1rem+2px)}.input-group-lg>.custom-select{padding:.5rem 1rem;font-size:1.25rem;line-height:1.5;border-radius:.3rem}.input-group-lg>.custom-select{padding-right:1.75rem}.custom-select{display:inline-block;width:100%;height:calc(1.5em+.75rem+2px);padding:.375rem 1.75rem .375rem .75rem;font-size:1rem;font-weight:400;line-height:1.5;color:#495057;vertical-align:middle;background:#fff url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='4' height='5' viewBox='0 0 4 5'%3e%3cpath fill='%23343a40' d='M2 0L0 2h4zm0 5L0 3h4z'/%3e%3c/svg%3e") no-repeat right .75rem center/8px 10px;border:1px solid #ced4da;border-radius:.25rem;-webkit-appearance:none;-moz-appearance:none;appearance:none}.custom-select:focus{border-color:#80bdff;outline:0;box-shadow:0 0 0 .2rem rgba(0,123,255,.25)}.custom-select:focus::-ms-value{color:#495057;background-color:#fff}.custom-select[multiple],.custom-select[size]:not([size="1"]){height:auto;padding-right:.75rem;background-image:none}.custom-select:disabled{color:#6c757d;background-color:#e9ecef}.custom-select::-ms-expand{display:none}.custom-select:-moz-focusring{color:transparent;text-shadow:0 0 0 #495057}.custom-select-lg{height:calc(1.5em+1rem+2px);padding-top:.5rem;padding-bottom:.5rem;padding-left:1rem;font-size:1.25rem}.custom-file{position:relative;display:inline-block;width:100%;height:calc(1.5em+.75rem+2px);margin-bottom:0}.custom-file-input{position:relative;z-index:2;width:100%;height:calc(1.5em+.75rem+2px);margin:0;opacity:0}.custom-range{width:100%;height:1.4rem;padding:0;background-color:transparent;-webkit-appearance:none;-moz-appearance:none;appearance:none}.custom-range:focus{outline:0}.custom-range:focus::-webkit-slider-thumb{box-shadow:0 0 0 1px #fff,0 0 0 .2rem rgba(0,123,255,.25)}.custom-range:focus::-moz-range-thumb{box-shadow:0 0 0 1px #fff,0 0 0 .2rem rgba(0,123,255,.25)}.custom-range:focus::-ms-thumb{box-shadow:0 0 0 1px #fff,0 0 0 .2rem rgba(0,123,255,.25)}.custom-range::-moz-focus-outer{border:0}.custom-range::-webkit-slider-thumb{width:1rem;height:1rem;margin-top:-.25rem;background-color:#007bff;border:0;border-radius:1rem;-webkit-transition:background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;transition:background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;-webkit-appearance:none;appearance:none}@media(prefers-reduced-motion:reduce){.custom-range::-webkit-slider-thumb{-webkit-transition:none;transition:none}}.custom-range::-webkit-slider-thumb:active{background-color:#b3d7ff}.custom-range::-webkit-slider-runnable-track{width:100%;height:.5rem;color:transparent;cursor:pointer;background-color:#dee2e6;border-color:transparent;border-radius:1rem}.custom-range::-moz-range-thumb{width:1rem;height:1rem;background-color:#007bff;border:0;border-radius:1rem;-moz-transition:background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;transition:background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;-moz-appearance:none;appearance:none}@media(prefers-reduced-motion:reduce){.custom-range::-moz-range-thumb{-moz-transition:none;transition:none}}.custom-range::-moz-range-thumb:active{background-color:#b3d7ff}.custom-range::-moz-range-track{width:100%;height:.5rem;color:transparent;cursor:pointer;background-color:#dee2e6;border-color:transparent;border-radius:1rem}.custom-range::-ms-thumb{width:1rem;height:1rem;margin-top:0;margin-right:.2rem;margin-left:.2rem;background-color:#007bff;border:0;border-radius:1rem;-ms-transition:background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;transition:background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;appearance:none}@media(prefers-reduced-motion:reduce){.custom-range::-ms-thumb{-ms-transition:none;transition:none}}.custom-range::-ms-thumb:active{background-color:#b3d7ff}.custom-range::-ms-track{width:100%;height:.5rem;color:transparent;cursor:pointer;background-color:transparent;border-color:transparent;border-width:.5rem}.custom-range::-ms-fill-lower{background-color:#dee2e6;border-radius:1rem}.custom-range::-ms-fill-upper{margin-right:15px;background-color:#dee2e6;border-radius:1rem}.custom-range:disabled::-webkit-slider-thumb{background-color:#adb5bd}.custom-range:disabled::-webkit-slider-runnable-track{cursor:default}.custom-range:disabled::-moz-range-thumb{background-color:#adb5bd}.custom-range:disabled::-moz-range-track{cursor:default}.custom-range:disabled::-ms-thumb{background-color:#adb5bd}.custom-select{transition:background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out}@media(prefers-reduced-motion:reduce){.custom-select{transition:none}}.alert{position:relative;padding:.75rem 1.25rem;margin-bottom:1rem;border:1px solid transparent;border-radius:.25rem}.alert-heading{color:inherit}.alert-link{font-weight:700}.alert-primary{color:#004085;background-color:#cce5ff;border-color:#b8daff}.alert-primary .alert-link{color:#002752}.alert-light{color:#818182;background-color:#fefefe;border-color:#fdfdfe}.alert-light .alert-link{color:#686868}.alert-dark{color:#1b1e21;background-color:#d6d8d9;border-color:#c6c8ca}.alert-dark .alert-link{color:#040505}@-webkit-keyframes progress-bar-stripes{from{background-position:1rem 0}to{background-position:0 0}}@keyframes progress-bar-stripes{from{background-position:1rem 0}to{background-position:0 0}}.progress{display:-ms-flexbox;display:flex;height:1rem;overflow:hidden;font-size:.75rem;background-color:#e9ecef;border-radius:.25rem}.list-group{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;padding-left:0;margin-bottom:0}@-webkit-keyframes spinner-border{to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes spinner-border{to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-webkit-keyframes spinner-grow{0%{-webkit-transform:scale(0);transform:scale(0)}50%{opacity:1}}@keyframes spinner-grow{0%{-webkit-transform:scale(0);transform:scale(0)}50%{opacity:1}}.bg-primary{background-color:#007bff}a.bg-primary:focus,a.bg-primary:hover{background-color:#0062cc}.bg-light{background-color:#f8f9fa}a.bg-light:focus,a.bg-light:hover{background-color:#dae0e5}.bg-dark{background-color:#343a40}a.bg-dark:focus,a.bg-dark:hover{background-color:#1d2124}.bg-white{background-color:#fff}.d-none{display:none}.d-inline{display:inline}.d-inline-block{display:inline-block}.d-block{display:block}.d-table{display:table}.d-table-row{display:table-row}@media(min-width:768px){.d-md-none{display:none}.d-md-inline{display:inline}.d-md-inline-block{display:inline-block}.d-md-block{display:block}.d-md-table{display:table}.d-md-table-row{display:table-row}}@media(min-width:992px){.d-lg-none{display:none}.d-lg-inline{display:inline}.d-lg-inline-block{display:inline-block}.d-lg-block{display:block}.d-lg-table{display:table}.d-lg-table-row{display:table-row}}.float-left{float:left}.float-right{float:right}.float-none{float:none}@media(min-width:768px){.float-md-left{float:left}.float-md-right{float:right}.float-md-none{float:none}}@media(min-width:992px){.float-lg-left{float:left}.float-lg-right{float:right}.float-lg-none{float:none}}.overflow-hidden{overflow:hidden}.fixed-top{position:fixed;top:0;right:0;left:0;z-index:1030}.fixed-bottom{position:fixed;right:0;bottom:0;left:0;z-index:1030}.shadow{box-shadow:0 .5rem 1rem rgba(0,0,0,.15)}.shadow-lg{box-shadow:0 1rem 3rem rgba(0,0,0,.175)}.shadow-none{box-shadow:none}.h-25{height:25%}.h-50{height:50%}.h-75{height:75%}.h-100{height:100%}.m-0{margin:0}.mt-0,.my-0{margin-top:0}.mr-0,.mx-0{margin-right:0}.mb-0,.my-0{margin-bottom:0}.ml-0,.mx-0{margin-left:0}.m-1{margin:.25rem}.mt-1,.my-1{margin-top:.25rem}.mr-1,.mx-1{margin-right:.25rem}.mb-1,.my-1{margin-bottom:.25rem}.ml-1,.mx-1{margin-left:.25rem}.m-2{margin:.5rem}.mt-2,.my-2{margin-top:.5rem}.mr-2,.mx-2{margin-right:.5rem}.mb-2,.my-2{margin-bottom:.5rem}.ml-2,.mx-2{margin-left:.5rem}.m-3{margin:1rem}.mt-3,.my-3{margin-top:1rem}.mr-3,.mx-3{margin-right:1rem}.mb-3,.my-3{margin-bottom:1rem}.ml-3,.mx-3{margin-left:1rem}.m-4{margin:1.5rem}.mt-4,.my-4{margin-top:1.5rem}.mr-4,.mx-4{margin-right:1.5rem}.mb-4,.my-4{margin-bottom:1.5rem}.ml-4,.mx-4{margin-left:1.5rem}.m-5{margin:3rem}.mt-5,.my-5{margin-top:3rem}.mr-5,.mx-5{margin-right:3rem}.mb-5,.my-5{margin-bottom:3rem}.ml-5,.mx-5{margin-left:3rem}.p-0{padding:0}.pt-0,.py-0{padding-top:0}.pr-0{padding-right:0}.pb-0,.py-0{padding-bottom:0}.p-1{padding:.25rem}.pt-1,.py-1{padding-top:.25rem}.pr-1{padding-right:.25rem}.pb-1,.py-1{padding-bottom:.25rem}.p-2{padding:.5rem}.pt-2,.py-2{padding-top:.5rem}.pr-2{padding-right:.5rem}.pb-2,.py-2{padding-bottom:.5rem}.p-3{padding:1rem}.pt-3,.py-3{padding-top:1rem}.pr-3{padding-right:1rem}.pb-3,.py-3{padding-bottom:1rem}.p-4{padding:1.5rem}.pt-4,.py-4{padding-top:1.5rem}.pr-4{padding-right:1.5rem}.pb-4,.py-4{padding-bottom:1.5rem}.p-5{padding:3rem}.pt-5,.py-5{padding-top:3rem}.pr-5{padding-right:3rem}.pb-5,.py-5{padding-bottom:3rem}.m-n1{margin:-.25rem}.mt-n1,.my-n1{margin-top:-.25rem}.mr-n1,.mx-n1{margin-right:-.25rem}.mb-n1,.my-n1{margin-bottom:-.25rem}.ml-n1,.mx-n1{margin-left:-.25rem}.m-n2{margin:-.5rem}.mt-n2,.my-n2{margin-top:-.5rem}.mr-n2,.mx-n2{margin-right:-.5rem}.mb-n2,.my-n2{margin-bottom:-.5rem}.ml-n2,.mx-n2{margin-left:-.5rem}.m-n3{margin:-1rem}.mt-n3,.my-n3{margin-top:-1rem}.mr-n3,.mx-n3{margin-right:-1rem}.mb-n3,.my-n3{margin-bottom:-1rem}.ml-n3,.mx-n3{margin-left:-1rem}.m-n4{margin:-1.5rem}.mt-n4,.my-n4{margin-top:-1.5rem}.mr-n4,.mx-n4{margin-right:-1.5rem}.mb-n4,.my-n4{margin-bottom:-1.5rem}.ml-n4,.mx-n4{margin-left:-1.5rem}.m-n5{margin:-3rem}.mt-n5,.my-n5{margin-top:-3rem}.mr-n5,.mx-n5{margin-right:-3rem}.mb-n5,.my-n5{margin-bottom:-3rem}.ml-n5,.mx-n5{margin-left:-3rem}@media(min-width:768px){.m-md-0{margin:0}.mt-md-0,.my-md-0{margin-top:0}.mr-md-0,.mx-md-0{margin-right:0}.mb-md-0,.my-md-0{margin-bottom:0}.ml-md-0,.mx-md-0{margin-left:0}.m-md-1{margin:.25rem}.mt-md-1,.my-md-1{margin-top:.25rem}.mr-md-1,.mx-md-1{margin-right:.25rem}.mb-md-1,.my-md-1{margin-bottom:.25rem}.ml-md-1,.mx-md-1{margin-left:.25rem}.m-md-2{margin:.5rem}.mt-md-2,.my-md-2{margin-top:.5rem}.mr-md-2,.mx-md-2{margin-right:.5rem}.mb-md-2,.my-md-2{margin-bottom:.5rem}.ml-md-2,.mx-md-2{margin-left:.5rem}.m-md-3{margin:1rem}.mt-md-3,.my-md-3{margin-top:1rem}.mr-md-3,.mx-md-3{margin-right:1rem}.mb-md-3,.my-md-3{margin-bottom:1rem}.ml-md-3,.mx-md-3{margin-left:1rem}.m-md-4{margin:1.5rem}.mt-md-4,.my-md-4{margin-top:1.5rem}.mr-md-4,.mx-md-4{margin-right:1.5rem}.mb-md-4,.my-md-4{margin-bottom:1.5rem}.ml-md-4,.mx-md-4{margin-left:1.5rem}.m-md-5{margin:3rem}.mt-md-5,.my-md-5{margin-top:3rem}.mr-md-5,.mx-md-5{margin-right:3rem}.mb-md-5,.my-md-5{margin-bottom:3rem}.ml-md-5,.mx-md-5{margin-left:3rem}.p-md-0{padding:0}.pt-md-0,.py-md-0{padding-top:0}.pr-md-0{padding-right:0}.pb-md-0,.py-md-0{padding-bottom:0}.p-md-1{padding:.25rem}.pt-md-1,.py-md-1{padding-top:.25rem}.pr-md-1{padding-right:.25rem}.pb-md-1,.py-md-1{padding-bottom:.25rem}.p-md-2{padding:.5rem}.pt-md-2,.py-md-2{padding-top:.5rem}.pr-md-2{padding-right:.5rem}.pb-md-2,.py-md-2{padding-bottom:.5rem}.p-md-3{padding:1rem}.pt-md-3,.py-md-3{padding-top:1rem}.pr-md-3{padding-right:1rem}.pb-md-3,.py-md-3{padding-bottom:1rem}.p-md-4{padding:1.5rem}.pt-md-4,.py-md-4{padding-top:1.5rem}.pr-md-4{padding-right:1.5rem}.pb-md-4,.py-md-4{padding-bottom:1.5rem}.p-md-5{padding:3rem}.pt-md-5,.py-md-5{padding-top:3rem}.pr-md-5{padding-right:3rem}.pb-md-5,.py-md-5{padding-bottom:3rem}.m-md-n1{margin:-.25rem}.mt-md-n1,.my-md-n1{margin-top:-.25rem}.mr-md-n1,.mx-md-n1{margin-right:-.25rem}.mb-md-n1,.my-md-n1{margin-bottom:-.25rem}.ml-md-n1,.mx-md-n1{margin-left:-.25rem}.m-md-n2{margin:-.5rem}.mt-md-n2,.my-md-n2{margin-top:-.5rem}.mr-md-n2,.mx-md-n2{margin-right:-.5rem}.mb-md-n2,.my-md-n2{margin-bottom:-.5rem}.ml-md-n2,.mx-md-n2{margin-left:-.5rem}.m-md-n3{margin:-1rem}.mt-md-n3,.my-md-n3{margin-top:-1rem}.mr-md-n3,.mx-md-n3{margin-right:-1rem}.mb-md-n3,.my-md-n3{margin-bottom:-1rem}.ml-md-n3,.mx-md-n3{margin-left:-1rem}.m-md-n4{margin:-1.5rem}.mt-md-n4,.my-md-n4{margin-top:-1.5rem}.mr-md-n4,.mx-md-n4{margin-right:-1.5rem}.mb-md-n4,.my-md-n4{margin-bottom:-1.5rem}.ml-md-n4,.mx-md-n4{margin-left:-1.5rem}.m-md-n5{margin:-3rem}.mt-md-n5,.my-md-n5{margin-top:-3rem}.mr-md-n5,.mx-md-n5{margin-right:-3rem}.mb-md-n5,.my-md-n5{margin-bottom:-3rem}.ml-md-n5,.mx-md-n5{margin-left:-3rem}}@media(min-width:992px){.m-lg-0{margin:0}.mt-lg-0,.my-lg-0{margin-top:0}.mr-lg-0,.mx-lg-0{margin-right:0}.mb-lg-0,.my-lg-0{margin-bottom:0}.ml-lg-0,.mx-lg-0{margin-left:0}.m-lg-1{margin:.25rem}.mt-lg-1,.my-lg-1{margin-top:.25rem}.mr-lg-1,.mx-lg-1{margin-right:.25rem}.mb-lg-1,.my-lg-1{margin-bottom:.25rem}.ml-lg-1,.mx-lg-1{margin-left:.25rem}.m-lg-2{margin:.5rem}.mt-lg-2,.my-lg-2{margin-top:.5rem}.mr-lg-2,.mx-lg-2{margin-right:.5rem}.mb-lg-2,.my-lg-2{margin-bottom:.5rem}.ml-lg-2,.mx-lg-2{margin-left:.5rem}.m-lg-3{margin:1rem}.mt-lg-3,.my-lg-3{margin-top:1rem}.mr-lg-3,.mx-lg-3{margin-right:1rem}.mb-lg-3,.my-lg-3{margin-bottom:1rem}.ml-lg-3,.mx-lg-3{margin-left:1rem}.m-lg-4{margin:1.5rem}.mt-lg-4,.my-lg-4{margin-top:1.5rem}.mr-lg-4,.mx-lg-4{margin-right:1.5rem}.mb-lg-4,.my-lg-4{margin-bottom:1.5rem}.ml-lg-4,.mx-lg-4{margin-left:1.5rem}.m-lg-5{margin:3rem}.mt-lg-5,.my-lg-5{margin-top:3rem}.mr-lg-5,.mx-lg-5{margin-right:3rem}.mb-lg-5,.my-lg-5{margin-bottom:3rem}.ml-lg-5,.mx-lg-5{margin-left:3rem}.p-lg-0{padding:0}.pt-lg-0,.py-lg-0{padding-top:0}.pr-lg-0{padding-right:0}.pb-lg-0,.py-lg-0{padding-bottom:0}.p-lg-1{padding:.25rem}.pt-lg-1,.py-lg-1{padding-top:.25rem}.pr-lg-1{padding-right:.25rem}.pb-lg-1,.py-lg-1{padding-bottom:.25rem}.p-lg-2{padding:.5rem}.pt-lg-2,.py-lg-2{padding-top:.5rem}.pr-lg-2{padding-right:.5rem}.pb-lg-2,.py-lg-2{padding-bottom:.5rem}.p-lg-3{padding:1rem}.pt-lg-3,.py-lg-3{padding-top:1rem}.pr-lg-3{padding-right:1rem}.pb-lg-3,.py-lg-3{padding-bottom:1rem}.p-lg-4{padding:1.5rem}.pt-lg-4,.py-lg-4{padding-top:1.5rem}.pr-lg-4{padding-right:1.5rem}.pb-lg-4,.py-lg-4{padding-bottom:1.5rem}.p-lg-5{padding:3rem}.pt-lg-5,.py-lg-5{padding-top:3rem}.pr-lg-5{padding-right:3rem}.pb-lg-5,.py-lg-5{padding-bottom:3rem}.m-lg-n1{margin:-.25rem}.mt-lg-n1,.my-lg-n1{margin-top:-.25rem}.mr-lg-n1,.mx-lg-n1{margin-right:-.25rem}.mb-lg-n1,.my-lg-n1{margin-bottom:-.25rem}.ml-lg-n1,.mx-lg-n1{margin-left:-.25rem}.m-lg-n2{margin:-.5rem}.mt-lg-n2,.my-lg-n2{margin-top:-.5rem}.mr-lg-n2,.mx-lg-n2{margin-right:-.5rem}.mb-lg-n2,.my-lg-n2{margin-bottom:-.5rem}.ml-lg-n2,.mx-lg-n2{margin-left:-.5rem}.m-lg-n3{margin:-1rem}.mt-lg-n3,.my-lg-n3{margin-top:-1rem}.mr-lg-n3,.mx-lg-n3{margin-right:-1rem}.mb-lg-n3,.my-lg-n3{margin-bottom:-1rem}.ml-lg-n3,.mx-lg-n3{margin-left:-1rem}.m-lg-n4{margin:-1.5rem}.mt-lg-n4,.my-lg-n4{margin-top:-1.5rem}.mr-lg-n4,.mx-lg-n4{margin-right:-1.5rem}.mb-lg-n4,.my-lg-n4{margin-bottom:-1.5rem}.ml-lg-n4,.mx-lg-n4{margin-left:-1.5rem}.m-lg-n5{margin:-3rem}.mt-lg-n5,.my-lg-n5{margin-top:-3rem}.mr-lg-n5,.mx-lg-n5{margin-right:-3rem}.mb-lg-n5,.my-lg-n5{margin-bottom:-3rem}.ml-lg-n5,.mx-lg-n5{margin-left:-3rem}}.text-truncate{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.text-left{text-align:left}.text-right{text-align:right}.text-center{text-align:center}@media(min-width:768px){.text-md-left{text-align:left}.text-md-right{text-align:right}.text-md-center{text-align:center}}@media(min-width:992px){.text-lg-left{text-align:left}.text-lg-right{text-align:right}.text-lg-center{text-align:center}}.text-white{color:#fff}.text-primary{color:#007bff}a.text-primary:focus,a.text-primary:hover{color:#0056b3}.text-light{color:#f8f9fa}a.text-light:focus,a.text-light:hover{color:#cbd3da}.text-dark{color:#343a40}a.text-dark:focus,a.text-dark:hover{color:#121416}.text-body{color:#212529}.text-muted{color:#6c757d}.text-black-50{color:rgba(0,0,0,.5)}.text-white-50{color:rgba(255,255,255,.5)}.text-decoration-none{text-decoration:none}.text-reset{color:inherit}.visible{visibility:visible}@media print{*,::after,::before{text-shadow:none;box-shadow:none}a:not(.btn){text-decoration:underline}img{page-break-inside:avoid}h2,h3,p{orphans:3;widows:3}h2,h3{page-break-after:avoid}@page{size:a3}body{min-width:992px}.container{min-width:992px}.table{border-collapse:collapse}.table-dark{color:inherit}}@-webkit-keyframes sbx-reset-in{0%{-webkit-transform:translate3d(-20%,0,0);transform:translate3d(-20%,0,0);opacity:0}100%{-webkit-transform:none;transform:none;opacity:1}}@keyframes sbx-reset-in{0%{-webkit-transform:translate3d(-20%,0,0);transform:translate3d(-20%,0,0);opacity:0}100%{-webkit-transform:none;transform:none;opacity:1}}body{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Noto Sans","Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji"}a:link,a:visited{color:#f14600;text-decoration:none}a:active,a:hover{text-decoration:underline}.btn:disabled{cursor:default;opacity:.4}#logo-text{width:180px;margin-left:12px}.display-5{font-size:2rem;font-weight:300;line-height:1.2}.display-6{font-size:1.75rem;font-weight:300;line-height:1.2}.bg-dark-alt,.bg-dark-alt:focus{background:#36363f}.bg-orange,.bg-orange:focus{background:#f14600}.text-dark-alt{color:#36363f}.btn-dark-alt{background:#36363f}.btn-dark-alt:focus{background:#36363f}.btn-outline-orange{border-color:#f14600;color:#f14600}.btn-orange,.btn-outline-orange:hover{background:#f14600;color:#fff}.btn:active,.btn:hover{text-decoration:none}.text-orange{color:#f14600}.bg-number{position:absolute;font-size:900%;font-weight:700;color:rgba(241,70,0,.1);line-height:1;margin-top:-1rem}summary{font-weight:700;color:#eee}.headerlink{text-decoration:none;margin-left:.5rem}body[data-spy] #content{overflow-x:scroll}#content table{border:1px solid #dee2e6;width:100%;margin-bottom:1rem;overflow-x:auto}#content code{color:#111;background:#eee}@media print{body{min-width:0}code,h1,h2,h3,h4,h5,h6,img,li,p{page-break-inside:avoid}}@media(prefers-color-scheme:dark){#to-full-website,body.amp,body[data-spy]{background:#1c1c1c;color:#efefef}.invert-dark{filter:invert(100%)}#content table{border:1px solid #2a2b2c}#content code{background:#444;color:#eee}}.syntax{background:#f8f9fa;color:#2f1e2e}.syntax .c{color:#8d8687}.syntax .k{color:#815ba4}.syntax .l{color:#f99b15}.syntax .n{color:#2f1e2e}.syntax .o{color:#5bc4bf}.syntax .p{color:#2f1e2e}.syntax .c1{color:#8d8687}.syntax .ld{color:#48b685}.syntax .m{color:#f99b15}.syntax .s{color:#48b685}.syntax .no{color:#ef6155}.syntax .py{color:#2f1e2e}.syntax .s2{color:#48b685}.syntax .s1{color:#48b685}@media(prefers-color-scheme:dark){.syntax .k{color:#c78cff}.syntax .ld{color:#64ffbb}.syntax .s{color:#64ffbb}.syntax .s2{color:#64ffbb}.syntax .s1{color:#64ffbb}.syntax .c{color:#64ffbb}.syntax .n{color:#f8f9fa}.syntax .p{color:#f8f9fa}.syntax .py{color:#f8f9fa}}</style>
    <script async custom-element="amp-analytics" src="https://cdn.ampproject.org/v0/amp-analytics-0.1.js"></script>
    <script async custom-element="amp-iframe" src="https://cdn.ampproject.org/v0/amp-iframe-0.1.js"></script>
  </head>
  <body class="amp" dir="ltr">
    <div class="container-fluid container-lg pb-5">
      <div class="row pt-3 mb-3">
        <div class="col">
          <a href="/" class="text-decoration-none">
            <amp-img class="d-inline-block mr-3" layout="fixed" width="40" height="36" src="/images/logo.svg" alt="ClickHouse logo" title="ClickHouse logo"></amp-img><amp-img class="invert-dark d-inline-block" layout="fixed" width="238" height="36" src="/images/clickhouse-black.svg" alt="ClickHouse" title="ClickHouse"></amp-img>
          </a>
        </div>
      </div>
      <div class="row">
        <div id="content" class="col">
          
    <div class="alert alert-primary" role="alert">
      <p class="display-5 mb-2">帮助通缉！</p>
      <p class="lead">本文档页面的以下内容已经过机器翻译。 但与其他网站不同，它不是在飞行中完成。 这个翻译的文本生活在github存储库旁边的主ClickHouse代码库，并等待同胞母语，使其更具人类可读性。 <a href="/docs/en/whats-new/changelog/2019/" class="alert-link">您也可以使用原始的英文版本作为参考。</a></p>
      <p class="lead">
          <a class="btn btn-lg btn-primary text-white" href="https://github.com/ClickHouse/ClickHouse/edit/master/docs/zh/whats-new/changelog/2019.md" target="_blank" rel="external nofollow noreferrer">
              通过编辑此页面帮助ClickHouse文档
          </a>
      </p>
    </div>

          <h2 id=clickhouse-release-v19-17>ClickHouse释放19.17<a class=headerlink href=../amp/#clickhouse-release-v19-17 title="Permanent link"> </a></h2><h3 id=clickhouse-release-v19-17-6-36-2019-12-27>碌莽禄,拢,010-68520682\&lt;url&gt;戮卤篓拢,010-68520682\&lt;url&gt;<a class=headerlink href=../amp/#clickhouse-release-v19-17-6-36-2019-12-27 title="Permanent link"> </a></h3><h4 id=bug-fix>错误修复<a class=headerlink href=../amp/#bug-fix title="Permanent link"> </a></h4><ul><li>在解压缩固定潜在的缓冲区溢出。 恶意用户可以传递制造的压缩数据，可能导致缓冲区后读取。 这个问题是由Yandex信息安全团队的Eldar Zaitov发现的。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8404 rel="external nofollow noreferrer" target=_blank>#8404</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>修正了可能的服务器崩溃 (<code class=syntax>std::terminate</code>）当服务器不能发送或写入JSON或XML格式的数据与字符串数据类型的值（需要UTF-8验证），或者当压缩结果数据与Brotli算法或在其他一些罕见的情况下。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8384 rel="external nofollow noreferrer" target=_blank>#8384</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>从clickhouse源固定字典 <code class=syntax>VIEW</code>，现在阅读这样的字典不会导致错误 <code class=syntax>There is no query</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8351 rel="external nofollow noreferrer" target=_blank>#8351</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>尼古拉*科切托夫</a>)</li><li>修复了用户中指定的host_regexp是否允许客户端主机的检查。xml <a href=https://github.com/ClickHouse/ClickHouse/pull/8241 rel="external nofollow noreferrer" target=_blank>#8241</a>, <a href=https://github.com/ClickHouse/ClickHouse/pull/8342 rel="external nofollow noreferrer" target=_blank>#8342</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer" target=_blank>维塔利*巴拉诺夫</a>)</li><li><code class=syntax>RENAME TABLE</code> 对于分布式表，现在在发送到分片之前重命名包含插入数据的文件夹。 这解决了连续重命名的问题 <code class=syntax>tableA-&gt;tableB</code>, <code class=syntax>tableC-&gt;tableA</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8306 rel="external nofollow noreferrer" target=_blank>#8306</a> (<a href=https://github.com/tavplubix rel="external nofollow noreferrer" target=_blank>tavplubix</a>)</li><li><code class=syntax>range_hashed</code> DDL查询创建的外部字典现在允许任意数字类型的范围。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8275 rel="external nofollow noreferrer" target=_blank>#8275</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li><li>固定 <code class=syntax>INSERT INTO table SELECT ... FROM mysql(...)</code> 表功能。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8234 rel="external nofollow noreferrer" target=_blank>#8234</a> (<a href=https://github.com/tavplubix rel="external nofollow noreferrer" target=_blank>tavplubix</a>)</li><li>修复段错误 <code class=syntax>INSERT INTO TABLE FUNCTION file()</code> 同时插入到一个不存在的文件。 现在在这种情况下，文件将被创建，然后插入将被处理。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8177 rel="external nofollow noreferrer" target=_blank>#8177</a> (<a href=https://github.com/stavrolia rel="external nofollow noreferrer" target=_blank>Olga Khvostikova</a>)</li><li>修正了聚合位图和标量位图相交时的位图和错误。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8082 rel="external nofollow noreferrer" target=_blank>#8082</a> (<a href=https://github.com/moon03432 rel="external nofollow noreferrer" target=_blank>黄月</a>)</li><li>修复段错误时 <code class=syntax>EXISTS</code> 查询没有使用 <code class=syntax>TABLE</code> 或 <code class=syntax>DICTIONARY</code> 预选赛，就像 <code class=syntax>EXISTS t</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8213 rel="external nofollow noreferrer" target=_blank>#8213</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>函数的固定返回类型 <code class=syntax>rand</code> 和 <code class=syntax>randConstant</code> 在可为空的参数的情况下。 现在函数总是返回 <code class=syntax>UInt32</code> 而且从来没有 <code class=syntax>Nullable(UInt32)</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8204 rel="external nofollow noreferrer" target=_blank>#8204</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>尼古拉*科切托夫</a>)</li><li>固定 <code class=syntax>DROP DICTIONARY IF EXISTS db.dict</code>，现在它不会抛出异常，如果 <code class=syntax>db</code> 根本不存在 <a href=https://github.com/ClickHouse/ClickHouse/pull/8185 rel="external nofollow noreferrer" target=_blank>#8185</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer" target=_blank>维塔利*巴拉诺夫</a>)</li><li>如果由于服务器崩溃而未完全删除表，服务器将尝试恢复并加载它 <a href=https://github.com/ClickHouse/ClickHouse/pull/8176 rel="external nofollow noreferrer" target=_blank>#8176</a> (<a href=https://github.com/tavplubix rel="external nofollow noreferrer" target=_blank>tavplubix</a>)</li><li>修正了一个简单的计数查询分布式表，如果有两个以上的分片本地表。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8164 rel="external nofollow noreferrer" target=_blank>#8164</a> (<a href=https://github.com/nicelulu rel="external nofollow noreferrer" target=_blank>小路</a>)</li><li>修正了导致DB::BlockStreamProfileInfo::calculateRowsBeforeLimit数据竞赛的错误() <a href=https://github.com/ClickHouse/ClickHouse/pull/8143 rel="external nofollow noreferrer" target=_blank>#8143</a> (<a href=https://github.com/Akazz rel="external nofollow noreferrer" target=_blank>亚历山大*卡扎科夫</a>)</li><li>固定 <code class=syntax>ALTER table MOVE part</code> 在合并指定部件后立即执行，这可能导致移动指定部件合并到的部件。 现在它正确地移动指定的部分。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8104 rel="external nofollow noreferrer" target=_blank>#8104</a> (<a href=https://github.com/excitoon rel="external nofollow noreferrer" target=_blank>Vladimir Chebotarev</a>)</li><li>字典的表达式现在可以指定为字符串。 这对于从非ClickHouse源中提取数据时计算属性非常有用，因为它允许对这些表达式使用非ClickHouse语法。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8098 rel="external nofollow noreferrer" target=_blank>#8098</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li><li>修正了一个非常罕见的比赛 <code class=syntax>clickhouse-copier</code> 由于ZXid的溢出。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8088 rel="external nofollow noreferrer" target=_blank>#8088</a> (<a href=https://github.com/dingxiangfei2009 rel="external nofollow noreferrer" target=_blank>丁香飞</a>)</li><li>修复了查询失败后的错误（由于 “Too many simultaneous queries” 例如）它不会读取外部表信息，并且<br> 下一个请求会将此信息解释为下一个查询的开始，导致如下错误 <code class=syntax>Unknown packet from client</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/8084 rel="external nofollow noreferrer" target=_blank>#8084</a> (<a href=https://github.com/azat rel="external nofollow noreferrer" target=_blank>Azat Khuzhin</a>)</li><li>避免空取消引用后 “Unknown packet X from server” <a href=https://github.com/ClickHouse/ClickHouse/pull/8071 rel="external nofollow noreferrer" target=_blank>#8071</a> (<a href=https://github.com/azat rel="external nofollow noreferrer" target=_blank>Azat Khuzhin</a>)</li><li>恢复对所有ICU区域设置的支持，添加对常量表达式应用排序规则的能力，并将语言名称添加到系统。排序规则表。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8051 rel="external nofollow noreferrer" target=_blank>#8051</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li><li>用于读取的流数 <code class=syntax>StorageFile</code> 和 <code class=syntax>StorageHDFS</code> 现在是有限的，以避免超过内存限制。 <a href=https://github.com/ClickHouse/ClickHouse/pull/7981 rel="external nofollow noreferrer" target=_blank>#7981</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li><li>固定 <code class=syntax>CHECK TABLE</code> 查询为 <code class=syntax>*MergeTree</code> 表没有关键. <a href=https://github.com/ClickHouse/ClickHouse/pull/7979 rel="external nofollow noreferrer" target=_blank>#7979</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li><li>如果没有突变，则从部件名称中删除突变编号。 这种删除提高了与旧版本的兼容性。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8250 rel="external nofollow noreferrer" target=_blank>#8250</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li><li>修复了某些附加部分因data_version大于表突变版本而跳过突变的问题。 <a href=https://github.com/ClickHouse/ClickHouse/pull/7812 rel="external nofollow noreferrer" target=_blank>#7812</a> (<a href=https://github.com/yuzhichang rel="external nofollow noreferrer" target=_blank>余志昌</a>)</li><li>允许在将部件移动到其他设备后使用冗余副本启动服务器。 <a href=https://github.com/ClickHouse/ClickHouse/pull/7810 rel="external nofollow noreferrer" target=_blank>#7810</a> (<a href=https://github.com/excitoon rel="external nofollow noreferrer" target=_blank>Vladimir Chebotarev</a>)</li><li>修正了错误 “Sizes of columns doesn’t match” 使用聚合函数列时可能会出现。 <a href=https://github.com/ClickHouse/ClickHouse/pull/7790 rel="external nofollow noreferrer" target=_blank>#7790</a> (<a href=https://github.com/bgranvea rel="external nofollow noreferrer" target=_blank>Boris Granveaud</a>)</li><li>现在在使用WITH TIES和LIMIT BY的情况下，将抛出一个异常。 现在可以使用TOP with LIMIT BY。 <a href=https://github.com/ClickHouse/ClickHouse/pull/7637 rel="external nofollow noreferrer" target=_blank>#7637</a> (<a href=https://github.com/nikitamikhaylov rel="external nofollow noreferrer" target=_blank>尼基塔*米哈伊洛夫</a>)</li><li>修复字典重新加载，如果它有 <code class=syntax>invalidate_query</code>，停止更新，并在以前的更新尝试一些异常。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8029 rel="external nofollow noreferrer" target=_blank>#8029</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li></ul><h3 id=clickhouse-release-v19-17-4-11-2019-11-22>碌莽禄,拢,010-68520682\&lt;url&gt;戮卤篓拢,010-68520682\&lt;url&gt;<a class=headerlink href=../amp/#clickhouse-release-v19-17-4-11-2019-11-22 title="Permanent link"> </a></h3><h4 id=backward-incompatible-change>向后不兼容的更改<a class=headerlink href=../amp/#backward-incompatible-change title="Permanent link"> </a></h4><ul><li>使用列而不是AST来存储标量子查询结果以获得更好的性能。 设置 <code class=syntax>enable_scalar_subquery_optimization</code> 在19.17中添加，默认情况下启用。 它会导致以下错误 <a href=https://github.com/ClickHouse/ClickHouse/issues/7851 rel="external nofollow noreferrer" target=_blank>这</a> 在从以前的版本升级到19.17.2或19.17.3期间。 默认情况下，19.17.4中禁用此设置，以便可以从19.16及更早版本升级而不会出现错误。 <a href=https://github.com/ClickHouse/ClickHouse/pull/7392 rel="external nofollow noreferrer" target=_blank>#7392</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer" target=_blank>阿莫斯鸟</a>)</li></ul><h4 id=new-feature>新功能<a class=headerlink href=../amp/#new-feature title="Permanent link"> </a></h4><ul><li>添加使用DDL查询创建字典的功能。 <a href=https://github.com/ClickHouse/ClickHouse/pull/7360 rel="external nofollow noreferrer" target=_blank>#7360</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li><li>赂眉露&gt;&gt; <code class=syntax>bloom_filter</code> 支持的索引类型 <code class=syntax>LowCardinality</code> 和 <code class=syntax>Nullable</code> <a href=https://github.com/ClickHouse/ClickHouse/issues/7363 rel="external nofollow noreferrer" target=_blank>#7363</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/7561 rel="external nofollow noreferrer" target=_blank>#7561</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>尼古拉*科切托夫</a>)</li><li>添加功能 <code class=syntax>isValidJSON</code> 要检查传递的字符串是否是有效的json。 <a href=https://github.com/ClickHouse/ClickHouse/issues/5910 rel="external nofollow noreferrer" target=_blank>#5910</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/7293 rel="external nofollow noreferrer" target=_blank>#7293</a> (<a href=https://github.com/Vdimir rel="external nofollow noreferrer" target=_blank>Vdimir</a>)</li><li>执行 <code class=syntax>arrayCompact</code> 功能 <a href=https://github.com/ClickHouse/ClickHouse/pull/7328 rel="external nofollow noreferrer" target=_blank>#7328</a> (<a href=https://github.com/Joeywzr rel="external nofollow noreferrer" target=_blank>备忘录</a>)</li><li>创建函数 <code class=syntax>hex</code> 对于十进制数。 它的工作原理如下 <code class=syntax>hex(reinterpretAsString())</code>，但不会删除最后的零字节。 <a href=https://github.com/ClickHouse/ClickHouse/pull/7355 rel="external nofollow noreferrer" target=_blank>#7355</a> (<a href=https://github.com/millb rel="external nofollow noreferrer" target=_blank>米哈伊尔*科罗托夫</a>)</li><li>添加 <code class=syntax>arrayFill</code> 和 <code class=syntax>arrayReverseFill</code> 函数，用数组中其他元素替换它们前面/后面的元素。 <a href=https://github.com/ClickHouse/ClickHouse/pull/7380 rel="external nofollow noreferrer" target=_blank>#7380</a> (<a href=https://github.com/hczhcz rel="external nofollow noreferrer" target=_blank>hcz</a>)</li><li>添加 <code class=syntax>CRC32IEEE()</code>/<code class=syntax>CRC64()</code> 碌莽禄support: <a href=https://github.com/ClickHouse/ClickHouse/pull/7480 rel="external nofollow noreferrer" target=_blank>#7480</a> (<a href=https://github.com/azat rel="external nofollow noreferrer" target=_blank>Azat Khuzhin</a>)</li><li>执行 <code class=syntax>char</code> 功能类似于一个 <a href=https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_char rel="external nofollow noreferrer" target=_blank>mysql</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/7486 rel="external nofollow noreferrer" target=_blank>#7486</a> (<a href=https://github.com/sundy-li rel="external nofollow noreferrer" target=_blank>sundyli</a>)</li><li>添加 <code class=syntax>bitmapTransform</code> 功能。 它将位图中的值数组转换为另一个值数组，结果是一个新的位图 <a href=https://github.com/ClickHouse/ClickHouse/pull/7598 rel="external nofollow noreferrer" target=_blank>#7598</a> (<a href=https://github.com/yuzhichang rel="external nofollow noreferrer" target=_blank>余志昌</a>)</li><li>已实施 <code class=syntax>javaHashUTF16LE()</code> 功能 <a href=https://github.com/ClickHouse/ClickHouse/pull/7651 rel="external nofollow noreferrer" target=_blank>#7651</a> (<a href=https://github.com/achimbab rel="external nofollow noreferrer" target=_blank>achimbab</a>)</li><li>添加 <code class=syntax>_shard_num</code> 分布式引擎的虚拟列 <a href=https://github.com/ClickHouse/ClickHouse/pull/7624 rel="external nofollow noreferrer" target=_blank>#7624</a> (<a href=https://github.com/azat rel="external nofollow noreferrer" target=_blank>Azat Khuzhin</a>)</li></ul><h4 id=experimental-feature>实验特点<a class=headerlink href=../amp/#experimental-feature title="Permanent link"> </a></h4><ul><li>支持处理器（新的查询执行管道） <code class=syntax>MergeTree</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/7181 rel="external nofollow noreferrer" target=_blank>#7181</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>尼古拉*科切托夫</a>)</li></ul><h4 id=bug-fix-1>错误修复<a class=headerlink href=../amp/#bug-fix-1 title="Permanent link"> </a></h4><ul><li>修复不正确的浮点解析 <code class=syntax>Values</code> <a href=https://github.com/ClickHouse/ClickHouse/issues/7817 rel="external nofollow noreferrer" target=_blank>#7817</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/7870 rel="external nofollow noreferrer" target=_blank>#7870</a> (<a href=https://github.com/tavplubix rel="external nofollow noreferrer" target=_blank>tavplubix</a>)</li><li>修复启用trace_log时可能发生的罕见死锁。 <a href=https://github.com/ClickHouse/ClickHouse/pull/7838 rel="external nofollow noreferrer" target=_blank>#7838</a> (<a href=https://github.com/filimonov rel="external nofollow noreferrer" target=_blank>filimonov</a>)</li><li>当生成Kafka表时有任何从中选择的Mv时，防止消息重复 <a href=https://github.com/ClickHouse/ClickHouse/pull/7265 rel="external nofollow noreferrer" target=_blank>#7265</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>伊万</a>)</li><li>支持 <code class=syntax>Array(LowCardinality(Nullable(String)))</code> 在 <code class=syntax>IN</code>. 决定 <a href=https://github.com/ClickHouse/ClickHouse/issues/7364 rel="external nofollow noreferrer" target=_blank>#7364</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/7366 rel="external nofollow noreferrer" target=_blank>#7366</a> (<a href=https://github.com/achimbab rel="external nofollow noreferrer" target=_blank>achimbab</a>)</li><li>添加处理 <code class=syntax>SQL_TINYINT</code> 和 <code class=syntax>SQL_BIGINT</code>，并修复处理 <code class=syntax>SQL_FLOAT</code> ODBC桥中的数据源类型。 <a href=https://github.com/ClickHouse/ClickHouse/pull/7491 rel="external nofollow noreferrer" target=_blank>#7491</a> (<a href=https://github.com/traceon rel="external nofollow noreferrer" target=_blank>Denis Glazachev</a>)</li><li>修复聚合 (<code class=syntax>avg</code> 和分位数）在空的十进制列 <a href=https://github.com/ClickHouse/ClickHouse/pull/7431 rel="external nofollow noreferrer" target=_blank>#7431</a> (<a href=https://github.com/akonyaev90 rel="external nofollow noreferrer" target=_blank>安德烈*科尼亚耶夫</a>)</li><li>修复 <code class=syntax>INSERT</code> 变成分布式 <code class=syntax>MATERIALIZED</code> 列 <a href=https://github.com/ClickHouse/ClickHouse/pull/7377 rel="external nofollow noreferrer" target=_blank>#7377</a> (<a href=https://github.com/azat rel="external nofollow noreferrer" target=_blank>Azat Khuzhin</a>)</li><li>赂眉露&gt;&gt; <code class=syntax>MOVE PARTITION</code> 如果分区的某些部分已经在目标磁盘或卷上，则可以工作 <a href=https://github.com/ClickHouse/ClickHouse/pull/7434 rel="external nofollow noreferrer" target=_blank>#7434</a> (<a href=https://github.com/excitoon rel="external nofollow noreferrer" target=_blank>Vladimir Chebotarev</a>)</li><li>修正了在突变过程中无法创建硬链接的错误 <code class=syntax>ReplicatedMergeTree</code> 在多磁盘配置。 <a href=https://github.com/ClickHouse/ClickHouse/pull/7558 rel="external nofollow noreferrer" target=_blank>#7558</a> (<a href=https://github.com/excitoon rel="external nofollow noreferrer" target=_blank>Vladimir Chebotarev</a>)</li><li>修复了当整个部分保持不变并且在另一个磁盘上找到最佳空间时，MergeTree上出现突变的错误 <a href=https://github.com/ClickHouse/ClickHouse/pull/7602 rel="external nofollow noreferrer" target=_blank>#7602</a> (<a href=https://github.com/excitoon rel="external nofollow noreferrer" target=_blank>Vladimir Chebotarev</a>)</li><li>修正错误 <code class=syntax>keep_free_space_ratio</code> 未从磁盘读取配置 <a href=https://github.com/ClickHouse/ClickHouse/pull/7645 rel="external nofollow noreferrer" target=_blank>#7645</a> (<a href=https://github.com/excitoon rel="external nofollow noreferrer" target=_blank>Vladimir Chebotarev</a>)</li><li>修正错误与表只包含 <code class=syntax>Tuple</code> 列或具有复杂路径的列。 修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/7541 rel="external nofollow noreferrer" target=_blank>7541</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/7545 rel="external nofollow noreferrer" target=_blank>#7545</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li><li>在max_memory_usage限制中不考虑缓冲区引擎的内存 <a href=https://github.com/ClickHouse/ClickHouse/pull/7552 rel="external nofollow noreferrer" target=_blank>#7552</a> (<a href=https://github.com/azat rel="external nofollow noreferrer" target=_blank>Azat Khuzhin</a>)</li><li>修复最终标记用法 <code class=syntax>MergeTree</code> 表排序 <code class=syntax>tuple()</code>. 在极少数情况下，它可能会导致 <code class=syntax>Can't adjust last granule</code> 选择时出错。 <a href=https://github.com/ClickHouse/ClickHouse/pull/7639 rel="external nofollow noreferrer" target=_blank>#7639</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer" target=_blank>安东*波波夫</a>)</li><li>修复了需要上下文操作（例如json函数）的谓词突变中的错误，这可能会导致崩溃或奇怪的异常。 <a href=https://github.com/ClickHouse/ClickHouse/pull/7664 rel="external nofollow noreferrer" target=_blank>#7664</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li><li>修复转义的数据库和表名称不匹配 <code class=syntax>data/</code> 和 <code class=syntax>shadow/</code> 目录 <a href=https://github.com/ClickHouse/ClickHouse/pull/7575 rel="external nofollow noreferrer" target=_blank>#7575</a> (<a href=https://github.com/Alex-Burmak rel="external nofollow noreferrer" target=_blank>Alexander Burmak</a>)</li><li>Support duplicated keys in RIGHT|FULL JOINs, e.g. <code class=syntax>ON t.x = u.x AND t.x = u.y</code>. 在这种情况下修复崩溃。 <a href=https://github.com/ClickHouse/ClickHouse/pull/7586 rel="external nofollow noreferrer" target=_blank>#7586</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li><li>修复 <code class=syntax>Not found column &lt;expression&gt; in block</code> 当加入表达式与权利或完全连接。 <a href=https://github.com/ClickHouse/ClickHouse/pull/7641 rel="external nofollow noreferrer" target=_blank>#7641</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li><li>再次尝试修复无限循环 <code class=syntax>PrettySpace</code> 格式 <a href=https://github.com/ClickHouse/ClickHouse/pull/7591 rel="external nofollow noreferrer" target=_blank>#7591</a> (<a href=https://github.com/stavrolia rel="external nofollow noreferrer" target=_blank>Olga Khvostikova</a>)</li><li>修复bug <code class=syntax>concat</code> 函数时，所有的参数 <code class=syntax>FixedString</code> 同样大小的 <a href=https://github.com/ClickHouse/ClickHouse/pull/7635 rel="external nofollow noreferrer" target=_blank>#7635</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li><li>在定义S3，URL和HDFS存储时使用1个参数的情况下修复了异常。 <a href=https://github.com/ClickHouse/ClickHouse/pull/7618 rel="external nofollow noreferrer" target=_blank>#7618</a> (<a href=https://github.com/excitoon rel="external nofollow noreferrer" target=_blank>Vladimir Chebotarev</a>)</li><li>修复查询视图的InterpreterSelectQuery的范围 <a href=https://github.com/ClickHouse/ClickHouse/pull/7601 rel="external nofollow noreferrer" target=_blank>#7601</a> (<a href=https://github.com/azat rel="external nofollow noreferrer" target=_blank>Azat Khuzhin</a>)</li></ul><h4 id=improvement>改进<a class=headerlink href=../amp/#improvement title="Permanent link"> </a></h4><ul><li><code class=syntax>Nullable</code> ODBC-bridge可识别的列和正确处理的NULL值 <a href=https://github.com/ClickHouse/ClickHouse/pull/7402 rel="external nofollow noreferrer" target=_blank>#7402</a> (<a href=https://github.com/Enmk rel="external nofollow noreferrer" target=_blank>瓦西里*内姆科夫</a>)</li><li>以原子方式写入分布式发送的当前批次 <a href=https://github.com/ClickHouse/ClickHouse/pull/7600 rel="external nofollow noreferrer" target=_blank>#7600</a> (<a href=https://github.com/azat rel="external nofollow noreferrer" target=_blank>Azat Khuzhin</a>)</li><li>如果我们无法在查询中检测到列名称的表，则引发异常。 <a href=https://github.com/ClickHouse/ClickHouse/pull/7358 rel="external nofollow noreferrer" target=_blank>#7358</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li><li>添加 <code class=syntax>merge_max_block_size</code> 设置为 <code class=syntax>MergeTreeSettings</code> <a href=https://github.com/ClickHouse/ClickHouse/pull/7412 rel="external nofollow noreferrer" target=_blank>#7412</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li><li>查询与 <code class=syntax>HAVING</code> 而没有 <code class=syntax>GROUP BY</code> 假设按常量分组。 所以, <code class=syntax>SELECT 1 HAVING 1</code> 现在返回一个结果。 <a href=https://github.com/ClickHouse/ClickHouse/pull/7496 rel="external nofollow noreferrer" target=_blank>#7496</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer" target=_blank>阿莫斯鸟</a>)</li><li>支持解析 <code class=syntax>(X,)</code> 作为类似python的元组。 <a href=https://github.com/ClickHouse/ClickHouse/pull/7501 rel="external nofollow noreferrer" target=_blank>#7501</a>, <a href=https://github.com/ClickHouse/ClickHouse/pull/7562 rel="external nofollow noreferrer" target=_blank>#7562</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer" target=_blank>阿莫斯鸟</a>)</li><li>赂眉露&gt;&gt; <code class=syntax>range</code> 函数行为几乎像pythonic。 <a href=https://github.com/ClickHouse/ClickHouse/pull/7518 rel="external nofollow noreferrer" target=_blank>#7518</a> (<a href=https://github.com/sundy-li rel="external nofollow noreferrer" target=_blank>sundyli</a>)</li><li>添加 <code class=syntax>constraints</code> 列到表 <code class=syntax>system.settings</code> <a href=https://github.com/ClickHouse/ClickHouse/pull/7553 rel="external nofollow noreferrer" target=_blank>#7553</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer" target=_blank>维塔利*巴拉诺夫</a>)</li><li>Tcp处理程序的更好的Null格式，以便可以使用 <code class=syntax>select ignore(&lt;expression&gt;) from table format Null</code> 通过clickhouse-client进行性能测量 <a href=https://github.com/ClickHouse/ClickHouse/pull/7606 rel="external nofollow noreferrer" target=_blank>#7606</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer" target=_blank>阿莫斯鸟</a>)</li><li>查询如 <code class=syntax>CREATE TABLE ... AS (SELECT (1, 2))</code> 正确解析 <a href=https://github.com/ClickHouse/ClickHouse/pull/7542 rel="external nofollow noreferrer" target=_blank>#7542</a> (<a href=https://github.com/hczhcz rel="external nofollow noreferrer" target=_blank>hcz</a>)</li></ul><h4 id=performance-improvement>性能改进<a class=headerlink href=../amp/#performance-improvement title="Permanent link"> </a></h4><ul><li>改进了对短字符串键的聚合性能。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6243 rel="external nofollow noreferrer" target=_blank>#6243</a> (<a href=https://github.com/akuzm rel="external nofollow noreferrer" target=_blank>Alexander Kuzmenkov</a>, <a href=https://github.com/amosbird rel="external nofollow noreferrer" target=_blank>阿莫斯鸟</a>)</li><li>运行另一次语法/表达式分析以在常量谓词折叠后获得潜在的优化。 <a href=https://github.com/ClickHouse/ClickHouse/pull/7497 rel="external nofollow noreferrer" target=_blank>#7497</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer" target=_blank>阿莫斯鸟</a>)</li><li>使用存储元信息来评估琐碎 <code class=syntax>SELECT count() FROM table;</code> <a href=https://github.com/ClickHouse/ClickHouse/pull/7510 rel="external nofollow noreferrer" target=_blank>#7510</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer" target=_blank>阿莫斯鸟</a>, <a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>矢量化处理 <code class=syntax>arrayReduce</code> 与聚合器类似 <code class=syntax>addBatch</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/7608 rel="external nofollow noreferrer" target=_blank>#7608</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer" target=_blank>阿莫斯鸟</a>)</li><li>在性能的小改进 <code class=syntax>Kafka</code> 消费 <a href=https://github.com/ClickHouse/ClickHouse/pull/7475 rel="external nofollow noreferrer" target=_blank>#7475</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>伊万</a>)</li></ul><h4 id=buildtestingpackaging-improvement>构建/测试/包装改进<a class=headerlink href=../amp/#buildtestingpackaging-improvement title="Permanent link"> </a></h4><ul><li>添加对交叉编译的支持到CPU架构AARCH64。 重构打包器脚本。 <a href=https://github.com/ClickHouse/ClickHouse/pull/7370 rel="external nofollow noreferrer" target=_blank>#7370</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/7539 rel="external nofollow noreferrer" target=_blank>#7539</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>伊万</a>)</li><li>在构建软件包时，将darwin-x86_64和linux-aarch64工具链解压缩到已挂载的Docker卷中 <a href=https://github.com/ClickHouse/ClickHouse/pull/7534 rel="external nofollow noreferrer" target=_blank>#7534</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>伊万</a>)</li><li>更新二进制打包器的Docker映像 <a href=https://github.com/ClickHouse/ClickHouse/pull/7474 rel="external nofollow noreferrer" target=_blank>#7474</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>伊万</a>)</li><li>修复了MacOS Catalina上的编译错误 <a href=https://github.com/ClickHouse/ClickHouse/pull/7585 rel="external nofollow noreferrer" target=_blank>#7585</a> (<a href=https://github.com/ernestp rel="external nofollow noreferrer" target=_blank>欧内斯特*波列塔耶夫</a>)</li><li>查询分析逻辑中的一些重构：将复杂的类拆分为几个简单的类。 <a href=https://github.com/ClickHouse/ClickHouse/pull/7454 rel="external nofollow noreferrer" target=_blank>#7454</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li><li>修复没有子模块的构建 <a href=https://github.com/ClickHouse/ClickHouse/pull/7295 rel="external nofollow noreferrer" target=_blank>#7295</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li><li>更好 <code class=syntax>add_globs</code> 在CMake文件中 <a href=https://github.com/ClickHouse/ClickHouse/pull/7418 rel="external nofollow noreferrer" target=_blank>#7418</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer" target=_blank>阿莫斯鸟</a>)</li><li>删除硬编码路径 <code class=syntax>unwind</code> 目标 <a href=https://github.com/ClickHouse/ClickHouse/pull/7460 rel="external nofollow noreferrer" target=_blank>#7460</a> (<a href=https://github.com/podshumok rel="external nofollow noreferrer" target=_blank>Konstantin Podshumok</a>)</li><li>允许在没有ssl的情况下使用mysql格式 <a href=https://github.com/ClickHouse/ClickHouse/pull/7524 rel="external nofollow noreferrer" target=_blank>#7524</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li></ul><h4 id=other>其他<a class=headerlink href=../amp/#other title="Permanent link"> </a></h4><ul><li>为ClickHouse SQL方言添加了ANTLR4语法 <a href=https://github.com/ClickHouse/ClickHouse/issues/7595 rel="external nofollow noreferrer" target=_blank>#7595</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/7596 rel="external nofollow noreferrer" target=_blank>#7596</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li></ul><h2 id=clickhouse-release-v19-16>ClickHouse释放19.16<a class=headerlink href=../amp/#clickhouse-release-v19-16 title="Permanent link"> </a></h2><h4 id=clickhouse-release-v19-16-14-65-2020-03-25>ClickHouse释放19.16.14.65,2020-03-25<a class=headerlink href=../amp/#clickhouse-release-v19-16-14-65-2020-03-25 title="Permanent link"> </a></h4><ul><li>修复了多个参数（超过10）的三元逻辑运算批量计算中的错误。 <a href=https://github.com/ClickHouse/ClickHouse/pull/8718 rel="external nofollow noreferrer" target=_blank>#8718</a> (<a href=https://github.com/Akazz rel="external nofollow noreferrer" target=_blank>亚历山大*卡扎科夫</a>）这个错误修正是由Altinity的特殊要求回移到版本19.16的。</li></ul><h4 id=clickhouse-release-v19-16-14-65-2020-03-05>ClickHouse释放19.16.14.65,2020-03-05<a class=headerlink href=../amp/#clickhouse-release-v19-16-14-65-2020-03-05 title="Permanent link"> </a></h4><ul><li>修复分布式子查询与旧版本的CH不兼容。 修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/7851 rel="external nofollow noreferrer" target=_blank>#7851</a><br><a href=https://github.com/tavplubix rel="external nofollow noreferrer" target=_blank>（tabplubix)</a></li><li>执行时 <code class=syntax>CREATE</code> 查询，在存储引擎参数中折叠常量表达式。 将空数据库名称替换为当前数据库。 修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/6508 rel="external nofollow noreferrer" target=_blank>#6508</a>, <a href=https://github.com/ClickHouse/ClickHouse/issues/3492 rel="external nofollow noreferrer" target=_blank>#3492</a>. 还修复检查本地地址 <code class=syntax>ClickHouseDictionarySource</code>.<br><a href=https://github.com/ClickHouse/ClickHouse/pull/9262 rel="external nofollow noreferrer" target=_blank>#9262</a> <a href=https://github.com/tavplubix rel="external nofollow noreferrer" target=_blank>（tabplubix)</a></li><li>现在背景合并 <code class=syntax>*MergeTree</code> 表引擎家族更准确地保留存储策略卷顺序。<br><a href=https://github.com/ClickHouse/ClickHouse/pull/8549 rel="external nofollow noreferrer" target=_blank>#8549</a> (<a href=https://github.com/excitoon rel="external nofollow noreferrer" target=_blank>Vladimir Chebotarev</a>)</li><li>防止丢失数据 <code class=syntax>Kafka</code> 在极少数情况下，在读取后缀之后但在提交之前发生异常。 修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/9378 rel="external nofollow noreferrer" target=_blank>#9378</a>. 相关: <a href=https://github.com/ClickHouse/ClickHouse/issues/7175 rel="external nofollow noreferrer" target=_blank>#7175</a><br><a href=https://github.com/ClickHouse/ClickHouse/pull/9507 rel="external nofollow noreferrer" target=_blank>#9507</a> <a href=https://github.com/filimonov rel="external nofollow noreferrer" target=_blank>(菲利蒙诺夫)</a></li><li>修复尝试使用/删除时导致服务器终止的错误 <code class=syntax>Kafka</code> 使用错误的参数创建的表。 修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/9494 rel="external nofollow noreferrer" target=_blank>#9494</a>. 结合 <a href=https://github.com/ClickHouse/ClickHouse/issues/9507 rel="external nofollow noreferrer" target=_blank>#9507</a>.<br><a href=https://github.com/ClickHouse/ClickHouse/pull/9513 rel="external nofollow noreferrer" target=_blank>#9513</a> <a href=https://github.com/filimonov rel="external nofollow noreferrer" target=_blank>(菲利蒙诺夫)</a></li><li>允许使用 <code class=syntax>MaterializedView</code> 与上面的子查询 <code class=syntax>Kafka</code> 桌子<br><a href=https://github.com/ClickHouse/ClickHouse/pull/8197 rel="external nofollow noreferrer" target=_blank>#8197</a> (<a href=https://github.com/filimonov rel="external nofollow noreferrer" target=_blank>filimonov</a>)</li></ul><h4 id=new-feature-1>新功能<a class=headerlink href=../amp/#new-feature-1 title="Permanent link"> </a></h4><ul><li>添加 <code class=syntax>deduplicate_blocks_in_dependent_materialized_views</code> 用于控制具有实例化视图的表中幂等插入的行为的选项。 这个新功能是由Altinity的特殊要求添加到错误修正版本中的。<br><a href=https://github.com/ClickHouse/ClickHouse/pull/9070 rel="external nofollow noreferrer" target=_blank>#9070</a> <a href=https://github.com/urykhy rel="external nofollow noreferrer" target=_blank>(urykhy)</a></li></ul><h3 id=clickhouse-release-v19-16-2-2-2019-10-30>碌莽禄,拢,010-68520682\&lt;url&gt;戮卤篓拢,010-68520682\&lt;url&gt;<a class=headerlink href=../amp/#clickhouse-release-v19-16-2-2-2019-10-30 title="Permanent link"> </a></h3><h4 id=backward-incompatible-change-1>向后不兼容的更改<a class=headerlink href=../amp/#backward-incompatible-change-1 title="Permanent link"> </a></h4><ul><li>为count/counIf添加缺失的验证。<br><a href=https://github.com/ClickHouse/ClickHouse/issues/7095 rel="external nofollow noreferrer" target=_blank>#7095</a><br><a href=https://github.com/ClickHouse/ClickHouse/pull/7298 rel="external nofollow noreferrer" target=_blank>#7298</a> (<a href=https://github.com/Vdimir rel="external nofollow noreferrer" target=_blank>Vdimir</a>)</li><li>删除旧版 <code class=syntax>asterisk_left_columns_only</code> 设置（默认情况下禁用）。<br><a href=https://github.com/ClickHouse/ClickHouse/pull/7335 rel="external nofollow noreferrer" target=_blank>#7335</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>阿尔乔姆<br> Zuikov</a>)</li><li>模板数据格式的格式字符串现在在文件中指定。<br><a href=https://github.com/ClickHouse/ClickHouse/pull/7118 rel="external nofollow noreferrer" target=_blank>#7118</a><br> (<a href=https://github.com/tavplubix rel="external nofollow noreferrer" target=_blank>tavplubix</a>)</li></ul><h4 id=new-feature-2>新功能<a class=headerlink href=../amp/#new-feature-2 title="Permanent link"> </a></h4><ul><li>引入uniqCombined64()来计算大于UINT_MAX的基数。<br><a href=https://github.com/ClickHouse/ClickHouse/pull/7213 rel="external nofollow noreferrer" target=_blank>#7213</a>,<br><a href=https://github.com/ClickHouse/ClickHouse/pull/7222 rel="external nofollow noreferrer" target=_blank>#7222</a> (<a href=https://github.com/azat rel="external nofollow noreferrer" target=_blank>Azat<br> Khuzhin</a>)</li><li>支持数组列上的Bloom filter索引。<br><a href=https://github.com/ClickHouse/ClickHouse/pull/6984 rel="external nofollow noreferrer" target=_blank>#6984</a><br> (<a href=https://github.com/achimbab rel="external nofollow noreferrer" target=_blank>achimbab</a>)</li><li>添加函数 <code class=syntax>getMacro(name)</code> 返回与相应值的字符串 <code class=syntax>&lt;macros&gt;</code><br> 从服务器配置. <a href=https://github.com/ClickHouse/ClickHouse/pull/7240 rel="external nofollow noreferrer" target=_blank>#7240</a><br> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>为基于HTTP源的字典设置两个配置选项: <code class=syntax>credentials</code> 和<br><code class=syntax>http-headers</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/7092 rel="external nofollow noreferrer" target=_blank>#7092</a> (<a href=https://github.com/YiuRULE rel="external nofollow noreferrer" target=_blank>纪尧姆<br> Tassery</a>)</li><li>添加新的ProfileEvent <code class=syntax>Merge</code> 这计算启动的背景合并的数量。<br><a href=https://github.com/ClickHouse/ClickHouse/pull/7093 rel="external nofollow noreferrer" target=_blank>#7093</a> (<a href=https://github.com/millb rel="external nofollow noreferrer" target=_blank>米哈伊尔<br> 科罗托夫</a>)</li><li>添加返回完全限定域名的fullHostName函数。<br><a href=https://github.com/ClickHouse/ClickHouse/issues/7263 rel="external nofollow noreferrer" target=_blank>#7263</a><br><a href=https://github.com/ClickHouse/ClickHouse/pull/7291 rel="external nofollow noreferrer" target=_blank>#7291</a> (<a href=https://github.com/sundy-li rel="external nofollow noreferrer" target=_blank>sundyli</a>)</li><li>添加功能 <code class=syntax>arraySplit</code> 和 <code class=syntax>arrayReverseSplit</code> 通过拆分数组 “cut off”<br> 条件。 它们在时间序列处理中非常有用。<br><a href=https://github.com/ClickHouse/ClickHouse/pull/7294 rel="external nofollow noreferrer" target=_blank>#7294</a> (<a href=https://github.com/hczhcz rel="external nofollow noreferrer" target=_blank>hcz</a>)</li><li>添加返回multiMatch函数系列中所有匹配索引的数组的新函数。<br><a href=https://github.com/ClickHouse/ClickHouse/pull/7299 rel="external nofollow noreferrer" target=_blank>#7299</a> (<a href=https://github.com/danlark1 rel="external nofollow noreferrer" target=_blank>Danila<br> 库特宁</a>)</li><li>添加新的数据库引擎 <code class=syntax>Lazy</code> 即针对存储大量小日志进行了优化<br> 桌子 <a href=https://github.com/ClickHouse/ClickHouse/pull/7171 rel="external nofollow noreferrer" target=_blank>#7171</a> (<a href=https://github.com/nikvas0 rel="external nofollow noreferrer" target=_blank>尼基塔<br> Vasilev</a>)</li><li>为位图列添加聚合函数groupBitmapAnd，-或-Xor。 <a href=https://github.com/ClickHouse/ClickHouse/pull/7109 rel="external nofollow noreferrer" target=_blank>#7109</a> (<a href=https://github.com/yuzhichang rel="external nofollow noreferrer" target=_blank>知昌<br> 阿优</a>)</li><li>添加聚合函数组合器-OrNull和-OrDefault，它们返回null<br> 或默认值时没有任何聚合。<br><a href=https://github.com/ClickHouse/ClickHouse/pull/7331 rel="external nofollow noreferrer" target=_blank>#7331</a><br> (<a href=https://github.com/hczhcz rel="external nofollow noreferrer" target=_blank>hcz</a>)</li><li>引入支持自定义转义的CustomSeparated数据格式<br> 分隔符规则。 <a href=https://github.com/ClickHouse/ClickHouse/pull/7118 rel="external nofollow noreferrer" target=_blank>#7118</a><br> (<a href=https://github.com/tavplubix rel="external nofollow noreferrer" target=_blank>tavplubix</a>)</li><li>支持Redis作为外部字典的来源。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4361 rel="external nofollow noreferrer" target=_blank>#4361</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6962 rel="external nofollow noreferrer" target=_blank>#6962</a> (<a href=https://github.com/comunodi rel="external nofollow noreferrer" target=_blank>comunodi</a>, <a href=https://github.com/CurtizJ rel="external nofollow noreferrer" target=_blank>安东<br> 波波夫</a>)</li></ul><h4 id=bug-fix-2>错误修复<a class=headerlink href=../amp/#bug-fix-2 title="Permanent link"> </a></h4><ul><li>修复错误的查询结果，如果它有 <code class=syntax>WHERE IN (SELECT ...)</code> 部分和 <code class=syntax>optimize_read_in_order</code> 是<br> 使用。 <a href=https://github.com/ClickHouse/ClickHouse/pull/7371 rel="external nofollow noreferrer" target=_blank>#7371</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer" target=_blank>安东<br> 波波夫</a>)</li><li>禁用MariaDB身份验证插件，这取决于项目之外的文件。<br><a href=https://github.com/ClickHouse/ClickHouse/pull/7140 rel="external nofollow noreferrer" target=_blank>#7140</a> (<a href=https://github.com/yurriy rel="external nofollow noreferrer" target=_blank>尤里<br> 巴拉诺夫</a>)</li><li>修复异常 <code class=syntax>Cannot convert column ... because it is constant but values of constants are different in source and result</code> 这可能很少发生，当功能 <code class=syntax>now()</code>, <code class=syntax>today()</code>,<br><code class=syntax>yesterday()</code>, <code class=syntax>randConstant()</code> 被使用。<br><a href=https://github.com/ClickHouse/ClickHouse/pull/7156 rel="external nofollow noreferrer" target=_blank>#7156</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>尼古拉<br> Kochetov</a>)</li><li>修复了使用HTTP保持活动超时而不是TCP保持活动超时的问题。<br><a href=https://github.com/ClickHouse/ClickHouse/pull/7351 rel="external nofollow noreferrer" target=_blank>#7351</a> (<a href=https://github.com/Enmk rel="external nofollow noreferrer" target=_blank>瓦西里<br> Nemkov</a>)</li><li>修复了groupBitmapOr中的分段错误（问题 <a href=https://github.com/ClickHouse/ClickHouse/issues/7109 rel="external nofollow noreferrer" target=_blank>#7109</a>).<br><a href=https://github.com/ClickHouse/ClickHouse/pull/7289 rel="external nofollow noreferrer" target=_blank>#7289</a> (<a href=https://github.com/yuzhichang rel="external nofollow noreferrer" target=_blank>知昌<br> 阿优</a>)</li><li>对于实例化视图，在写入所有数据之后调用kafka的提交。<br><a href=https://github.com/ClickHouse/ClickHouse/pull/7175 rel="external nofollow noreferrer" target=_blank>#7175</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>伊万</a>)</li><li>修复错误 <code class=syntax>duration_ms</code> 值 <code class=syntax>system.part_log</code> 桌子 这是十次关闭。<br><a href=https://github.com/ClickHouse/ClickHouse/pull/7172 rel="external nofollow noreferrer" target=_blank>#7172</a> (<a href=https://github.com/excitoon rel="external nofollow noreferrer" target=_blank>弗拉基米尔<br> Chebotarev</a>)</li><li>快速修复解决实时查看表中的崩溃并重新启用所有实时查看测试。<br><a href=https://github.com/ClickHouse/ClickHouse/pull/7201 rel="external nofollow noreferrer" target=_blank>#7201</a><br> (<a href=https://github.com/vzakaznikov rel="external nofollow noreferrer" target=_blank>vzakaznikov</a>)</li><li>在MergeTree部件的最小/最大索引中正确序列化NULL值。<br><a href=https://github.com/ClickHouse/ClickHouse/pull/7234 rel="external nofollow noreferrer" target=_blank>#7234</a> (<a href=https://github.com/akuzm rel="external nofollow noreferrer" target=_blank>亚历山大<br> 库兹门科夫</a>)</li><li>不要把虚拟列。创建表时的sql元数据 <code class=syntax>CREATE TABLE AS</code>.<br><a href=https://github.com/ClickHouse/ClickHouse/pull/7183 rel="external nofollow noreferrer" target=_blank>#7183</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>伊万</a>)</li><li>修复分段故障 <code class=syntax>ATTACH PART</code> 查询。<br><a href=https://github.com/ClickHouse/ClickHouse/pull/7185 rel="external nofollow noreferrer" target=_blank>#7185</a><br> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li><li>修复了子查询中empty和empty优化给出的某些查询的错误结果<br> INNER/RIGHT JOIN. <a href=https://github.com/ClickHouse/ClickHouse/pull/7284 rel="external nofollow noreferrer" target=_blank>#7284</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>尼古拉<br> Kochetov</a>)</li><li>修复LIVE VIEW getHeader()方法中的AddressSanitizer错误。<br><a href=https://github.com/ClickHouse/ClickHouse/pull/7271 rel="external nofollow noreferrer" target=_blank>#7271</a><br> (<a href=https://github.com/vzakaznikov rel="external nofollow noreferrer" target=_blank>vzakaznikov</a>)</li></ul><h4 id=improvement-1>改进<a class=headerlink href=../amp/#improvement-1 title="Permanent link"> </a></h4><ul><li>在queue_wait_max_ms等待发生的情况下添加消息。<br><a href=https://github.com/ClickHouse/ClickHouse/pull/7390 rel="external nofollow noreferrer" target=_blank>#7390</a> (<a href=https://github.com/azat rel="external nofollow noreferrer" target=_blank>Azat<br> Khuzhin</a>)</li><li>制作设置 <code class=syntax>s3_min_upload_part_size</code> 表级别。<br><a href=https://github.com/ClickHouse/ClickHouse/pull/7059 rel="external nofollow noreferrer" target=_blank>#7059</a> (<a href=https://github.com/excitoon rel="external nofollow noreferrer" target=_blank>弗拉基米尔<br> Chebotarev</a>)</li><li>检查Ttl在StorageFactory。 <a href=https://github.com/ClickHouse/ClickHouse/pull/7304 rel="external nofollow noreferrer" target=_blank>#7304</a><br> (<a href=https://github.com/sundy-li rel="external nofollow noreferrer" target=_blank>sundyli</a>)</li><li>在部分合并连接（优化）中压缩左侧块。<br><a href=https://github.com/ClickHouse/ClickHouse/pull/7122 rel="external nofollow noreferrer" target=_blank>#7122</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>阿尔乔姆<br> Zuikov</a>)</li><li>不允许在复制表引擎的突变中使用非确定性函数，因为这<br> 可能会在副本之间引入不一致。<br><a href=https://github.com/ClickHouse/ClickHouse/pull/7247 rel="external nofollow noreferrer" target=_blank>#7247</a> (<a href=https://github.com/Akazz rel="external nofollow noreferrer" target=_blank>亚历山大<br> 卡扎科夫</a>)</li><li>将异常堆栈跟踪转换为字符串时禁用内存跟踪器。 它可以防止损失<br> 类型的错误消息 <code class=syntax>Memory limit exceeded</code> 在服务器上，这导致了 <code class=syntax>Attempt to read after eof</code> 客户端上的例外。 <a href=https://github.com/ClickHouse/ClickHouse/pull/7264 rel="external nofollow noreferrer" target=_blank>#7264</a><br> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>尼古拉*科切托夫</a>)</li><li>其他格式改进。 决定<br><a href=https://github.com/ClickHouse/ClickHouse/issues/6033 rel="external nofollow noreferrer" target=_blank>#6033</a>,<br><a href=https://github.com/ClickHouse/ClickHouse/issues/2633 rel="external nofollow noreferrer" target=_blank>#2633</a>,<br><a href=https://github.com/ClickHouse/ClickHouse/issues/6611 rel="external nofollow noreferrer" target=_blank>#6611</a>,<br><a href=https://github.com/ClickHouse/ClickHouse/issues/6742 rel="external nofollow noreferrer" target=_blank>#6742</a><br><a href=https://github.com/ClickHouse/ClickHouse/pull/7215 rel="external nofollow noreferrer" target=_blank>#7215</a><br> (<a href=https://github.com/tavplubix rel="external nofollow noreferrer" target=_blank>tavplubix</a>)</li><li>ClickHouse将忽略IN运算符右侧不可转换为左侧的值<br> side type. Make it work properly for compound types – Array and Tuple.<br><a href=https://github.com/ClickHouse/ClickHouse/pull/7283 rel="external nofollow noreferrer" target=_blank>#7283</a> (<a href=https://github.com/akuzm rel="external nofollow noreferrer" target=_blank>亚历山大<br> 库兹门科夫</a>)</li><li>支持ASOF加入缺失的不平等。 它可以加入小于或等于变体和严格<br> 在语法上，ASOF列的变体越来越多。<br><a href=https://github.com/ClickHouse/ClickHouse/pull/7282 rel="external nofollow noreferrer" target=_blank>#7282</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>阿尔乔姆<br> Zuikov</a>)</li><li>优化部分合并连接。 <a href=https://github.com/ClickHouse/ClickHouse/pull/7070 rel="external nofollow noreferrer" target=_blank>#7070</a><br> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li><li>不要在uniqCombined函数中使用超过98K的内存。<br><a href=https://github.com/ClickHouse/ClickHouse/pull/7236 rel="external nofollow noreferrer" target=_blank>#7236</a>,<br><a href=https://github.com/ClickHouse/ClickHouse/pull/7270 rel="external nofollow noreferrer" target=_blank>#7270</a> (<a href=https://github.com/azat rel="external nofollow noreferrer" target=_blank>Azat<br> Khuzhin</a>)</li><li>在PartialMergeJoin中刷新磁盘上右连接表的部分（如果没有足够的<br> 记忆）。 需要时加载数据。 <a href=https://github.com/ClickHouse/ClickHouse/pull/7186 rel="external nofollow noreferrer" target=_blank>#7186</a><br> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li></ul><h4 id=performance-improvement-1>性能改进<a class=headerlink href=../amp/#performance-improvement-1 title="Permanent link"> </a></h4><ul><li>通过避免数据重复加快使用const参数的joinGet。<br><a href=https://github.com/ClickHouse/ClickHouse/pull/7359 rel="external nofollow noreferrer" target=_blank>#7359</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer" target=_blank>阿莫斯<br> 鸟</a>)</li><li>如果子查询为空，请提前返回。<br><a href=https://github.com/ClickHouse/ClickHouse/pull/7007 rel="external nofollow noreferrer" target=_blank>#7007</a> (<a href=https://github.com/nicelulu rel="external nofollow noreferrer" target=_blank>小路</a>)</li><li>优化值中SQL表达式的解析。<br><a href=https://github.com/ClickHouse/ClickHouse/pull/6781 rel="external nofollow noreferrer" target=_blank>#6781</a><br> (<a href=https://github.com/tavplubix rel="external nofollow noreferrer" target=_blank>tavplubix</a>)</li></ul><h4 id=buildtestingpackaging-improvement-1>构建/测试/包装改进<a class=headerlink href=../amp/#buildtestingpackaging-improvement-1 title="Permanent link"> </a></h4><ul><li>禁用交叉编译到Mac OS的一些贡献。<br><a href=https://github.com/ClickHouse/ClickHouse/pull/7101 rel="external nofollow noreferrer" target=_blank>#7101</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>伊万</a>)</li><li>为clickhouse_common_io添加与PocoXML缺少的链接。<br><a href=https://github.com/ClickHouse/ClickHouse/pull/7200 rel="external nofollow noreferrer" target=_blank>#7200</a> (<a href=https://github.com/azat rel="external nofollow noreferrer" target=_blank>Azat<br> Khuzhin</a>)</li><li>在clickhouse-test中接受多个测试过滤器参数。<br><a href=https://github.com/ClickHouse/ClickHouse/pull/7226 rel="external nofollow noreferrer" target=_blank>#7226</a> (<a href=https://github.com/akuzm rel="external nofollow noreferrer" target=_blank>亚历山大<br> 库兹门科夫</a>)</li><li>为ARM启用musl和jemalloc。 <a href=https://github.com/ClickHouse/ClickHouse/pull/7300 rel="external nofollow noreferrer" target=_blank>#7300</a><br> (<a href=https://github.com/amosbird rel="external nofollow noreferrer" target=_blank>阿莫斯鸟</a>)</li><li>已添加 <code class=syntax>--client-option</code> 参数 <code class=syntax>clickhouse-test</code> 将其他参数传递给客户端。<br><a href=https://github.com/ClickHouse/ClickHouse/pull/7277 rel="external nofollow noreferrer" target=_blank>#7277</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>尼古拉<br> Kochetov</a>)</li><li>在rpm软件包升级时保留现有配置。<br><a href=https://github.com/ClickHouse/ClickHouse/pull/7103 rel="external nofollow noreferrer" target=_blank>#7103</a><br> (<a href=https://github.com/filimonov rel="external nofollow noreferrer" target=_blank>filimonov</a>)</li><li>修复PVS检测到的错误。 <a href=https://github.com/ClickHouse/ClickHouse/pull/7153 rel="external nofollow noreferrer" target=_blank>#7153</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>阿尔乔姆<br> Zuikov</a>)</li><li>修复达尔文的构建。 <a href=https://github.com/ClickHouse/ClickHouse/pull/7149 rel="external nofollow noreferrer" target=_blank>#7149</a><br> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>伊万</a>)</li><li>glibc2.29兼容性. <a href=https://github.com/ClickHouse/ClickHouse/pull/7142 rel="external nofollow noreferrer" target=_blank>#7142</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer" target=_blank>阿莫斯<br> 鸟</a>)</li><li>确保dh_clean不会触及潜在的源文件。<br><a href=https://github.com/ClickHouse/ClickHouse/pull/7205 rel="external nofollow noreferrer" target=_blank>#7205</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer" target=_blank>阿莫斯<br> 鸟</a>)</li><li>尝试避免从altinity rpm更新时发生冲突-它有单独打包的配置文件<br> 在clickhouse服务器-常见. <a href=https://github.com/ClickHouse/ClickHouse/pull/7073 rel="external nofollow noreferrer" target=_blank>#7073</a><br> (<a href=https://github.com/filimonov rel="external nofollow noreferrer" target=_blank>filimonov</a>)</li><li>优化一些头文件，以便更快地重建。<br><a href=https://github.com/ClickHouse/ClickHouse/pull/7212 rel="external nofollow noreferrer" target=_blank>#7212</a>,<br><a href=https://github.com/ClickHouse/ClickHouse/pull/7231 rel="external nofollow noreferrer" target=_blank>#7231</a> (<a href=https://github.com/akuzm rel="external nofollow noreferrer" target=_blank>亚历山大<br> 库兹门科夫</a>)</li><li>添加日期和日期时间的性能测试。 <a href=https://github.com/ClickHouse/ClickHouse/pull/7332 rel="external nofollow noreferrer" target=_blank>#7332</a> (<a href=https://github.com/Enmk rel="external nofollow noreferrer" target=_blank>瓦西里<br> Nemkov</a>)</li><li>修复一些包含非确定性突变的测试。<br><a href=https://github.com/ClickHouse/ClickHouse/pull/7132 rel="external nofollow noreferrer" target=_blank>#7132</a> (<a href=https://github.com/Akazz rel="external nofollow noreferrer" target=_blank>亚历山大<br> 卡扎科夫</a>)</li><li>添加构建与MemorySanitizer CI。 <a href=https://github.com/ClickHouse/ClickHouse/pull/7066 rel="external nofollow noreferrer" target=_blank>#7066</a><br> (<a href=https://github.com/akuzm rel="external nofollow noreferrer" target=_blank>Alexander Kuzmenkov</a>)</li><li>避免在MetricsTransmitter中使用未初始化的值。<br><a href=https://github.com/ClickHouse/ClickHouse/pull/7158 rel="external nofollow noreferrer" target=_blank>#7158</a> (<a href=https://github.com/azat rel="external nofollow noreferrer" target=_blank>Azat<br> Khuzhin</a>)</li><li>修复MemorySanitizer发现的字段中的一些问题。<br><a href=https://github.com/ClickHouse/ClickHouse/pull/7135 rel="external nofollow noreferrer" target=_blank>#7135</a>,<br><a href=https://github.com/ClickHouse/ClickHouse/pull/7179 rel="external nofollow noreferrer" target=_blank>#7179</a> (<a href=https://github.com/akuzm rel="external nofollow noreferrer" target=_blank>亚历山大<br> 库兹门科夫</a>), <a href=https://github.com/ClickHouse/ClickHouse/pull/7376 rel="external nofollow noreferrer" target=_blank>#7376</a><br> (<a href=https://github.com/amosbird rel="external nofollow noreferrer" target=_blank>阿莫斯鸟</a>)</li><li>修复murmurhash32中未定义的行为。 <a href=https://github.com/ClickHouse/ClickHouse/pull/7388 rel="external nofollow noreferrer" target=_blank>#7388</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer" target=_blank>阿莫斯<br> 鸟</a>)</li><li>修复StoragesInfoStream中未定义的行为。 <a href=https://github.com/ClickHouse/ClickHouse/pull/7384 rel="external nofollow noreferrer" target=_blank>#7384</a><br> (<a href=https://github.com/tavplubix rel="external nofollow noreferrer" target=_blank>tavplubix</a>)</li><li>固定常量表达式折叠外部数据库引擎（MySQL，ODBC，JDBC）。 在上一页<br> 版本它不适用于多个常量表达式，并且根本不适用于日期,<br> 日期时间和UUID。 这修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/7245 rel="external nofollow noreferrer" target=_blank>#7245</a><br><a href=https://github.com/ClickHouse/ClickHouse/pull/7252 rel="external nofollow noreferrer" target=_blank>#7252</a><br> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>在访问no_users_thread变量时修复实时查看中的ThreadSanitizer数据竞争错误。<br><a href=https://github.com/ClickHouse/ClickHouse/pull/7353 rel="external nofollow noreferrer" target=_blank>#7353</a><br> (<a href=https://github.com/vzakaznikov rel="external nofollow noreferrer" target=_blank>vzakaznikov</a>)</li><li>在libcommon中摆脱malloc符号<br><a href=https://github.com/ClickHouse/ClickHouse/pull/7134 rel="external nofollow noreferrer" target=_blank>#7134</a>,<br><a href=https://github.com/ClickHouse/ClickHouse/pull/7065 rel="external nofollow noreferrer" target=_blank>#7065</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer" target=_blank>阿莫斯<br> 鸟</a>)</li><li>添加全局标志ENABLE_LIBRARY以禁用所有库。<br><a href=https://github.com/ClickHouse/ClickHouse/pull/7063 rel="external nofollow noreferrer" target=_blank>#7063</a><br> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li></ul><h4 id=code-cleanup>代码清理<a class=headerlink href=../amp/#code-cleanup title="Permanent link"> </a></h4><ul><li>概括配置存储库以准备字典的DDL。 <a href=https://github.com/ClickHouse/ClickHouse/pull/7155 rel="external nofollow noreferrer" target=_blank>#7155</a><br> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li><li>解析器字典DDL没有任何语义。<br><a href=https://github.com/ClickHouse/ClickHouse/pull/7209 rel="external nofollow noreferrer" target=_blank>#7209</a><br> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li><li>将ParserCreateQuery拆分为不同的较小的解析器。<br><a href=https://github.com/ClickHouse/ClickHouse/pull/7253 rel="external nofollow noreferrer" target=_blank>#7253</a><br> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li><li>在外部字典附近进行小型重构和重命名。<br><a href=https://github.com/ClickHouse/ClickHouse/pull/7111 rel="external nofollow noreferrer" target=_blank>#7111</a><br> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li><li>重构一些代码以准备基于角色的访问控制。 <a href=https://github.com/ClickHouse/ClickHouse/pull/7235 rel="external nofollow noreferrer" target=_blank>#7235</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer" target=_blank>维塔利<br> 巴拉诺夫</a>)</li><li>DatabaseOrdinary代码中的一些改进。<br><a href=https://github.com/ClickHouse/ClickHouse/pull/7086 rel="external nofollow noreferrer" target=_blank>#7086</a> (<a href=https://github.com/nikvas0 rel="external nofollow noreferrer" target=_blank>尼基塔<br> Vasilev</a>)</li><li>不要在哈希表的find()和emplace()方法中使用迭代器。<br><a href=https://github.com/ClickHouse/ClickHouse/pull/7026 rel="external nofollow noreferrer" target=_blank>#7026</a> (<a href=https://github.com/akuzm rel="external nofollow noreferrer" target=_blank>亚历山大<br> 库兹门科夫</a>)</li><li>修正getMultipleValuesFromConfig的情况下，当参数根不为空。 <a href=https://github.com/ClickHouse/ClickHouse/pull/7374 rel="external nofollow noreferrer" target=_blank>#7374</a><br> (<a href=https://github.com/millb rel="external nofollow noreferrer" target=_blank>米哈伊尔*科罗托夫</a>)</li><li>删除一些复制粘贴（TemporaryFile和TemporaryFileStream)<br><a href=https://github.com/ClickHouse/ClickHouse/pull/7166 rel="external nofollow noreferrer" target=_blank>#7166</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>阿尔乔姆<br> Zuikov</a>)</li><li>改进了代码的可读性一点点 (<code class=syntax>MergeTreeData::getActiveContainingPart</code>).<br><a href=https://github.com/ClickHouse/ClickHouse/pull/7361 rel="external nofollow noreferrer" target=_blank>#7361</a> (<a href=https://github.com/excitoon rel="external nofollow noreferrer" target=_blank>弗拉基米尔<br> Chebotarev</a>)</li><li>等待使用本地对象的所有计划作业，如果 <code class=syntax>ThreadPool::schedule(...)</code> 投掷<br> 一个例外 重命名 <code class=syntax>ThreadPool::schedule(...)</code> 到 <code class=syntax>ThreadPool::scheduleOrThrowOnError(...)</code> 和<br> 修复注释，使明显的，它可能会抛出。<br><a href=https://github.com/ClickHouse/ClickHouse/pull/7350 rel="external nofollow noreferrer" target=_blank>#7350</a><br> (<a href=https://github.com/tavplubix rel="external nofollow noreferrer" target=_blank>tavplubix</a>)</li></ul><h2 id=clickhouse-release-19-15>ClickHouse释放19.15<a class=headerlink href=../amp/#clickhouse-release-19-15 title="Permanent link"> </a></h2><h3 id=clickhouse-release-19-15-4-10-2019-10-31>ClickHouse释放19.15.4.10,2019-10-31<a class=headerlink href=../amp/#clickhouse-release-19-15-4-10-2019-10-31 title="Permanent link"> </a></h3><h4 id=bug-fix-3>错误修复<a class=headerlink href=../amp/#bug-fix-3 title="Permanent link"> </a></h4><ul><li>增加了sql_tinyint和SQL_BIGINT的处理，并修复了ODBC桥中SQL_FLOAT数据源类型的处理。<br><a href=https://github.com/ClickHouse/ClickHouse/pull/7491 rel="external nofollow noreferrer" target=_blank>#7491</a> (<a href=https://github.com/traceon rel="external nofollow noreferrer" target=_blank>Denis Glazachev</a>)</li><li>允许在移动分区中的目标磁盘或卷上有一些部分。<br><a href=https://github.com/ClickHouse/ClickHouse/pull/7434 rel="external nofollow noreferrer" target=_blank>#7434</a> (<a href=https://github.com/excitoon rel="external nofollow noreferrer" target=_blank>Vladimir Chebotarev</a>)</li><li>通过ODBC桥固定可空列中的NULL值。<br><a href=https://github.com/ClickHouse/ClickHouse/pull/7402 rel="external nofollow noreferrer" target=_blank>#7402</a> (<a href=https://github.com/Enmk rel="external nofollow noreferrer" target=_blank>瓦西里*内姆科夫</a>)</li><li>固定插入到具体化列的分布式非本地节点。<br><a href=https://github.com/ClickHouse/ClickHouse/pull/7377 rel="external nofollow noreferrer" target=_blank>#7377</a> (<a href=https://github.com/azat rel="external nofollow noreferrer" target=_blank>Azat Khuzhin</a>)</li><li>固定函数getMultipleValuesFromConfig。<br><a href=https://github.com/ClickHouse/ClickHouse/pull/7374 rel="external nofollow noreferrer" target=_blank>#7374</a> (<a href=https://github.com/millb rel="external nofollow noreferrer" target=_blank>米哈伊尔*科罗托夫</a>)</li><li>修复了使用HTTP保持活动超时而不是TCP保持活动超时的问题。<br><a href=https://github.com/ClickHouse/ClickHouse/pull/7351 rel="external nofollow noreferrer" target=_blank>#7351</a> (<a href=https://github.com/Enmk rel="external nofollow noreferrer" target=_blank>瓦西里*内姆科夫</a>)</li><li>等待所有作业在异常时完成（修复罕见的段错误）。<br><a href=https://github.com/ClickHouse/ClickHouse/pull/7350 rel="external nofollow noreferrer" target=_blank>#7350</a> (<a href=https://github.com/tavplubix rel="external nofollow noreferrer" target=_blank>tavplubix</a>)</li><li>在插入Kafka表时不要推送MVs。<br><a href=https://github.com/ClickHouse/ClickHouse/pull/7265 rel="external nofollow noreferrer" target=_blank>#7265</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>伊万</a>)</li><li>禁用异常堆栈的内存跟踪器。<br><a href=https://github.com/ClickHouse/ClickHouse/pull/7264 rel="external nofollow noreferrer" target=_blank>#7264</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>尼古拉*科切托夫</a>)</li><li>修复了外部数据库转换查询中的错误代码。<br><a href=https://github.com/ClickHouse/ClickHouse/pull/7252 rel="external nofollow noreferrer" target=_blank>#7252</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>避免在MetricsTransmitter中使用未初始化的值。<br><a href=https://github.com/ClickHouse/ClickHouse/pull/7158 rel="external nofollow noreferrer" target=_blank>#7158</a> (<a href=https://github.com/azat rel="external nofollow noreferrer" target=_blank>Azat Khuzhin</a>)</li><li>添加了用于测试的宏的示例配置 (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li></ul><h3 id=clickhouse-release-19-15-3-6-2019-10-09>ClickHouse释放19.15.3.6,2019-10-09<a class=headerlink href=../amp/#clickhouse-release-19-15-3-6-2019-10-09 title="Permanent link"> </a></h3><h4 id=bug-fix-4>错误修复<a class=headerlink href=../amp/#bug-fix-4 title="Permanent link"> </a></h4><ul><li>修正了哈希字典中的bad_variant。<br> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li><li>修复了附加部件查询中分段故障的错误。<br> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li><li>固定时间计算 <code class=syntax>MergeTreeData</code>.<br> (<a href=https://github.com/excitoon rel="external nofollow noreferrer" target=_blank>Vladimir Chebotarev</a>)</li><li>写作完成后明确提交给Kafka。<br><a href=https://github.com/ClickHouse/ClickHouse/pull/7175 rel="external nofollow noreferrer" target=_blank>#7175</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>伊万</a>)</li><li>在MergeTree部件的最小/最大索引中正确序列化NULL值。<br><a href=https://github.com/ClickHouse/ClickHouse/pull/7234 rel="external nofollow noreferrer" target=_blank>#7234</a> (<a href=https://github.com/akuzm rel="external nofollow noreferrer" target=_blank>Alexander Kuzmenkov</a>)</li></ul><h3 id=clickhouse-release-19-15-2-2-2019-10-01>碌莽禄,拢,010-68520682\&lt;url&gt;戮卤篓拢,010-68520682\&lt;url&gt;<a class=headerlink href=../amp/#clickhouse-release-19-15-2-2-2019-10-01 title="Permanent link"> </a></h3><h4 id=new-feature-3>新功能<a class=headerlink href=../amp/#new-feature-3 title="Permanent link"> </a></h4><ul><li>分层存储：支持使用MergeTree引擎对表使用多个存储卷。 可以将新数据存储在SSD上，并自动将旧数据移动到HDD。 (<a href=https://clickhouse.github.io/clickhouse-presentations/meetup30/new_features/#12 rel="external nofollow noreferrer" target=_blank>示例</a>). <a href=https://github.com/ClickHouse/ClickHouse/pull/4918 rel="external nofollow noreferrer" target=_blank>#4918</a> (<a href=https://github.com/ObjatieGroba rel="external nofollow noreferrer" target=_blank>Igr</a>) <a href=https://github.com/ClickHouse/ClickHouse/pull/6489 rel="external nofollow noreferrer" target=_blank>#6489</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li><li>添加表函数 <code class=syntax>input</code> 用于读取传入的数据 <code class=syntax>INSERT SELECT</code> 查询。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5450 rel="external nofollow noreferrer" target=_blank>#5450</a> (<a href=https://github.com/palasonic1 rel="external nofollow noreferrer" target=_blank>palasonic1</a>) <a href=https://github.com/ClickHouse/ClickHouse/pull/6832 rel="external nofollow noreferrer" target=_blank>#6832</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer" target=_blank>安东*波波夫</a>)</li><li>添加一个 <code class=syntax>sparse_hashed</code> 字典布局，即在功能上等同于 <code class=syntax>hashed</code> 布局，但更高效的内存。 它使用的内存减少了大约两倍，代价是较慢的值检索。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6894 rel="external nofollow noreferrer" target=_blank>#6894</a> (<a href=https://github.com/azat rel="external nofollow noreferrer" target=_blank>Azat Khuzhin</a>)</li><li>实现定义用户列表以访问字典的能力。 仅使用当前连接的数据库。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6907 rel="external nofollow noreferrer" target=_blank>#6907</a> (<a href=https://github.com/YiuRULE rel="external nofollow noreferrer" target=_blank>纪尧姆*塔瑟里</a>)</li><li>添加 <code class=syntax>LIMIT</code> 选项 <code class=syntax>SHOW</code> 查询。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6944 rel="external nofollow noreferrer" target=_blank>#6944</a> (<a href=https://github.com/malkfilipp rel="external nofollow noreferrer" target=_blank>Philipp Malkovsky</a>)</li><li>添加 <code class=syntax>bitmapSubsetLimit(bitmap, range_start, limit)</code> 函数，返回最小的子集 <code class=syntax>limit</code> 设置中的值不小于 <code class=syntax>range_start</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6957 rel="external nofollow noreferrer" target=_blank>#6957</a> (<a href=https://github.com/yuzhichang rel="external nofollow noreferrer" target=_blank>余志昌</a>)</li><li>添加 <code class=syntax>bitmapMin</code> 和 <code class=syntax>bitmapMax</code> 功能。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6970 rel="external nofollow noreferrer" target=_blank>#6970</a> (<a href=https://github.com/yuzhichang rel="external nofollow noreferrer" target=_blank>余志昌</a>)</li><li>添加功能 <code class=syntax>repeat</code> 有关 <a href=https://github.com/ClickHouse/ClickHouse/issues/6648 rel="external nofollow noreferrer" target=_blank>问题-6648</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6999 rel="external nofollow noreferrer" target=_blank>#6999</a> (<a href=https://github.com/ucasFL rel="external nofollow noreferrer" target=_blank>弗林</a>)</li></ul><h4 id=experimental-feature-1>实验特点<a class=headerlink href=../amp/#experimental-feature-1 title="Permanent link"> </a></h4><ul><li>实现（在内存中）不更改当前管道的合并联接变体。 结果按合并键进行部分排序。 设置 <code class=syntax>partial_merge_join = 1</code> 要使用此功能。 合并联接仍在开发中。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6940 rel="external nofollow noreferrer" target=_blank>#6940</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li><li>添加 <code class=syntax>S3</code> 发动机和表功能. 它仍在开发中（还没有身份验证支持）。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5596 rel="external nofollow noreferrer" target=_blank>#5596</a> (<a href=https://github.com/excitoon rel="external nofollow noreferrer" target=_blank>Vladimir Chebotarev</a>)</li></ul><h4 id=improvement-2>改进<a class=headerlink href=../amp/#improvement-2 title="Permanent link"> </a></h4><ul><li>从Kafka读取的每条消息都是以原子方式插入的。 这解决了Kafka引擎的几乎所有已知问题。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6950 rel="external nofollow noreferrer" target=_blank>#6950</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>伊万</a>)</li><li>对分布式查询故障转移的改进。 缩短恢复时间，也是现在可配置的，可以看出 <code class=syntax>system.clusters</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6399 rel="external nofollow noreferrer" target=_blank>#6399</a> (<a href=https://github.com/Enmk rel="external nofollow noreferrer" target=_blank>瓦西里*内姆科夫</a>)</li><li>直接支持枚举的数值 <code class=syntax>IN</code> 科。 #6766 <a href=https://github.com/ClickHouse/ClickHouse/pull/6941 rel="external nofollow noreferrer" target=_blank>#6941</a> (<a href=https://github.com/dimarub2000 rel="external nofollow noreferrer" target=_blank>dimarub2000</a>)</li><li>支持（可选，默认情况下禁用）对URL存储进行重定向。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6914 rel="external nofollow noreferrer" target=_blank>#6914</a> (<a href=https://github.com/maqroll rel="external nofollow noreferrer" target=_blank>maqroll</a>)</li><li>当具有较旧版本的客户端连接到服务器时添加信息消息。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6893 rel="external nofollow noreferrer" target=_blank>#6893</a> (<a href=https://github.com/malkfilipp rel="external nofollow noreferrer" target=_blank>Philipp Malkovsky</a>)</li><li>删除在分布式表中发送数据的最大退避睡眠时间限制 <a href=https://github.com/ClickHouse/ClickHouse/pull/6895 rel="external nofollow noreferrer" target=_blank>#6895</a> (<a href=https://github.com/azat rel="external nofollow noreferrer" target=_blank>Azat Khuzhin</a>)</li><li>添加将配置文件事件（计数器）与累积值发送到graphite的能力。 它可以在启用 <code class=syntax>&lt;events_cumulative&gt;</code> 在服务器 <code class=syntax>config.xml</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6969 rel="external nofollow noreferrer" target=_blank>#6969</a> (<a href=https://github.com/azat rel="external nofollow noreferrer" target=_blank>Azat Khuzhin</a>)</li><li>添加自动转换类型 <code class=syntax>T</code> 到 <code class=syntax>LowCardinality(T)</code> 在类型的列中插入数据 <code class=syntax>LowCardinality(T)</code> 在本机格式通过HTTP。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6891 rel="external nofollow noreferrer" target=_blank>#6891</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>尼古拉*科切托夫</a>)</li><li>添加使用功能的能力 <code class=syntax>hex</code> 不使用 <code class=syntax>reinterpretAsString</code> 为 <code class=syntax>Float32</code>, <code class=syntax>Float64</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/7024 rel="external nofollow noreferrer" target=_blank>#7024</a> (<a href=https://github.com/millb rel="external nofollow noreferrer" target=_blank>米哈伊尔*科罗托夫</a>)</li></ul><h4 id=buildtestingpackaging-improvement-2>构建/测试/包装改进<a class=headerlink href=../amp/#buildtestingpackaging-improvement-2 title="Permanent link"> </a></h4><ul><li>将gdb-index添加到带有调试信息的clickhouse二进制文件。 这将加快启动时间 <code class=syntax>gdb</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6947 rel="external nofollow noreferrer" target=_blank>#6947</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li><li>加速deb包装与补丁dpkg-deb它使用 <code class=syntax>pigz</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6960 rel="external nofollow noreferrer" target=_blank>#6960</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li><li>设置 <code class=syntax>enable_fuzzing = 1</code> 启用所有项目代码的libfuzzer检测功能。 <a href=https://github.com/ClickHouse/ClickHouse/pull/7042 rel="external nofollow noreferrer" target=_blank>#7042</a> (<a href=https://github.com/kyprizel rel="external nofollow noreferrer" target=_blank>kyprizel</a>)</li><li>在CI中添加拆分构建烟雾测试。 <a href=https://github.com/ClickHouse/ClickHouse/pull/7061 rel="external nofollow noreferrer" target=_blank>#7061</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li><li>添加构建与MemorySanitizer CI。 <a href=https://github.com/ClickHouse/ClickHouse/pull/7066 rel="external nofollow noreferrer" target=_blank>#7066</a> (<a href=https://github.com/akuzm rel="external nofollow noreferrer" target=_blank>Alexander Kuzmenkov</a>)</li><li>替换 <code class=syntax>libsparsehash</code> 与 <code class=syntax>sparsehash-c11</code> <a href=https://github.com/ClickHouse/ClickHouse/pull/6965 rel="external nofollow noreferrer" target=_blank>#6965</a> (<a href=https://github.com/azat rel="external nofollow noreferrer" target=_blank>Azat Khuzhin</a>)</li></ul><h4 id=bug-fix-5>错误修复<a class=headerlink href=../amp/#bug-fix-5 title="Permanent link"> </a></h4><ul><li>修复了大型表上复杂键的索引分析的性能下降。 这修复了＃6924。 <a href=https://github.com/ClickHouse/ClickHouse/pull/7075 rel="external nofollow noreferrer" target=_blank>#7075</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>修复从Kafka空主题中选择时导致段错误的逻辑错误。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6909 rel="external nofollow noreferrer" target=_blank>#6909</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>伊万</a>)</li><li>修复过早的MySQL连接关闭 <code class=syntax>MySQLBlockInputStream.cpp</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6882 rel="external nofollow noreferrer" target=_blank>#6882</a> (<a href=https://github.com/clemrodriguez rel="external nofollow noreferrer" target=_blank>Clément Rodriguez</a>)</li><li>返回对非常旧的Linux内核的支持（修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/6841 rel="external nofollow noreferrer" target=_blank>#6841</a>) <a href=https://github.com/ClickHouse/ClickHouse/pull/6853 rel="external nofollow noreferrer" target=_blank>#6853</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>修复可能的数据丢失 <code class=syntax>insert select</code> 在输入流中的空块的情况下进行查询。 #6834 #6862 <a href=https://github.com/ClickHouse/ClickHouse/pull/6911 rel="external nofollow noreferrer" target=_blank>#6911</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>尼古拉*科切托夫</a>)</li><li>修复功能 <code class=syntax>АrrayEnumerateUniqRanked</code> 在参数中使用空数组 <a href=https://github.com/ClickHouse/ClickHouse/pull/6928 rel="external nofollow noreferrer" target=_blank>#6928</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li><li>使用数组联接和全局子查询修复复杂的查询。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6934 rel="external nofollow noreferrer" target=_blank>#6934</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>伊万</a>)</li><li>修复 <code class=syntax>Unknown identifier</code> 按顺序排列和按多个联接分组的错误 <a href=https://github.com/ClickHouse/ClickHouse/pull/7022 rel="external nofollow noreferrer" target=_blank>#7022</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li><li>固定 <code class=syntax>MSan</code> 执行函数时发出警告 <code class=syntax>LowCardinality</code> 争论。 <a href=https://github.com/ClickHouse/ClickHouse/pull/7062 rel="external nofollow noreferrer" target=_blank>#7062</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>尼古拉*科切托夫</a>)</li></ul><h4 id=backward-incompatible-change-2>向后不兼容的更改<a class=headerlink href=../amp/#backward-incompatible-change-2 title="Permanent link"> </a></h4><ul><li>更改了位图*聚合函数状态的序列化格式，以提高性能。 无法读取以前版本的位图*的序列化状态。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6908 rel="external nofollow noreferrer" target=_blank>#6908</a> (<a href=https://github.com/yuzhichang rel="external nofollow noreferrer" target=_blank>余志昌</a>)</li></ul><h2 id=clickhouse-release-19-14>ClickHouse释放19.14<a class=headerlink href=../amp/#clickhouse-release-19-14 title="Permanent link"> </a></h2><h3 id=clickhouse-release-19-14-7-15-2019-10-02>ClickHouse释放19.14.7.15,2019-10-02<a class=headerlink href=../amp/#clickhouse-release-19-14-7-15-2019-10-02 title="Permanent link"> </a></h3><h4 id=bug-fix-6>错误修复<a class=headerlink href=../amp/#bug-fix-6 title="Permanent link"> </a></h4><ul><li>此版本还包含19.11.12.69的所有错误修复。</li><li>修复了19.14和早期版本之间分布式查询的兼容性。 这修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/7068 rel="external nofollow noreferrer" target=_blank>#7068</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/7069 rel="external nofollow noreferrer" target=_blank>#7069</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li></ul><h3 id=clickhouse-release-19-14-6-12-2019-09-19>ClickHouse释放19.14.6.12,2019-09-19<a class=headerlink href=../amp/#clickhouse-release-19-14-6-12-2019-09-19 title="Permanent link"> </a></h3><h4 id=bug-fix-7>错误修复<a class=headerlink href=../amp/#bug-fix-7 title="Permanent link"> </a></h4><ul><li>修复功能 <code class=syntax>АrrayEnumerateUniqRanked</code> 在参数中使用空数组。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6928 rel="external nofollow noreferrer" target=_blank>#6928</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li><li>修复了查询中的子查询名称 <code class=syntax>ARRAY JOIN</code> 和 <code class=syntax>GLOBAL IN subquery</code> 用化名。 如果指定了外部表名，请使用子查询别名。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6934 rel="external nofollow noreferrer" target=_blank>#6934</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>伊万</a>)</li></ul><h4 id=buildtestingpackaging-improvement-3>构建/测试/包装改进<a class=headerlink href=../amp/#buildtestingpackaging-improvement-3 title="Permanent link"> </a></h4><ul><li>修复 <a href=https://clickhouse-test-reports.s3.yandex.net/6944/aab95fd5175a513413c7395a73a82044bdafb906/functional_stateless_tests_(debug).html rel="external nofollow noreferrer" target=_blank>拍打</a> 测试 <code class=syntax>00715_fetch_merged_or_mutated_part_zookeeper</code> 通过将其重写为shell脚本，因为它需要等待突变应用。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6977 rel="external nofollow noreferrer" target=_blank>#6977</a> (<a href=https://github.com/Akazz rel="external nofollow noreferrer" target=_blank>亚历山大*卡扎科夫</a>)</li><li>修正了UBSan和MemSan功能失败 <code class=syntax>groupUniqArray</code> 使用emtpy数组参数。 这是由于放置空 <code class=syntax>PaddedPODArray</code> 因为没有调用零单元格值的构造函数，所以将其转换为哈希表零单元格。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6937 rel="external nofollow noreferrer" target=_blank>#6937</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer" target=_blank>阿莫斯鸟</a>)</li></ul><h3 id=clickhouse-release-19-14-3-3-2019-09-10>碌莽禄,拢,010-68520682\&lt;url&gt;戮卤篓拢,010-68520682\&lt;url&gt;<a class=headerlink href=../amp/#clickhouse-release-19-14-3-3-2019-09-10 title="Permanent link"> </a></h3><h4 id=new-feature-4>新功能<a class=headerlink href=../amp/#new-feature-4 title="Permanent link"> </a></h4><ul><li><code class=syntax>WITH FILL</code> 修饰符 <code class=syntax>ORDER BY</code>. (继续 <a href=https://github.com/ClickHouse/ClickHouse/issues/5069 rel="external nofollow noreferrer" target=_blank>#5069</a>) <a href=https://github.com/ClickHouse/ClickHouse/pull/6610 rel="external nofollow noreferrer" target=_blank>#6610</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer" target=_blank>安东*波波夫</a>)</li><li><code class=syntax>WITH TIES</code> 修饰符 <code class=syntax>LIMIT</code>. (继续 <a href=https://github.com/ClickHouse/ClickHouse/issues/5069 rel="external nofollow noreferrer" target=_blank>#5069</a>) <a href=https://github.com/ClickHouse/ClickHouse/pull/6610 rel="external nofollow noreferrer" target=_blank>#6610</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer" target=_blank>安东*波波夫</a>)</li><li>解析无引号 <code class=syntax>NULL</code> 文字为NULL（如果设置 <code class=syntax>format_csv_unquoted_null_literal_as_null=1</code>). 如果此字段的数据类型不可为空，则使用默认值初始化null字段（如果设置 <code class=syntax>input_format_null_as_default=1</code>). <a href=https://github.com/ClickHouse/ClickHouse/issues/5990 rel="external nofollow noreferrer" target=_blank>#5990</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6055 rel="external nofollow noreferrer" target=_blank>#6055</a> (<a href=https://github.com/tavplubix rel="external nofollow noreferrer" target=_blank>tavplubix</a>)</li><li>支持表函数路径中的通配符 <code class=syntax>file</code> 和 <code class=syntax>hdfs</code>. 如果路径包含通配符，则表将为只读。 使用示例: <code class=syntax>select * from hdfs('hdfs://hdfs1:9000/some_dir/another_dir/*/file{0..9}{0..9}')</code> 和 <code class=syntax>select * from file('some_dir/{some_file,another_file,yet_another}.tsv', 'TSV', 'value UInt32')</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6092 rel="external nofollow noreferrer" target=_blank>#6092</a> (<a href=https://github.com/stavrolia rel="external nofollow noreferrer" target=_blank>Olga Khvostikova</a>)</li><li>新 <code class=syntax>system.metric_log</code> 表存储的值 <code class=syntax>system.events</code> 和 <code class=syntax>system.metrics</code> 具有指定的时间间隔。 <a href=https://github.com/ClickHouse/ClickHouse/issues/6363 rel="external nofollow noreferrer" target=_blank>#6363</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6467 rel="external nofollow noreferrer" target=_blank>#6467</a> (<a href=https://github.com/nikitamikhaylov rel="external nofollow noreferrer" target=_blank>尼基塔*米哈伊洛夫</a>) <a href=https://github.com/ClickHouse/ClickHouse/pull/6530 rel="external nofollow noreferrer" target=_blank>#6530</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>允许将ClickHouse文本日志写入 <code class=syntax>system.text_log</code> 桌子 <a href=https://github.com/ClickHouse/ClickHouse/issues/6037 rel="external nofollow noreferrer" target=_blank>#6037</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6103 rel="external nofollow noreferrer" target=_blank>#6103</a> (<a href=https://github.com/nikitamikhaylov rel="external nofollow noreferrer" target=_blank>尼基塔*米哈伊洛夫</a>) <a href=https://github.com/ClickHouse/ClickHouse/pull/6164 rel="external nofollow noreferrer" target=_blank>#6164</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>在堆栈跟踪中显示私有符号（这是通过解析ELF文件的符号表来完成的）。 如果存在调试信息，则在堆栈跟踪中添加有关文件和行号的信息。 使用程序中存在的索引符号加速符号名称查找。 增加了新的SQL函数的反省: <code class=syntax>demangle</code> 和 <code class=syntax>addressToLine</code>. 重命名函数 <code class=syntax>symbolizeAddress</code> 到 <code class=syntax>addressToSymbol</code> 为了一致性。 功能 <code class=syntax>addressToSymbol</code> 将返回错位的名称出于性能原因，你必须申请 <code class=syntax>demangle</code>. 添加设置 <code class=syntax>allow_introspection_functions</code> 默认情况下，这是关闭的。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6201 rel="external nofollow noreferrer" target=_blank>#6201</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>表函数 <code class=syntax>values</code> （名称不区分大小写）。 它允许从读取 <code class=syntax>VALUES</code> 建议的名单 <a href=https://github.com/ClickHouse/ClickHouse/issues/5984 rel="external nofollow noreferrer" target=_blank>#5984</a>. 示例: <code class=syntax>SELECT * FROM VALUES('a UInt64, s String', (1, 'one'), (2, 'two'), (3, 'three'))</code>. <a href=https://github.com/ClickHouse/ClickHouse/issues/6217 rel="external nofollow noreferrer" target=_blank>#6217</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6209 rel="external nofollow noreferrer" target=_blank>#6209</a> (<a href=https://github.com/dimarub2000 rel="external nofollow noreferrer" target=_blank>dimarub2000</a>)</li><li>增加了改变存储设置的功能。 语法: <code class=syntax>ALTER TABLE &lt;table&gt; MODIFY SETTING &lt;setting&gt; = &lt;value&gt;</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6366 rel="external nofollow noreferrer" target=_blank>#6366</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6669 rel="external nofollow noreferrer" target=_blank>#6669</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6685 rel="external nofollow noreferrer" target=_blank>#6685</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li><li>用于拆卸分离部件的支撑。 语法: <code class=syntax>ALTER TABLE &lt;table_name&gt; DROP DETACHED PART '&lt;part_id&gt;'</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6158 rel="external nofollow noreferrer" target=_blank>#6158</a> (<a href=https://github.com/tavplubix rel="external nofollow noreferrer" target=_blank>tavplubix</a>)</li><li>表约束。 允许将约束添加到将在插入时检查的表定义。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5273 rel="external nofollow noreferrer" target=_blank>#5273</a> (<a href=https://github.com/NanoBjorn rel="external nofollow noreferrer" target=_blank>格列布*诺维科夫</a>) <a href=https://github.com/ClickHouse/ClickHouse/pull/6652 rel="external nofollow noreferrer" target=_blank>#6652</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>支持级联实例化视图。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6324 rel="external nofollow noreferrer" target=_blank>#6324</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer" target=_blank>阿莫斯鸟</a>)</li><li>默认情况下，打开查询探查器以每秒对每个查询执行线程进行一次采样。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6283 rel="external nofollow noreferrer" target=_blank>#6283</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>输入格式 <code class=syntax>ORC</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6454 rel="external nofollow noreferrer" target=_blank>#6454</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6703 rel="external nofollow noreferrer" target=_blank>#6703</a> (<a href=https://github.com/akonyaev90 rel="external nofollow noreferrer" target=_blank>akonyaev90</a>)</li><li>增加了两个新功能: <code class=syntax>sigmoid</code> 和 <code class=syntax>tanh</code> （这对于机器学习应用程序非常有用）。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6254 rel="external nofollow noreferrer" target=_blank>#6254</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>功能 <code class=syntax>hasToken(haystack, token)</code>, <code class=syntax>hasTokenCaseInsensitive(haystack, token)</code> 检查给定的令牌是否在干草堆中。 Token是两个非字母数字ASCII字符（或干草堆的边界）之间的最大长度子串。 Token必须是常量字符串。 由tokenbf_v1索引专业化支持。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6596 rel="external nofollow noreferrer" target=_blank>#6596</a>, <a href=https://github.com/ClickHouse/ClickHouse/pull/6662 rel="external nofollow noreferrer" target=_blank>#6662</a> (<a href=https://github.com/Enmk rel="external nofollow noreferrer" target=_blank>瓦西里*内姆科夫</a>)</li><li>新功能 <code class=syntax>neighbor(value, offset[, default_value])</code>. 允许在一个数据块中的列中达到上一个/下一个值。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5925 rel="external nofollow noreferrer" target=_blank>#5925</a> (<a href=https://github.com/alex-krash rel="external nofollow noreferrer" target=_blank>Alex Krash</a>) <a href=https://github.com/ClickHouse/ClickHouse/commit/6685365ab8c5b74f9650492c88a012596eb1b0c6 rel="external nofollow noreferrer" target=_blank>6685365ab8c5b74f9650492c88a012596eb1b0c6</a> <a href=https://github.com/ClickHouse/ClickHouse/commit/341e2e4587a18065c2da1ca888c73389f48ce36c rel="external nofollow noreferrer" target=_blank>341e2e4587a18065c2da1ca888c73389f48ce36c</a> <a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>Alexey Milovidov</a></li><li>创建了一个函数 <code class=syntax>currentUser()</code>，返回授权用户的登录。 添加别名 <code class=syntax>user()</code> 对于与MySQL的兼容性。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6470 rel="external nofollow noreferrer" target=_blank>#6470</a> (<a href=https://github.com/alex-krash rel="external nofollow noreferrer" target=_blank>Alex Krash</a>)</li><li>新的聚合函数 <code class=syntax>quantilesExactInclusive</code> 和 <code class=syntax>quantilesExactExclusive</code> 这是在提出 <a href=https://github.com/ClickHouse/ClickHouse/issues/5885 rel="external nofollow noreferrer" target=_blank>#5885</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6477 rel="external nofollow noreferrer" target=_blank>#6477</a> (<a href=https://github.com/dimarub2000 rel="external nofollow noreferrer" target=_blank>dimarub2000</a>)</li><li>功能 <code class=syntax>bitmapRange(bitmap, range_begin, range_end)</code> 返回具有指定范围的新集（不包括 <code class=syntax>range_end</code>). <a href=https://github.com/ClickHouse/ClickHouse/pull/6314 rel="external nofollow noreferrer" target=_blank>#6314</a> (<a href=https://github.com/yuzhichang rel="external nofollow noreferrer" target=_blank>余志昌</a>)</li><li>功能 <code class=syntax>geohashesInBox(longitude_min, latitude_min, longitude_max, latitude_max, precision)</code> 它创建了一系列精确的长串geohash盒复盖提供的区域。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6127 rel="external nofollow noreferrer" target=_blank>#6127</a> (<a href=https://github.com/Enmk rel="external nofollow noreferrer" target=_blank>瓦西里*内姆科夫</a>)</li><li>实现对插入查询的支持 <code class=syntax>Kafka</code> 桌子 <a href=https://github.com/ClickHouse/ClickHouse/pull/6012 rel="external nofollow noreferrer" target=_blank>#6012</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>伊万</a>)</li><li>增加了对 <code class=syntax>_partition</code> 和 <code class=syntax>_timestamp</code> 虚拟列到Kafka引擎。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6400 rel="external nofollow noreferrer" target=_blank>#6400</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>伊万</a>)</li><li>可以从中删除敏感数据 <code class=syntax>query_log</code>，服务器日志，基于正则表达式的规则的进程列表。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5710 rel="external nofollow noreferrer" target=_blank>#5710</a> (<a href=https://github.com/filimonov rel="external nofollow noreferrer" target=_blank>filimonov</a>)</li></ul><h4 id=experimental-feature-2>实验特点<a class=headerlink href=../amp/#experimental-feature-2 title="Permanent link"> </a></h4><ul><li>输入和输出数据格式 <code class=syntax>Template</code>. 它允许为输入和输出指定自定义格式字符串。 <a href=https://github.com/ClickHouse/ClickHouse/issues/4354 rel="external nofollow noreferrer" target=_blank>#4354</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6727 rel="external nofollow noreferrer" target=_blank>#6727</a> (<a href=https://github.com/tavplubix rel="external nofollow noreferrer" target=_blank>tavplubix</a>)</li><li>执行 <code class=syntax>LIVE VIEW</code> 最初提出的表 <a href=https://github.com/ClickHouse/ClickHouse/pull/2898 rel="external nofollow noreferrer" target=_blank>#2898</a>，准备 <a href=https://github.com/ClickHouse/ClickHouse/issues/3925 rel="external nofollow noreferrer" target=_blank>#3925</a>，然后更新 <a href=https://github.com/ClickHouse/ClickHouse/issues/5541 rel="external nofollow noreferrer" target=_blank>#5541</a>. 看 <a href=https://github.com/ClickHouse/ClickHouse/issues/5541 rel="external nofollow noreferrer" target=_blank>#5541</a> 详细描述。 <a href=https://github.com/ClickHouse/ClickHouse/issues/5541 rel="external nofollow noreferrer" target=_blank>#5541</a> (<a href=https://github.com/vzakaznikov rel="external nofollow noreferrer" target=_blank>vzakaznikov</a>) <a href=https://github.com/ClickHouse/ClickHouse/pull/6425 rel="external nofollow noreferrer" target=_blank>#6425</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>尼古拉*科切托夫</a>) <a href=https://github.com/ClickHouse/ClickHouse/pull/6656 rel="external nofollow noreferrer" target=_blank>#6656</a> (<a href=https://github.com/vzakaznikov rel="external nofollow noreferrer" target=_blank>vzakaznikov</a>）请注意 <code class=syntax>LIVE VIEW</code> 功能可能会在下一个版本中删除。</li></ul><h4 id=bug-fix-8>错误修复<a class=headerlink href=../amp/#bug-fix-8 title="Permanent link"> </a></h4><ul><li>此版本还包含19.13和19.11的所有错误修复。</li><li>修复表有跳过索引和垂直合并发生时的分段错误。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6723 rel="external nofollow noreferrer" target=_blank>#6723</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li><li>使用非平凡的列默认值修复每列TTL。 以前在强制TTL合并的情况下 <code class=syntax>OPTIMIZE ... FINAL</code> 查询，过期的值被替换为类型默认值，而不是用户指定的列默认值。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6796 rel="external nofollow noreferrer" target=_blank>#6796</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer" target=_blank>安东*波波夫</a>)</li><li>修复kafka服务器正常重启时的消息重复问题。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6597 rel="external nofollow noreferrer" target=_blank>#6597</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>伊万</a>)</li><li>修正了读取Kafka消息时的无限循环。 根本不要暂停/恢复订阅消费者-否则在某些情况下可能会无限期暂停。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6354 rel="external nofollow noreferrer" target=_blank>#6354</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>伊万</a>)</li><li>修复 <code class=syntax>Key expression contains comparison between inconvertible types</code> 例外 <code class=syntax>bitmapContains</code> 功能。 <a href=https://github.com/ClickHouse/ClickHouse/issues/6136 rel="external nofollow noreferrer" target=_blank>#6136</a> <a href=https://github.com/ClickHouse/ClickHouse/issues/6146 rel="external nofollow noreferrer" target=_blank>#6146</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6156 rel="external nofollow noreferrer" target=_blank>#6156</a> (<a href=https://github.com/dimarub2000 rel="external nofollow noreferrer" target=_blank>dimarub2000</a>)</li><li>修复已启用的段错误 <code class=syntax>optimize_skip_unused_shards</code> 还丢失了分片钥匙 <a href=https://github.com/ClickHouse/ClickHouse/pull/6384 rel="external nofollow noreferrer" target=_blank>#6384</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer" target=_blank>安东*波波夫</a>)</li><li>修复了可能导致内存损坏的突变中的错误代码。 修复了读取地址的段错误 <code class=syntax>0x14c0</code> 这可能发生由于并发 <code class=syntax>DROP TABLE</code> 和 <code class=syntax>SELECT</code> 从 <code class=syntax>system.parts</code> 或 <code class=syntax>system.parts_columns</code>. 在准备突变查询时修复了竞争条件。 修复了由于 <code class=syntax>OPTIMIZE</code> 复制的表和并发修改操作，如改变。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6514 rel="external nofollow noreferrer" target=_blank>#6514</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>在MySQL界面中删除了额外的详细日志记录 <a href=https://github.com/ClickHouse/ClickHouse/pull/6389 rel="external nofollow noreferrer" target=_blank>#6389</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>返回解析布尔设置的能力 ‘true’ 和 ‘false’ 在配置文件中。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6278 rel="external nofollow noreferrer" target=_blank>#6278</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li><li>修复崩溃 <code class=syntax>quantile</code> 和 <code class=syntax>median</code> 功能结束 <code class=syntax>Nullable(Decimal128)</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6378 rel="external nofollow noreferrer" target=_blank>#6378</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li><li>修正了可能不完整的结果返回 <code class=syntax>SELECT</code> 查询与 <code class=syntax>WHERE</code> 主键上的条件包含转换为浮点类型。 它是由不正确的单调性检查引起的 <code class=syntax>toFloat</code> 功能。 <a href=https://github.com/ClickHouse/ClickHouse/issues/6248 rel="external nofollow noreferrer" target=_blank>#6248</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6374 rel="external nofollow noreferrer" target=_blank>#6374</a> (<a href=https://github.com/dimarub2000 rel="external nofollow noreferrer" target=_blank>dimarub2000</a>)</li><li>检查 <code class=syntax>max_expanded_ast_elements</code> 设置为突变。 明确突变后 <code class=syntax>TRUNCATE TABLE</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6205 rel="external nofollow noreferrer" target=_blank>#6205</a> (<a href=https://github.com/zhang2014 rel="external nofollow noreferrer" target=_blank>张冬</a>)</li><li>修复使用键列时的联接结果 <code class=syntax>join_use_nulls</code>. 附加空值而不是列默认值。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6249 rel="external nofollow noreferrer" target=_blank>#6249</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li><li>修正了跳过索引与垂直合并和改变。 修复 <code class=syntax>Bad size of marks file</code> 例外。 <a href=https://github.com/ClickHouse/ClickHouse/issues/6594 rel="external nofollow noreferrer" target=_blank>#6594</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6713 rel="external nofollow noreferrer" target=_blank>#6713</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li><li>修复罕见的崩溃 <code class=syntax>ALTER MODIFY COLUMN</code> 和垂直合并，当合并/改变的部分之一是空的（0行) <a href=https://github.com/ClickHouse/ClickHouse/issues/6746 rel="external nofollow noreferrer" target=_blank>#6746</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6780 rel="external nofollow noreferrer" target=_blank>#6780</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li><li>修正错误的转换 <code class=syntax>LowCardinality</code> 类型 <code class=syntax>AggregateFunctionFactory</code>. 这修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/6257 rel="external nofollow noreferrer" target=_blank>#6257</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6281 rel="external nofollow noreferrer" target=_blank>#6281</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>尼古拉*科切托夫</a>)</li><li>修复错误的行为和可能的段错误 <code class=syntax>topK</code> 和 <code class=syntax>topKWeighted</code> 聚合函数。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6404 rel="external nofollow noreferrer" target=_blank>#6404</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer" target=_blank>安东*波波夫</a>)</li><li>固定周围的不安全代码 <code class=syntax>getIdentifier</code> 功能。 <a href=https://github.com/ClickHouse/ClickHouse/issues/6401 rel="external nofollow noreferrer" target=_blank>#6401</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6409 rel="external nofollow noreferrer" target=_blank>#6409</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>在MySQL线协议（连接到ClickHouse的形式MySQL客户端时使用）修正了错误。 引起的堆缓冲区溢出 <code class=syntax>PacketPayloadWriteBuffer</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6212 rel="external nofollow noreferrer" target=_blank>#6212</a> (<a href=https://github.com/yurriy rel="external nofollow noreferrer" target=_blank>尤里*巴拉诺夫</a>)</li><li>固定内存泄漏 <code class=syntax>bitmapSubsetInRange</code> 功能。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6819 rel="external nofollow noreferrer" target=_blank>#6819</a> (<a href=https://github.com/yuzhichang rel="external nofollow noreferrer" target=_blank>余志昌</a>)</li><li>修复粒度变化后执行突变时的罕见错误。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6816 rel="external nofollow noreferrer" target=_blank>#6816</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li><li>默认情况下允许包含所有字段的protobuf消息。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6132 rel="external nofollow noreferrer" target=_blank>#6132</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer" target=_blank>维塔利*巴拉诺夫</a>)</li><li>解决错误 <code class=syntax>nullIf</code> 功能，当我们发送 <code class=syntax>NULL</code> 第二个参数的参数。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6446 rel="external nofollow noreferrer" target=_blank>#6446</a> (<a href=https://github.com/YiuRULE rel="external nofollow noreferrer" target=_blank>纪尧姆*塔瑟里</a>)</li><li>修正了错误的内存分配/解除分配在复杂的键高速缓存字典与字符串字段，导致无限的内存消耗罕见的错误（看起来像内存泄漏）。 当字符串大小为8（8，16，32等）开始的2的幂时，错误会重现。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6447 rel="external nofollow noreferrer" target=_blank>#6447</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li><li>修复了导致异常的小序列上的大猩猩编码 <code class=syntax>Cannot write after end of buffer</code>. <a href=https://github.com/ClickHouse/ClickHouse/issues/6398 rel="external nofollow noreferrer" target=_blank>#6398</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6444 rel="external nofollow noreferrer" target=_blank>#6444</a> (<a href=https://github.com/Enmk rel="external nofollow noreferrer" target=_blank>瓦西里*内姆科夫</a>)</li><li>允许在连接中使用不可为空的类型 <code class=syntax>join_use_nulls</code> 已启用。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6705 rel="external nofollow noreferrer" target=_blank>#6705</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li><li>禁用 <code class=syntax>Poco::AbstractConfiguration</code> 查询中的替换 <code class=syntax>clickhouse-client</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6706 rel="external nofollow noreferrer" target=_blank>#6706</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>避免死锁 <code class=syntax>REPLACE PARTITION</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6677 rel="external nofollow noreferrer" target=_blank>#6677</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>使用 <code class=syntax>arrayReduce</code> 对于不变的参数可能会导致段错误。 <a href=https://github.com/ClickHouse/ClickHouse/issues/6242 rel="external nofollow noreferrer" target=_blank>#6242</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6326 rel="external nofollow noreferrer" target=_blank>#6326</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>修复可能出现的不一致的部分，如果副本恢复后 <code class=syntax>DROP PARTITION</code>. <a href=https://github.com/ClickHouse/ClickHouse/issues/6522 rel="external nofollow noreferrer" target=_blank>#6522</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6523 rel="external nofollow noreferrer" target=_blank>#6523</a> (<a href=https://github.com/tavplubix rel="external nofollow noreferrer" target=_blank>tavplubix</a>)</li><li>固定挂起 <code class=syntax>JSONExtractRaw</code> 功能。 <a href=https://github.com/ClickHouse/ClickHouse/issues/6195 rel="external nofollow noreferrer" target=_blank>#6195</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6198 rel="external nofollow noreferrer" target=_blank>#6198</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>修正错误跳过索引序列化和聚合与自适应粒度。 <a href=https://github.com/ClickHouse/ClickHouse/issues/6594 rel="external nofollow noreferrer" target=_blank>#6594</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6748 rel="external nofollow noreferrer" target=_blank>#6748</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li><li>修复 <code class=syntax>WITH ROLLUP</code> 和 <code class=syntax>WITH CUBE</code> 修饰符 <code class=syntax>GROUP BY</code> 具有两级聚合。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6225 rel="external nofollow noreferrer" target=_blank>#6225</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer" target=_blank>安东*波波夫</a>)</li><li>修复编写具有自适应粒度的二级索引标记的错误。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6126 rel="external nofollow noreferrer" target=_blank>#6126</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li><li>修复服务器启动时的初始化顺序。 由于 <code class=syntax>StorageMergeTree::background_task_handle</code> 在初始化 <code class=syntax>startup()</code> 该 <code class=syntax>MergeTreeBlockOutputStream::write()</code> 可以尝试在初始化之前使用它。 只需检查它是否被初始化。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6080 rel="external nofollow noreferrer" target=_blank>#6080</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>伊万</a>)</li><li>从以前的读取操作中清除数据缓冲区，该操作完成时出现错误。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6026 rel="external nofollow noreferrer" target=_blank>#6026</a> (<a href=https://github.com/bopohaa rel="external nofollow noreferrer" target=_blank>尼古拉</a>)</li><li>修复为复制*MergeTree表创建新副本时启用自适应粒度的错误。 <a href=https://github.com/ClickHouse/ClickHouse/issues/6394 rel="external nofollow noreferrer" target=_blank>#6394</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6452 rel="external nofollow noreferrer" target=_blank>#6452</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li><li>修复了在服务器启动过程中发生异常的情况下可能发生的崩溃 <code class=syntax>libunwind</code> 在异常访问未初始化 <code class=syntax>ThreadStatus</code> 结构。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6456 rel="external nofollow noreferrer" target=_blank>#6456</a> (<a href=https://github.com/nikitamikhaylov rel="external nofollow noreferrer" target=_blank>尼基塔*米哈伊洛夫</a>)</li><li>修复崩溃 <code class=syntax>yandexConsistentHash</code> 功能。 通过模糊测试发现。 <a href=https://github.com/ClickHouse/ClickHouse/issues/6304 rel="external nofollow noreferrer" target=_blank>#6304</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6305 rel="external nofollow noreferrer" target=_blank>#6305</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>修复了服务器过载和全局线程池接近满时挂起查询的可能性。 这在具有大量分片（数百个）的集群上发生的机会更高，因为分布式查询为每个分片分配每个连接的线程。 例如，如果集群330分片正在处理30个并发分布式查询，则此问题可能再现。 此问题会影响从19.2开始的所有版本。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6301 rel="external nofollow noreferrer" target=_blank>#6301</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>的固定逻辑 <code class=syntax>arrayEnumerateUniqRanked</code> 功能。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6423 rel="external nofollow noreferrer" target=_blank>#6423</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>解码符号表时修复段错误。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6603 rel="external nofollow noreferrer" target=_blank>#6603</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer" target=_blank>阿莫斯鸟</a>)</li><li>在固定不相关的异常转换 <code class=syntax>LowCardinality(Nullable)</code> to not-Nullable column in case if it doesn't contain Nulls (e.g. in query like <code class=syntax>SELECT CAST(CAST('Hello' AS LowCardinality(Nullable(String))) AS String)</code>. <a href=https://github.com/ClickHouse/ClickHouse/issues/6094 rel="external nofollow noreferrer" target=_blank>#6094</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6119 rel="external nofollow noreferrer" target=_blank>#6119</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>尼古拉*科切托夫</a>)</li><li>删除描述中的额外引用 <code class=syntax>system.settings</code> 桌子 <a href=https://github.com/ClickHouse/ClickHouse/issues/6696 rel="external nofollow noreferrer" target=_blank>#6696</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6699 rel="external nofollow noreferrer" target=_blank>#6699</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>避免可能的死锁 <code class=syntax>TRUNCATE</code> 复制的表。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6695 rel="external nofollow noreferrer" target=_blank>#6695</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>修复读取排序键的顺序。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6189 rel="external nofollow noreferrer" target=_blank>#6189</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer" target=_blank>安东*波波夫</a>)</li><li>修复 <code class=syntax>ALTER TABLE ... UPDATE</code> 查询表 <code class=syntax>enable_mixed_granularity_parts=1</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6543 rel="external nofollow noreferrer" target=_blank>#6543</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li><li>修复错误打开 <a href=https://github.com/ClickHouse/ClickHouse/pull/4405 rel="external nofollow noreferrer" target=_blank>#4405</a> （自19.4.0）。 当我们不查询任何列时，在对MergeTree表的分布式表的查询中复制 (<code class=syntax>SELECT 1</code>). <a href=https://github.com/ClickHouse/ClickHouse/pull/6236 rel="external nofollow noreferrer" target=_blank>#6236</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li><li>在有符号类型的整数划分为无符号类型的固定溢出。 这种行为与C或C++语言（整数升级规则）完全相同，这可能令人惊讶。 请注意，当将大型有符号数字划分为大型无符号数字或反之亦然时，溢出仍然是可能的（但这种情况不太常见）。 所有服务器版本都存在此问题。 <a href=https://github.com/ClickHouse/ClickHouse/issues/6214 rel="external nofollow noreferrer" target=_blank>#6214</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6233 rel="external nofollow noreferrer" target=_blank>#6233</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>限制最大睡眠时间限制时 <code class=syntax>max_execution_speed</code> 或 <code class=syntax>max_execution_speed_bytes</code> 已设置。 修正错误，如 <code class=syntax>Estimated query execution time (inf seconds) is too long</code>. <a href=https://github.com/ClickHouse/ClickHouse/issues/5547 rel="external nofollow noreferrer" target=_blank>#5547</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6232 rel="external nofollow noreferrer" target=_blank>#6232</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>关于使用固定的问题 <code class=syntax>MATERIALIZED</code> 列和别名 <code class=syntax>MaterializedView</code>. <a href=https://github.com/ClickHouse/ClickHouse/issues/448 rel="external nofollow noreferrer" target=_blank>#448</a> <a href=https://github.com/ClickHouse/ClickHouse/issues/3484 rel="external nofollow noreferrer" target=_blank>#3484</a> <a href=https://github.com/ClickHouse/ClickHouse/issues/3450 rel="external nofollow noreferrer" target=_blank>#3450</a> <a href=https://github.com/ClickHouse/ClickHouse/issues/2878 rel="external nofollow noreferrer" target=_blank>#2878</a> <a href=https://github.com/ClickHouse/ClickHouse/issues/2285 rel="external nofollow noreferrer" target=_blank>#2285</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/3796 rel="external nofollow noreferrer" target=_blank>#3796</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer" target=_blank>阿莫斯鸟</a>) <a href=https://github.com/ClickHouse/ClickHouse/pull/6316 rel="external nofollow noreferrer" target=_blank>#6316</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>修复 <code class=syntax>FormatFactory</code> 未实现为处理器的输入流的行为。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6495 rel="external nofollow noreferrer" target=_blank>#6495</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>尼古拉*科切托夫</a>)</li><li>固定错字。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6631 rel="external nofollow noreferrer" target=_blank>#6631</a> (<a href=https://github.com/alexryndin rel="external nofollow noreferrer" target=_blank>Alex Ryndin</a>)</li><li>错字在错误消息（是-&gt;是）。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6839 rel="external nofollow noreferrer" target=_blank>#6839</a> (<a href=https://github.com/den-crane rel="external nofollow noreferrer" target=_blank>Denis Zhuravlev</a>)</li><li>修复了从字符串中解析列列表时的错误，如果类型包含逗号（这个问题与 <code class=syntax>File</code>, <code class=syntax>URL</code>, <code class=syntax>HDFS</code> 储存) <a href=https://github.com/ClickHouse/ClickHouse/issues/6217 rel="external nofollow noreferrer" target=_blank>#6217</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6209 rel="external nofollow noreferrer" target=_blank>#6209</a> (<a href=https://github.com/dimarub2000 rel="external nofollow noreferrer" target=_blank>dimarub2000</a>)</li></ul><h4 id=security-fix>安全修复<a class=headerlink href=../amp/#security-fix title="Permanent link"> </a></h4><ul><li>此版本还包含19.13和19.11的所有错误安全修复。</li><li>修复了由于SQL解析器中的堆栈溢出而导致服务器崩溃的制造查询的可能性。 修复了合并和分布式表，实例化视图和涉及子查询的行级安全性条件中堆栈溢出的可能性。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6433 rel="external nofollow noreferrer" target=_blank>#6433</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li></ul><h4 id=improvement-3>改进<a class=headerlink href=../amp/#improvement-3 title="Permanent link"> </a></h4><ul><li>三元逻辑的正确实现 <code class=syntax>AND/OR</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6048 rel="external nofollow noreferrer" target=_blank>#6048</a> (<a href=https://github.com/Akazz rel="external nofollow noreferrer" target=_blank>亚历山大*卡扎科夫</a>)</li><li>现在，值和行与过期的TTL将被删除后 <code class=syntax>OPTIMIZE ... FINAL</code> query from old parts without TTL infos or with outdated TTL infos, e.g. after <code class=syntax>ALTER ... MODIFY TTL</code> 查询。 添加查询 <code class=syntax>SYSTEM STOP/START TTL MERGES</code> 要禁止/允许使用TTL分配合并，并在所有合并中过滤过期值。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6274 rel="external nofollow noreferrer" target=_blank>#6274</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer" target=_blank>安东*波波夫</a>)</li><li>可以更改ClickHouse历史文件的位置为客户端使用 <code class=syntax>CLICKHOUSE_HISTORY_FILE</code> env <a href=https://github.com/ClickHouse/ClickHouse/pull/6840 rel="external nofollow noreferrer" target=_blank>#6840</a> (<a href=https://github.com/filimonov rel="external nofollow noreferrer" target=_blank>filimonov</a>)</li><li>删除 <code class=syntax>dry_run</code> 从标志 <code class=syntax>InterpreterSelectQuery</code>. … <a href=https://github.com/ClickHouse/ClickHouse/pull/6375 rel="external nofollow noreferrer" target=_blank>#6375</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>尼古拉*科切托夫</a>)</li><li>碌莽禄Support: <code class=syntax>ASOF JOIN</code> 与 <code class=syntax>ON</code> 科。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6211 rel="external nofollow noreferrer" target=_blank>#6211</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li><li>更好地支持用于突变和复制的跳过索引。 支持 <code class=syntax>MATERIALIZE/CLEAR INDEX ... IN PARTITION</code> 查询。 <code class=syntax>UPDATE x = x</code> 重新计算使用列的所有索引 <code class=syntax>x</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/5053 rel="external nofollow noreferrer" target=_blank>#5053</a> (<a href=https://github.com/nikvas0 rel="external nofollow noreferrer" target=_blank>尼基塔*瓦西列夫</a>)</li><li>允许 <code class=syntax>ATTACH</code> 实时视图（例如，在服务器启动时），无论 <code class=syntax>allow_experimental_live_view</code> 设置。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6754 rel="external nofollow noreferrer" target=_blank>#6754</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>对于由查询探查器收集的堆栈跟踪，不包括由查询探查器本身生成的堆栈帧。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6250 rel="external nofollow noreferrer" target=_blank>#6250</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>现在表函数 <code class=syntax>values</code>, <code class=syntax>file</code>, <code class=syntax>url</code>, <code class=syntax>hdfs</code> 支持别名列。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6255 rel="external nofollow noreferrer" target=_blank>#6255</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>如果抛出异常 <code class=syntax>config.d</code> 文件没有相应的根元素作为配置文件。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6123 rel="external nofollow noreferrer" target=_blank>#6123</a> (<a href=https://github.com/dimarub2000 rel="external nofollow noreferrer" target=_blank>dimarub2000</a>)</li><li>在异常消息中打印额外的信息 <code class=syntax>no space left on device</code>. <a href=https://github.com/ClickHouse/ClickHouse/issues/6182 rel="external nofollow noreferrer" target=_blank>#6182</a>, <a href=https://github.com/ClickHouse/ClickHouse/issues/6252 rel="external nofollow noreferrer" target=_blank>#6252</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6352 rel="external nofollow noreferrer" target=_blank>#6352</a> (<a href=https://github.com/tavplubix rel="external nofollow noreferrer" target=_blank>tavplubix</a>)</li><li>当确定一个碎片 <code class=syntax>Distributed</code> 要被读取查询复盖的表（用于 <code class=syntax>optimize_skip_unused_shards</code> =1）ClickHouse现在从两个检查条件 <code class=syntax>prewhere</code> 和 <code class=syntax>where</code> select语句的子句。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6521 rel="external nofollow noreferrer" target=_blank>#6521</a> (<a href=https://github.com/Akazz rel="external nofollow noreferrer" target=_blank>亚历山大*卡扎科夫</a>)</li><li>已启用 <code class=syntax>SIMDJSON</code> 对于没有AVX2，但与SSE4.2和PCLMUL指令集的机器。 <a href=https://github.com/ClickHouse/ClickHouse/issues/6285 rel="external nofollow noreferrer" target=_blank>#6285</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6320 rel="external nofollow noreferrer" target=_blank>#6320</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>ClickHouse可以在文件系统上工作，而无需 <code class=syntax>O_DIRECT</code> 支持（如ZFS和BtrFS），无需额外的调整。 <a href=https://github.com/ClickHouse/ClickHouse/issues/4449 rel="external nofollow noreferrer" target=_blank>#4449</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6730 rel="external nofollow noreferrer" target=_blank>#6730</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>支持最终子查询的下推谓词。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6120 rel="external nofollow noreferrer" target=_blank>#6120</a> (<a href=https://github.com/TCeason rel="external nofollow noreferrer" target=_blank>TCeason</a>) <a href=https://github.com/ClickHouse/ClickHouse/pull/6162 rel="external nofollow noreferrer" target=_blank>#6162</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>更好 <code class=syntax>JOIN ON</code> 密钥提取 <a href=https://github.com/ClickHouse/ClickHouse/pull/6131 rel="external nofollow noreferrer" target=_blank>#6131</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li><li>Upated <code class=syntax>SIMDJSON</code>. <a href=https://github.com/ClickHouse/ClickHouse/issues/6285 rel="external nofollow noreferrer" target=_blank>#6285</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6306 rel="external nofollow noreferrer" target=_blank>#6306</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>优化最小列的选择 <code class=syntax>SELECT count()</code> 查询。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6344 rel="external nofollow noreferrer" target=_blank>#6344</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer" target=_blank>阿莫斯鸟</a>)</li><li>已添加 <code class=syntax>strict</code> 参数in <code class=syntax>windowFunnel()</code>. 当 <code class=syntax>strict</code> 设置，该 <code class=syntax>windowFunnel()</code> 仅对唯一值应用条件。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6548 rel="external nofollow noreferrer" target=_blank>#6548</a> (<a href=https://github.com/achimbab rel="external nofollow noreferrer" target=_blank>achimbab</a>)</li><li>更安全的界面 <code class=syntax>mysqlxx::Pool</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6150 rel="external nofollow noreferrer" target=_blank>#6150</a> (<a href=https://github.com/avasiliev rel="external nofollow noreferrer" target=_blank>avasiliev</a>)</li><li>执行时选项行大小 <code class=syntax>--help</code> 选项现在与终端大小对应。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6590 rel="external nofollow noreferrer" target=_blank>#6590</a> (<a href=https://github.com/dimarub2000 rel="external nofollow noreferrer" target=_blank>dimarub2000</a>)</li><li>禁用 “read in order” 优化无键的聚合。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6599 rel="external nofollow noreferrer" target=_blank>#6599</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer" target=_blank>安东*波波夫</a>)</li><li>Http状态代码 <code class=syntax>INCORRECT_DATA</code> 和 <code class=syntax>TYPE_MISMATCH</code> 错误代码已从默认值更改 <code class=syntax>500 Internal Server Error</code> 到 <code class=syntax>400 Bad Request</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6271 rel="external nofollow noreferrer" target=_blank>#6271</a> (<a href=https://github.com/a-rodin rel="external nofollow noreferrer" target=_blank>亚历山大*罗丹</a>)</li><li>从移动连接对象 <code class=syntax>ExpressionAction</code> 成 <code class=syntax>AnalyzedJoin</code>. <code class=syntax>ExpressionAnalyzer</code> 和 <code class=syntax>ExpressionAction</code> 不知道 <code class=syntax>Join</code> 不再上课了 它的逻辑被隐藏 <code class=syntax>AnalyzedJoin</code> 伊菲斯 <a href=https://github.com/ClickHouse/ClickHouse/pull/6801 rel="external nofollow noreferrer" target=_blank>#6801</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li><li>修复了当其中一个分片是localhost但查询通过网络连接发送时可能出现的分布式查询死锁。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6759 rel="external nofollow noreferrer" target=_blank>#6759</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>更改多个表的语义 <code class=syntax>RENAME</code> 为了避免可能的死锁。 <a href=https://github.com/ClickHouse/ClickHouse/issues/6757 rel="external nofollow noreferrer" target=_blank>#6757</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6756 rel="external nofollow noreferrer" target=_blank>#6756</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>重写MySQL兼容性服务器以防止在内存中加载完整的数据包有效负载。 每个连接的内存消耗减少到大约 <code class=syntax>2 * DBMS_DEFAULT_BUFFER_SIZE</code> （读/写缓冲区）。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5811 rel="external nofollow noreferrer" target=_blank>#5811</a> (<a href=https://github.com/yurriy rel="external nofollow noreferrer" target=_blank>尤里*巴拉诺夫</a>)</li><li>将AST别名解释逻辑移出不必了解查询语义的解析器。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6108 rel="external nofollow noreferrer" target=_blank>#6108</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li><li>稍微更安全的解析 <code class=syntax>NamesAndTypesList</code>. <a href=https://github.com/ClickHouse/ClickHouse/issues/6408 rel="external nofollow noreferrer" target=_blank>#6408</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6410 rel="external nofollow noreferrer" target=_blank>#6410</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li><code class=syntax>clickhouse-copier</code>:允许使用 <code class=syntax>where_condition</code> 从配置 <code class=syntax>partition_key</code> 查询中用于检查分区存在的别名（以前它仅用于读取数据查询）。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6577 rel="external nofollow noreferrer" target=_blank>#6577</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li><li>在添加可选的消息参数 <code class=syntax>throwIf</code>. (<a href=https://github.com/ClickHouse/ClickHouse/issues/5772 rel="external nofollow noreferrer" target=_blank>#5772</a>) <a href=https://github.com/ClickHouse/ClickHouse/pull/6329 rel="external nofollow noreferrer" target=_blank>#6329</a> (<a href=https://github.com/Vdimir rel="external nofollow noreferrer" target=_blank>Vdimir</a>)</li><li>在发送插入数据时，服务器异常也正在客户端中处理。 <a href=https://github.com/ClickHouse/ClickHouse/issues/5891 rel="external nofollow noreferrer" target=_blank>#5891</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6711 rel="external nofollow noreferrer" target=_blank>#6711</a> (<a href=https://github.com/dimarub2000 rel="external nofollow noreferrer" target=_blank>dimarub2000</a>)</li><li>添加了指标 <code class=syntax>DistributedFilesToInsert</code> 这显示了文件系统中选择通过分布式表发送到远程服务器的文件总数。 该数字在所有分片之间相加。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6600 rel="external nofollow noreferrer" target=_blank>#6600</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>将大部分连接准备逻辑从 <code class=syntax>ExpressionAction/ExpressionAnalyzer</code> 到 <code class=syntax>AnalyzedJoin</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6785 rel="external nofollow noreferrer" target=_blank>#6785</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li><li>修复曾 <a href=https://clickhouse-test-reports.s3.yandex.net/6399/c1c1d1daa98e199e620766f1bd06a5921050a00d/functional_stateful_tests_(thread).html rel="external nofollow noreferrer" target=_blank>警告</a> ‘lock-order-inversion’. <a href=https://github.com/ClickHouse/ClickHouse/pull/6740 rel="external nofollow noreferrer" target=_blank>#6740</a> (<a href=https://github.com/Enmk rel="external nofollow noreferrer" target=_blank>瓦西里*内姆科夫</a>)</li><li>关于缺乏Linux功能的更好的信息消息。 记录致命错误 “fatal” 水平，这将使它更容易找到 <code class=syntax>system.text_log</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6441 rel="external nofollow noreferrer" target=_blank>#6441</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>当启用转储临时数据到磁盘，以限制内存使用期间 <code class=syntax>GROUP BY</code>, <code class=syntax>ORDER BY</code>，它没有检查可用磁盘空间。 修复程序添加新设置 <code class=syntax>min_free_disk_space</code>，当可用磁盘空间小于阈值时，查询将停止并抛出 <code class=syntax>ErrorCodes::NOT_ENOUGH_SPACE</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6678 rel="external nofollow noreferrer" target=_blank>#6678</a> (<a href=https://github.com/weiqxu rel="external nofollow noreferrer" target=_blank>徐伟清</a>) <a href=https://github.com/ClickHouse/ClickHouse/pull/6691 rel="external nofollow noreferrer" target=_blank>#6691</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>通过线程删除递归rwlock。 这是没有意义的，因为线程在查询之间重用。 <code class=syntax>SELECT</code> 查询可以在一个线程中获取锁，从另一个线程持有锁并从第一个线程退出。 在同一时间，第一个线程可以通过重复使用 <code class=syntax>DROP</code> 查询。 这将导致虚假 “Attempt to acquire exclusive lock recursively” 消息 <a href=https://github.com/ClickHouse/ClickHouse/pull/6771 rel="external nofollow noreferrer" target=_blank>#6771</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>斯普利特 <code class=syntax>ExpressionAnalyzer.appendJoin()</code>. 准备一个地方 <code class=syntax>ExpressionAnalyzer</code> 为 <code class=syntax>MergeJoin</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6524 rel="external nofollow noreferrer" target=_blank>#6524</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li><li>已添加 <code class=syntax>mysql_native_password</code> mysql兼容性服务器的身份验证插件。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6194 rel="external nofollow noreferrer" target=_blank>#6194</a> (<a href=https://github.com/yurriy rel="external nofollow noreferrer" target=_blank>尤里*巴拉诺夫</a>)</li><li>更少的数量 <code class=syntax>clock_gettime</code> 调用;调试/发布之间的固定ABI兼容性 <code class=syntax>Allocator</code> （微不足道的问题）。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6197 rel="external nofollow noreferrer" target=_blank>#6197</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>移动 <code class=syntax>collectUsedColumns</code> 从 <code class=syntax>ExpressionAnalyzer</code> 到 <code class=syntax>SyntaxAnalyzer</code>. <code class=syntax>SyntaxAnalyzer</code> 赂眉露&gt;&gt; <code class=syntax>required_source_columns</code> 现在本身。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6416 rel="external nofollow noreferrer" target=_blank>#6416</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li><li>添加设置 <code class=syntax>joined_subquery_requires_alias</code> 要求子选择和表函数的别名 <code class=syntax>FROM</code> that more than one table is present (i.e. queries with JOINs). <a href=https://github.com/ClickHouse/ClickHouse/pull/6733 rel="external nofollow noreferrer" target=_blank>#6733</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li><li>提取物 <code class=syntax>GetAggregatesVisitor</code> 从类 <code class=syntax>ExpressionAnalyzer</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6458 rel="external nofollow noreferrer" target=_blank>#6458</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li><li><code class=syntax>system.query_log</code>:更改数据类型 <code class=syntax>type</code> 列到 <code class=syntax>Enum</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6265 rel="external nofollow noreferrer" target=_blank>#6265</a> (<a href=https://github.com/nikitamikhaylov rel="external nofollow noreferrer" target=_blank>尼基塔*米哈伊洛夫</a>)</li><li>静态链接 <code class=syntax>sha256_password</code> 身份验证插件。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6512 rel="external nofollow noreferrer" target=_blank>#6512</a> (<a href=https://github.com/yurriy rel="external nofollow noreferrer" target=_blank>尤里*巴拉诺夫</a>)</li><li>避免对设置的额外依赖 <code class=syntax>compile</code> 去工作 在以前的版本中，用户可能会得到如下错误 <code class=syntax>cannot open crti.o</code>, <code class=syntax>unable to find library -lc</code> 等。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6309 rel="external nofollow noreferrer" target=_blank>#6309</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>对可能来自恶意副本的输入进行更多验证。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6303 rel="external nofollow noreferrer" target=_blank>#6303</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>现在 <code class=syntax>clickhouse-obfuscator</code> 文件是可用的 <code class=syntax>clickhouse-client</code> 包。 在以前的版本中，它可以作为 <code class=syntax>clickhouse obfuscator</code> （带空格）。 <a href=https://github.com/ClickHouse/ClickHouse/issues/5816 rel="external nofollow noreferrer" target=_blank>#5816</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6609 rel="external nofollow noreferrer" target=_blank>#6609</a> (<a href=https://github.com/dimarub2000 rel="external nofollow noreferrer" target=_blank>dimarub2000</a>)</li><li>当我们至少有两个查询以不同的顺序读取至少两个表，另一个查询对其中一个表执行DDL操作时，修复了死锁。 修复了另一个非常罕见的死锁。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6764 rel="external nofollow noreferrer" target=_blank>#6764</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>已添加 <code class=syntax>os_thread_ids</code> 列到 <code class=syntax>system.processes</code> 和 <code class=syntax>system.query_log</code> 为了更好的调试可能性。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6763 rel="external nofollow noreferrer" target=_blank>#6763</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>当发生PHP mysqlnd扩展错误的解决方法 <code class=syntax>sha256_password</code> 用作默认身份验证插件（在描述 <a href=https://github.com/ClickHouse/ClickHouse/issues/6031 rel="external nofollow noreferrer" target=_blank>#6031</a>). <a href=https://github.com/ClickHouse/ClickHouse/pull/6113 rel="external nofollow noreferrer" target=_blank>#6113</a> (<a href=https://github.com/yurriy rel="external nofollow noreferrer" target=_blank>尤里*巴拉诺夫</a>)</li><li>删除不需要的地方与更改为空列。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6693 rel="external nofollow noreferrer" target=_blank>#6693</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li><li>设置默认值 <code class=syntax>queue_max_wait_ms</code> 为零，因为当前值（五秒）是没有意义的。 在极少数情况下，此设置有任何用途。 添加设置 <code class=syntax>replace_running_query_max_wait_ms</code>, <code class=syntax>kafka_max_wait_ms</code> 和 <code class=syntax>connection_pool_max_wait_ms</code> 用于消除歧义。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6692 rel="external nofollow noreferrer" target=_blank>#6692</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>提取物 <code class=syntax>SelectQueryExpressionAnalyzer</code> 从 <code class=syntax>ExpressionAnalyzer</code>. 保留最后一个用于非select查询。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6499 rel="external nofollow noreferrer" target=_blank>#6499</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li><li>删除重复输入和输出格式。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6239 rel="external nofollow noreferrer" target=_blank>#6239</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>尼古拉*科切托夫</a>)</li><li>允许用户复盖 <code class=syntax>poll_interval</code> 和 <code class=syntax>idle_connection_timeout</code> 连接设置。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6230 rel="external nofollow noreferrer" target=_blank>#6230</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li><code class=syntax>MergeTree</code> 现在有一个额外的选项 <code class=syntax>ttl_only_drop_parts</code> （默认情况下禁用），以避免部分的部分修剪，以便在部分中的所有行都过期时完全删除它们。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6191 rel="external nofollow noreferrer" target=_blank>#6191</a> (<a href=https://github.com/svladykin rel="external nofollow noreferrer" target=_blank>塞尔吉*弗拉季金</a>)</li><li>类型检查set索引函数。 如果函数类型错误，则引发异常。 这修复了模糊测试与UBSan。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6511 rel="external nofollow noreferrer" target=_blank>#6511</a> (<a href=https://github.com/nikvas0 rel="external nofollow noreferrer" target=_blank>尼基塔*瓦西列夫</a>)</li></ul><h4 id=performance-improvement-2>性能改进<a class=headerlink href=../amp/#performance-improvement-2 title="Permanent link"> </a></h4><ul><li>优化查询 <code class=syntax>ORDER BY expressions</code> 条款，其中 <code class=syntax>expressions</code> 有重合前缀与排序键 <code class=syntax>MergeTree</code> 桌子 此优化由以下方式控制 <code class=syntax>optimize_read_in_order</code> 设置。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6054 rel="external nofollow noreferrer" target=_blank>#6054</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6629 rel="external nofollow noreferrer" target=_blank>#6629</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer" target=_blank>安东*波波夫</a>)</li><li>允许在零件装载和拆卸期间使用多个螺纹。 <a href=https://github.com/ClickHouse/ClickHouse/issues/6372 rel="external nofollow noreferrer" target=_blank>#6372</a> <a href=https://github.com/ClickHouse/ClickHouse/issues/6074 rel="external nofollow noreferrer" target=_blank>#6074</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6438 rel="external nofollow noreferrer" target=_blank>#6438</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>实现了更新聚合函数状态的批处理变体。 这可能导致性能优势。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6435 rel="external nofollow noreferrer" target=_blank>#6435</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>使用 <code class=syntax>FastOps</code> 函数库 <code class=syntax>exp</code>, <code class=syntax>log</code>, <code class=syntax>sigmoid</code>, <code class=syntax>tanh</code>. FastOps是迈克尔*帕拉欣（Yandex的首席技术官）的快速矢量数学库。 改进的性能 <code class=syntax>exp</code> 和 <code class=syntax>log</code> 功能超过6倍。 功能 <code class=syntax>exp</code> 和 <code class=syntax>log</code> 从 <code class=syntax>Float32</code> 参数将返回 <code class=syntax>Float32</code> （在以前的版本中，他们总是返回 <code class=syntax>Float64</code>). 现在 <code class=syntax>exp(nan)</code> 可能会回来 <code class=syntax>inf</code>. 的结果 <code class=syntax>exp</code> 和 <code class=syntax>log</code> 函数可能不是最接近机器可代表的数字到真正的答案。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6254 rel="external nofollow noreferrer" target=_blank>#6254</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>）使用Danila Kutenin变体使fastops工作 <a href=https://github.com/ClickHouse/ClickHouse/pull/6317 rel="external nofollow noreferrer" target=_blank>#6317</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>禁用连续密钥优化 <code class=syntax>UInt8/16</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6298 rel="external nofollow noreferrer" target=_blank>#6298</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6701 rel="external nofollow noreferrer" target=_blank>#6701</a> (<a href=https://github.com/akuzm rel="external nofollow noreferrer" target=_blank>akuzm</a>)</li><li>改进的性能 <code class=syntax>simdjson</code> 库通过摆脱动态分配 <code class=syntax>ParsedJson::Iterator</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6479 rel="external nofollow noreferrer" target=_blank>#6479</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer" target=_blank>维塔利*巴拉诺夫</a>)</li><li>预故障页分配内存时 <code class=syntax>mmap()</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6667 rel="external nofollow noreferrer" target=_blank>#6667</a> (<a href=https://github.com/akuzm rel="external nofollow noreferrer" target=_blank>akuzm</a>)</li><li>修复性能错误 <code class=syntax>Decimal</code> 比较。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6380 rel="external nofollow noreferrer" target=_blank>#6380</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li></ul><h4 id=buildtestingpackaging-improvement-4>构建/测试/包装改进<a class=headerlink href=../amp/#buildtestingpackaging-improvement-4 title="Permanent link"> </a></h4><ul><li>删除编译器（运行时模板实例化），因为我们已经赢得了它的性能。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6646 rel="external nofollow noreferrer" target=_blank>#6646</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>增加了性能测试，以显示gcc-9以更隔离的方式性能下降。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6302 rel="external nofollow noreferrer" target=_blank>#6302</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>添加表功能 <code class=syntax>numbers_mt</code>，这是多线程版本 <code class=syntax>numbers</code>. 使用哈希函数更新性能测试。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6554 rel="external nofollow noreferrer" target=_blank>#6554</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>尼古拉*科切托夫</a>)</li><li>比较模式 <code class=syntax>clickhouse-benchmark</code> <a href=https://github.com/ClickHouse/ClickHouse/issues/6220 rel="external nofollow noreferrer" target=_blank>#6220</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6343 rel="external nofollow noreferrer" target=_blank>#6343</a> (<a href=https://github.com/dimarub2000 rel="external nofollow noreferrer" target=_blank>dimarub2000</a>)</li><li>尽最大努力打印堆栈痕迹。 还添加了 <code class=syntax>SIGPROF</code> 作为调试信号，打印正在运行的线程的堆栈跟踪。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6529 rel="external nofollow noreferrer" target=_blank>#6529</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>每个函数都在自己的文件中，第10部分。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6321 rel="external nofollow noreferrer" target=_blank>#6321</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>删除两倍常量 <code class=syntax>TABLE_IS_READ_ONLY</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6566 rel="external nofollow noreferrer" target=_blank>#6566</a> (<a href=https://github.com/filimonov rel="external nofollow noreferrer" target=_blank>filimonov</a>)</li><li>格式化更改 <code class=syntax>StringHashMap</code> PR <a href=https://github.com/ClickHouse/ClickHouse/issues/5417 rel="external nofollow noreferrer" target=_blank>#5417</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6700 rel="external nofollow noreferrer" target=_blank>#6700</a> (<a href=https://github.com/akuzm rel="external nofollow noreferrer" target=_blank>akuzm</a>)</li><li>更好的联接创建子查询 <code class=syntax>ExpressionAnalyzer</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6824 rel="external nofollow noreferrer" target=_blank>#6824</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li><li>删除冗余条件（由PVS Studio找到）。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6775 rel="external nofollow noreferrer" target=_blank>#6775</a> (<a href=https://github.com/akuzm rel="external nofollow noreferrer" target=_blank>akuzm</a>)</li><li>分隔散列表接口 <code class=syntax>ReverseIndex</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6672 rel="external nofollow noreferrer" target=_blank>#6672</a> (<a href=https://github.com/akuzm rel="external nofollow noreferrer" target=_blank>akuzm</a>)</li><li>重构设置。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6689 rel="external nofollow noreferrer" target=_blank>#6689</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li><li>添加注释 <code class=syntax>set</code> 索引函数。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6319 rel="external nofollow noreferrer" target=_blank>#6319</a> (<a href=https://github.com/nikvas0 rel="external nofollow noreferrer" target=_blank>尼基塔*瓦西列夫</a>)</li><li>在Linux上的调试版本中增加OOM分数。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6152 rel="external nofollow noreferrer" target=_blank>#6152</a> (<a href=https://github.com/akuzm rel="external nofollow noreferrer" target=_blank>akuzm</a>)</li><li>HDFS HA现在在调试版本中工作。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6650 rel="external nofollow noreferrer" target=_blank>#6650</a> (<a href=https://github.com/weiqxu rel="external nofollow noreferrer" target=_blank>徐伟清</a>)</li><li>添加了一个测试 <code class=syntax>transform_query_for_external_database</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6388 rel="external nofollow noreferrer" target=_blank>#6388</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>为Kafka表添加多个实例化视图的测试。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6509 rel="external nofollow noreferrer" target=_blank>#6509</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>伊万</a>)</li><li>制定一个更好的构建计划。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6500 rel="external nofollow noreferrer" target=_blank>#6500</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>伊万</a>)</li><li>固定 <code class=syntax>test_external_dictionaries</code> 集成的情况下，它是在非root用户下执行。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6507 rel="external nofollow noreferrer" target=_blank>#6507</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>尼古拉*科切托夫</a>)</li><li>当写入的数据包的总大小超过 <code class=syntax>DBMS_DEFAULT_BUFFER_SIZE</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6204 rel="external nofollow noreferrer" target=_blank>#6204</a> (<a href=https://github.com/yurriy rel="external nofollow noreferrer" target=_blank>尤里*巴拉诺夫</a>)</li><li>增加了一个测试 <code class=syntax>RENAME</code> 表竞争条件 <a href=https://github.com/ClickHouse/ClickHouse/pull/6752 rel="external nofollow noreferrer" target=_blank>#6752</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>避免在设置数据竞赛 <code class=syntax>KILL QUERY</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6753 rel="external nofollow noreferrer" target=_blank>#6753</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>通过缓存字典添加处理错误的集成测试。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6755 rel="external nofollow noreferrer" target=_blank>#6755</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer" target=_blank>维塔利*巴拉诺夫</a>)</li><li>在Mac OS上禁用ELF对象文件的解析，因为这是没有意义的。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6578 rel="external nofollow noreferrer" target=_blank>#6578</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>尝试使更新日志生成器更好。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6327 rel="external nofollow noreferrer" target=_blank>#6327</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>添加 <code class=syntax>-Wshadow</code> 切换到海湾合作委员会。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6325 rel="external nofollow noreferrer" target=_blank>#6325</a> (<a href=https://github.com/kreuzerkrieg rel="external nofollow noreferrer" target=_blank>kreuzerkrieg</a>)</li><li>删除过时的代码 <code class=syntax>mimalloc</code> 支持。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6715 rel="external nofollow noreferrer" target=_blank>#6715</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li><code class=syntax>zlib-ng</code> 确定x86功能并将此信息保存到全局变量。 这是在defalteInit调用中完成的，它可以由不同的线程同时进行。 为了避免多线程写入，请在库启动时执行此操作。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6141 rel="external nofollow noreferrer" target=_blank>#6141</a> (<a href=https://github.com/akuzm rel="external nofollow noreferrer" target=_blank>akuzm</a>)</li><li>回归测试一个错误，在连接这是固定的 <a href=https://github.com/ClickHouse/ClickHouse/issues/5192 rel="external nofollow noreferrer" target=_blank>#5192</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6147 rel="external nofollow noreferrer" target=_blank>#6147</a> (<a href=https://github.com/theruziev rel="external nofollow noreferrer" target=_blank>Bakhtiyor Ruziev</a>)</li><li>修正MSan报告。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6144 rel="external nofollow noreferrer" target=_blank>#6144</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>修复扑ttl测试。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6782 rel="external nofollow noreferrer" target=_blank>#6782</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer" target=_blank>安东*波波夫</a>)</li><li>修正了虚假数据竞赛 <code class=syntax>MergeTreeDataPart::is_frozen</code> 场。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6583 rel="external nofollow noreferrer" target=_blank>#6583</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>修正了模糊测试中的超时。 在以前的版本中，它设法在查询中找到虚假挂断 <code class=syntax>SELECT * FROM numbers_mt(gccMurmurHash(''))</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6582 rel="external nofollow noreferrer" target=_blank>#6582</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>添加了调试检查 <code class=syntax>static_cast</code> 列。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6581 rel="external nofollow noreferrer" target=_blank>#6581</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>在官方RPM软件包中支持Oracle Linux。 <a href=https://github.com/ClickHouse/ClickHouse/issues/6356 rel="external nofollow noreferrer" target=_blank>#6356</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6585 rel="external nofollow noreferrer" target=_blank>#6585</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>从更改json perftests <code class=syntax>once</code> 到 <code class=syntax>loop</code> 类型。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6536 rel="external nofollow noreferrer" target=_blank>#6536</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>尼古拉*科切托夫</a>)</li><li><code class=syntax>odbc-bridge.cpp</code> 定义 <code class=syntax>main()</code> 所以它不应该被包括在 <code class=syntax>clickhouse-lib</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6538 rel="external nofollow noreferrer" target=_blank>#6538</a> (<a href=https://github.com/orivej rel="external nofollow noreferrer" target=_blank>Origej Desh</a>)</li><li>测试碰撞 <code class=syntax>FULL|RIGHT JOIN</code> 右表的键中有空值。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6362 rel="external nofollow noreferrer" target=_blank>#6362</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li><li>为了以防万一，增加了对别名扩展限制的测试。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6442 rel="external nofollow noreferrer" target=_blank>#6442</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>从切换 <code class=syntax>boost::filesystem</code> 到 <code class=syntax>std::filesystem</code> 在适当的情况下。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6253 rel="external nofollow noreferrer" target=_blank>#6253</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6385 rel="external nofollow noreferrer" target=_blank>#6385</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>将RPM包添加到网站。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6251 rel="external nofollow noreferrer" target=_blank>#6251</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>为固定添加测试 <code class=syntax>Unknown identifier</code> 例外 <code class=syntax>IN</code> 科。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6708 rel="external nofollow noreferrer" target=_blank>#6708</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li><li>简化操作 <code class=syntax>shared_ptr_helper</code> 因为人们面临困难理解它。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6675 rel="external nofollow noreferrer" target=_blank>#6675</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>增加了固定大猩猩和DoubleDelta编解码器的性能测试。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6179 rel="external nofollow noreferrer" target=_blank>#6179</a> (<a href=https://github.com/Enmk rel="external nofollow noreferrer" target=_blank>瓦西里*内姆科夫</a>)</li><li>拆分集成测试 <code class=syntax>test_dictionaries</code> 分成四个单独的测试。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6776 rel="external nofollow noreferrer" target=_blank>#6776</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer" target=_blank>维塔利*巴拉诺夫</a>)</li><li>修复PVS-Studio中的警告 <code class=syntax>PipelineExecutor</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6777 rel="external nofollow noreferrer" target=_blank>#6777</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>尼古拉*科切托夫</a>)</li><li>允许使用 <code class=syntax>library</code> 与ASan字典源. <a href=https://github.com/ClickHouse/ClickHouse/pull/6482 rel="external nofollow noreferrer" target=_blank>#6482</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>增加了从Pr列表生成更新日志的选项。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6350 rel="external nofollow noreferrer" target=_blank>#6350</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>锁定 <code class=syntax>TinyLog</code> 读取时存储。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6226 rel="external nofollow noreferrer" target=_blank>#6226</a> (<a href=https://github.com/akuzm rel="external nofollow noreferrer" target=_blank>akuzm</a>)</li><li>检查CI中损坏的符号链接。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6634 rel="external nofollow noreferrer" target=_blank>#6634</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>增加超时时间 “stack overflow” 测试，因为它可能需要很长的时间在调试构建。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6637 rel="external nofollow noreferrer" target=_blank>#6637</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>添加了双空格检查。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6643 rel="external nofollow noreferrer" target=_blank>#6643</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>修复 <code class=syntax>new/delete</code> 使用消毒剂构建时的内存跟踪。 跟踪不清楚。 它只防止测试中的内存限制异常。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6450 rel="external nofollow noreferrer" target=_blank>#6450</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li><li>启用链接时对未定义符号的检查。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6453 rel="external nofollow noreferrer" target=_blank>#6453</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>伊万</a>)</li><li>避免重建 <code class=syntax>hyperscan</code> 每天 <a href=https://github.com/ClickHouse/ClickHouse/pull/6307 rel="external nofollow noreferrer" target=_blank>#6307</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>在固定的瑞银报告 <code class=syntax>ProtobufWriter</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6163 rel="external nofollow noreferrer" target=_blank>#6163</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>不要允许将查询探查器与消毒器一起使用，因为它不兼容。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6769 rel="external nofollow noreferrer" target=_blank>#6769</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>添加测试计时器失败后重新加载字典。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6114 rel="external nofollow noreferrer" target=_blank>#6114</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer" target=_blank>维塔利*巴拉诺夫</a>)</li><li>修复不一致 <code class=syntax>PipelineExecutor::prepareProcessor</code> 参数类型。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6494 rel="external nofollow noreferrer" target=_blank>#6494</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>尼古拉*科切托夫</a>)</li><li>添加了对坏Uri的测试。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6493 rel="external nofollow noreferrer" target=_blank>#6493</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>增加了更多的检查 <code class=syntax>CAST</code> 功能。 这应该获得更多关于模糊测试中分割故障的信息。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6346 rel="external nofollow noreferrer" target=_blank>#6346</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>尼古拉*科切托夫</a>)</li><li>已添加 <code class=syntax>gcc-9</code> 支持 <code class=syntax>docker/builder</code> 本地生成映像的容器。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6333 rel="external nofollow noreferrer" target=_blank>#6333</a> (<a href=https://github.com/NanoBjorn rel="external nofollow noreferrer" target=_blank>格列布*诺维科夫</a>)</li><li>测试主键 <code class=syntax>LowCardinality(String)</code>. <a href=https://github.com/ClickHouse/ClickHouse/issues/5044 rel="external nofollow noreferrer" target=_blank>#5044</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6219 rel="external nofollow noreferrer" target=_blank>#6219</a> (<a href=https://github.com/dimarub2000 rel="external nofollow noreferrer" target=_blank>dimarub2000</a>)</li><li>修复了缓慢堆栈跟踪打印影响的测试。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6315 rel="external nofollow noreferrer" target=_blank>#6315</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>添加崩溃的测试用例 <code class=syntax>groupUniqArray</code> 固定在 <a href=https://github.com/ClickHouse/ClickHouse/pull/6029 rel="external nofollow noreferrer" target=_blank>#6029</a>. <a href=https://github.com/ClickHouse/ClickHouse/issues/4402 rel="external nofollow noreferrer" target=_blank>#4402</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6129 rel="external nofollow noreferrer" target=_blank>#6129</a> (<a href=https://github.com/akuzm rel="external nofollow noreferrer" target=_blank>akuzm</a>)</li><li>固定指数突变测试。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6645 rel="external nofollow noreferrer" target=_blank>#6645</a> (<a href=https://github.com/nikvas0 rel="external nofollow noreferrer" target=_blank>尼基塔*瓦西列夫</a>)</li><li>在性能测试中，不要读取我们没有运行的查询的查询日志。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6427 rel="external nofollow noreferrer" target=_blank>#6427</a> (<a href=https://github.com/akuzm rel="external nofollow noreferrer" target=_blank>akuzm</a>)</li><li>现在可以使用任何低基数类型创建实例化视图，而不考虑关于可疑低基数类型的设置。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6428 rel="external nofollow noreferrer" target=_blank>#6428</a> (<a href=https://github.com/stavrolia rel="external nofollow noreferrer" target=_blank>Olga Khvostikova</a>)</li><li>更新的测试 <code class=syntax>send_logs_level</code> 设置。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6207 rel="external nofollow noreferrer" target=_blank>#6207</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>尼古拉*科切托夫</a>)</li><li>修复gcc-8.2下的构建。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6196 rel="external nofollow noreferrer" target=_blank>#6196</a> (<a href=https://github.com/zlobober rel="external nofollow noreferrer" target=_blank>Max Akhmedov</a>)</li><li>修复构建与内部libc++。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6724 rel="external nofollow noreferrer" target=_blank>#6724</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>伊万</a>)</li><li>修复共享构建 <code class=syntax>rdkafka</code> 图书馆 <a href=https://github.com/ClickHouse/ClickHouse/pull/6101 rel="external nofollow noreferrer" target=_blank>#6101</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>伊万</a>)</li><li>修复Mac OS构建（不完整）。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6390 rel="external nofollow noreferrer" target=_blank>#6390</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>) <a href=https://github.com/ClickHouse/ClickHouse/pull/6429 rel="external nofollow noreferrer" target=_blank>#6429</a> (<a href=https://github.com/alex-zaitsev rel="external nofollow noreferrer" target=_blank>alex-zaitsev</a>)</li><li>修复 “splitted” 碌莽禄.拢. <a href=https://github.com/ClickHouse/ClickHouse/pull/6618 rel="external nofollow noreferrer" target=_blank>#6618</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>其他构建修复: <a href=https://github.com/ClickHouse/ClickHouse/pull/6186 rel="external nofollow noreferrer" target=_blank>#6186</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer" target=_blank>阿莫斯鸟</a>) <a href=https://github.com/ClickHouse/ClickHouse/pull/6486 rel="external nofollow noreferrer" target=_blank>#6486</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6348 rel="external nofollow noreferrer" target=_blank>#6348</a> (<a href=https://github.com/Vxider rel="external nofollow noreferrer" target=_blank>vxider</a>) <a href=https://github.com/ClickHouse/ClickHouse/pull/6744 rel="external nofollow noreferrer" target=_blank>#6744</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>伊万</a>) <a href=https://github.com/ClickHouse/ClickHouse/pull/6016 rel="external nofollow noreferrer" target=_blank>#6016</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6421 rel="external nofollow noreferrer" target=_blank>#6421</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6491 rel="external nofollow noreferrer" target=_blank>#6491</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li></ul><h4 id=backward-incompatible-change-3>向后不兼容的更改<a class=headerlink href=../amp/#backward-incompatible-change-3 title="Permanent link"> </a></h4><ul><li>删除很少使用的表函数 <code class=syntax>catBoostPool</code> 和存储 <code class=syntax>CatBoostPool</code>. 如果您使用了此表功能，请写电子邮件至 <code class=syntax>clickhouse-feedback@yandex-team.com</code>. 请注意，CatBoost集成仍然存在，并将受到支持。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6279 rel="external nofollow noreferrer" target=_blank>#6279</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>禁用 <code class=syntax>ANY RIGHT JOIN</code> 和 <code class=syntax>ANY FULL JOIN</code> 默认情况下。 设置 <code class=syntax>any_join_distinct_right_table_keys</code> 设置启用它们。 <a href=https://github.com/ClickHouse/ClickHouse/issues/5126 rel="external nofollow noreferrer" target=_blank>#5126</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6351 rel="external nofollow noreferrer" target=_blank>#6351</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li></ul><h2 id=clickhouse-release-19-13>ClickHouse释放19.13<a class=headerlink href=../amp/#clickhouse-release-19-13 title="Permanent link"> </a></h2><h3 id=clickhouse-release-19-13-6-51-2019-10-02>ClickHouse释放19.13.6.51,2019-10-02<a class=headerlink href=../amp/#clickhouse-release-19-13-6-51-2019-10-02 title="Permanent link"> </a></h3><h4 id=bug-fix-9>错误修复<a class=headerlink href=../amp/#bug-fix-9 title="Permanent link"> </a></h4><ul><li>此版本还包含19.11.12.69的所有错误修复。</li></ul><h3 id=clickhouse-release-19-13-5-44-2019-09-20>ClickHouse释放19.13.5.44,2019-09-20<a class=headerlink href=../amp/#clickhouse-release-19-13-5-44-2019-09-20 title="Permanent link"> </a></h3><h4 id=bug-fix-10>错误修复<a class=headerlink href=../amp/#bug-fix-10 title="Permanent link"> </a></h4><ul><li>此版本还包含19.14.6.12的所有错误修复。</li><li>修复了在执行时表的可能不一致的状态 <code class=syntax>DROP</code> 在zookeeper无法访问时查询复制的表。 <a href=https://github.com/ClickHouse/ClickHouse/issues/6045 rel="external nofollow noreferrer" target=_blank>#6045</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6413 rel="external nofollow noreferrer" target=_blank>#6413</a> (<a href=https://github.com/nikitamikhaylov rel="external nofollow noreferrer" target=_blank>尼基塔*米哈伊洛夫</a>)</li><li>修复了StorageMerge中的数据竞赛 <a href=https://github.com/ClickHouse/ClickHouse/pull/6717 rel="external nofollow noreferrer" target=_blank>#6717</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>修复查询分析器中引入的错误，从而导致套接字无休止的recv。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6386 rel="external nofollow noreferrer" target=_blank>#6386</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li><li>修复执行时过多的CPU使用率 <code class=syntax>JSONExtractRaw</code> 函数在一个布尔值。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6208 rel="external nofollow noreferrer" target=_blank>#6208</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer" target=_blank>维塔利*巴拉诺夫</a>)</li><li>在推送到实例化视图时修复回归。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6415 rel="external nofollow noreferrer" target=_blank>#6415</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>伊万</a>)</li><li>表函数 <code class=syntax>url</code> 该漏洞是否允许攻击者在请求中注入任意HTTP头。 这个问题被发现 <a href=https://github.com/NSTikhomirov rel="external nofollow noreferrer" target=_blank>尼基塔*季霍米罗夫</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6466 rel="external nofollow noreferrer" target=_blank>#6466</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>修复无用 <code class=syntax>AST</code> 检查设置索引。 <a href=https://github.com/ClickHouse/ClickHouse/issues/6510 rel="external nofollow noreferrer" target=_blank>#6510</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6651 rel="external nofollow noreferrer" target=_blank>#6651</a> (<a href=https://github.com/nikvas0 rel="external nofollow noreferrer" target=_blank>尼基塔*瓦西列夫</a>)</li><li>修正了解析 <code class=syntax>AggregateFunction</code> 查询中嵌入的值。 <a href=https://github.com/ClickHouse/ClickHouse/issues/6575 rel="external nofollow noreferrer" target=_blank>#6575</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6773 rel="external nofollow noreferrer" target=_blank>#6773</a> (<a href=https://github.com/yuzhichang rel="external nofollow noreferrer" target=_blank>余志昌</a>)</li><li>修正了错误的行为 <code class=syntax>trim</code> 功能家庭。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6647 rel="external nofollow noreferrer" target=_blank>#6647</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li></ul><h3 id=clickhouse-release-19-13-4-32-2019-09-10>ClickHouse释放19.13.4.32,2019-09-10<a class=headerlink href=../amp/#clickhouse-release-19-13-4-32-2019-09-10 title="Permanent link"> </a></h3><h4 id=bug-fix-11>错误修复<a class=headerlink href=../amp/#bug-fix-11 title="Permanent link"> </a></h4><ul><li>此版本还包含19.11.9.52和19.11.10.54的所有错误安全修复。</li><li>固定数据竞赛 <code class=syntax>system.parts</code> 表和 <code class=syntax>ALTER</code> 查询。 <a href=https://github.com/ClickHouse/ClickHouse/issues/6245 rel="external nofollow noreferrer" target=_blank>#6245</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6513 rel="external nofollow noreferrer" target=_blank>#6513</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>修复了从带有sample和prewhere的空分布式表中读取流中发生的不匹配标题。 <a href=https://github.com/ClickHouse/ClickHouse/issues/6167 rel="external nofollow noreferrer" target=_blank>#6167</a> (<a href=https://github.com/fancyqlx rel="external nofollow noreferrer" target=_blank>钱丽祥</a>) <a href=https://github.com/ClickHouse/ClickHouse/pull/6823 rel="external nofollow noreferrer" target=_blank>#6823</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>尼古拉*科切托夫</a>)</li><li>修复使用时的崩溃 <code class=syntax>IN</code> 子句带有一个元组的子查询。 <a href=https://github.com/ClickHouse/ClickHouse/issues/6125 rel="external nofollow noreferrer" target=_blank>#6125</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6550 rel="external nofollow noreferrer" target=_blank>#6550</a> (<a href=https://github.com/tavplubix rel="external nofollow noreferrer" target=_blank>tavplubix</a>)</li><li>修复具有相同列名的大小写 <code class=syntax>GLOBAL JOIN ON</code> 科。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6181 rel="external nofollow noreferrer" target=_blank>#6181</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li><li>修复强制转换类型时的崩溃 <code class=syntax>Decimal</code> 这不支持它。 抛出异常代替。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6297 rel="external nofollow noreferrer" target=_blank>#6297</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li><li>修复了崩溃 <code class=syntax>extractAll()</code> 功能。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6644 rel="external nofollow noreferrer" target=_blank>#6644</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li><li>查询转换 <code class=syntax>MySQL</code>, <code class=syntax>ODBC</code>, <code class=syntax>JDBC</code> 表函数现在正常工作 <code class=syntax>SELECT WHERE</code> 具有多个查询 <code class=syntax>AND</code> 表达式。 <a href=https://github.com/ClickHouse/ClickHouse/issues/6381 rel="external nofollow noreferrer" target=_blank>#6381</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6676 rel="external nofollow noreferrer" target=_blank>#6676</a> (<a href=https://github.com/dimarub2000 rel="external nofollow noreferrer" target=_blank>dimarub2000</a>)</li><li>添加了以前的声明检查MySQL8集成。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6569 rel="external nofollow noreferrer" target=_blank>#6569</a> (<a href=https://github.com/rafaeldtinoco rel="external nofollow noreferrer" target=_blank>拉斐尔*大卫*蒂诺科</a>)</li></ul><h4 id=security-fix-1>安全修复<a class=headerlink href=../amp/#security-fix-1 title="Permanent link"> </a></h4><ul><li>修复解压缩阶段编解码器中的两个漏洞（恶意用户可以制造压缩数据，导致解压缩中的缓冲区溢出）。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6670 rel="external nofollow noreferrer" target=_blank>#6670</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li></ul><h3 id=clickhouse-release-19-13-3-26-2019-08-22>碌莽禄,拢,010-68520682\&lt;url&gt;戮漏鹿芦,酶,虏卤赂拢,110102005602<a class=headerlink href=../amp/#clickhouse-release-19-13-3-26-2019-08-22 title="Permanent link"> </a></h3><h4 id=bug-fix-12>错误修复<a class=headerlink href=../amp/#bug-fix-12 title="Permanent link"> </a></h4><ul><li>修复 <code class=syntax>ALTER TABLE ... UPDATE</code> 查询表 <code class=syntax>enable_mixed_granularity_parts=1</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6543 rel="external nofollow noreferrer" target=_blank>#6543</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li><li>在使用IN子句时修复带有元组的子查询。 <a href=https://github.com/ClickHouse/ClickHouse/issues/6125 rel="external nofollow noreferrer" target=_blank>#6125</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6550 rel="external nofollow noreferrer" target=_blank>#6550</a> (<a href=https://github.com/tavplubix rel="external nofollow noreferrer" target=_blank>tavplubix</a>)</li><li>修复了一个问题，即如果一个陈旧的副本变为活动的，它可能仍然有被删除分区的数据部分。 <a href=https://github.com/ClickHouse/ClickHouse/issues/6522 rel="external nofollow noreferrer" target=_blank>#6522</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6523 rel="external nofollow noreferrer" target=_blank>#6523</a> (<a href=https://github.com/tavplubix rel="external nofollow noreferrer" target=_blank>tavplubix</a>)</li><li>修正了解析CSV的问题 <a href=https://github.com/ClickHouse/ClickHouse/issues/6426 rel="external nofollow noreferrer" target=_blank>#6426</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6559 rel="external nofollow noreferrer" target=_blank>#6559</a> (<a href=https://github.com/tavplubix rel="external nofollow noreferrer" target=_blank>tavplubix</a>)</li><li>修正了系统中的数据竞赛。部件表和ALTER查询。 这修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/6245 rel="external nofollow noreferrer" target=_blank>#6245</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6513 rel="external nofollow noreferrer" target=_blank>#6513</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>修复了可能导致内存损坏的突变中的错误代码。 修复了读取地址的段错误 <code class=syntax>0x14c0</code> 这可能发生由于并发 <code class=syntax>DROP TABLE</code> 和 <code class=syntax>SELECT</code> 从 <code class=syntax>system.parts</code> 或 <code class=syntax>system.parts_columns</code>. 在准备突变查询时修复了竞争条件。 修复了由于 <code class=syntax>OPTIMIZE</code> 复制的表和并发修改操作，如改变。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6514 rel="external nofollow noreferrer" target=_blank>#6514</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>修复后可能的数据丢失 <code class=syntax>ALTER DELETE</code> 查询表跳过索引。 <a href=https://github.com/ClickHouse/ClickHouse/issues/6224 rel="external nofollow noreferrer" target=_blank>#6224</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6282 rel="external nofollow noreferrer" target=_blank>#6282</a> (<a href=https://github.com/nikvas0 rel="external nofollow noreferrer" target=_blank>尼基塔*瓦西列夫</a>)</li></ul><h4 id=security-fix-2>安全修复<a class=headerlink href=../amp/#security-fix-2 title="Permanent link"> </a></h4><ul><li>如果攻击者具有对ZooKeeper的写入访问权限，并且能够从ClickHouse运行的网络中运行可用的自定义服务器，则可以创建自定义构建的恶意服务器，该服务器将充当ClickHouse副本并将其注册到ZooKeeper中。 当另一个副本从恶意副本中获取数据部分时，它可以强制clickhouse-server写入文件系统上的任意路径。 由Yandex的信息安全团队Eldar Zaitov发现。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6247 rel="external nofollow noreferrer" target=_blank>#6247</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li></ul><h3 id=clickhouse-release-19-13-2-19-2019-08-14>碌莽禄,拢,010-68520682\&lt;url&gt;戮卤篓拢,010-68520682\&lt;url&gt;<a class=headerlink href=../amp/#clickhouse-release-19-13-2-19-2019-08-14 title="Permanent link"> </a></h3><h4 id=new-feature-5>新功能<a class=headerlink href=../amp/#new-feature-5 title="Permanent link"> </a></h4><ul><li>查询级别上的采样探查器。 <a href=https://gist.github.com/alexey-milovidov/92758583dd41c24c360fdb8d6a4da194 rel="external nofollow noreferrer" target=_blank>示例</a>. <a href=https://github.com/ClickHouse/ClickHouse/issues/4247 rel="external nofollow noreferrer" target=_blank>#4247</a> (<a href=https://github.com/laplab rel="external nofollow noreferrer" target=_blank>laplab</a>) <a href=https://github.com/ClickHouse/ClickHouse/pull/6124 rel="external nofollow noreferrer" target=_blank>#6124</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>) <a href=https://github.com/ClickHouse/ClickHouse/pull/6250 rel="external nofollow noreferrer" target=_blank>#6250</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6283 rel="external nofollow noreferrer" target=_blank>#6283</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6386 rel="external nofollow noreferrer" target=_blank>#6386</a></li><li>允许指定列的列表 <code class=syntax>COLUMNS('regexp')</code> 表达的工作原理就像一个更复杂的变体 <code class=syntax>*</code> 星号 <a href=https://github.com/ClickHouse/ClickHouse/pull/5951 rel="external nofollow noreferrer" target=_blank>#5951</a> (<a href=https://github.com/mfridental rel="external nofollow noreferrer" target=_blank>mfridental</a>), (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li><code class=syntax>CREATE TABLE AS table_function()</code> 现在是可能的 <a href=https://github.com/ClickHouse/ClickHouse/pull/6057 rel="external nofollow noreferrer" target=_blank>#6057</a> (<a href=https://github.com/dimarub2000 rel="external nofollow noreferrer" target=_blank>dimarub2000</a>)</li><li>亚当优化随机梯度下降默认情况下使用 <code class=syntax>stochasticLinearRegression()</code> 和 <code class=syntax>stochasticLogisticRegression()</code> 聚合函数，因为它显示了良好的质量，几乎没有任何调整。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6000 rel="external nofollow noreferrer" target=_blank>#6000</a> (<a href=https://github.com/Quid37 rel="external nofollow noreferrer" target=_blank>Quid37</a>)</li><li>Added functions for working with the сustom week number <a href=https://github.com/ClickHouse/ClickHouse/pull/5212 rel="external nofollow noreferrer" target=_blank>#5212</a> (<a href=https://github.com/andyyzh rel="external nofollow noreferrer" target=_blank>杨小姐</a>)</li><li><code class=syntax>RENAME</code> 查询现在适用于所有存储。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5953 rel="external nofollow noreferrer" target=_blank>#5953</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>伊万</a>)</li><li>现在客户端通过设置从服务器接收任何所需级别的日志 <code class=syntax>send_logs_level</code> 无论服务器设置中指定的日志级别如何。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5964 rel="external nofollow noreferrer" target=_blank>#5964</a> (<a href=https://github.com/nikitamikhaylov rel="external nofollow noreferrer" target=_blank>尼基塔*米哈伊洛夫</a>)</li></ul><h4 id=backward-incompatible-change-4>向后不兼容的更改<a class=headerlink href=../amp/#backward-incompatible-change-4 title="Permanent link"> </a></h4><ul><li>设置 <code class=syntax>input_format_defaults_for_omitted_fields</code> 默认情况下启用。 分布式表中的插入需要此设置在集群上相同（您需要在滚动更新之前设置它）。 它允许计算复杂的默认表达式的省略字段 <code class=syntax>JSONEachRow</code> 和 <code class=syntax>CSV*</code> 格式。 它应该是预期的行为，但可能导致可忽略不计的性能差异。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6043 rel="external nofollow noreferrer" target=_blank>#6043</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>), <a href=https://github.com/ClickHouse/ClickHouse/pull/5625 rel="external nofollow noreferrer" target=_blank>#5625</a> (<a href=https://github.com/akuzm rel="external nofollow noreferrer" target=_blank>akuzm</a>)</li></ul><h4 id=experimental-features>实验特点<a class=headerlink href=../amp/#experimental-features title="Permanent link"> </a></h4><ul><li>新的查询处理管道。 使用 <code class=syntax>experimental_use_processors=1</code> 选项来启用它。 用你自己的麻烦。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4914 rel="external nofollow noreferrer" target=_blank>#4914</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>尼古拉*科切托夫</a>)</li></ul><h4 id=bug-fix-13>错误修复<a class=headerlink href=../amp/#bug-fix-13 title="Permanent link"> </a></h4><ul><li>Kafka集成已在此版本中修复。</li><li>固定 <code class=syntax>DoubleDelta</code> 编码 <code class=syntax>Int64</code> 对于大 <code class=syntax>DoubleDelta</code> 值，改进 <code class=syntax>DoubleDelta</code> 编码为随机数据 <code class=syntax>Int32</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/5998 rel="external nofollow noreferrer" target=_blank>#5998</a> (<a href=https://github.com/Enmk rel="external nofollow noreferrer" target=_blank>瓦西里*内姆科夫</a>)</li><li>固定的高估 <code class=syntax>max_rows_to_read</code> 如果设置 <code class=syntax>merge_tree_uniform_read_distribution</code> 置为0。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6019 rel="external nofollow noreferrer" target=_blank>#6019</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li></ul><h4 id=improvement-4>改进<a class=headerlink href=../amp/#improvement-4 title="Permanent link"> </a></h4><ul><li>如果抛出异常 <code class=syntax>config.d</code> 文件没有相应的根元素作为配置文件 <a href=https://github.com/ClickHouse/ClickHouse/pull/6123 rel="external nofollow noreferrer" target=_blank>#6123</a> (<a href=https://github.com/dimarub2000 rel="external nofollow noreferrer" target=_blank>dimarub2000</a>)</li></ul><h4 id=performance-improvement-3>性能改进<a class=headerlink href=../amp/#performance-improvement-3 title="Permanent link"> </a></h4><ul><li>优化 <code class=syntax>count()</code>. 现在它使用最小的列（如果可能的话）。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6028 rel="external nofollow noreferrer" target=_blank>#6028</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer" target=_blank>阿莫斯鸟</a>)</li></ul><h4 id=buildtestingpackaging-improvement-5>构建/测试/包装改进<a class=headerlink href=../amp/#buildtestingpackaging-improvement-5 title="Permanent link"> </a></h4><ul><li>在性能测试中报告内存使用情况。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5899 rel="external nofollow noreferrer" target=_blank>#5899</a> (<a href=https://github.com/akuzm rel="external nofollow noreferrer" target=_blank>akuzm</a>)</li><li>修复构建与外部 <code class=syntax>libcxx</code> <a href=https://github.com/ClickHouse/ClickHouse/pull/6010 rel="external nofollow noreferrer" target=_blank>#6010</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>伊万</a>)</li><li>修复共享构建 <code class=syntax>rdkafka</code> 图书馆 <a href=https://github.com/ClickHouse/ClickHouse/pull/6101 rel="external nofollow noreferrer" target=_blank>#6101</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>伊万</a>)</li></ul><h2 id=clickhouse-release-19-11>ClickHouse释放19.11<a class=headerlink href=../amp/#clickhouse-release-19-11 title="Permanent link"> </a></h2><h3 id=clickhouse-release-19-11-13-74-2019-11-01>ClickHouse释放19.11.13.74,2019-11-01<a class=headerlink href=../amp/#clickhouse-release-19-11-13-74-2019-11-01 title="Permanent link"> </a></h3><h4 id=bug-fix-14>错误修复<a class=headerlink href=../amp/#bug-fix-14 title="Permanent link"> </a></h4><ul><li>修复了罕见的崩溃 <code class=syntax>ALTER MODIFY COLUMN</code> 当合并/更改部分之一为空（0行）时，垂直合并。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6780 rel="external nofollow noreferrer" target=_blank>#6780</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li><li>手动更新 <code class=syntax>SIMDJSON</code>. 这修复了stderr文件可能泛滥的错误json诊断消息。 <a href=https://github.com/ClickHouse/ClickHouse/pull/7548 rel="external nofollow noreferrer" target=_blank>#7548</a> (<a href=https://github.com/Akazz rel="external nofollow noreferrer" target=_blank>亚历山大*卡扎科夫</a>)</li><li>修正错误 <code class=syntax>mrk</code> 突变的文件扩展名 (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li></ul><h3 id=clickhouse-release-19-11-12-69-2019-10-02>ClickHouse释放19.11.12.69,2019-10-02<a class=headerlink href=../amp/#clickhouse-release-19-11-12-69-2019-10-02 title="Permanent link"> </a></h3><h4 id=bug-fix-15>错误修复<a class=headerlink href=../amp/#bug-fix-15 title="Permanent link"> </a></h4><ul><li>修复了大型表上复杂键的索引分析的性能下降。 这修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/6924 rel="external nofollow noreferrer" target=_blank>#6924</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/7075 rel="external nofollow noreferrer" target=_blank>#7075</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>使用分布式引擎在表中发送数据时避免罕见的SIGSEGV (<code class=syntax>Failed to send batch: file with index XXXXX is absent</code>). <a href=https://github.com/ClickHouse/ClickHouse/pull/7032 rel="external nofollow noreferrer" target=_blank>#7032</a> (<a href=https://github.com/azat rel="external nofollow noreferrer" target=_blank>Azat Khuzhin</a>)</li><li>修复 <code class=syntax>Unknown identifier</code> 有多个连接。 这修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/5254 rel="external nofollow noreferrer" target=_blank>#5254</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/7022 rel="external nofollow noreferrer" target=_blank>#7022</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li></ul><h3 id=clickhouse-release-19-11-11-57-2019-09-13>碌莽禄,拢,010-68520682\&lt;url&gt;戮卤篓拢,010-68520682\&lt;url&gt;<a class=headerlink href=../amp/#clickhouse-release-19-11-11-57-2019-09-13 title="Permanent link"> </a></h3><ul><li>修复从Kafka空主题中选择时导致段错误的逻辑错误。 <a href=https://github.com/ClickHouse/ClickHouse/issues/6902 rel="external nofollow noreferrer" target=_blank>#6902</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6909 rel="external nofollow noreferrer" target=_blank>#6909</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>伊万</a>)</li><li>修复功能 <code class=syntax>АrrayEnumerateUniqRanked</code> 在参数中使用空数组。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6928 rel="external nofollow noreferrer" target=_blank>#6928</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li></ul><h3 id=clickhouse-release-19-11-10-54-2019-09-10>ClickHouse释放19.11.10.54,2019-09-10<a class=headerlink href=../amp/#clickhouse-release-19-11-10-54-2019-09-10 title="Permanent link"> </a></h3><h4 id=bug-fix-16>错误修复<a class=headerlink href=../amp/#bug-fix-16 title="Permanent link"> </a></h4><ul><li>手动存储Kafka消息的偏移量，以便能够一次性为所有分区提交它们。 修复潜在的重复 “one consumer - many partitions” 场景。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6872 rel="external nofollow noreferrer" target=_blank>#6872</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>伊万</a>)</li></ul><h3 id=clickhouse-release-19-11-9-52-2019-09-6>碌莽禄,拢,010-68520682\&lt;url&gt;戮卤篓拢,010-68520682<a class=headerlink href=../amp/#clickhouse-release-19-11-9-52-2019-09-6 title="Permanent link"> </a></h3><ul><li>改进缓存字典中的错误处理。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6737 rel="external nofollow noreferrer" target=_blank>#6737</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer" target=_blank>维塔利*巴拉诺夫</a>)</li><li>在功能固定错误 <code class=syntax>arrayEnumerateUniqRanked</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6779 rel="external nofollow noreferrer" target=_blank>#6779</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li><li>修复 <code class=syntax>JSONExtract</code> 功能，同时提取 <code class=syntax>Tuple</code> 从JSON。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6718 rel="external nofollow noreferrer" target=_blank>#6718</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer" target=_blank>维塔利*巴拉诺夫</a>)</li><li>修复后可能的数据丢失 <code class=syntax>ALTER DELETE</code> 查询表跳过索引。 <a href=https://github.com/ClickHouse/ClickHouse/issues/6224 rel="external nofollow noreferrer" target=_blank>#6224</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6282 rel="external nofollow noreferrer" target=_blank>#6282</a> (<a href=https://github.com/nikvas0 rel="external nofollow noreferrer" target=_blank>尼基塔*瓦西列夫</a>)</li><li>固定性能测试。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6392 rel="external nofollow noreferrer" target=_blank>#6392</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>实木复合地板：修复读取布尔列。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6579 rel="external nofollow noreferrer" target=_blank>#6579</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>修正了错误的行为 <code class=syntax>nullIf</code> 常量参数的函数。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6518 rel="external nofollow noreferrer" target=_blank>#6518</a> (<a href=https://github.com/YiuRULE rel="external nofollow noreferrer" target=_blank>纪尧姆*塔瑟里</a>) <a href=https://github.com/ClickHouse/ClickHouse/pull/6580 rel="external nofollow noreferrer" target=_blank>#6580</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>修复kafka服务器正常重启时的消息重复问题。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6597 rel="external nofollow noreferrer" target=_blank>#6597</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>伊万</a>)</li><li>修正了一个问题，当长 <code class=syntax>ALTER UPDATE</code> 或 <code class=syntax>ALTER DELETE</code> 可能会阻止常规合并运行。 如果没有足够的可用线程，则防止突变执行。 <a href=https://github.com/ClickHouse/ClickHouse/issues/6502 rel="external nofollow noreferrer" target=_blank>#6502</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6617 rel="external nofollow noreferrer" target=_blank>#6617</a> (<a href=https://github.com/tavplubix rel="external nofollow noreferrer" target=_blank>tavplubix</a>)</li><li>修正了处理错误 “timezone” 在服务器配置文件中。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6709 rel="external nofollow noreferrer" target=_blank>#6709</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>修复卡夫卡测试。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6805 rel="external nofollow noreferrer" target=_blank>#6805</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>伊万</a>)</li></ul><h4 id=security-fix-3>安全修复<a class=headerlink href=../amp/#security-fix-3 title="Permanent link"> </a></h4><ul><li>如果攻击者具有对ZooKeeper的写入访问权限，并且能够从运行ClickHouse的网络中运行可用的自定义服务器，则可以创建自定义构建的恶意服务器，该服务器将充当ClickHouse副本并将其注册到ZooKeeper中。 当另一个副本从恶意副本中获取数据部分时，它可以强制clickhouse-server写入文件系统上的任意路径。 由Yandex的信息安全团队Eldar Zaitov发现。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6247 rel="external nofollow noreferrer" target=_blank>#6247</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li></ul><h3 id=clickhouse-release-19-11-8-46-2019-08-22>碌莽禄,拢,010-68520682\&lt;url&gt;戮卤篓拢,010-68520682\&lt;url&gt;<a class=headerlink href=../amp/#clickhouse-release-19-11-8-46-2019-08-22 title="Permanent link"> </a></h3><h4 id=bug-fix-17>错误修复<a class=headerlink href=../amp/#bug-fix-17 title="Permanent link"> </a></h4><ul><li>修复 <code class=syntax>ALTER TABLE ... UPDATE</code> 查询表 <code class=syntax>enable_mixed_granularity_parts=1</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6543 rel="external nofollow noreferrer" target=_blank>#6543</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li><li>在使用IN子句时修复带有元组的子查询。 <a href=https://github.com/ClickHouse/ClickHouse/issues/6125 rel="external nofollow noreferrer" target=_blank>#6125</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6550 rel="external nofollow noreferrer" target=_blank>#6550</a> (<a href=https://github.com/tavplubix rel="external nofollow noreferrer" target=_blank>tavplubix</a>)</li><li>修复了一个问题，即如果一个陈旧的副本变为活动的，它可能仍然有被删除分区的数据部分。 <a href=https://github.com/ClickHouse/ClickHouse/issues/6522 rel="external nofollow noreferrer" target=_blank>#6522</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6523 rel="external nofollow noreferrer" target=_blank>#6523</a> (<a href=https://github.com/tavplubix rel="external nofollow noreferrer" target=_blank>tavplubix</a>)</li><li>修正了解析CSV的问题 <a href=https://github.com/ClickHouse/ClickHouse/issues/6426 rel="external nofollow noreferrer" target=_blank>#6426</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6559 rel="external nofollow noreferrer" target=_blank>#6559</a> (<a href=https://github.com/tavplubix rel="external nofollow noreferrer" target=_blank>tavplubix</a>)</li><li>修正了系统中的数据竞赛。部件表和ALTER查询。 这修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/6245 rel="external nofollow noreferrer" target=_blank>#6245</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6513 rel="external nofollow noreferrer" target=_blank>#6513</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>修复了可能导致内存损坏的突变中的错误代码。 修复了读取地址的段错误 <code class=syntax>0x14c0</code> 这可能发生由于并发 <code class=syntax>DROP TABLE</code> 和 <code class=syntax>SELECT</code> 从 <code class=syntax>system.parts</code> 或 <code class=syntax>system.parts_columns</code>. 在准备突变查询时修复了竞争条件。 修复了由于 <code class=syntax>OPTIMIZE</code> 复制的表和并发修改操作，如改变。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6514 rel="external nofollow noreferrer" target=_blank>#6514</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li></ul><h3 id=clickhouse-release-19-11-7-40-2019-08-14>碌莽禄,拢,010-68520682\&lt;url&gt;戮卤篓拢,010-68520682\&lt;url&gt;<a class=headerlink href=../amp/#clickhouse-release-19-11-7-40-2019-08-14 title="Permanent link"> </a></h3><h4 id=bug-fix-18>错误修复<a class=headerlink href=../amp/#bug-fix-18 title="Permanent link"> </a></h4><ul><li>Kafka集成已在此版本中修复。</li><li>使用时修复段错误 <code class=syntax>arrayReduce</code> 对于不断的参数。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6326 rel="external nofollow noreferrer" target=_blank>#6326</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>固定 <code class=syntax>toFloat()</code> 单调性。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6374 rel="external nofollow noreferrer" target=_blank>#6374</a> (<a href=https://github.com/dimarub2000 rel="external nofollow noreferrer" target=_blank>dimarub2000</a>)</li><li>修复已启用的段错误 <code class=syntax>optimize_skip_unused_shards</code> 还丢失了分片钥匙 <a href=https://github.com/ClickHouse/ClickHouse/pull/6384 rel="external nofollow noreferrer" target=_blank>#6384</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer" target=_blank>CurtizJ</a>)</li><li>的固定逻辑 <code class=syntax>arrayEnumerateUniqRanked</code> 功能。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6423 rel="external nofollow noreferrer" target=_blank>#6423</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>从MySQL处理程序中删除了额外的详细日志记录。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6389 rel="external nofollow noreferrer" target=_blank>#6389</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>修复错误的行为和可能的段错误 <code class=syntax>topK</code> 和 <code class=syntax>topKWeighted</code> 聚合函数。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6404 rel="external nofollow noreferrer" target=_blank>#6404</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer" target=_blank>CurtizJ</a>)</li><li>不要公开虚拟列 <code class=syntax>system.columns</code> 桌子 这是向后兼容所必需的。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6406 rel="external nofollow noreferrer" target=_blank>#6406</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>修复复杂键缓存字典中字符串字段的内存分配错误。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6447 rel="external nofollow noreferrer" target=_blank>#6447</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li><li>修复创建新副本时启用自适应粒度的错误 <code class=syntax>Replicated*MergeTree</code> 桌子 <a href=https://github.com/ClickHouse/ClickHouse/pull/6452 rel="external nofollow noreferrer" target=_blank>#6452</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li><li>阅读Kafka消息时修复无限循环。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6354 rel="external nofollow noreferrer" target=_blank>#6354</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>abyss7</a>)</li><li>修复了由于SQL解析器中的堆栈溢出和堆栈溢出的可能性而导致服务器崩溃的编造查询的可能性 <code class=syntax>Merge</code> 和 <code class=syntax>Distributed</code> 表 <a href=https://github.com/ClickHouse/ClickHouse/pull/6433 rel="external nofollow noreferrer" target=_blank>#6433</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>在小序列固定大猩猩编码错误。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6444 rel="external nofollow noreferrer" target=_blank>#6444</a> (<a href=https://github.com/Enmk rel="external nofollow noreferrer" target=_blank>Enmk</a>)</li></ul><h4 id=improvement-5>改进<a class=headerlink href=../amp/#improvement-5 title="Permanent link"> </a></h4><ul><li>允许用户复盖 <code class=syntax>poll_interval</code> 和 <code class=syntax>idle_connection_timeout</code> 连接设置。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6230 rel="external nofollow noreferrer" target=_blank>#6230</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li></ul><h3 id=clickhouse-release-19-11-5-28-2019-08-05>碌莽禄,拢,010-68520682\&lt;url&gt;戮漏鹿芦,酶,虏卤赂拢,110102003042<a class=headerlink href=../amp/#clickhouse-release-19-11-5-28-2019-08-05 title="Permanent link"> </a></h3><h4 id=bug-fix-19>错误修复<a class=headerlink href=../amp/#bug-fix-19 title="Permanent link"> </a></h4><ul><li>修复了服务器超载时挂起查询的可能性。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6301 rel="external nofollow noreferrer" target=_blank>#6301</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>修复yandexConsistentHash函数中的FPE。 这修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/6304 rel="external nofollow noreferrer" target=_blank>#6304</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6126 rel="external nofollow noreferrer" target=_blank>#6126</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>修正错误的转换 <code class=syntax>LowCardinality</code> 类型 <code class=syntax>AggregateFunctionFactory</code>. 这修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/6257 rel="external nofollow noreferrer" target=_blank>#6257</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6281 rel="external nofollow noreferrer" target=_blank>#6281</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>尼古拉*科切托夫</a>)</li><li>修复解析 <code class=syntax>bool</code> 从设置 <code class=syntax>true</code> 和 <code class=syntax>false</code> 配置文件中的字符串。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6278 rel="external nofollow noreferrer" target=_blank>#6278</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li><li>修复查询中不兼容的流头的罕见错误 <code class=syntax>Distributed</code> 桌子结束 <code class=syntax>MergeTree</code> 表时的一部分 <code class=syntax>WHERE</code> 移动到 <code class=syntax>PREWHERE</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6236 rel="external nofollow noreferrer" target=_blank>#6236</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li><li>在有符号类型的整数划分为无符号类型的固定溢出。 这修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/6214 rel="external nofollow noreferrer" target=_blank>#6214</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6233 rel="external nofollow noreferrer" target=_blank>#6233</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li></ul><h4 id=backward-incompatible-change-5>向后不兼容的更改<a class=headerlink href=../amp/#backward-incompatible-change-5 title="Permanent link"> </a></h4><ul><li><code class=syntax>Kafka</code> 还是坏了</li></ul><h3 id=clickhouse-release-19-11-4-24-2019-08-01>碌莽禄,拢,010-68520682\&lt;url&gt;戮卤篓拢,010-68520682\&lt;url&gt;<a class=headerlink href=../amp/#clickhouse-release-19-11-4-24-2019-08-01 title="Permanent link"> </a></h3><h4 id=bug-fix-20>错误修复<a class=headerlink href=../amp/#bug-fix-20 title="Permanent link"> </a></h4><ul><li>修复编写具有自适应粒度的二级索引标记的错误。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6126 rel="external nofollow noreferrer" target=_blank>#6126</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li><li>修复 <code class=syntax>WITH ROLLUP</code> 和 <code class=syntax>WITH CUBE</code> 修饰符 <code class=syntax>GROUP BY</code> 具有两级聚合。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6225 rel="external nofollow noreferrer" target=_blank>#6225</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer" target=_blank>安东*波波夫</a>)</li><li>固定挂起 <code class=syntax>JSONExtractRaw</code> 功能。 固定 <a href=https://github.com/ClickHouse/ClickHouse/issues/6195 rel="external nofollow noreferrer" target=_blank>#6195</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6198 rel="external nofollow noreferrer" target=_blank>#6198</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>修复ExternalLoader::reloadOutdated()中的段错误。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6082 rel="external nofollow noreferrer" target=_blank>#6082</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer" target=_blank>维塔利*巴拉诺夫</a>)</li><li>修复了服务器可能关闭侦听套接字但不关闭并继续提供剩余查询的情况。 您最终可能会有两个正在运行的clickhouse服务器进程。 有时，服务器可能会返回错误 <code class=syntax>bad_function_call</code> 对于剩余的查询。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6231 rel="external nofollow noreferrer" target=_blank>#6231</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>修复了通过ODBC，MySQL，ClickHouse和HTTP初始加载外部字典的更新字段无用和不正确的条件。 这修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/6069 rel="external nofollow noreferrer" target=_blank>#6069</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6083 rel="external nofollow noreferrer" target=_blank>#6083</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>在固定不相关的异常转换 <code class=syntax>LowCardinality(Nullable)</code> to not-Nullable column in case if it doesn't contain Nulls (e.g. in query like <code class=syntax>SELECT CAST(CAST('Hello' AS LowCardinality(Nullable(String))) AS String)</code>. <a href=https://github.com/ClickHouse/ClickHouse/issues/6094 rel="external nofollow noreferrer" target=_blank>#6094</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/6119 rel="external nofollow noreferrer" target=_blank>#6119</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>尼古拉*科切托夫</a>)</li><li>修复非确定性结果 “uniq” 在极少数情况下聚合函数。 该错误存在于所有ClickHouse版本。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6058 rel="external nofollow noreferrer" target=_blank>#6058</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>Segfault当我们在函数上设置了一点点太高的CIDR <code class=syntax>IPv6CIDRToRange</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/6068 rel="external nofollow noreferrer" target=_blank>#6068</a> (<a href=https://github.com/YiuRULE rel="external nofollow noreferrer" target=_blank>纪尧姆*塔瑟里</a>)</li><li>修复了服务器从许多不同上下文中抛出许多异常时的小内存泄漏。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6144 rel="external nofollow noreferrer" target=_blank>#6144</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>修复消费者在订阅之前暂停而之后未恢复的情况。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6075 rel="external nofollow noreferrer" target=_blank>#6075</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>伊万</a>）请注意，卡夫卡在这个版本中被打破。</li><li>从以前的读取操作中清除Kafka数据缓冲区，并且完成了错误操作 <a href=https://github.com/ClickHouse/ClickHouse/pull/6026 rel="external nofollow noreferrer" target=_blank>#6026</a> (<a href=https://github.com/bopohaa rel="external nofollow noreferrer" target=_blank>尼古拉</a>）请注意，卡夫卡在这个版本中被打破。</li><li>由于 <code class=syntax>StorageMergeTree::background_task_handle</code> 在初始化 <code class=syntax>startup()</code> 该 <code class=syntax>MergeTreeBlockOutputStream::write()</code> 可以尝试在初始化之前使用它。 只需检查它是否被初始化。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6080 rel="external nofollow noreferrer" target=_blank>#6080</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>伊万</a>)</li></ul><h4 id=buildtestingpackaging-improvement-6>构建/测试/包装改进<a class=headerlink href=../amp/#buildtestingpackaging-improvement-6 title="Permanent link"> </a></h4><ul><li>新增官方 <code class=syntax>rpm</code> 包. <a href=https://github.com/ClickHouse/ClickHouse/pull/5740 rel="external nofollow noreferrer" target=_blank>#5740</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>) (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li><li>添加构建能力 <code class=syntax>.rpm</code> 和 <code class=syntax>.tgz</code> 包 <code class=syntax>packager</code> 脚本 <a href=https://github.com/ClickHouse/ClickHouse/pull/5769 rel="external nofollow noreferrer" target=_blank>#5769</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li><li>修复了 “Arcadia” 构建系统。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6223 rel="external nofollow noreferrer" target=_blank>#6223</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li></ul><h4 id=backward-incompatible-change-6>向后不兼容的更改<a class=headerlink href=../amp/#backward-incompatible-change-6 title="Permanent link"> </a></h4><ul><li><code class=syntax>Kafka</code> 在这个版本中被打破。</li></ul><h3 id=clickhouse-release-19-11-3-11-2019-07-18>碌莽禄,拢,010-68520682\&lt;url&gt;戮卤篓拢,010-68520682\&lt;url&gt;<a class=headerlink href=../amp/#clickhouse-release-19-11-3-11-2019-07-18 title="Permanent link"> </a></h3><h4 id=new-feature-6>新功能<a class=headerlink href=../amp/#new-feature-6 title="Permanent link"> </a></h4><ul><li>增加了对准备好的语句的支持。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5331/ rel="external nofollow noreferrer" target=_blank>#5331</a> (<a href=https://github.com/sanych73 rel="external nofollow noreferrer" target=_blank>亚历山大</a>) <a href=https://github.com/ClickHouse/ClickHouse/pull/5630 rel="external nofollow noreferrer" target=_blank>#5630</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li><code class=syntax>DoubleDelta</code> 和 <code class=syntax>Gorilla</code> 列编解ecs <a href=https://github.com/ClickHouse/ClickHouse/pull/5600 rel="external nofollow noreferrer" target=_blank>#5600</a> (<a href=https://github.com/Enmk rel="external nofollow noreferrer" target=_blank>瓦西里*内姆科夫</a>)</li><li>已添加 <code class=syntax>os_thread_priority</code> 设置，允许控制 “nice” 操作系统用于调整动态调度优先级的查询处理线程的值。 它需要 <code class=syntax>CAP_SYS_NICE</code> 能力的工作。 这实现了 <a href=https://github.com/ClickHouse/ClickHouse/issues/5858 rel="external nofollow noreferrer" target=_blank>#5858</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/5909 rel="external nofollow noreferrer" target=_blank>#5909</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>执行 <code class=syntax>_topic</code>, <code class=syntax>_offset</code>, <code class=syntax>_key</code> kafka引擎的列 <a href=https://github.com/ClickHouse/ClickHouse/pull/5382 rel="external nofollow noreferrer" target=_blank>#5382</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>伊万</a>）请注意，卡夫卡在这个版本中被打破。</li><li>添加聚合函数组合 <code class=syntax>-Resample</code> <a href=https://github.com/ClickHouse/ClickHouse/pull/5590 rel="external nofollow noreferrer" target=_blank>#5590</a> (<a href=https://github.com/hczhcz rel="external nofollow noreferrer" target=_blank>hcz</a>)</li><li>聚合函数 <code class=syntax>groupArrayMovingSum(win_size)(x)</code> 和 <code class=syntax>groupArrayMovingAvg(win_size)(x)</code>，计算移动和/平均有或没有窗口大小限制。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5595 rel="external nofollow noreferrer" target=_blank>#5595</a> (<a href=https://github.com/inv2004 rel="external nofollow noreferrer" target=_blank>inv2004</a>)</li><li>添加synonim <code class=syntax>arrayFlatten</code> \&lt;-&gt; <code class=syntax>flatten</code> <a href=https://github.com/ClickHouse/ClickHouse/pull/5764 rel="external nofollow noreferrer" target=_blank>#5764</a> (<a href=https://github.com/hczhcz rel="external nofollow noreferrer" target=_blank>hcz</a>)</li><li>Intergate H3功能 <code class=syntax>geoToH3</code> 从尤伯杯. <a href=https://github.com/ClickHouse/ClickHouse/pull/4724 rel="external nofollow noreferrer" target=_blank>#4724</a> (<a href=https://github.com/BHYCHIK rel="external nofollow noreferrer" target=_blank>Remen Ivan</a>) <a href=https://github.com/ClickHouse/ClickHouse/pull/5805 rel="external nofollow noreferrer" target=_blank>#5805</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li></ul><h4 id=bug-fix-21>错误修复<a class=headerlink href=../amp/#bug-fix-21 title="Permanent link"> </a></h4><ul><li>使用异步更新实现DNS缓存。 单独的线程解析所有主机并更新dns缓存（设置 <code class=syntax>dns_cache_update_period</code>). 当主机的ip频繁更改时，它应该有所帮助。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5857 rel="external nofollow noreferrer" target=_blank>#5857</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer" target=_blank>安东*波波夫</a>)</li><li>修复段错误 <code class=syntax>Delta</code> 影响值小于32位大小的列的编解ec。 该错误导致随机内存损坏。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5786 rel="external nofollow noreferrer" target=_blank>#5786</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li><li>修复ttl合并中的段错误与块中的非物理列。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5819 rel="external nofollow noreferrer" target=_blank>#5819</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer" target=_blank>安东*波波夫</a>)</li><li>修复在检查部分罕见的错误 <code class=syntax>LowCardinality</code> 列。 前情提要 <code class=syntax>checkDataPart</code> 总是失败的一部分 <code class=syntax>LowCardinality</code> 列。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5832 rel="external nofollow noreferrer" target=_blank>#5832</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li><li>避免在服务器线程池已满时挂起连接。 它是从连接重要 <code class=syntax>remote</code> 当连接超时时，表函数或连接到没有副本的分片。 这修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/5878 rel="external nofollow noreferrer" target=_blank>#5878</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/5881 rel="external nofollow noreferrer" target=_blank>#5881</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>支持常量参数 <code class=syntax>evalMLModel</code> 功能。 这修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/5817 rel="external nofollow noreferrer" target=_blank>#5817</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/5820 rel="external nofollow noreferrer" target=_blank>#5820</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>修复了ClickHouse将默认时区确定为 <code class=syntax>UCT</code> 而不是 <code class=syntax>UTC</code>. 这修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/5804 rel="external nofollow noreferrer" target=_blank>#5804</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/5828 rel="external nofollow noreferrer" target=_blank>#5828</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>固定缓冲区下溢 <code class=syntax>visitParamExtractRaw</code>. 这修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/5901 rel="external nofollow noreferrer" target=_blank>#5901</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/5902 rel="external nofollow noreferrer" target=_blank>#5902</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>现在分发 <code class=syntax>DROP/ALTER/TRUNCATE/OPTIMIZE ON CLUSTER</code> 查询将直接在leader副本上执行。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5757 rel="external nofollow noreferrer" target=_blank>#5757</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li><li>修复 <code class=syntax>coalesce</code> 为 <code class=syntax>ColumnConst</code> 与 <code class=syntax>ColumnNullable</code> +相关变化. <a href=https://github.com/ClickHouse/ClickHouse/pull/5755 rel="external nofollow noreferrer" target=_blank>#5755</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li><li>修复 <code class=syntax>ReadBufferFromKafkaConsumer</code> 所以它不断阅读新的消息后 <code class=syntax>commit()</code> 即使它之前停滞不前 <a href=https://github.com/ClickHouse/ClickHouse/pull/5852 rel="external nofollow noreferrer" target=_blank>#5852</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>伊万</a>)</li><li>修复 <code class=syntax>FULL</code> 和 <code class=syntax>RIGHT</code> 加入时加入结果 <code class=syntax>Nullable</code> 键在右表. <a href=https://github.com/ClickHouse/ClickHouse/pull/5859 rel="external nofollow noreferrer" target=_blank>#5859</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li><li>可能修复低优先级查询的无限休眠。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5842 rel="external nofollow noreferrer" target=_blank>#5842</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>修复争用条件，这导致某些查询可能不会出现在query_log后 <code class=syntax>SYSTEM FLUSH LOGS</code> 查询。 <a href=https://github.com/ClickHouse/ClickHouse/issues/5456 rel="external nofollow noreferrer" target=_blank>#5456</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/5685 rel="external nofollow noreferrer" target=_blank>#5685</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer" target=_blank>安东*波波夫</a>)</li><li>固定 <code class=syntax>heap-use-after-free</code> 由手表引起的ClusterCopier中的警告尝试使用已经删除的复印机对象。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5871 rel="external nofollow noreferrer" target=_blank>#5871</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>尼古拉*科切托夫</a>)</li><li>修复错误 <code class=syntax>StringRef</code> 由一些实现返回的指针 <code class=syntax>IColumn::deserializeAndInsertFromArena</code>. 这个错误只影响单元测试。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5973 rel="external nofollow noreferrer" target=_blank>#5973</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>尼古拉*科切托夫</a>)</li><li>防止源数组和中间数组连接掩蔽相同名称列的列。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5941 rel="external nofollow noreferrer" target=_blank>#5941</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li><li>修复插入并选择查询MySQL引擎与MySQL样式标识符引用。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5704 rel="external nofollow noreferrer" target=_blank>#5704</a> (<a href=https://github.com/zhang2014 rel="external nofollow noreferrer" target=_blank>张冬</a>)</li><li>现在 <code class=syntax>CHECK TABLE</code> 查询可以与MergeTree引擎系列一起使用。 它返回检查状态和消息，如果任何为每个部分（或文件在simplier引擎的情况下）。 此外，修复获取损坏部分的错误。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5865 rel="external nofollow noreferrer" target=_blank>#5865</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li><li>修复SPLIT_SHARED_LIBRARY运行时 <a href=https://github.com/ClickHouse/ClickHouse/pull/5793 rel="external nofollow noreferrer" target=_blank>#5793</a> (<a href=https://github.com/danlark1 rel="external nofollow noreferrer" target=_blank>Danila Kutenin</a>)</li><li>固定时区初始化时 <code class=syntax>/etc/localtime</code> 是一个相对的符号链接，如 <code class=syntax>../usr/share/zoneinfo/Europe/Moscow</code> <a href=https://github.com/ClickHouse/ClickHouse/pull/5922 rel="external nofollow noreferrer" target=_blank>#5922</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>clickhouse复印机：修复使用-关机后免费 <a href=https://github.com/ClickHouse/ClickHouse/pull/5752 rel="external nofollow noreferrer" target=_blank>#5752</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li><li>更新 <code class=syntax>simdjson</code>. 修复了一些无效的零字节Json成功解析的问题。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5938 rel="external nofollow noreferrer" target=_blank>#5938</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>修复系统日志的关机 <a href=https://github.com/ClickHouse/ClickHouse/pull/5802 rel="external nofollow noreferrer" target=_blank>#5802</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer" target=_blank>安东*波波夫</a>)</li><li>修复当invalidate_query中的条件取决于字典时挂起。 <a href=https://github.com/ClickHouse/ClickHouse/pull/6011 rel="external nofollow noreferrer" target=_blank>#6011</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer" target=_blank>维塔利*巴拉诺夫</a>)</li></ul><h4 id=improvement-6>改进<a class=headerlink href=../amp/#improvement-6 title="Permanent link"> </a></h4><ul><li>允许群集配置中的无法解析的地址。 它们将被视为不可用，并尝试在每次连接尝试时解决。 这对Kubernetes特别有用。 这修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/5714 rel="external nofollow noreferrer" target=_blank>#5714</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/5924 rel="external nofollow noreferrer" target=_blank>#5924</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>关闭空闲TCP连接（默认情况下为一小时超时）。 这对于每台服务器上具有多个分布式表的大型集群尤其重要，因为每台服务器都可能保留与其他服务器的连接池，并且在高峰查询并发之后，连接将停 这修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/5879 rel="external nofollow noreferrer" target=_blank>#5879</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/5880 rel="external nofollow noreferrer" target=_blank>#5880</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>更好的质量 <code class=syntax>topK</code> 功能。 如果新元素具有更大的权重，则更改了SavingSpace set行为以删除最后一个元素。 <a href=https://github.com/ClickHouse/ClickHouse/issues/5833 rel="external nofollow noreferrer" target=_blank>#5833</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/5850 rel="external nofollow noreferrer" target=_blank>#5850</a> (<a href=https://github.com/YiuRULE rel="external nofollow noreferrer" target=_blank>纪尧姆*塔瑟里</a>)</li><li>与域一起使用的URL函数现在可以在没有方案的情况下适用于不完整的Url <a href=https://github.com/ClickHouse/ClickHouse/pull/5725 rel="external nofollow noreferrer" target=_blank>#5725</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li><li>校验和添加到 <code class=syntax>system.parts_columns</code> 桌子 <a href=https://github.com/ClickHouse/ClickHouse/pull/5874 rel="external nofollow noreferrer" target=_blank>#5874</a> (<a href=https://github.com/nikitamikhaylov rel="external nofollow noreferrer" target=_blank>尼基塔*米哈伊洛夫</a>)</li><li>已添加 <code class=syntax>Enum</code> 数据类型作为synonim <code class=syntax>Enum8</code> 或 <code class=syntax>Enum16</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/5886 rel="external nofollow noreferrer" target=_blank>#5886</a> (<a href=https://github.com/dimarub2000 rel="external nofollow noreferrer" target=_blank>dimarub2000</a>)</li><li>全位转置变种 <code class=syntax>T64</code> 编解ec 可能会导致更好的压缩 <code class=syntax>zstd</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/5742 rel="external nofollow noreferrer" target=_blank>#5742</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li><li>条件 <code class=syntax>startsWith</code> 函数现在可以使用主键。 这修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/5310 rel="external nofollow noreferrer" target=_blank>#5310</a> 和 <a href=https://github.com/ClickHouse/ClickHouse/issues/5882 rel="external nofollow noreferrer" target=_blank>#5882</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/5919 rel="external nofollow noreferrer" target=_blank>#5919</a> (<a href=https://github.com/dimarub2000 rel="external nofollow noreferrer" target=_blank>dimarub2000</a>)</li><li>允许使用 <code class=syntax>clickhouse-copier</code> 通过允许空数据库名称来实现具有交叉复制的群集拓扑。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5745 rel="external nofollow noreferrer" target=_blank>#5745</a> (<a href=https://github.com/nvartolomei rel="external nofollow noreferrer" target=_blank>纳瓦托洛梅</a>)</li><li>使用 <code class=syntax>UTC</code> 作为系统上的默认时区，而不 <code class=syntax>tzdata</code> (e.g. bare Docker container). Before this patch, error message <code class=syntax>Could not determine local time zone</code> 被打印并且服务器或客户机拒绝启动。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5827 rel="external nofollow noreferrer" target=_blank>#5827</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>返回对函数中浮点参数的支持 <code class=syntax>quantileTiming</code> 为了向后兼容性。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5911 rel="external nofollow noreferrer" target=_blank>#5911</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>在错误消息中显示哪个表缺少列。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5768 rel="external nofollow noreferrer" target=_blank>#5768</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>伊万</a>)</li><li>不允许不同用户使用相同的query_id运行查询 <a href=https://github.com/ClickHouse/ClickHouse/pull/5430 rel="external nofollow noreferrer" target=_blank>#5430</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li><li>用于向Graphite发送指标的更强大的代码。 它甚至可以在长时间的多重工作 <code class=syntax>RENAME TABLE</code> 操作。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5875 rel="external nofollow noreferrer" target=_blank>#5875</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>当ThreadPool无法计划执行任务时，将显示更多信息错误消息。 这修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/5305 rel="external nofollow noreferrer" target=_blank>#5305</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/5801 rel="external nofollow noreferrer" target=_blank>#5801</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>反转ngramSearch更直观 <a href=https://github.com/ClickHouse/ClickHouse/pull/5807 rel="external nofollow noreferrer" target=_blank>#5807</a> (<a href=https://github.com/danlark1 rel="external nofollow noreferrer" target=_blank>Danila Kutenin</a>)</li><li>在HDFS引擎生成器中添加用户解析 <a href=https://github.com/ClickHouse/ClickHouse/pull/5946 rel="external nofollow noreferrer" target=_blank>#5946</a> (<a href=https://github.com/akonyaev90 rel="external nofollow noreferrer" target=_blank>akonyaev90</a>)</li><li>更新默认值 <code class=syntax>max_ast_elements parameter</code> <a href=https://github.com/ClickHouse/ClickHouse/pull/5933 rel="external nofollow noreferrer" target=_blank>#5933</a> (<a href=https://github.com/izebit rel="external nofollow noreferrer" target=_blank>Artem Konovalov</a>)</li><li>增加了过时设置的概念。 过时的设置 <code class=syntax>allow_experimental_low_cardinality_type</code> 可以没有效果使用。 <a href=https://github.com/ClickHouse/ClickHouse/commit/0f15c01c6802f7ce1a1494c12c846be8c98944cd rel="external nofollow noreferrer" target=_blank>0f15c01c6802f7ce1a1494c12c846be8c98944cd</a> <a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>Alexey Milovidov</a></li></ul><h4 id=performance-improvement-4>性能改进<a class=headerlink href=../amp/#performance-improvement-4 title="Permanent link"> </a></h4><ul><li>增加从合并表中选择的流数量，以便更均匀地分布线程。 添加设置 <code class=syntax>max_streams_multiplier_for_merge_tables</code>. 这修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/5797 rel="external nofollow noreferrer" target=_blank>#5797</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/5915 rel="external nofollow noreferrer" target=_blank>#5915</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li></ul><h4 id=buildtestingpackaging-improvement-7>构建/测试/包装改进<a class=headerlink href=../amp/#buildtestingpackaging-improvement-7 title="Permanent link"> </a></h4><ul><li>为与不同版本的clickhouse的客户端-服务器交互添加向后兼容性测试。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5868 rel="external nofollow noreferrer" target=_blank>#5868</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li><li>每个提交和拉取请求中的测试复盖率信息。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5896 rel="external nofollow noreferrer" target=_blank>#5896</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li><li>与address sanitizer合作，支持我们的自定义分alloc (<code class=syntax>Arena</code> 和 <code class=syntax>ArenaWithFreeLists</code>）为了更好地调试 “use-after-free” 错误。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5728 rel="external nofollow noreferrer" target=_blank>#5728</a> (<a href=https://github.com/akuzm rel="external nofollow noreferrer" target=_blank>akuzm</a>)</li><li>切换到 <a href=https://github.com/llvm-mirror/libunwind rel="external nofollow noreferrer" target=_blank>LLVM libunwind实现</a> 用于C++异常处理和堆栈跟踪打印 <a href=https://github.com/ClickHouse/ClickHouse/pull/4828 rel="external nofollow noreferrer" target=_blank>#4828</a> (<a href=https://github.com/laplab rel="external nofollow noreferrer" target=_blank>尼基塔*拉普科夫</a>)</li><li>添加来自-Weverything的两个警告 <a href=https://github.com/ClickHouse/ClickHouse/pull/5923 rel="external nofollow noreferrer" target=_blank>#5923</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>允许用内存消毒剂建立ClickHouse。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3949 rel="external nofollow noreferrer" target=_blank>#3949</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>关于固定的ubsan报告 <code class=syntax>bitTest</code> 在模糊测试功能。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5943 rel="external nofollow noreferrer" target=_blank>#5943</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>Docker：增加了初始化需要身份验证的ClickHouse实例的可能性。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5727 rel="external nofollow noreferrer" target=_blank>#5727</a> (<a href=https://github.com/shurshun rel="external nofollow noreferrer" target=_blank>科尔维亚科夫*安德烈</a>)</li><li>将librdkafka更新到版本1.1.0 <a href=https://github.com/ClickHouse/ClickHouse/pull/5872 rel="external nofollow noreferrer" target=_blank>#5872</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>伊万</a>)</li><li>为集成测试添加全局超时，并在测试代码中禁用其中一些。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5741 rel="external nofollow noreferrer" target=_blank>#5741</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li><li>修复一些ThreadSanitizer故障。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5854 rel="external nofollow noreferrer" target=_blank>#5854</a> (<a href=https://github.com/akuzm rel="external nofollow noreferrer" target=_blank>akuzm</a>)</li><li>该 <code class=syntax>--no-undefined</code> 选项强制链接器在链接时检查所有外部名称是否存在。 在拆分构建模式下跟踪库之间的真实依赖关系非常有用。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5855 rel="external nofollow noreferrer" target=_blank>#5855</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>伊万</a>)</li><li>增加了性能测试 <a href=https://github.com/ClickHouse/ClickHouse/issues/5797 rel="external nofollow noreferrer" target=_blank>#5797</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/5914 rel="external nofollow noreferrer" target=_blank>#5914</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>与gcc-7固定兼容性。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5840 rel="external nofollow noreferrer" target=_blank>#5840</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>增加了对gcc-9的支持。 这修复 <a href=https://github.com/ClickHouse/ClickHouse/issues/5717 rel="external nofollow noreferrer" target=_blank>#5717</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/5774 rel="external nofollow noreferrer" target=_blank>#5774</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>修复了libunwind链接不正确时的错误。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5948 rel="external nofollow noreferrer" target=_blank>#5948</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>修复了PVS-Studio发现的一些警告。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5921 rel="external nofollow noreferrer" target=_blank>#5921</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>增加了初始支持 <code class=syntax>clang-tidy</code> 静态分析仪。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5806 rel="external nofollow noreferrer" target=_blank>#5806</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>转换BSD/Linux endian宏( ‘be64toh’ 和 ‘htobe64’）到Mac OS x当量 <a href=https://github.com/ClickHouse/ClickHouse/pull/5785 rel="external nofollow noreferrer" target=_blank>#5785</a> (<a href=https://github.com/fredchenbj rel="external nofollow noreferrer" target=_blank>傅辰</a>)</li><li>改进的集成测试指南. <a href=https://github.com/ClickHouse/ClickHouse/pull/5796 rel="external nofollow noreferrer" target=_blank>#5796</a> (<a href=https://github.com/excitoon rel="external nofollow noreferrer" target=_blank>Vladimir Chebotarev</a>)</li><li>在macosx+gcc9修复构建 <a href=https://github.com/ClickHouse/ClickHouse/pull/5822 rel="external nofollow noreferrer" target=_blank>#5822</a> (<a href=https://github.com/filimonov rel="external nofollow noreferrer" target=_blank>filimonov</a>)</li><li>修复难以识别的错字：aggreAGte-&gt;aggregate。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5753 rel="external nofollow noreferrer" target=_blank>#5753</a> (<a href=https://github.com/akuzm rel="external nofollow noreferrer" target=_blank>akuzm</a>)</li><li>修复freebsd构建 <a href=https://github.com/ClickHouse/ClickHouse/pull/5760 rel="external nofollow noreferrer" target=_blank>#5760</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li><li>添加链接到实验YouTube频道的网站 <a href=https://github.com/ClickHouse/ClickHouse/pull/5845 rel="external nofollow noreferrer" target=_blank>#5845</a> (<a href=https://github.com/blinkov rel="external nofollow noreferrer" target=_blank>伊万*布林科夫</a>)</li><li>CMake：为复盖率标志添加选项：WITH_COVERAGE <a href=https://github.com/ClickHouse/ClickHouse/pull/5776 rel="external nofollow noreferrer" target=_blank>#5776</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li><li>修复一些内联PODArray的初始大小。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5787 rel="external nofollow noreferrer" target=_blank>#5787</a> (<a href=https://github.com/akuzm rel="external nofollow noreferrer" target=_blank>akuzm</a>)</li><li>clickhouse服务器.postinst：修复centos6的操作系统检测 <a href=https://github.com/ClickHouse/ClickHouse/pull/5788 rel="external nofollow noreferrer" target=_blank>#5788</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li><li>添加Arch linux软件包生成。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5719 rel="external nofollow noreferrer" target=_blank>#5719</a> (<a href=https://github.com/excitoon rel="external nofollow noreferrer" target=_blank>Vladimir Chebotarev</a>)</li><li>拆分常见/配置.h by libs(dbms) <a href=https://github.com/ClickHouse/ClickHouse/pull/5715 rel="external nofollow noreferrer" target=_blank>#5715</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li><li>修复了 “Arcadia” 构建平台 <a href=https://github.com/ClickHouse/ClickHouse/pull/5795 rel="external nofollow noreferrer" target=_blank>#5795</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li><li>修复了非常规构建（gcc9，没有子模块) <a href=https://github.com/ClickHouse/ClickHouse/pull/5792 rel="external nofollow noreferrer" target=_blank>#5792</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li><li>在unalignedStore中需要显式类型，因为它被证明容易出现错误 <a href=https://github.com/ClickHouse/ClickHouse/pull/5791 rel="external nofollow noreferrer" target=_blank>#5791</a> (<a href=https://github.com/akuzm rel="external nofollow noreferrer" target=_blank>akuzm</a>)</li><li>修复MacOS构建 <a href=https://github.com/ClickHouse/ClickHouse/pull/5830 rel="external nofollow noreferrer" target=_blank>#5830</a> (<a href=https://github.com/filimonov rel="external nofollow noreferrer" target=_blank>filimonov</a>)</li><li>关于具有更大数据集的新JIT功能的性能测试，请参阅此处 <a href=https://github.com/ClickHouse/ClickHouse/issues/5263 rel="external nofollow noreferrer" target=_blank>#5263</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/5887 rel="external nofollow noreferrer" target=_blank>#5887</a> (<a href=https://github.com/YiuRULE rel="external nofollow noreferrer" target=_blank>纪尧姆*塔瑟里</a>)</li><li>在压力测试中运行有状态测试 <a href=https://github.com/ClickHouse/ClickHouse/commit/12693e568722f11e19859742f56428455501fd2a rel="external nofollow noreferrer" target=_blank>12693e568722f11e19859742f56428455501fd2a</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li></ul><h4 id=backward-incompatible-change-7>向后不兼容的更改<a class=headerlink href=../amp/#backward-incompatible-change-7 title="Permanent link"> </a></h4><ul><li><code class=syntax>Kafka</code> 在这个版本中被打破。</li><li>启用 <code class=syntax>adaptive_index_granularity</code> =10mb默认为新 <code class=syntax>MergeTree</code> 桌子 如果您在19.11+版本上创建了新的MergeTree表，则不可能降级到19.6之前的版本。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5628 rel="external nofollow noreferrer" target=_blank>#5628</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li><li>删除了Yandex使用的过时无证嵌入式字典。梅特里卡 功能 <code class=syntax>OSIn</code>, <code class=syntax>SEIn</code>, <code class=syntax>OSToRoot</code>, <code class=syntax>SEToRoot</code>, <code class=syntax>OSHierarchy</code>, <code class=syntax>SEHierarchy</code> 不再可用。 如果您正在使用这些功能，请写电子邮件至clickhouse-feedback@yandex-team.com注：在最后时刻，我们决定保持这些功能一段时间。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5780 rel="external nofollow noreferrer" target=_blank>#5780</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li></ul><h2 id=clickhouse-release-19-10>ClickHouse释放19.10<a class=headerlink href=../amp/#clickhouse-release-19-10 title="Permanent link"> </a></h2><h3 id=clickhouse-release-19-10-1-5-2019-07-12>碌莽禄,拢,010-68520682\&lt;url&gt;戮卤篓拢,010-68520682\&lt;url&gt;<a class=headerlink href=../amp/#clickhouse-release-19-10-1-5-2019-07-12 title="Permanent link"> </a></h3><h4 id=new-feature-7>新功能<a class=headerlink href=../amp/#new-feature-7 title="Permanent link"> </a></h4><ul><li>添加新列编解ec: <code class=syntax>T64</code>. 为（U）IntX/EnumX/Data（时间）/DecimalX列制作。 它应该适用于具有常量或小范围值的列。 编解码器本身允许放大或缩小数据类型而无需重新压缩。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5557 rel="external nofollow noreferrer" target=_blank>#5557</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li><li>添加数据库引擎 <code class=syntax>MySQL</code> 允许查看远程MySQL服务器中的所有表 <a href=https://github.com/ClickHouse/ClickHouse/pull/5599 rel="external nofollow noreferrer" target=_blank>#5599</a> (<a href=https://github.com/zhang2014 rel="external nofollow noreferrer" target=_blank>张冬</a>)</li><li><code class=syntax>bitmapContains</code> 执行。 这是2倍的速度比 <code class=syntax>bitmapHasAny</code> 如果第二个位图包含一个元素。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5535 rel="external nofollow noreferrer" target=_blank>#5535</a> (<a href=https://github.com/yuzhichang rel="external nofollow noreferrer" target=_blank>余志昌</a>)</li><li>支持 <code class=syntax>crc32</code> 功能（与MySQL或PHP中的行为完全相同）。 如果您需要散列函数，请不要使用它。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5661 rel="external nofollow noreferrer" target=_blank>#5661</a> (<a href=https://github.com/BHYCHIK rel="external nofollow noreferrer" target=_blank>Remen Ivan</a>)</li><li>已实施 <code class=syntax>SYSTEM START/STOP DISTRIBUTED SENDS</code> 查询控制异步插入到 <code class=syntax>Distributed</code> 桌子 <a href=https://github.com/ClickHouse/ClickHouse/pull/4935 rel="external nofollow noreferrer" target=_blank>#4935</a> (<a href=https://github.com/zhang2014 rel="external nofollow noreferrer" target=_blank>张冬</a>)</li></ul><h4 id=bug-fix-22>错误修复<a class=headerlink href=../amp/#bug-fix-22 title="Permanent link"> </a></h4><ul><li>在执行突变时忽略查询执行限制和合并限制的最大部件大小。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5659 rel="external nofollow noreferrer" target=_blank>#5659</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer" target=_blank>安东*波波夫</a>)</li><li>修复可能导致重复数据删除正常块（极其罕见）和插入重复块（更常见）的错误。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5549 rel="external nofollow noreferrer" target=_blank>#5549</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li><li>功能修复 <code class=syntax>arrayEnumerateUniqRanked</code> 对于具有空数组的参数 <a href=https://github.com/ClickHouse/ClickHouse/pull/5559 rel="external nofollow noreferrer" target=_blank>#5559</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li><li>不要在没有轮询任何消息的情况下订阅Kafka主题。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5698 rel="external nofollow noreferrer" target=_blank>#5698</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>伊万</a>)</li><li>使设置 <code class=syntax>join_use_nulls</code> 对于不能在Nullable内的类型不起作用 <a href=https://github.com/ClickHouse/ClickHouse/pull/5700 rel="external nofollow noreferrer" target=_blank>#5700</a> (<a href=https://github.com/stavrolia rel="external nofollow noreferrer" target=_blank>Olga Khvostikova</a>)</li><li>固定 <code class=syntax>Incorrect size of index granularity</code> 错误 <a href=https://github.com/ClickHouse/ClickHouse/pull/5720 rel="external nofollow noreferrer" target=_blank>#5720</a> (<a href=https://github.com/coraxster rel="external nofollow noreferrer" target=_blank>coraxster</a>)</li><li>修正浮动到十进制转换溢出 <a href=https://github.com/ClickHouse/ClickHouse/pull/5607 rel="external nofollow noreferrer" target=_blank>#5607</a> (<a href=https://github.com/coraxster rel="external nofollow noreferrer" target=_blank>coraxster</a>)</li><li>冲洗缓冲区时 <code class=syntax>WriteBufferFromHDFS</code>的析构函数被调用。 这修复了写入 <code class=syntax>HDFS</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/5684 rel="external nofollow noreferrer" target=_blank>#5684</a> (<a href=https://github.com/eejoin rel="external nofollow noreferrer" target=_blank>新东鹏</a>)</li></ul><h4 id=improvement-7>改进<a class=headerlink href=../amp/#improvement-7 title="Permanent link"> </a></h4><ul><li>对待空单元格 <code class=syntax>CSV</code> 作为默认值时的设置 <code class=syntax>input_format_defaults_for_omitted_fields</code> 被启用。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5625 rel="external nofollow noreferrer" target=_blank>#5625</a> (<a href=https://github.com/akuzm rel="external nofollow noreferrer" target=_blank>akuzm</a>)</li><li>外部字典的非阻塞加载。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5567 rel="external nofollow noreferrer" target=_blank>#5567</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer" target=_blank>维塔利*巴拉诺夫</a>)</li><li>可以根据设置动态更改已建立的连接的网络超时。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4558 rel="external nofollow noreferrer" target=_blank>#4558</a> (<a href=https://github.com/podshumok rel="external nofollow noreferrer" target=_blank>Konstantin Podshumok</a>)</li><li>使用 “public_suffix_list” 对于功能 <code class=syntax>firstSignificantSubdomain</code>, <code class=syntax>cutToFirstSignificantSubdomain</code>. 它使用一个完美的哈希表生成 <code class=syntax>gperf</code> 从文件生成的列表：<a href=https://publicsuffix.org/list/public target=_blank>https://publicsuffix.org/list/public</a>_suffix_list.dat（例如，现在我们认识到域 <code class=syntax>ac.uk</code> 作为非显着）。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5030 rel="external nofollow noreferrer" target=_blank>#5030</a> (<a href=https://github.com/YiuRULE rel="external nofollow noreferrer" target=_blank>纪尧姆*塔瑟里</a>)</li><li>通过 <code class=syntax>IPv6</code> 系统表中的数据类型;统一客户端信息列 <code class=syntax>system.processes</code> 和 <code class=syntax>system.query_log</code> <a href=https://github.com/ClickHouse/ClickHouse/pull/5640 rel="external nofollow noreferrer" target=_blank>#5640</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>使用会话与MySQL兼容性协议的连接。 #5476 <a href=https://github.com/ClickHouse/ClickHouse/pull/5646 rel="external nofollow noreferrer" target=_blank>#5646</a> (<a href=https://github.com/yurriy rel="external nofollow noreferrer" target=_blank>尤里*巴拉诺夫</a>)</li><li>支持更多 <code class=syntax>ALTER</code> 查询 <code class=syntax>ON CLUSTER</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/5593 rel="external nofollow noreferrer" target=_blank>#5593</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/5613 rel="external nofollow noreferrer" target=_blank>#5613</a> (<a href=https://github.com/sundy-li rel="external nofollow noreferrer" target=_blank>sundyli</a>)</li><li>碌莽禄Support: <code class=syntax>&lt;logger&gt;</code> 第1节 <code class=syntax>clickhouse-local</code> 配置文件。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5540 rel="external nofollow noreferrer" target=_blank>#5540</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li><li>允许运行查询 <code class=syntax>remote</code> 表函数 <code class=syntax>clickhouse-local</code> <a href=https://github.com/ClickHouse/ClickHouse/pull/5627 rel="external nofollow noreferrer" target=_blank>#5627</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li></ul><h4 id=performance-improvement-5>性能改进<a class=headerlink href=../amp/#performance-improvement-5 title="Permanent link"> </a></h4><ul><li>添加在MergeTree列末尾写最后标记的可能性。 它允许避免对超出表数据范围的键进行无用的读取。 仅当使用自适应索引粒度时才启用此功能。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5624 rel="external nofollow noreferrer" target=_blank>#5624</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li><li>通过减少非常慢的文件系统上的MergeTree表的性能 <code class=syntax>stat</code> syscalls <a href=https://github.com/ClickHouse/ClickHouse/pull/5648 rel="external nofollow noreferrer" target=_blank>#5648</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>修复了从版本19.6中引入的MergeTree表读取时的性能下降。 修复＃5631。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5633 rel="external nofollow noreferrer" target=_blank>#5633</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li></ul><h4 id=buildtestingpackaging-improvement-8>构建/测试/包装改进<a class=headerlink href=../amp/#buildtestingpackaging-improvement-8 title="Permanent link"> </a></h4><ul><li>已实施 <code class=syntax>TestKeeper</code> 作为用于测试的ZooKeeper接口的实现 <a href=https://github.com/ClickHouse/ClickHouse/pull/5643 rel="external nofollow noreferrer" target=_blank>#5643</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>) (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>levushkin aleksej</a>)</li><li>从现在起 <code class=syntax>.sql</code> 测试可以通过服务器隔离，并行运行，并使用随机数据库。 它允许更快地运行它们，使用自定义服务器配置添加新的测试，并确保不同的测试不会相互影响。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5554 rel="external nofollow noreferrer" target=_blank>#5554</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>伊万</a>)</li><li>删除 <code class=syntax>&lt;name&gt;</code> 和 <code class=syntax>&lt;metrics&gt;</code> 从性能测试 <a href=https://github.com/ClickHouse/ClickHouse/pull/5672 rel="external nofollow noreferrer" target=_blank>#5672</a> (<a href=https://github.com/stavrolia rel="external nofollow noreferrer" target=_blank>Olga Khvostikova</a>)</li><li>固定 “select_format” 性能测试 <code class=syntax>Pretty</code> 格式 <a href=https://github.com/ClickHouse/ClickHouse/pull/5642 rel="external nofollow noreferrer" target=_blank>#5642</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li></ul><h2 id=clickhouse-release-19-9>ClickHouse释放19.9<a class=headerlink href=../amp/#clickhouse-release-19-9 title="Permanent link"> </a></h2><h3 id=clickhouse-release-19-9-3-31-2019-07-05>碌莽禄,拢,010-68520682\&lt;url&gt;戮卤篓拢,010-68520682\&lt;url&gt;<a class=headerlink href=../amp/#clickhouse-release-19-9-3-31-2019-07-05 title="Permanent link"> </a></h3><h4 id=bug-fix-23>错误修复<a class=headerlink href=../amp/#bug-fix-23 title="Permanent link"> </a></h4><ul><li>修复增量编解码器中的段错误，这会影响值小于32位大小的列。 该错误导致随机内存损坏。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5786 rel="external nofollow noreferrer" target=_blank>#5786</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li><li>修复在检查部分低心率列中罕见的错误。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5832 rel="external nofollow noreferrer" target=_blank>#5832</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li><li>修复ttl合并中的段错误与块中的非物理列。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5819 rel="external nofollow noreferrer" target=_blank>#5819</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer" target=_blank>安东*波波夫</a>)</li><li>修复低优先级查询的潜在无限休眠。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5842 rel="external nofollow noreferrer" target=_blank>#5842</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>修复ClickHouse如何将默认时区确定为UCT而不是UTC。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5828 rel="external nofollow noreferrer" target=_blank>#5828</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>修复在领导者副本之前的跟随者副本上执行分布式删除/更改/截断/优化集群查询的错误。 现在他们将直接在领导者副本上执行。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5757 rel="external nofollow noreferrer" target=_blank>#5757</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li><li>修复了系统刷新日志查询后某些查询可能不会立即出现在query_log中的竞争条件。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5685 rel="external nofollow noreferrer" target=_blank>#5685</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer" target=_blank>安东*波波夫</a>)</li><li>增加了对常量参数的缺失支持 <code class=syntax>evalMLModel</code> 功能。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5820 rel="external nofollow noreferrer" target=_blank>#5820</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li></ul><h3 id=clickhouse-release-19-9-2-4-2019-06-24>碌莽禄,拢,010-68520682\&lt;url&gt;戮卤篓拢,010-68520682\&lt;url&gt;<a class=headerlink href=../amp/#clickhouse-release-19-9-2-4-2019-06-24 title="Permanent link"> </a></h3><h4 id=new-feature-8>新功能<a class=headerlink href=../amp/#new-feature-8 title="Permanent link"> </a></h4><ul><li>打印有关冷冻部件的信息 <code class=syntax>system.parts</code> 桌子 <a href=https://github.com/ClickHouse/ClickHouse/pull/5471 rel="external nofollow noreferrer" target=_blank>#5471</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li><li>在clickhouse上询问客户端密码-如果未在参数中设置，则在tty上启动客户端 <a href=https://github.com/ClickHouse/ClickHouse/pull/5092 rel="external nofollow noreferrer" target=_blank>#5092</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li><li>执行 <code class=syntax>dictGet</code> 和 <code class=syntax>dictGetOrDefault</code> 十进制类型的函数。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5394 rel="external nofollow noreferrer" target=_blank>#5394</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li></ul><h4 id=improvement-8>改进<a class=headerlink href=../amp/#improvement-8 title="Permanent link"> </a></h4><ul><li>Debian的初始化：添加服务停止超时 <a href=https://github.com/ClickHouse/ClickHouse/pull/5522 rel="external nofollow noreferrer" target=_blank>#5522</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li><li>默认情况下添加禁止设置，以创建具有可疑类型的表格 <a href=https://github.com/ClickHouse/ClickHouse/pull/5448 rel="external nofollow noreferrer" target=_blank>#5448</a> (<a href=https://github.com/stavrolia rel="external nofollow noreferrer" target=_blank>Olga Khvostikova</a>)</li><li>当不用作函数中的状态时，回归函数返回模型权重 <code class=syntax>evalMLMethod</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/5411 rel="external nofollow noreferrer" target=_blank>#5411</a> (<a href=https://github.com/Quid37 rel="external nofollow noreferrer" target=_blank>Quid37</a>)</li><li>重命名和改进回归方法。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5492 rel="external nofollow noreferrer" target=_blank>#5492</a> (<a href=https://github.com/Quid37 rel="external nofollow noreferrer" target=_blank>Quid37</a>)</li><li>更清晰的字符串搜索界面。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5586 rel="external nofollow noreferrer" target=_blank>#5586</a> (<a href=https://github.com/danlark1 rel="external nofollow noreferrer" target=_blank>Danila Kutenin</a>)</li></ul><h4 id=bug-fix-24>错误修复<a class=headerlink href=../amp/#bug-fix-24 title="Permanent link"> </a></h4><ul><li>修复Kafka中潜在的数据丢失 <a href=https://github.com/ClickHouse/ClickHouse/pull/5445 rel="external nofollow noreferrer" target=_blank>#5445</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>伊万</a>)</li><li>修复潜在的无限循环 <code class=syntax>PrettySpace</code> 使用零列调用时的格式 <a href=https://github.com/ClickHouse/ClickHouse/pull/5560 rel="external nofollow noreferrer" target=_blank>#5560</a> (<a href=https://github.com/stavrolia rel="external nofollow noreferrer" target=_blank>Olga Khvostikova</a>)</li><li>修正了线性模型中的UInt32溢出错误。 允许对非常量模型参数的eval ML模型。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5516 rel="external nofollow noreferrer" target=_blank>#5516</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>尼古拉*科切托夫</a>)</li><li><code class=syntax>ALTER TABLE ... DROP INDEX IF EXISTS ...</code> 如果提供的索引不存在，则不应引发异常 <a href=https://github.com/ClickHouse/ClickHouse/pull/5524 rel="external nofollow noreferrer" target=_blank>#5524</a> (<a href=https://github.com/NanoBjorn rel="external nofollow noreferrer" target=_blank>格列布*诺维科夫</a>)</li><li>修复段错误 <code class=syntax>bitmapHasAny</code> 在标量子查询中 <a href=https://github.com/ClickHouse/ClickHouse/pull/5528 rel="external nofollow noreferrer" target=_blank>#5528</a> (<a href=https://github.com/yuzhichang rel="external nofollow noreferrer" target=_blank>余志昌</a>)</li><li>修复了复制连接池不重试解析主机时的错误，即使删除了DNS缓存。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5534 rel="external nofollow noreferrer" target=_blank>#5534</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li><li>固定 <code class=syntax>ALTER ... MODIFY TTL</code> 在ReplicatedMergeTree上。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5539 rel="external nofollow noreferrer" target=_blank>#5539</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer" target=_blank>安东*波波夫</a>)</li><li>修复插入到具体化列的分布式表中 <a href=https://github.com/ClickHouse/ClickHouse/pull/5429 rel="external nofollow noreferrer" target=_blank>#5429</a> (<a href=https://github.com/azat rel="external nofollow noreferrer" target=_blank>Azat Khuzhin</a>)</li><li>修复截断联接存储时的错误alloc <a href=https://github.com/ClickHouse/ClickHouse/pull/5437 rel="external nofollow noreferrer" target=_blank>#5437</a> (<a href=https://github.com/TCeason rel="external nofollow noreferrer" target=_blank>TCeason</a>)</li><li>在最近版本的包tzdata中，现在有些文件是符号链接。 当前用于检测默认时区的机制被打破，并为某些时区提供错误的名称。 现在至少我们强制时区名称到TZ的内容，如果提供。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5443 rel="external nofollow noreferrer" target=_blank>#5443</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>伊万</a>)</li><li>修复一些极为罕见的情况下，MultiVolnitsky搜索器时，在总和恒定针至少16KB长。 该算法错过或复盖以前的结果，这可能导致错误的结果 <code class=syntax>multiSearchAny</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/5588 rel="external nofollow noreferrer" target=_blank>#5588</a> (<a href=https://github.com/danlark1 rel="external nofollow noreferrer" target=_blank>Danila Kutenin</a>)</li><li>修复ExternalData请求的设置无法使用ClickHouse设置时的问题。 此外，现在，设置 <code class=syntax>date_time_input_format</code> 和 <code class=syntax>low_cardinality_allow_in_native_format</code> 由于名称的歧义，无法使用（在外部数据中，它可以解释为表格式，在查询中它可以是一个设置）。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5455 rel="external nofollow noreferrer" target=_blank>#5455</a> (<a href=https://github.com/danlark1 rel="external nofollow noreferrer" target=_blank>Danila Kutenin</a>)</li><li>修复只从FS中删除部件而不从Zookeeper中删除部件时的错误。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5520 rel="external nofollow noreferrer" target=_blank>#5520</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li><li>从MySQL协议中删除调试日志记录 <a href=https://github.com/ClickHouse/ClickHouse/pull/5478 rel="external nofollow noreferrer" target=_blank>#5478</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>在DDL查询处理过程中跳过ZNONODE <a href=https://github.com/ClickHouse/ClickHouse/pull/5489 rel="external nofollow noreferrer" target=_blank>#5489</a> (<a href=https://github.com/azat rel="external nofollow noreferrer" target=_blank>Azat Khuzhin</a>)</li><li>修复混合 <code class=syntax>UNION ALL</code> 结果列类型。 有些情况下，结果列的数据和列类型不一致。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5503 rel="external nofollow noreferrer" target=_blank>#5503</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li><li>在错误的整数上抛出异常 <code class=syntax>dictGetT</code> 功能，而不是崩溃。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5446 rel="external nofollow noreferrer" target=_blank>#5446</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li><li>修复散列字典中错误的element_count和load_factor <code class=syntax>system.dictionaries</code> 桌子 <a href=https://github.com/ClickHouse/ClickHouse/pull/5440 rel="external nofollow noreferrer" target=_blank>#5440</a> (<a href=https://github.com/azat rel="external nofollow noreferrer" target=_blank>Azat Khuzhin</a>)</li></ul><h4 id=buildtestingpackaging-improvement-9>构建/测试/包装改进<a class=headerlink href=../amp/#buildtestingpackaging-improvement-9 title="Permanent link"> </a></h4><ul><li>固定构建没有 <code class=syntax>Brotli</code> HTTP压缩支持 (<code class=syntax>ENABLE_BROTLI=OFF</code> cmake变量）。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5521 rel="external nofollow noreferrer" target=_blank>#5521</a> (<a href=https://github.com/citrin rel="external nofollow noreferrer" target=_blank>Anton Yuzhaninov</a>)</li><li>包括ro哮。h为ro哮/咆哮。h <a href=https://github.com/ClickHouse/ClickHouse/pull/5523 rel="external nofollow noreferrer" target=_blank>#5523</a> (<a href=https://github.com/orivej rel="external nofollow noreferrer" target=_blank>Origej Desh</a>)</li><li>修复超扫描中的gcc9警告（＃行指令是邪恶的！) <a href=https://github.com/ClickHouse/ClickHouse/pull/5546 rel="external nofollow noreferrer" target=_blank>#5546</a> (<a href=https://github.com/danlark1 rel="external nofollow noreferrer" target=_blank>Danila Kutenin</a>)</li><li>使用gcc-9编译时修复所有警告。 修复一些contrib问题。 修复gcc9ICE并将其提交给bugzilla。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5498 rel="external nofollow noreferrer" target=_blank>#5498</a> (<a href=https://github.com/danlark1 rel="external nofollow noreferrer" target=_blank>Danila Kutenin</a>)</li><li>与lld固定链接 <a href=https://github.com/ClickHouse/ClickHouse/pull/5477 rel="external nofollow noreferrer" target=_blank>#5477</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>删除字典中未使用的专业化 <a href=https://github.com/ClickHouse/ClickHouse/pull/5452 rel="external nofollow noreferrer" target=_blank>#5452</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li><li>针对不同类型的文件进行格式化和解析表的改进性能测试 <a href=https://github.com/ClickHouse/ClickHouse/pull/5497 rel="external nofollow noreferrer" target=_blank>#5497</a> (<a href=https://github.com/stavrolia rel="external nofollow noreferrer" target=_blank>Olga Khvostikova</a>)</li><li>修复并行测试运行 <a href=https://github.com/ClickHouse/ClickHouse/pull/5506 rel="external nofollow noreferrer" target=_blank>#5506</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li><li>Docker：使用clickhouse-test中的configs <a href=https://github.com/ClickHouse/ClickHouse/pull/5531 rel="external nofollow noreferrer" target=_blank>#5531</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li><li>修复编译为FreeBSD <a href=https://github.com/ClickHouse/ClickHouse/pull/5447 rel="external nofollow noreferrer" target=_blank>#5447</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li><li>升级提升到1.70 <a href=https://github.com/ClickHouse/ClickHouse/pull/5570 rel="external nofollow noreferrer" target=_blank>#5570</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li><li>修复构建clickhouse作为子模块 <a href=https://github.com/ClickHouse/ClickHouse/pull/5574 rel="external nofollow noreferrer" target=_blank>#5574</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li><li>改进JSONExtract性能测试 <a href=https://github.com/ClickHouse/ClickHouse/pull/5444 rel="external nofollow noreferrer" target=_blank>#5444</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer" target=_blank>维塔利*巴拉诺夫</a>)</li></ul><h2 id=clickhouse-release-19-8>ClickHouse释放19.8<a class=headerlink href=../amp/#clickhouse-release-19-8 title="Permanent link"> </a></h2><h3 id=clickhouse-release-19-8-3-8-2019-06-11>碌莽禄,拢,010-68520682\&lt;url&gt;戮卤篓拢,010-68520682\&lt;url&gt;<a class=headerlink href=../amp/#clickhouse-release-19-8-3-8-2019-06-11 title="Permanent link"> </a></h3><h4 id=new-features>新功能<a class=headerlink href=../amp/#new-features title="Permanent link"> </a></h4><ul><li>添加了与JSON一起使用的函数 <a href=https://github.com/ClickHouse/ClickHouse/pull/4686 rel="external nofollow noreferrer" target=_blank>#4686</a> (<a href=https://github.com/hczhcz rel="external nofollow noreferrer" target=_blank>hcz</a>) <a href=https://github.com/ClickHouse/ClickHouse/pull/5124 rel="external nofollow noreferrer" target=_blank>#5124</a>. (<a href=https://github.com/vitlibar rel="external nofollow noreferrer" target=_blank>维塔利*巴拉诺夫</a>)</li><li>添加一个函数basename，具有类似于basename函数的行为，它存在于许多语言中 (<code class=syntax>os.path.basename</code> 在python中, <code class=syntax>basename</code> in PHP, etc…). Work with both an UNIX-like path or a Windows path. <a href=https://github.com/ClickHouse/ClickHouse/pull/5136 rel="external nofollow noreferrer" target=_blank>#5136</a> (<a href=https://github.com/YiuRULE rel="external nofollow noreferrer" target=_blank>纪尧姆*塔瑟里</a>)</li><li>已添加 <code class=syntax>LIMIT n, m BY</code> 或 <code class=syntax>LIMIT m OFFSET n BY</code> 为LIMIT BY子句设置n偏移量的语法。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5138 rel="external nofollow noreferrer" target=_blank>#5138</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer" target=_blank>安东*波波夫</a>)</li><li>增加了新的数据类型 <code class=syntax>SimpleAggregateFunction</code>，它允许在一个具有光聚集的列 <code class=syntax>AggregatingMergeTree</code>. 这只能用于简单的功能，如 <code class=syntax>any</code>, <code class=syntax>anyLast</code>, <code class=syntax>sum</code>, <code class=syntax>min</code>, <code class=syntax>max</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/4629 rel="external nofollow noreferrer" target=_blank>#4629</a> (<a href=https://github.com/bgranvea rel="external nofollow noreferrer" target=_blank>Boris Granveaud</a>)</li><li>增加了对函数中非常量参数的支持 <code class=syntax>ngramDistance</code> <a href=https://github.com/ClickHouse/ClickHouse/pull/5198 rel="external nofollow noreferrer" target=_blank>#5198</a> (<a href=https://github.com/danlark1 rel="external nofollow noreferrer" target=_blank>Danila Kutenin</a>)</li><li>新增功能 <code class=syntax>skewPop</code>, <code class=syntax>skewSamp</code>, <code class=syntax>kurtPop</code> 和 <code class=syntax>kurtSamp</code> 分别计算序列偏度、样本偏度、峰度和样本峰度。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5200 rel="external nofollow noreferrer" target=_blank>#5200</a> (<a href=https://github.com/hczhcz rel="external nofollow noreferrer" target=_blank>hcz</a>)</li><li>支持重命名操作 <code class=syntax>MaterializeView</code> 存储。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5209 rel="external nofollow noreferrer" target=_blank>#5209</a> (<a href=https://github.com/YiuRULE rel="external nofollow noreferrer" target=_blank>纪尧姆*塔瑟里</a>)</li><li>添加了允许使用MySQL客户端连接到ClickHouse的服务器。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4715 rel="external nofollow noreferrer" target=_blank>#4715</a> (<a href=https://github.com/yurriy rel="external nofollow noreferrer" target=_blank>尤里*巴拉诺夫</a>)</li><li>添加 <code class=syntax>toDecimal*OrZero</code> 和 <code class=syntax>toDecimal*OrNull</code> 功能。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5291 rel="external nofollow noreferrer" target=_blank>#5291</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li><li>支持函数中的十进制类型: <code class=syntax>quantile</code>, <code class=syntax>quantiles</code>, <code class=syntax>median</code>, <code class=syntax>quantileExactWeighted</code>, <code class=syntax>quantilesExactWeighted</code> 媒体加权。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5304 rel="external nofollow noreferrer" target=_blank>#5304</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li><li>已添加 <code class=syntax>toValidUTF8</code> function, which replaces all invalid UTF-8 characters by replacement character � (U+FFFD). <a href=https://github.com/ClickHouse/ClickHouse/pull/5322 rel="external nofollow noreferrer" target=_blank>#5322</a> (<a href=https://github.com/danlark1 rel="external nofollow noreferrer" target=_blank>Danila Kutenin</a>)</li><li>已添加 <code class=syntax>format</code> 功能。 使用参数中列出的字符串格式化常量模式（简化的Python格式模式）。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5330 rel="external nofollow noreferrer" target=_blank>#5330</a> (<a href=https://github.com/danlark1 rel="external nofollow noreferrer" target=_blank>Danila Kutenin</a>)</li><li>已添加 <code class=syntax>system.detached_parts</code> 表包含有关分离部分的信息 <code class=syntax>MergeTree</code> 桌子 <a href=https://github.com/ClickHouse/ClickHouse/pull/5353 rel="external nofollow noreferrer" target=_blank>#5353</a> (<a href=https://github.com/akuzm rel="external nofollow noreferrer" target=_blank>akuzm</a>)</li><li>已添加 <code class=syntax>ngramSearch</code> 函数来计算针和大海捞针之间的非对称差异。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5418 rel="external nofollow noreferrer" target=_blank>#5418</a><a href=https://github.com/ClickHouse/ClickHouse/pull/5422 rel="external nofollow noreferrer" target=_blank>#5422</a> (<a href=https://github.com/danlark1 rel="external nofollow noreferrer" target=_blank>Danila Kutenin</a>)</li><li>使用聚合函数接口实现基本的机器学习方法（随机线性回归和逻辑回归）。 有不同的策略，用于更新模型权重（简单梯度下降，动量法，涅斯捷罗夫法）。 还支持自定义大小的小批次。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4943 rel="external nofollow noreferrer" target=_blank>#4943</a> (<a href=https://github.com/Quid37 rel="external nofollow noreferrer" target=_blank>Quid37</a>)</li><li>执行 <code class=syntax>geohashEncode</code> 和 <code class=syntax>geohashDecode</code> 功能。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5003 rel="external nofollow noreferrer" target=_blank>#5003</a> (<a href=https://github.com/Enmk rel="external nofollow noreferrer" target=_blank>瓦西里*内姆科夫</a>)</li><li>添加聚合功能 <code class=syntax>timeSeriesGroupSum</code>，从而可以聚合不同的时间序列，即采样时间戳不对齐。 它将在两个采样时间戳之间使用线性插值，然后将时间序列和在一起。 添加聚合功能 <code class=syntax>timeSeriesGroupRateSum</code>，它计算时间序列的速率，然后将速率总和在一起。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4542 rel="external nofollow noreferrer" target=_blank>#4542</a> (<a href=https://github.com/LiuYangkuan rel="external nofollow noreferrer" target=_blank>刘杨宽</a>)</li><li>新增功能 <code class=syntax>IPv4CIDRtoIPv4Range</code> 和 <code class=syntax>IPv6CIDRtoIPv6Range</code> 使用CIDR计算子网中IP的下限和上限。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5095 rel="external nofollow noreferrer" target=_blank>#5095</a> (<a href=https://github.com/YiuRULE rel="external nofollow noreferrer" target=_blank>纪尧姆*塔瑟里</a>)</li><li>添加一个X-ClickHouse-Summary头，当我们发送查询使用HTTP启用设置 <code class=syntax>send_progress_in_http_headers</code>. 返回X-ClickHouse-Progress的常用信息，以及其他信息，例如在查询中插入了多少行和字节。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5116 rel="external nofollow noreferrer" target=_blank>#5116</a> (<a href=https://github.com/YiuRULE rel="external nofollow noreferrer" target=_blank>纪尧姆*塔瑟里</a>)</li></ul><h4 id=improvements>改进<a class=headerlink href=../amp/#improvements title="Permanent link"> </a></h4><ul><li>已添加 <code class=syntax>max_parts_in_total</code> 设置表的MergeTree家族(默认:100 000)防止分区键的不安全规范#5166. <a href=https://github.com/ClickHouse/ClickHouse/pull/5171 rel="external nofollow noreferrer" target=_blank>#5171</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li><code class=syntax>clickhouse-obfuscator</code>:通过将初始种子与列名（而不是列位置）组合来派生单个列的种子。 这用于转换具有多个相关表的数据集，以便在转换后表将保持可联接。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5178 rel="external nofollow noreferrer" target=_blank>#5178</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>新增功能 <code class=syntax>JSONExtractRaw</code>, <code class=syntax>JSONExtractKeyAndValues</code>. 重命名函数 <code class=syntax>jsonExtract&lt;type&gt;</code> 到 <code class=syntax>JSONExtract&lt;type&gt;</code>. 当出现问题时，这些函数返回对应的值，而不是 <code class=syntax>NULL</code>. 修改功能 <code class=syntax>JSONExtract</code>，现在它从最后一个参数中获取返回类型，并且不会注入nullables。 在AVX2指令不可用的情况下实现了回退到RapidJSON。 Simdjson库更新到新版本。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5235 rel="external nofollow noreferrer" target=_blank>#5235</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer" target=_blank>维塔利*巴拉诺夫</a>)</li><li>现在 <code class=syntax>if</code> 和 <code class=syntax>multiIf</code> 功能不依赖于条件的 <code class=syntax>Nullable</code>，但依靠分支来实现sql兼容性。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5238 rel="external nofollow noreferrer" target=_blank>#5238</a> (<a href=https://github.com/janplus rel="external nofollow noreferrer" target=_blank>吴健</a>)</li><li><code class=syntax>In</code> 谓词现在生成 <code class=syntax>Null</code> 结果来自 <code class=syntax>Null</code> 输入像 <code class=syntax>Equal</code> 功能。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5152 rel="external nofollow noreferrer" target=_blank>#5152</a> (<a href=https://github.com/janplus rel="external nofollow noreferrer" target=_blank>吴健</a>)</li><li>检查来自Kafka的每个（flush_interval/poll_timeout）行数的时间限制。 这允许更频繁地中断Kafka consumer的读取，并检查顶级流的时间限制 <a href=https://github.com/ClickHouse/ClickHouse/pull/5249 rel="external nofollow noreferrer" target=_blank>#5249</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>伊万</a>)</li><li>链接rdkafka捆绑的SASL。 它应该允许使用SASL SCRAM身份验证 <a href=https://github.com/ClickHouse/ClickHouse/pull/5253 rel="external nofollow noreferrer" target=_blank>#5253</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>伊万</a>)</li><li>所有联接的RowRefList的批处理版本。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5267 rel="external nofollow noreferrer" target=_blank>#5267</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li><li>clickhouse服务器：更多信息侦听错误消息。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5268 rel="external nofollow noreferrer" target=_blank>#5268</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li><li>在clickhouse-复印机的功能支持字典 <code class=syntax>&lt;sharding_key&gt;</code> <a href=https://github.com/ClickHouse/ClickHouse/pull/5270 rel="external nofollow noreferrer" target=_blank>#5270</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li><li>添加新设置 <code class=syntax>kafka_commit_every_batch</code> 来规范卡夫卡的承诺政策。<br> 它允许设置提交模式：在处理每批消息之后，或者在整个块写入存储之后。 这是在某些极端情况下丢失一些消息或阅读两次之间的权衡。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5308 rel="external nofollow noreferrer" target=_blank>#5308</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>伊万</a>)</li><li>赂眉露&gt;&gt; <code class=syntax>windowFunnel</code> 支持其他无符号整数类型。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5320 rel="external nofollow noreferrer" target=_blank>#5320</a> (<a href=https://github.com/sundy-li rel="external nofollow noreferrer" target=_blank>sundyli</a>)</li><li>允许对虚拟列进行阴影 <code class=syntax>_table</code> 在合并引擎。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5325 rel="external nofollow noreferrer" target=_blank>#5325</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>伊万</a>)</li><li>赂眉露&gt;&gt; <code class=syntax>sequenceMatch</code> 聚合函数支持其他无符号整数类型 <a href=https://github.com/ClickHouse/ClickHouse/pull/5339 rel="external nofollow noreferrer" target=_blank>#5339</a> (<a href=https://github.com/sundy-li rel="external nofollow noreferrer" target=_blank>sundyli</a>)</li><li>如果校验和不匹配很可能是由硬件故障引起的，则更好的错误消息。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5355 rel="external nofollow noreferrer" target=_blank>#5355</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>检查基础表是否支持以下内容的采样 <code class=syntax>StorageMerge</code> <a href=https://github.com/ClickHouse/ClickHouse/pull/5366 rel="external nofollow noreferrer" target=_blank>#5366</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>伊万</a>)</li><li>Сlose MySQL connections after their usage in external dictionaries. It is related to issue #893. <a href=https://github.com/ClickHouse/ClickHouse/pull/5395 rel="external nofollow noreferrer" target=_blank>#5395</a> (<a href=https://github.com/clemrodriguez rel="external nofollow noreferrer" target=_blank>Clément Rodriguez</a>)</li><li>MySQL线协议的改进。 将格式名称更改为MySQLWire。 使用RAII调用RSA_free。 如果无法创建上下文，则禁用SSL。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5419 rel="external nofollow noreferrer" target=_blank>#5419</a> (<a href=https://github.com/yurriy rel="external nofollow noreferrer" target=_blank>尤里*巴拉诺夫</a>)</li><li>clickhouse-client: allow to run with unaccessable history file (read-only, no disk space, file is directory, …). <a href=https://github.com/ClickHouse/ClickHouse/pull/5431 rel="external nofollow noreferrer" target=_blank>#5431</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li><li>尊重异步插入到分布式表中的查询设置。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4936 rel="external nofollow noreferrer" target=_blank>#4936</a> (<a href=https://github.com/TCeason rel="external nofollow noreferrer" target=_blank>TCeason</a>)</li><li>重命名函数 <code class=syntax>leastSqr</code> 到 <code class=syntax>simpleLinearRegression</code>, <code class=syntax>LinearRegression</code> 到 <code class=syntax>linearRegression</code>, <code class=syntax>LogisticRegression</code> 到 <code class=syntax>logisticRegression</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/5391 rel="external nofollow noreferrer" target=_blank>#5391</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>尼古拉*科切托夫</a>)</li></ul><h4 id=performance-improvements>性能改进<a class=headerlink href=../amp/#performance-improvements title="Permanent link"> </a></h4><ul><li>在ALTER MODIFY查询中并行处理非复制MergeTree表的部分。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4639 rel="external nofollow noreferrer" target=_blank>#4639</a> (<a href=https://github.com/IvanKush rel="external nofollow noreferrer" target=_blank>伊万库什</a>)</li><li>Regular达式提取中的优化。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5193 rel="external nofollow noreferrer" target=_blank>#5193</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/5191 rel="external nofollow noreferrer" target=_blank>#5191</a> (<a href=https://github.com/danlark1 rel="external nofollow noreferrer" target=_blank>Danila Kutenin</a>)</li><li>如果仅在join on部分中使用，则不要将右连接键列添加到join result。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5260 rel="external nofollow noreferrer" target=_blank>#5260</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li><li>在第一个空响应之后冻结Kafka缓冲区。 它避免了多次调用 <code class=syntax>ReadBuffer::next()</code> 对于一些行解析流的空结果。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5283 rel="external nofollow noreferrer" target=_blank>#5283</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>伊万</a>)</li><li><code class=syntax>concat</code> 多个参数的函数优化。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5357 rel="external nofollow noreferrer" target=_blank>#5357</a> (<a href=https://github.com/danlark1 rel="external nofollow noreferrer" target=_blank>Danila Kutenin</a>)</li><li>Query optimisation. Allow push down IN statement while rewriting commа/cross join into inner one. <a href=https://github.com/ClickHouse/ClickHouse/pull/5396 rel="external nofollow noreferrer" target=_blank>#5396</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li><li>使用reference one升级我们的LZ4实现以获得更快的解压缩。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5070 rel="external nofollow noreferrer" target=_blank>#5070</a> (<a href=https://github.com/danlark1 rel="external nofollow noreferrer" target=_blank>Danila Kutenin</a>)</li><li>实现了MSD基数排序（基于kxsort）和部分排序。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5129 rel="external nofollow noreferrer" target=_blank>#5129</a> (<a href=https://github.com/kvinty rel="external nofollow noreferrer" target=_blank>Evgenii Pravda</a>)</li></ul><h4 id=bug-fixes>错误修复<a class=headerlink href=../amp/#bug-fixes title="Permanent link"> </a></h4><ul><li>修复推送需要列与联接 <a href=https://github.com/ClickHouse/ClickHouse/pull/5192 rel="external nofollow noreferrer" target=_blank>#5192</a> (<a href=https://github.com/zhang2014 rel="external nofollow noreferrer" target=_blank>张冬</a>)</li><li>修正了当ClickHouse由systemd运行时，命令 <code class=syntax>sudo service clickhouse-server forcerestart</code> 没有按预期工作。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5204 rel="external nofollow noreferrer" target=_blank>#5204</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li><li>修复DataPartsExchange中的http错误代码（9009端口上的服务器间http服务器始终返回代码200，即使是错误）。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5216 rel="external nofollow noreferrer" target=_blank>#5216</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li><li>修复SimpleAggregateFunction字符串长于MAX_SMALL_STRING_SIZE <a href=https://github.com/ClickHouse/ClickHouse/pull/5311 rel="external nofollow noreferrer" target=_blank>#5311</a> (<a href=https://github.com/azat rel="external nofollow noreferrer" target=_blank>Azat Khuzhin</a>)</li><li>修复错误 <code class=syntax>Decimal</code> 到 <code class=syntax>Nullable(Decimal)</code> 转换中。 支持其他十进制到十进制转换（包括不同的比例）。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5350 rel="external nofollow noreferrer" target=_blank>#5350</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li><li>修正了simdjson库中导致错误计算的FPU clobbering <code class=syntax>uniqHLL</code> 和 <code class=syntax>uniqCombined</code> 聚合函数和数学函数，如 <code class=syntax>log</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/5354 rel="external nofollow noreferrer" target=_blank>#5354</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>固定处理JSON函数中的混合常量/非常量情况。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5435 rel="external nofollow noreferrer" target=_blank>#5435</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer" target=_blank>维塔利*巴拉诺夫</a>)</li><li>修复 <code class=syntax>retention</code> 功能。 现在所有满足一行数据的条件都被添加到数据状态。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5119 rel="external nofollow noreferrer" target=_blank>#5119</a> (<a href=https://github.com/nicelulu rel="external nofollow noreferrer" target=_blank>小路</a>)</li><li>修复结果类型 <code class=syntax>quantileExact</code> 用小数。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5304 rel="external nofollow noreferrer" target=_blank>#5304</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li></ul><h4 id=documentation>文件<a class=headerlink href=../amp/#documentation title="Permanent link"> </a></h4><ul><li>翻译文档 <code class=syntax>CollapsingMergeTree</code> 到中国。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5168 rel="external nofollow noreferrer" target=_blank>#5168</a> (<a href=https://github.com/AlexZFX rel="external nofollow noreferrer" target=_blank>张风啸</a>)</li><li>将一些关于表格引擎的文档翻译成中文。<br><a href=https://github.com/ClickHouse/ClickHouse/pull/5134 rel="external nofollow noreferrer" target=_blank>#5134</a><br><a href=https://github.com/ClickHouse/ClickHouse/pull/5328 rel="external nofollow noreferrer" target=_blank>#5328</a><br> (<a href=https://github.com/neverlee rel="external nofollow noreferrer" target=_blank>永远不会李</a>)</li></ul><h4 id=buildtestingpackaging-improvements>构建/测试/打包改进<a class=headerlink href=../amp/#buildtestingpackaging-improvements title="Permanent link"> </a></h4><ul><li>修复一些显示可能使用后免费的消毒剂报告。<a href=https://github.com/ClickHouse/ClickHouse/pull/5139 rel="external nofollow noreferrer" target=_blank>#5139</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/5143 rel="external nofollow noreferrer" target=_blank>#5143</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/5393 rel="external nofollow noreferrer" target=_blank>#5393</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>伊万</a>)</li><li>为了方便起见，将性能测试从单独的目录中移出。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5158 rel="external nofollow noreferrer" target=_blank>#5158</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>修复不正确的性能测试。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5255 rel="external nofollow noreferrer" target=_blank>#5255</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li><li>增加了一个工具来计算由位翻转引起的校验和，以调试硬件问题。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5334 rel="external nofollow noreferrer" target=_blank>#5334</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>使亚军脚本更有用。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5340 rel="external nofollow noreferrer" target=_blank>#5340</a><a href=https://github.com/ClickHouse/ClickHouse/pull/5360 rel="external nofollow noreferrer" target=_blank>#5360</a> (<a href=https://github.com/filimonov rel="external nofollow noreferrer" target=_blank>filimonov</a>)</li><li>添加如何编写性能测试的小指令。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5408 rel="external nofollow noreferrer" target=_blank>#5408</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li><li>添加在性能测试中创建，填写和删除查询中进行替换的功能 <a href=https://github.com/ClickHouse/ClickHouse/pull/5367 rel="external nofollow noreferrer" target=_blank>#5367</a> (<a href=https://github.com/stavrolia rel="external nofollow noreferrer" target=_blank>Olga Khvostikova</a>)</li></ul><h2 id=clickhouse-release-19-7>ClickHouse释放19.7<a class=headerlink href=../amp/#clickhouse-release-19-7 title="Permanent link"> </a></h2><h3 id=clickhouse-release-19-7-5-29-2019-07-05>碌莽禄,拢,010-68520682\&lt;url&gt;戮卤篓拢,010-68520682\&lt;url&gt;<a class=headerlink href=../amp/#clickhouse-release-19-7-5-29-2019-07-05 title="Permanent link"> </a></h3><h4 id=bug-fix-25>错误修复<a class=headerlink href=../amp/#bug-fix-25 title="Permanent link"> </a></h4><ul><li>使用JOIN修复某些查询中的性能回归。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5192 rel="external nofollow noreferrer" target=_blank>#5192</a> (<a href=https://github.com/zhang2014 rel="external nofollow noreferrer" target=_blank>张冬</a>)</li></ul><h3 id=clickhouse-release-19-7-5-27-2019-06-09>碌莽禄,拢,010-68520682\&lt;url&gt;戮漏鹿芦,酶,虏卤赂拢,110102003042<a class=headerlink href=../amp/#clickhouse-release-19-7-5-27-2019-06-09 title="Permanent link"> </a></h3><h4 id=new-features-1>新功能<a class=headerlink href=../amp/#new-features-1 title="Permanent link"> </a></h4><ul><li>添加位图相关功能 <code class=syntax>bitmapHasAny</code> 和 <code class=syntax>bitmapHasAll</code> 类似于 <code class=syntax>hasAny</code> 和 <code class=syntax>hasAll</code> 数组的函数。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5279 rel="external nofollow noreferrer" target=_blank>#5279</a> (<a href=https://github.com/svladykin rel="external nofollow noreferrer" target=_blank>塞尔吉*弗拉季金</a>)</li></ul><h4 id=bug-fixes-1>错误修复<a class=headerlink href=../amp/#bug-fixes-1 title="Permanent link"> </a></h4><ul><li>修复段错误 <code class=syntax>minmax</code> 具有空值的索引。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5246 rel="external nofollow noreferrer" target=_blank>#5246</a> (<a href=https://github.com/nikvas0 rel="external nofollow noreferrer" target=_blank>尼基塔*瓦西列夫</a>)</li><li>根据需要输出标记"LIMIT BY"中的所有输入列。 它修复 ‘Not found column’ 某些分布式查询中出错。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5407 rel="external nofollow noreferrer" target=_blank>#5407</a> (<a href=https://github.com/kvap rel="external nofollow noreferrer" target=_blank>康斯坦丁*潘</a>)</li><li>修复 “Column ‘0’ already exists” 错误 <code class=syntax>SELECT .. PREWHERE</code> 在具有默认值的列上 <a href=https://github.com/ClickHouse/ClickHouse/pull/5397 rel="external nofollow noreferrer" target=_blank>#5397</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li><li>修复 <code class=syntax>ALTER MODIFY TTL</code> 查询开 <code class=syntax>ReplicatedMergeTree</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/5539/commits rel="external nofollow noreferrer" target=_blank>#5539</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer" target=_blank>安东*波波夫</a>)</li><li>当Kafka消费者无法启动时，不要使服务器崩溃。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5285 rel="external nofollow noreferrer" target=_blank>#5285</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>伊万</a>)</li><li>固定位图函数产生错误的结果。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5359 rel="external nofollow noreferrer" target=_blank>#5359</a> (<a href=https://github.com/andyyzh rel="external nofollow noreferrer" target=_blank>杨小姐</a>)</li><li>修复散列字典的element_count（不包括重复项) <a href=https://github.com/ClickHouse/ClickHouse/pull/5440 rel="external nofollow noreferrer" target=_blank>#5440</a> (<a href=https://github.com/azat rel="external nofollow noreferrer" target=_blank>Azat Khuzhin</a>)</li><li>使用环境变量TZ的内容作为时区的名称。 在某些情况下，它有助于正确检测默认时区。<a href=https://github.com/ClickHouse/ClickHouse/pull/5443 rel="external nofollow noreferrer" target=_blank>#5443</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>伊万</a>)</li><li>不要试图将整数转换为 <code class=syntax>dictGetT</code> 功能，因为它不能正常工作。 而是抛出一个异常。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5446 rel="external nofollow noreferrer" target=_blank>#5446</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li><li>在ExternalData HTTP请求修复设置。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5455 rel="external nofollow noreferrer" target=_blank>#5455</a> (<a href=https://github.com/danlark1 rel="external nofollow noreferrer" target=_blank>Danila<br> 库特宁</a>)</li><li>修复只从FS中删除部件而不从Zookeeper中删除部件时的错误。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5520 rel="external nofollow noreferrer" target=_blank>#5520</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li><li>修复分段故障 <code class=syntax>bitmapHasAny</code> 功能。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5528 rel="external nofollow noreferrer" target=_blank>#5528</a> (<a href=https://github.com/yuzhichang rel="external nofollow noreferrer" target=_blank>余志昌</a>)</li><li>修复了复制连接池不重试解析主机时的错误，即使删除了DNS缓存。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5534 rel="external nofollow noreferrer" target=_blank>#5534</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li><li>固定 <code class=syntax>DROP INDEX IF EXISTS</code> 查询。 现在 <code class=syntax>ALTER TABLE ... DROP INDEX IF EXISTS ...</code> 如果提供的索引不存在，查询不会引发异常。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5524 rel="external nofollow noreferrer" target=_blank>#5524</a> (<a href=https://github.com/NanoBjorn rel="external nofollow noreferrer" target=_blank>格列布*诺维科夫</a>)</li><li>修复联合所有超类型列。 有些情况下，结果列的数据和列类型不一致。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5503 rel="external nofollow noreferrer" target=_blank>#5503</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li><li>在DDL查询处理过程中跳过ZNONODE。 之前，如果另一个节点删除znode在任务队列中，那一个<br> 没有处理它，但已经得到子列表，将终止DDLWorker线程。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5489 rel="external nofollow noreferrer" target=_blank>#5489</a> (<a href=https://github.com/azat rel="external nofollow noreferrer" target=_blank>Azat Khuzhin</a>)</li><li>修复插入到具体化列的分布式（）表中。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5429 rel="external nofollow noreferrer" target=_blank>#5429</a> (<a href=https://github.com/azat rel="external nofollow noreferrer" target=_blank>Azat Khuzhin</a>)</li></ul><h3 id=clickhouse-release-19-7-3-9-2019-05-30>碌莽禄,拢,010-68520682\&lt;url&gt;戮卤篓拢,010-68520682\&lt;url&gt;<a class=headerlink href=../amp/#clickhouse-release-19-7-3-9-2019-05-30 title="Permanent link"> </a></h3><h4 id=new-features-2>新功能<a class=headerlink href=../amp/#new-features-2 title="Permanent link"> </a></h4><ul><li>允许限制用户可以指定的设置的范围。<br> 这些约束可以在用户设置配置文件中设置。<br><a href=https://github.com/ClickHouse/ClickHouse/pull/4931 rel="external nofollow noreferrer" target=_blank>#4931</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer" target=_blank>维塔利<br> 巴拉诺夫</a>)</li><li>添加该函数的第二个版本 <code class=syntax>groupUniqArray</code> 用一个可选的<br><code class=syntax>max_size</code> 限制结果数组大小的参数。 这<br> 行为类似于 <code class=syntax>groupArray(max_size)(x)</code> 功能。<br><a href=https://github.com/ClickHouse/ClickHouse/pull/5026 rel="external nofollow noreferrer" target=_blank>#5026</a> (<a href=https://github.com/YiuRULE rel="external nofollow noreferrer" target=_blank>纪尧姆<br> Tassery</a>)</li><li>对于TSVWithNames/CSVWithNames输入文件格式，列顺序现在可以是<br> 从文件头确定。 这是由控制<br><code class=syntax>input_format_with_names_use_header</code> 参数。<br><a href=https://github.com/ClickHouse/ClickHouse/pull/5081 rel="external nofollow noreferrer" target=_blank>#5081</a><br> (<a href=https://github.com/Akazz rel="external nofollow noreferrer" target=_blank>亚历山大</a>)</li></ul><h4 id=bug-fixes-2>错误修复<a class=headerlink href=../amp/#bug-fixes-2 title="Permanent link"> </a></h4><ul><li>在合并过程中uncompressed_cache+JOIN崩溃（＃5197)<br><a href=https://github.com/ClickHouse/ClickHouse/pull/5133 rel="external nofollow noreferrer" target=_blank>#5133</a> (<a href=https://github.com/danlark1 rel="external nofollow noreferrer" target=_blank>Danila<br> 库特宁</a>)</li><li>Clickhouse客户端查询到系统表上的分段错误。 #5066<br><a href=https://github.com/ClickHouse/ClickHouse/pull/5127 rel="external nofollow noreferrer" target=_blank>#5127</a><br> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>伊万</a>)</li><li>通过KafkaEngine重负载数据丢失（＃4736)<br><a href=https://github.com/ClickHouse/ClickHouse/pull/5080 rel="external nofollow noreferrer" target=_blank>#5080</a><br> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>伊万</a>)</li><li>修复了在执行UNION查询时可能发生的非常罕见的数据争用条件，所有查询都涉及至少两个来自系统的选择。列，系统。表，系统。部件，系统。parts_tables或Merge系列的表，并同时执行相关表的列的更改。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5189 rel="external nofollow noreferrer" target=_blank>#5189</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li></ul><h4 id=performance-improvements-1>性能改进<a class=headerlink href=../amp/#performance-improvements-1 title="Permanent link"> </a></h4><ul><li>使用基数排序按单个数字列进行排序 <code class=syntax>ORDER BY</code> 没有<br><code class=syntax>LIMIT</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/5106 rel="external nofollow noreferrer" target=_blank>#5106</a>,<br><a href=https://github.com/ClickHouse/ClickHouse/pull/4439 rel="external nofollow noreferrer" target=_blank>#4439</a><br> (<a href=https://github.com/kvinty rel="external nofollow noreferrer" target=_blank>Evgenii Pravda</a>,<br><a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li></ul><h4 id=documentation-1>文件<a class=headerlink href=../amp/#documentation-1 title="Permanent link"> </a></h4><ul><li>将某些表格引擎的文档翻译为中文。<br><a href=https://github.com/ClickHouse/ClickHouse/pull/5107 rel="external nofollow noreferrer" target=_blank>#5107</a>,<br><a href=https://github.com/ClickHouse/ClickHouse/pull/5094 rel="external nofollow noreferrer" target=_blank>#5094</a>,<br><a href=https://github.com/ClickHouse/ClickHouse/pull/5087 rel="external nofollow noreferrer" target=_blank>#5087</a><br> (<a href=https://github.com/AlexZFX rel="external nofollow noreferrer" target=_blank>张风啸</a>),<br><a href=https://github.com/ClickHouse/ClickHouse/pull/5068 rel="external nofollow noreferrer" target=_blank>#5068</a> (<a href=https://github.com/neverlee rel="external nofollow noreferrer" target=_blank>从来没有<br> 李</a>)</li></ul><h4 id=buildtestingpackaging-improvements-1>构建/测试/打包改进<a class=headerlink href=../amp/#buildtestingpackaging-improvements-1 title="Permanent link"> </a></h4><ul><li>正确打印UTF-8字符 <code class=syntax>clickhouse-test</code>.<br><a href=https://github.com/ClickHouse/ClickHouse/pull/5084 rel="external nofollow noreferrer" target=_blank>#5084</a><br> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>为clickhouse-client添加命令行参数以始终加载建议<br> 戴达 <a href=https://github.com/ClickHouse/ClickHouse/pull/5102 rel="external nofollow noreferrer" target=_blank>#5102</a><br> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>解决一些PVS-Studio警告。<br><a href=https://github.com/ClickHouse/ClickHouse/pull/5082 rel="external nofollow noreferrer" target=_blank>#5082</a><br> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>更新LZ4 <a href=https://github.com/ClickHouse/ClickHouse/pull/5040 rel="external nofollow noreferrer" target=_blank>#5040</a> (<a href=https://github.com/danlark1 rel="external nofollow noreferrer" target=_blank>Danila<br> 库特宁</a>)</li><li>添加gperf以构建即将到来的拉取请求＃5030的requirements。<br><a href=https://github.com/ClickHouse/ClickHouse/pull/5110 rel="external nofollow noreferrer" target=_blank>#5110</a><br> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li></ul><h2 id=clickhouse-release-19-6>ClickHouse释放19.6<a class=headerlink href=../amp/#clickhouse-release-19-6 title="Permanent link"> </a></h2><h3 id=clickhouse-release-19-6-3-18-2019-06-13>碌莽禄,拢,010-68520682\&lt;url&gt;戮卤篓拢,010-68520682\&lt;url&gt;<a class=headerlink href=../amp/#clickhouse-release-19-6-3-18-2019-06-13 title="Permanent link"> </a></h3><h4 id=bug-fixes-3>错误修复<a class=headerlink href=../amp/#bug-fixes-3 title="Permanent link"> </a></h4><ul><li>修复了来自表函数的查询的条件下推 <code class=syntax>mysql</code> 和 <code class=syntax>odbc</code> 和相应的表引擎。 这修复了＃3540和＃2384。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5313 rel="external nofollow noreferrer" target=_blank>#5313</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>修复动物园管理员的死锁。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5297 rel="external nofollow noreferrer" target=_blank>#5297</a> (<a href=https://github.com/github1youlc rel="external nofollow noreferrer" target=_blank>github1youlc</a>)</li><li>允许在CSV中引用小数。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5284 rel="external nofollow noreferrer" target=_blank>#5284</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a></li><li>禁止从float Inf/NaN转换为小数（抛出异常）。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5282 rel="external nofollow noreferrer" target=_blank>#5282</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li><li>修复重命名查询中的数据竞赛。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5247 rel="external nofollow noreferrer" target=_blank>#5247</a> (<a href=https://github.com/zhang2014 rel="external nofollow noreferrer" target=_blank>张冬</a>)</li><li>暂时禁用LFAlloc。 使用LFAlloc可能会导致大量MAP_FAILED在分配UncompressedCache时，并导致高负载服务器上的查询崩溃。 <a href=https://github.com/ClickHouse/ClickHouse/commit/cfdba938ce22f16efeec504f7f90206a515b1280 rel="external nofollow noreferrer" target=_blank>cfdba93</a>(<a href=https://github.com/danlark1 rel="external nofollow noreferrer" target=_blank>Danila Kutenin</a>)</li></ul><h3 id=clickhouse-release-19-6-2-11-2019-05-13>碌莽禄,拢,010-68520682\&lt;url&gt;戮卤篓拢,010-68520682\&lt;url&gt;<a class=headerlink href=../amp/#clickhouse-release-19-6-2-11-2019-05-13 title="Permanent link"> </a></h3><h4 id=new-features-3>新功能<a class=headerlink href=../amp/#new-features-3 title="Permanent link"> </a></h4><ul><li>列和表的TTL表达式。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4212 rel="external nofollow noreferrer" target=_blank>#4212</a> (<a href=https://github.com/CurtizJ rel="external nofollow noreferrer" target=_blank>安东*波波夫</a>)</li><li>增加了对 <code class=syntax>brotli</code> http响应的压缩（接受编码：br) <a href=https://github.com/ClickHouse/ClickHouse/pull/4388 rel="external nofollow noreferrer" target=_blank>#4388</a> (<a href=https://github.com/fandyushin rel="external nofollow noreferrer" target=_blank>米哈伊尔</a>)</li><li>增加了新功能 <code class=syntax>isValidUTF8</code> 用于检查一组字节是否被正确地utf-8编码。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4934 rel="external nofollow noreferrer" target=_blank>#4934</a> (<a href=https://github.com/danlark1 rel="external nofollow noreferrer" target=_blank>Danila Kutenin</a>)</li><li>添加新的负载平衡策略 <code class=syntax>first_or_random</code> 它将查询发送到第一个指定的主机，如果无法访问，则向分片的随机主机发送查询。 对于跨复制拓扑设置非常有用。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5012 rel="external nofollow noreferrer" target=_blank>#5012</a> (<a href=https://github.com/nvartolomei rel="external nofollow noreferrer" target=_blank>纳瓦托洛梅</a>)</li></ul><h4 id=experimental-features-1>实验特点<a class=headerlink href=../amp/#experimental-features-1 title="Permanent link"> </a></h4><ul><li>添加设置 <code class=syntax>index_granularity_bytes</code> (自适应索引粒度)对于MergeTree*表族. <a href=https://github.com/ClickHouse/ClickHouse/pull/4826 rel="external nofollow noreferrer" target=_blank>#4826</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li></ul><h4 id=improvements-1>改进<a class=headerlink href=../amp/#improvements-1 title="Permanent link"> </a></h4><ul><li>增加了对函数的非常量和负大小和长度参数的支持 <code class=syntax>substringUTF8</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/4989 rel="external nofollow noreferrer" target=_blank>#4989</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>在左联接中禁用向下推到右表，在右联接中禁用左表，并在完全联接中禁用两个表。 在某些情况下，这可以修复错误的连接结果。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4846 rel="external nofollow noreferrer" target=_blank>#4846</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>伊万</a>)</li><li><code class=syntax>clickhouse-copier</code>:从自动上传任务配置 <code class=syntax>--task-file</code> 备选案文 <a href=https://github.com/ClickHouse/ClickHouse/pull/4876 rel="external nofollow noreferrer" target=_blank>#4876</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li><li>为存储工厂和表函数工厂添加了错别字处理程序。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4891 rel="external nofollow noreferrer" target=_blank>#4891</a> (<a href=https://github.com/danlark1 rel="external nofollow noreferrer" target=_blank>Danila Kutenin</a>)</li><li>支持不带子查询的多个联接的星号和限定星号 <a href=https://github.com/ClickHouse/ClickHouse/pull/4898 rel="external nofollow noreferrer" target=_blank>#4898</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li><li>使缺少列错误消息更加用户友好。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4915 rel="external nofollow noreferrer" target=_blank>#4915</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li></ul><h4 id=performance-improvements-2>性能改进<a class=headerlink href=../amp/#performance-improvements-2 title="Permanent link"> </a></h4><ul><li>ASOF加速显着 <a href=https://github.com/ClickHouse/ClickHouse/pull/4924 rel="external nofollow noreferrer" target=_blank>#4924</a> (<a href=https://github.com/Gladdy rel="external nofollow noreferrer" target=_blank>Martijn Bakker</a>)</li></ul><h4 id=backward-incompatible-changes>向后不兼容的更改<a class=headerlink href=../amp/#backward-incompatible-changes title="Permanent link"> </a></h4><ul><li>HTTP头 <code class=syntax>Query-Id</code> 改名为 <code class=syntax>X-ClickHouse-Query-Id</code> 为了一致性。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4972 rel="external nofollow noreferrer" target=_blank>#4972</a> (<a href=https://github.com/fandyushin rel="external nofollow noreferrer" target=_blank>米哈伊尔</a>)</li></ul><h4 id=bug-fixes-4>错误修复<a class=headerlink href=../amp/#bug-fixes-4 title="Permanent link"> </a></h4><ul><li>修正了潜在的空指针取消引用 <code class=syntax>clickhouse-copier</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/4900 rel="external nofollow noreferrer" target=_blank>#4900</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li><li>修复了使用JOIN+ARRAY JOIN查询的错误 <a href=https://github.com/ClickHouse/ClickHouse/pull/4938 rel="external nofollow noreferrer" target=_blank>#4938</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li><li>固定挂在服务器的启动时，字典依赖于另一个字典通过引擎数据库=字典。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4962 rel="external nofollow noreferrer" target=_blank>#4962</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer" target=_blank>维塔利*巴拉诺夫</a>)</li><li>Partially fix distributed_product_mode = local. It's possible to allow columns of local tables in where/having/order by/… via table aliases. Throw exception if table does not have alias. There's not possible to access to the columns without table aliases yet. <a href=https://github.com/ClickHouse/ClickHouse/pull/4986 rel="external nofollow noreferrer" target=_blank>#4986</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li><li>修复潜在的错误结果 <code class=syntax>SELECT DISTINCT</code> 与 <code class=syntax>JOIN</code> <a href=https://github.com/ClickHouse/ClickHouse/pull/5001 rel="external nofollow noreferrer" target=_blank>#5001</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li><li>修复了在执行UNION查询时可能发生的非常罕见的数据争用条件，所有查询都涉及至少两个来自系统的选择。列，系统。表，系统。部件，系统。parts_tables或Merge系列的表，并同时执行相关表的列的更改。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5189 rel="external nofollow noreferrer" target=_blank>#5189</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li></ul><h4 id=buildtestingpackaging-improvements-2>构建/测试/打包改进<a class=headerlink href=../amp/#buildtestingpackaging-improvements-2 title="Permanent link"> </a></h4><ul><li>在不同的主机上运行clickhouse服务器时修复测试失败 <a href=https://github.com/ClickHouse/ClickHouse/pull/4713 rel="external nofollow noreferrer" target=_blank>#4713</a> (<a href=https://github.com/Enmk rel="external nofollow noreferrer" target=_blank>瓦西里*内姆科夫</a>)</li><li>clickhouse-test：在非tty环境中禁用颜色控制序列。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4937 rel="external nofollow noreferrer" target=_blank>#4937</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li><li>clickhouse-test：允许使用任何测试数据库（删除 <code class=syntax>test.</code> 在可能的情况下获得资格) <a href=https://github.com/ClickHouse/ClickHouse/pull/5008 rel="external nofollow noreferrer" target=_blank>#5008</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li><li>修复ubsan错误 <a href=https://github.com/ClickHouse/ClickHouse/pull/5037 rel="external nofollow noreferrer" target=_blank>#5037</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer" target=_blank>维塔利*巴拉诺夫</a>)</li><li>Yandex LFAlloc被添加到ClickHouse中，以不同的方式分配MarkCache和UncompressedCache数据，以更可靠地捕获段错误 <a href=https://github.com/ClickHouse/ClickHouse/pull/4995 rel="external nofollow noreferrer" target=_blank>#4995</a> (<a href=https://github.com/danlark1 rel="external nofollow noreferrer" target=_blank>Danila Kutenin</a>)</li><li>Python util帮助反向移植和更改日志。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4949 rel="external nofollow noreferrer" target=_blank>#4949</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>伊万</a>)</li></ul><h2 id=clickhouse-release-19-5>ClickHouse释放19.5<a class=headerlink href=../amp/#clickhouse-release-19-5 title="Permanent link"> </a></h2><h3 id=clickhouse-release-19-5-4-22-2019-05-13>碌莽禄,拢,010-68520682\&lt;url&gt;戮卤篓拢,010-68520682\&lt;url&gt;<a class=headerlink href=../amp/#clickhouse-release-19-5-4-22-2019-05-13 title="Permanent link"> </a></h3><h4 id=bug-fixes-5>错误修复<a class=headerlink href=../amp/#bug-fixes-5 title="Permanent link"> </a></h4><ul><li>修正了位图*功能中可能出现的崩溃 <a href=https://github.com/ClickHouse/ClickHouse/pull/5220 rel="external nofollow noreferrer" target=_blank>#5220</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/5228 rel="external nofollow noreferrer" target=_blank>#5228</a> (<a href=https://github.com/andyyzh rel="external nofollow noreferrer" target=_blank>杨小姐</a>)</li><li>修复了在执行UNION查询时可能发生的非常罕见的数据争用条件，所有查询都涉及至少两个来自系统的选择。列，系统。表，系统。部件，系统。parts_tables或Merge系列的表，并同时执行相关表的列的更改。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5189 rel="external nofollow noreferrer" target=_blank>#5189</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>修正错误 <code class=syntax>Set for IN is not created yet in case of using single LowCardinality column in the left part of IN</code>. 如果lowcardinality列是主键的一部分，则会发生此错误。 #5031 <a href=https://github.com/ClickHouse/ClickHouse/pull/5154 rel="external nofollow noreferrer" target=_blank>#5154</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>尼古拉*科切托夫</a>)</li><li>修改保留函数：如果一行同时满足第一个和第N个条件，则只有第一个满足的条件被添加到数据状态。 现在所有满足一行数据的条件都被添加到数据状态。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5119 rel="external nofollow noreferrer" target=_blank>#5119</a> (<a href=https://github.com/nicelulu rel="external nofollow noreferrer" target=_blank>小路</a>)</li></ul><h3 id=clickhouse-release-19-5-3-8-2019-04-18>碌莽禄,拢,010-68520682\&lt;url&gt;戮卤篓拢,010-68520682\&lt;url&gt;<a class=headerlink href=../amp/#clickhouse-release-19-5-3-8-2019-04-18 title="Permanent link"> </a></h3><h4 id=bug-fixes-6>错误修复<a class=headerlink href=../amp/#bug-fixes-6 title="Permanent link"> </a></h4><ul><li>固定设置类型 <code class=syntax>max_partitions_per_insert_block</code> 从布尔到UInt64。 <a href=https://github.com/ClickHouse/ClickHouse/pull/5028 rel="external nofollow noreferrer" target=_blank>#5028</a> (<a href=https://github.com/mhsekhavat rel="external nofollow noreferrer" target=_blank>2.Mohammad Hossein Sekhavat</a>)</li></ul><h3 id=clickhouse-release-19-5-2-6-2019-04-15>碌莽禄,拢,010-68520682\&lt;url&gt;戮卤篓拢,010-68520682\&lt;url&gt;<a class=headerlink href=../amp/#clickhouse-release-19-5-2-6-2019-04-15 title="Permanent link"> </a></h3><h4 id=new-features-4>新功能<a class=headerlink href=../amp/#new-features-4 title="Permanent link"> </a></h4><ul><li><a href=https://github.com/intel/hyperscan rel="external nofollow noreferrer" target=_blank>超扫描</a> 添加了多个正则表达式匹配（函数 <code class=syntax>multiMatchAny</code>, <code class=syntax>multiMatchAnyIndex</code>, <code class=syntax>multiFuzzyMatchAny</code>, <code class=syntax>multiFuzzyMatchAnyIndex</code>). <a href=https://github.com/ClickHouse/ClickHouse/pull/4780 rel="external nofollow noreferrer" target=_blank>#4780</a>, <a href=https://github.com/ClickHouse/ClickHouse/pull/4841 rel="external nofollow noreferrer" target=_blank>#4841</a> (<a href=https://github.com/danlark1 rel="external nofollow noreferrer" target=_blank>Danila Kutenin</a>)</li><li><code class=syntax>multiSearchFirstPosition</code> 添加了功能。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4780 rel="external nofollow noreferrer" target=_blank>#4780</a> (<a href=https://github.com/danlark1 rel="external nofollow noreferrer" target=_blank>Danila Kutenin</a>)</li><li>为表实现每行的预定义表达式筛选器。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4792 rel="external nofollow noreferrer" target=_blank>#4792</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>伊万</a>)</li><li>一种基于bloom过滤器的新型数据跳过索引（可用于 <code class=syntax>equal</code>, <code class=syntax>in</code> 和 <code class=syntax>like</code> 功能）。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4499 rel="external nofollow noreferrer" target=_blank>#4499</a> (<a href=https://github.com/nikvas0 rel="external nofollow noreferrer" target=_blank>尼基塔*瓦西列夫</a>)</li><li>已添加 <code class=syntax>ASOF JOIN</code> 它允许运行连接到最新已知值的查询。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4774 rel="external nofollow noreferrer" target=_blank>#4774</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/4867 rel="external nofollow noreferrer" target=_blank>#4867</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/4863 rel="external nofollow noreferrer" target=_blank>#4863</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/4875 rel="external nofollow noreferrer" target=_blank>#4875</a> (<a href=https://github.com/Gladdy rel="external nofollow noreferrer" target=_blank>Martijn Bakker</a>, <a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li><li>重写多个 <code class=syntax>COMMA JOIN</code> 到 <code class=syntax>CROSS JOIN</code>. 然后将它们重写为 <code class=syntax>INNER JOIN</code> 如果可能的话 <a href=https://github.com/ClickHouse/ClickHouse/pull/4661 rel="external nofollow noreferrer" target=_blank>#4661</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li></ul><h4 id=improvement-9>改进<a class=headerlink href=../amp/#improvement-9 title="Permanent link"> </a></h4><ul><li><code class=syntax>topK</code> 和 <code class=syntax>topKWeighted</code> 现在支持自定义 <code class=syntax>loadFactor</code> （修复问题 <a href=https://github.com/ClickHouse/ClickHouse/issues/4252 rel="external nofollow noreferrer" target=_blank>#4252</a>). <a href=https://github.com/ClickHouse/ClickHouse/pull/4634 rel="external nofollow noreferrer" target=_blank>#4634</a> (<a href=https://github.com/kirillDanshin rel="external nofollow noreferrer" target=_blank>基里尔丹信</a>)</li><li>允许使用 <code class=syntax>parallel_replicas_count &gt; 1</code> 即使对于没有采样的表（设置简单地忽略它们）。 在以前的版本中，它导致异常。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4637 rel="external nofollow noreferrer" target=_blank>#4637</a> (<a href=https://github.com/digitalist rel="external nofollow noreferrer" target=_blank>Alexey Elymanov</a>)</li><li>支持 <code class=syntax>CREATE OR REPLACE VIEW</code>. 允许在单个语句中创建视图或设置新定义。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4654 rel="external nofollow noreferrer" target=_blank>#4654</a> (<a href=https://github.com/bgranvea rel="external nofollow noreferrer" target=_blank>Boris Granveaud</a>)</li><li><code class=syntax>Buffer</code> 表引擎现在支持 <code class=syntax>PREWHERE</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/4671 rel="external nofollow noreferrer" target=_blank>#4671</a> (<a href=https://github.com/LiuYangkuan rel="external nofollow noreferrer" target=_blank>刘杨宽</a>)</li><li>添加在zookeeper中启动没有元数据的复制表的能力 <code class=syntax>readonly</code> 模式 <a href=https://github.com/ClickHouse/ClickHouse/pull/4691 rel="external nofollow noreferrer" target=_blank>#4691</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li><li>在clickhouse客户端固定进度条闪烁。 使用时，这个问题最明显 <code class=syntax>FORMAT Null</code> 随着流查询。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4811 rel="external nofollow noreferrer" target=_blank>#4811</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>允许禁用功能 <code class=syntax>hyperscan</code> 基于每个用户的库，以限制潜在的过度和不受控制的资源使用。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4816 rel="external nofollow noreferrer" target=_blank>#4816</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>添加版本号记录所有错误。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4824 rel="external nofollow noreferrer" target=_blank>#4824</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li><li>增加了限制 <code class=syntax>multiMatch</code> 需要字符串大小以适应的函数 <code class=syntax>unsigned int</code>. 还增加了参数的数量限制 <code class=syntax>multiSearch</code> 功能。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4834 rel="external nofollow noreferrer" target=_blank>#4834</a> (<a href=https://github.com/danlark1 rel="external nofollow noreferrer" target=_blank>Danila Kutenin</a>)</li><li>改进了超扫描暂存空间的使用和错误处理。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4866 rel="external nofollow noreferrer" target=_blank>#4866</a> (<a href=https://github.com/danlark1 rel="external nofollow noreferrer" target=_blank>Danila Kutenin</a>)</li><li>填充 <code class=syntax>system.graphite_detentions</code> 从表配置 <code class=syntax>*GraphiteMergeTree</code> 发动机表. <a href=https://github.com/ClickHouse/ClickHouse/pull/4584 rel="external nofollow noreferrer" target=_blank>#4584</a> (<a href=https://github.com/Felixoid rel="external nofollow noreferrer" target=_blank>Mikhail f. Shiryaev</a>)</li><li>重命名 <code class=syntax>trigramDistance</code> 功能 <code class=syntax>ngramDistance</code> 并添加更多的功能 <code class=syntax>CaseInsensitive</code> 和 <code class=syntax>UTF</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/4602 rel="external nofollow noreferrer" target=_blank>#4602</a> (<a href=https://github.com/danlark1 rel="external nofollow noreferrer" target=_blank>Danila Kutenin</a>)</li><li>改进的数据跳过指数计算。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4640 rel="external nofollow noreferrer" target=_blank>#4640</a> (<a href=https://github.com/nikvas0 rel="external nofollow noreferrer" target=_blank>尼基塔*瓦西列夫</a>)</li><li>保持平凡, <code class=syntax>DEFAULT</code>, <code class=syntax>MATERIALIZED</code> 和 <code class=syntax>ALIAS</code> 在一个列表中的列（修复问题 <a href=https://github.com/ClickHouse/ClickHouse/issues/2867 rel="external nofollow noreferrer" target=_blank>#2867</a>). <a href=https://github.com/ClickHouse/ClickHouse/pull/4707 rel="external nofollow noreferrer" target=_blank>#4707</a> (<a href=https://github.com/ztlpn rel="external nofollow noreferrer" target=_blank>Alex Zatelepin</a>)</li></ul><h4 id=bug-fix-26>错误修复<a class=headerlink href=../amp/#bug-fix-26 title="Permanent link"> </a></h4><ul><li>避免 <code class=syntax>std::terminate</code> 在内存分配失败的情况下。 现在 <code class=syntax>std::bad_alloc</code> 按预期引发异常。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4665 rel="external nofollow noreferrer" target=_blank>#4665</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>修复capnproto从缓冲区读取。 有时文件没有通过HTTP成功加载。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4674 rel="external nofollow noreferrer" target=_blank>#4674</a> (<a href=https://github.com/smirnov-vs rel="external nofollow noreferrer" target=_blank>弗拉季斯拉夫</a>)</li><li>修复错误 <code class=syntax>Unknown log entry type: 0</code> 后 <code class=syntax>OPTIMIZE TABLE FINAL</code> 查询。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4683 rel="external nofollow noreferrer" target=_blank>#4683</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer" target=_blank>阿莫斯鸟</a>)</li><li>错误的参数 <code class=syntax>hasAny</code> 或 <code class=syntax>hasAll</code> 函数可能会导致段错误。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4698 rel="external nofollow noreferrer" target=_blank>#4698</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>执行时可能会发生死锁 <code class=syntax>DROP DATABASE dictionary</code> 查询。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4701 rel="external nofollow noreferrer" target=_blank>#4701</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>修复未定义的行为 <code class=syntax>median</code> 和 <code class=syntax>quantile</code> 功能。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4702 rel="external nofollow noreferrer" target=_blank>#4702</a> (<a href=https://github.com/hczhcz rel="external nofollow noreferrer" target=_blank>hcz</a>)</li><li>修复压缩级别检测时 <code class=syntax>network_compression_method</code> 小写。 在19.1节中被打破。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4706 rel="external nofollow noreferrer" target=_blank>#4706</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li><li>固定的无知 <code class=syntax>&lt;timezone&gt;UTC&lt;/timezone&gt;</code> 设置（修复问题 <a href=https://github.com/ClickHouse/ClickHouse/issues/4658 rel="external nofollow noreferrer" target=_blank>#4658</a>). <a href=https://github.com/ClickHouse/ClickHouse/pull/4718 rel="external nofollow noreferrer" target=_blank>#4718</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li><li>修复 <code class=syntax>histogram</code> 函数行为 <code class=syntax>Distributed</code> 桌子 <a href=https://github.com/ClickHouse/ClickHouse/pull/4741 rel="external nofollow noreferrer" target=_blank>#4741</a> (<a href=https://github.com/olegkv rel="external nofollow noreferrer" target=_blank>olegkv</a>)</li><li>固定tsan报告 <code class=syntax>destroy of a locked mutex</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/4742 rel="external nofollow noreferrer" target=_blank>#4742</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>修复了由于系统日志使用中的争用条件而关闭的TSan报告。 修复了当part_log启用时关机后的潜在使用。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4758 rel="external nofollow noreferrer" target=_blank>#4758</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>修复重新检查零件 <code class=syntax>ReplicatedMergeTreeAlterThread</code> 在错误的情况下。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4772 rel="external nofollow noreferrer" target=_blank>#4772</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>尼古拉*科切托夫</a>)</li><li>对中间聚合函数状态的算术运算不适用于常量参数（如子查询结果）。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4776 rel="external nofollow noreferrer" target=_blank>#4776</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>始终在元数据中反引用列名。 否则，不可能创建一个名为列的表 <code class=syntax>index</code> （由于格式错误，服务器无法重新启动 <code class=syntax>ATTACH</code> 元数据中的查询）。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4782 rel="external nofollow noreferrer" target=_blank>#4782</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>修复崩溃 <code class=syntax>ALTER ... MODIFY ORDER BY</code> 上 <code class=syntax>Distributed</code> 桌子 <a href=https://github.com/ClickHouse/ClickHouse/pull/4790 rel="external nofollow noreferrer" target=_blank>#4790</a> (<a href=https://github.com/TCeason rel="external nofollow noreferrer" target=_blank>TCeason</a>)</li><li>修复段错误 <code class=syntax>JOIN ON</code> 已启用 <code class=syntax>enable_optimize_predicate_expression</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/4794 rel="external nofollow noreferrer" target=_blank>#4794</a> (<a href=https://github.com/zhang2014 rel="external nofollow noreferrer" target=_blank>张冬</a>)</li><li>修复kafka使用protobuf消息后添加无关行的错误。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4808 rel="external nofollow noreferrer" target=_blank>#4808</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer" target=_blank>维塔利*巴拉诺夫</a>)</li><li>修复崩溃 <code class=syntax>JOIN</code> 在不可为空的vs可为空的列上。 修复 <code class=syntax>NULLs</code> 在右键 <code class=syntax>ANY JOIN</code> + <code class=syntax>join_use_nulls</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/4815 rel="external nofollow noreferrer" target=_blank>#4815</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li><li>修复分段故障 <code class=syntax>clickhouse-copier</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/4835 rel="external nofollow noreferrer" target=_blank>#4835</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li><li>在固定的竞争条件 <code class=syntax>SELECT</code> 从 <code class=syntax>system.tables</code> 如果同时重命名或更改表。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4836 rel="external nofollow noreferrer" target=_blank>#4836</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>获取已经过时的数据部分时修复了数据竞赛。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4839 rel="external nofollow noreferrer" target=_blank>#4839</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>固定罕见的数据竞赛，可以在发生 <code class=syntax>RENAME</code> MergeTree家族的表. <a href=https://github.com/ClickHouse/ClickHouse/pull/4844 rel="external nofollow noreferrer" target=_blank>#4844</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>修正功能中的分段故障 <code class=syntax>arrayIntersect</code>. 如果函数使用常量和普通参数混合调用，则可能会发生分段错误。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4847 rel="external nofollow noreferrer" target=_blank>#4847</a> (<a href=https://github.com/fancyqlx rel="external nofollow noreferrer" target=_blank>钱丽祥</a>)</li><li>固定读取 <code class=syntax>Array(LowCardinality)</code> column在极少数情况下，当column包含一个长序列的空数组时。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4850 rel="external nofollow noreferrer" target=_blank>#4850</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>尼古拉*科切托夫</a>)</li><li>修复崩溃 <code class=syntax>FULL/RIGHT JOIN</code> 当我们加入可为空vs不可为空时。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4855 rel="external nofollow noreferrer" target=_blank>#4855</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li><li>修复 <code class=syntax>No message received</code> 在副本之间获取部件时出现异常。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4856 rel="external nofollow noreferrer" target=_blank>#4856</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li><li>固定 <code class=syntax>arrayIntersect</code> 函数错误导致在单个数组中的几个重复值的情况下。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4871 rel="external nofollow noreferrer" target=_blank>#4871</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>尼古拉*科切托夫</a>)</li><li>在并发期间修复争用条件 <code class=syntax>ALTER COLUMN</code> 可能导致服务器崩溃的查询（修复问题 <a href=https://github.com/ClickHouse/ClickHouse/issues/3421 rel="external nofollow noreferrer" target=_blank>#3421</a>). <a href=https://github.com/ClickHouse/ClickHouse/pull/4592 rel="external nofollow noreferrer" target=_blank>#4592</a> (<a href=https://github.com/ztlpn rel="external nofollow noreferrer" target=_blank>Alex Zatelepin</a>)</li><li>修复不正确的结果 <code class=syntax>FULL/RIGHT JOIN</code> 与常量列。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4723 rel="external nofollow noreferrer" target=_blank>#4723</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li><li>修复重复 <code class=syntax>GLOBAL JOIN</code> 用星号。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4705 rel="external nofollow noreferrer" target=_blank>#4705</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li><li>修复参数扣除 <code class=syntax>ALTER MODIFY</code> 列 <code class=syntax>CODEC</code> 未指定列类型时。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4883 rel="external nofollow noreferrer" target=_blank>#4883</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li><li>功能 <code class=syntax>cutQueryStringAndFragment()</code> 和 <code class=syntax>queryStringAndFragment()</code> 现在正常工作时 <code class=syntax>URL</code> 包含一个片段，没有查询。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4894 rel="external nofollow noreferrer" target=_blank>#4894</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer" target=_blank>维塔利*巴拉诺夫</a>)</li><li>修复设置时罕见的错误 <code class=syntax>min_bytes_to_use_direct_io</code> 大于零，这发生在线程必须在列文件中向后寻找时。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4897 rel="external nofollow noreferrer" target=_blank>#4897</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li><li>修复聚合函数的错误参数类型 <code class=syntax>LowCardinality</code> 参数（修复问题 <a href=https://github.com/ClickHouse/ClickHouse/issues/4919 rel="external nofollow noreferrer" target=_blank>#4919</a>). <a href=https://github.com/ClickHouse/ClickHouse/pull/4922 rel="external nofollow noreferrer" target=_blank>#4922</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>尼古拉*科切托夫</a>)</li><li>修复错误的名称资格 <code class=syntax>GLOBAL JOIN</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/4969 rel="external nofollow noreferrer" target=_blank>#4969</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li><li>修复功能 <code class=syntax>toISOWeek</code> 1970年的结果。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4988 rel="external nofollow noreferrer" target=_blank>#4988</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>修复 <code class=syntax>DROP</code>, <code class=syntax>TRUNCATE</code> 和 <code class=syntax>OPTIMIZE</code> 查询重复，在执行时 <code class=syntax>ON CLUSTER</code> 为 <code class=syntax>ReplicatedMergeTree*</code> 表家庭. <a href=https://github.com/ClickHouse/ClickHouse/pull/4991 rel="external nofollow noreferrer" target=_blank>#4991</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li></ul><h4 id=backward-incompatible-change-8>向后不兼容的更改<a class=headerlink href=../amp/#backward-incompatible-change-8 title="Permanent link"> </a></h4><ul><li>重命名设置 <code class=syntax>insert_sample_with_metadata</code> 到设置 <code class=syntax>input_format_defaults_for_omitted_fields</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/4771 rel="external nofollow noreferrer" target=_blank>#4771</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li><li>添加设置 <code class=syntax>max_partitions_per_insert_block</code> （默认值为100）。 如果插入的块包含较大数量的分区，则会引发异常。 如果要删除限制（不推荐），请将其设置为0。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4845 rel="external nofollow noreferrer" target=_blank>#4845</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>多搜索功能被重命名 (<code class=syntax>multiPosition</code> 到 <code class=syntax>multiSearchAllPositions</code>, <code class=syntax>multiSearch</code> 到 <code class=syntax>multiSearchAny</code>, <code class=syntax>firstMatch</code> 到 <code class=syntax>multiSearchFirstIndex</code>). <a href=https://github.com/ClickHouse/ClickHouse/pull/4780 rel="external nofollow noreferrer" target=_blank>#4780</a> (<a href=https://github.com/danlark1 rel="external nofollow noreferrer" target=_blank>Danila Kutenin</a>)</li></ul><h4 id=performance-improvement-6>性能改进<a class=headerlink href=../amp/#performance-improvement-6 title="Permanent link"> </a></h4><ul><li>通过内联优化Volnitsky搜索器，为许多针或许多类似bigrams的查询提供约5-10％的搜索改进。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4862 rel="external nofollow noreferrer" target=_blank>#4862</a> (<a href=https://github.com/danlark1 rel="external nofollow noreferrer" target=_blank>Danila Kutenin</a>)</li><li>修复设置时的性能问题 <code class=syntax>use_uncompressed_cache</code> 大于零时，即出现在所有读取缓存中包含的数据时。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4913 rel="external nofollow noreferrer" target=_blank>#4913</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li></ul><h4 id=buildtestingpackaging-improvement-10>构建/测试/包装改进<a class=headerlink href=../amp/#buildtestingpackaging-improvement-10 title="Permanent link"> </a></h4><ul><li>强化调试构建：更精细的内存映射和ASLR;为标记缓存和索引添加内存保护。 这允许在ASan和MSan无法做到这一点的情况下找到更多的内存st脚错误。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4632 rel="external nofollow noreferrer" target=_blank>#4632</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>添加对cmake变量的支持 <code class=syntax>ENABLE_PROTOBUF</code>, <code class=syntax>ENABLE_PARQUET</code> 和 <code class=syntax>ENABLE_BROTLI</code> 它允许启用/禁用上述功能（与我们对librdkafka，mysql等所做的相同）。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4669 rel="external nofollow noreferrer" target=_blank>#4669</a> (<a href=https://github.com/silviucpp rel="external nofollow noreferrer" target=_blank>Silviu Caragea</a>)</li><li>添加打印进程列表和堆栈跟踪的所有线程的能力，如果一些查询测试运行后挂起。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4675 rel="external nofollow noreferrer" target=_blank>#4675</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li><li>添加重试 <code class=syntax>Connection loss</code> 错误 <code class=syntax>clickhouse-test</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/4682 rel="external nofollow noreferrer" target=_blank>#4682</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li><li>在打包程序脚本中添加使用vagrant的freebsd build和使用thread sanitizer的build。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4712 rel="external nofollow noreferrer" target=_blank>#4712</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/4748 rel="external nofollow noreferrer" target=_blank>#4748</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li><li>现在用户要求用户密码 <code class=syntax>'default'</code> 在安装过程中。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4725 rel="external nofollow noreferrer" target=_blank>#4725</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li><li>禁止在警告 <code class=syntax>rdkafka</code> 图书馆. <a href=https://github.com/ClickHouse/ClickHouse/pull/4740 rel="external nofollow noreferrer" target=_blank>#4740</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>允许在没有ssl的情况下构建。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4750 rel="external nofollow noreferrer" target=_blank>#4750</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li><li>添加从自定义用户启动clickhouse服务器映像的方法。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4753 rel="external nofollow noreferrer" target=_blank>#4753</a> (<a href=https://github.com/Felixoid rel="external nofollow noreferrer" target=_blank>Mikhail f. Shiryaev</a>)</li><li>升级contrib升压到1.69. <a href=https://github.com/ClickHouse/ClickHouse/pull/4793 rel="external nofollow noreferrer" target=_blank>#4793</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li><li>禁用使用 <code class=syntax>mremap</code> 使用线程消毒剂编译时。 令人惊讶的是，TSan并没有拦截 <code class=syntax>mremap</code> （虽然它确实拦截 <code class=syntax>mmap</code>, <code class=syntax>munmap</code> 这会导致误报。 修复了有状态测试中的TSan报告。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4859 rel="external nofollow noreferrer" target=_blank>#4859</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>通过HTTP接口使用格式模式添加测试检查。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4864 rel="external nofollow noreferrer" target=_blank>#4864</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer" target=_blank>维塔利*巴拉诺夫</a>)</li></ul><h2 id=clickhouse-release-19-4>ClickHouse释放19.4<a class=headerlink href=../amp/#clickhouse-release-19-4 title="Permanent link"> </a></h2><h3 id=clickhouse-release-19-4-4-33-2019-04-17>碌莽禄,拢,010-68520682\&lt;url&gt;戮卤篓拢,010-68520682\&lt;url&gt;<a class=headerlink href=../amp/#clickhouse-release-19-4-4-33-2019-04-17 title="Permanent link"> </a></h3><h4 id=bug-fixes-7>错误修复<a class=headerlink href=../amp/#bug-fixes-7 title="Permanent link"> </a></h4><ul><li>避免 <code class=syntax>std::terminate</code> 在内存分配失败的情况下。 现在 <code class=syntax>std::bad_alloc</code> 按预期引发异常。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4665 rel="external nofollow noreferrer" target=_blank>#4665</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>修复capnproto从缓冲区读取。 有时文件没有通过HTTP成功加载。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4674 rel="external nofollow noreferrer" target=_blank>#4674</a> (<a href=https://github.com/smirnov-vs rel="external nofollow noreferrer" target=_blank>弗拉季斯拉夫</a>)</li><li>修复错误 <code class=syntax>Unknown log entry type: 0</code> 后 <code class=syntax>OPTIMIZE TABLE FINAL</code> 查询。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4683 rel="external nofollow noreferrer" target=_blank>#4683</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer" target=_blank>阿莫斯鸟</a>)</li><li>错误的参数 <code class=syntax>hasAny</code> 或 <code class=syntax>hasAll</code> 函数可能会导致段错误。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4698 rel="external nofollow noreferrer" target=_blank>#4698</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>执行时可能会发生死锁 <code class=syntax>DROP DATABASE dictionary</code> 查询。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4701 rel="external nofollow noreferrer" target=_blank>#4701</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>修复未定义的行为 <code class=syntax>median</code> 和 <code class=syntax>quantile</code> 功能。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4702 rel="external nofollow noreferrer" target=_blank>#4702</a> (<a href=https://github.com/hczhcz rel="external nofollow noreferrer" target=_blank>hcz</a>)</li><li>修复压缩级别检测时 <code class=syntax>network_compression_method</code> 小写。 在19.1节中被打破。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4706 rel="external nofollow noreferrer" target=_blank>#4706</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li><li>固定的无知 <code class=syntax>&lt;timezone&gt;UTC&lt;/timezone&gt;</code> 设置（修复问题 <a href=https://github.com/ClickHouse/ClickHouse/issues/4658 rel="external nofollow noreferrer" target=_blank>#4658</a>). <a href=https://github.com/ClickHouse/ClickHouse/pull/4718 rel="external nofollow noreferrer" target=_blank>#4718</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li><li>修复 <code class=syntax>histogram</code> 函数行为 <code class=syntax>Distributed</code> 桌子 <a href=https://github.com/ClickHouse/ClickHouse/pull/4741 rel="external nofollow noreferrer" target=_blank>#4741</a> (<a href=https://github.com/olegkv rel="external nofollow noreferrer" target=_blank>olegkv</a>)</li><li>固定tsan报告 <code class=syntax>destroy of a locked mutex</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/4742 rel="external nofollow noreferrer" target=_blank>#4742</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>修复了由于系统日志使用中的争用条件而关闭的TSan报告。 修复了当part_log启用时关机后的潜在使用。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4758 rel="external nofollow noreferrer" target=_blank>#4758</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>修复重新检查零件 <code class=syntax>ReplicatedMergeTreeAlterThread</code> 在错误的情况下。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4772 rel="external nofollow noreferrer" target=_blank>#4772</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>尼古拉*科切托夫</a>)</li><li>对中间聚合函数状态的算术运算不适用于常量参数（如子查询结果）。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4776 rel="external nofollow noreferrer" target=_blank>#4776</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>始终在元数据中反引用列名。 否则，不可能创建一个名为列的表 <code class=syntax>index</code> （由于格式错误，服务器无法重新启动 <code class=syntax>ATTACH</code> 元数据中的查询）。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4782 rel="external nofollow noreferrer" target=_blank>#4782</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>修复崩溃 <code class=syntax>ALTER ... MODIFY ORDER BY</code> 上 <code class=syntax>Distributed</code> 桌子 <a href=https://github.com/ClickHouse/ClickHouse/pull/4790 rel="external nofollow noreferrer" target=_blank>#4790</a> (<a href=https://github.com/TCeason rel="external nofollow noreferrer" target=_blank>TCeason</a>)</li><li>修复段错误 <code class=syntax>JOIN ON</code> 已启用 <code class=syntax>enable_optimize_predicate_expression</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/4794 rel="external nofollow noreferrer" target=_blank>#4794</a> (<a href=https://github.com/zhang2014 rel="external nofollow noreferrer" target=_blank>张冬</a>)</li><li>修复kafka使用protobuf消息后添加无关行的错误。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4808 rel="external nofollow noreferrer" target=_blank>#4808</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer" target=_blank>维塔利*巴拉诺夫</a>)</li><li>修复分段故障 <code class=syntax>clickhouse-copier</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/4835 rel="external nofollow noreferrer" target=_blank>#4835</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li><li>在固定的竞争条件 <code class=syntax>SELECT</code> 从 <code class=syntax>system.tables</code> 如果同时重命名或更改表。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4836 rel="external nofollow noreferrer" target=_blank>#4836</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>获取已经过时的数据部分时修复了数据竞赛。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4839 rel="external nofollow noreferrer" target=_blank>#4839</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>固定罕见的数据竞赛，可以在发生 <code class=syntax>RENAME</code> MergeTree家族的表. <a href=https://github.com/ClickHouse/ClickHouse/pull/4844 rel="external nofollow noreferrer" target=_blank>#4844</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>修正功能中的分段故障 <code class=syntax>arrayIntersect</code>. 如果函数使用常量和普通参数混合调用，则可能会发生分段错误。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4847 rel="external nofollow noreferrer" target=_blank>#4847</a> (<a href=https://github.com/fancyqlx rel="external nofollow noreferrer" target=_blank>钱丽祥</a>)</li><li>固定读取 <code class=syntax>Array(LowCardinality)</code> column在极少数情况下，当column包含一个长序列的空数组时。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4850 rel="external nofollow noreferrer" target=_blank>#4850</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>尼古拉*科切托夫</a>)</li><li>修复 <code class=syntax>No message received</code> 在副本之间获取部件时出现异常。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4856 rel="external nofollow noreferrer" target=_blank>#4856</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li><li>固定 <code class=syntax>arrayIntersect</code> 函数错误导致在单个数组中的几个重复值的情况下。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4871 rel="external nofollow noreferrer" target=_blank>#4871</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>尼古拉*科切托夫</a>)</li><li>在并发期间修复争用条件 <code class=syntax>ALTER COLUMN</code> 可能导致服务器崩溃的查询（修复问题 <a href=https://github.com/ClickHouse/ClickHouse/issues/3421 rel="external nofollow noreferrer" target=_blank>#3421</a>). <a href=https://github.com/ClickHouse/ClickHouse/pull/4592 rel="external nofollow noreferrer" target=_blank>#4592</a> (<a href=https://github.com/ztlpn rel="external nofollow noreferrer" target=_blank>Alex Zatelepin</a>)</li><li>修复参数扣除 <code class=syntax>ALTER MODIFY</code> 列 <code class=syntax>CODEC</code> 未指定列类型时。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4883 rel="external nofollow noreferrer" target=_blank>#4883</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li><li>功能 <code class=syntax>cutQueryStringAndFragment()</code> 和 <code class=syntax>queryStringAndFragment()</code> 现在正常工作时 <code class=syntax>URL</code> 包含一个片段，没有查询。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4894 rel="external nofollow noreferrer" target=_blank>#4894</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer" target=_blank>维塔利*巴拉诺夫</a>)</li><li>修复设置时罕见的错误 <code class=syntax>min_bytes_to_use_direct_io</code> 大于零，这发生在线程必须在列文件中向后寻找时。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4897 rel="external nofollow noreferrer" target=_blank>#4897</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li><li>修复聚合函数的错误参数类型 <code class=syntax>LowCardinality</code> 参数（修复问题 <a href=https://github.com/ClickHouse/ClickHouse/issues/4919 rel="external nofollow noreferrer" target=_blank>#4919</a>). <a href=https://github.com/ClickHouse/ClickHouse/pull/4922 rel="external nofollow noreferrer" target=_blank>#4922</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>尼古拉*科切托夫</a>)</li><li>修复功能 <code class=syntax>toISOWeek</code> 1970年的结果。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4988 rel="external nofollow noreferrer" target=_blank>#4988</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>修复 <code class=syntax>DROP</code>, <code class=syntax>TRUNCATE</code> 和 <code class=syntax>OPTIMIZE</code> 查询重复，在执行时 <code class=syntax>ON CLUSTER</code> 为 <code class=syntax>ReplicatedMergeTree*</code> 表家庭. <a href=https://github.com/ClickHouse/ClickHouse/pull/4991 rel="external nofollow noreferrer" target=_blank>#4991</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li></ul><h4 id=improvements-2>改进<a class=headerlink href=../amp/#improvements-2 title="Permanent link"> </a></h4><ul><li>保持平凡, <code class=syntax>DEFAULT</code>, <code class=syntax>MATERIALIZED</code> 和 <code class=syntax>ALIAS</code> 在一个列表中的列（修复问题 <a href=https://github.com/ClickHouse/ClickHouse/issues/2867 rel="external nofollow noreferrer" target=_blank>#2867</a>). <a href=https://github.com/ClickHouse/ClickHouse/pull/4707 rel="external nofollow noreferrer" target=_blank>#4707</a> (<a href=https://github.com/ztlpn rel="external nofollow noreferrer" target=_blank>Alex Zatelepin</a>)</li></ul><h3 id=clickhouse-release-19-4-3-11-2019-04-02>碌莽禄,拢,010-68520682\&lt;url&gt;戮卤篓拢,010-68520682\&lt;url&gt;<a class=headerlink href=../amp/#clickhouse-release-19-4-3-11-2019-04-02 title="Permanent link"> </a></h3><h4 id=bug-fixes-8>错误修复<a class=headerlink href=../amp/#bug-fixes-8 title="Permanent link"> </a></h4><ul><li>修复崩溃 <code class=syntax>FULL/RIGHT JOIN</code> 当我们加入可为空vs不可为空时。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4855 rel="external nofollow noreferrer" target=_blank>#4855</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li><li>修复分段故障 <code class=syntax>clickhouse-copier</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/4835 rel="external nofollow noreferrer" target=_blank>#4835</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li></ul><h4 id=buildtestingpackaging-improvement-11>构建/测试/包装改进<a class=headerlink href=../amp/#buildtestingpackaging-improvement-11 title="Permanent link"> </a></h4><ul><li>添加从自定义用户启动clickhouse服务器映像的方法。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4753 rel="external nofollow noreferrer" target=_blank>#4753</a> (<a href=https://github.com/Felixoid rel="external nofollow noreferrer" target=_blank>Mikhail f. Shiryaev</a>)</li></ul><h3 id=clickhouse-release-19-4-2-7-2019-03-30>碌莽禄,拢,010-68520682\&lt;url&gt;戮卤篓拢,010-68520682\&lt;url&gt;<a class=headerlink href=../amp/#clickhouse-release-19-4-2-7-2019-03-30 title="Permanent link"> </a></h3><h4 id=bug-fixes-9>错误修复<a class=headerlink href=../amp/#bug-fixes-9 title="Permanent link"> </a></h4><ul><li>固定读取 <code class=syntax>Array(LowCardinality)</code> column在极少数情况下，当column包含一个长序列的空数组时。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4850 rel="external nofollow noreferrer" target=_blank>#4850</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>尼古拉*科切托夫</a>)</li></ul><h3 id=clickhouse-release-19-4-1-3-2019-03-19>碌莽禄,拢,010-68520682\&lt;url&gt;戮卤篓拢,010-68520682\&lt;url&gt;<a class=headerlink href=../amp/#clickhouse-release-19-4-1-3-2019-03-19 title="Permanent link"> </a></h3><h4 id=bug-fixes-10>错误修复<a class=headerlink href=../amp/#bug-fixes-10 title="Permanent link"> </a></h4><ul><li>包含两个固定的远程查询 <code class=syntax>LIMIT BY</code> 和 <code class=syntax>LIMIT</code>. 以前，如果 <code class=syntax>LIMIT BY</code> 和 <code class=syntax>LIMIT</code> 用于远程查询, <code class=syntax>LIMIT</code> 可能发生之前 <code class=syntax>LIMIT BY</code>，这导致过滤的结果。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4708 rel="external nofollow noreferrer" target=_blank>#4708</a> (<a href=https://github.com/kvap rel="external nofollow noreferrer" target=_blank>康斯坦丁*潘</a>)</li></ul><h3 id=clickhouse-release-19-4-0-49-2019-03-09>碌莽禄,拢,010-68520682\&lt;url&gt;戮卤篓拢,010-68520682\&lt;url&gt;<a class=headerlink href=../amp/#clickhouse-release-19-4-0-49-2019-03-09 title="Permanent link"> </a></h3><h4 id=new-features-5>新功能<a class=headerlink href=../amp/#new-features-5 title="Permanent link"> </a></h4><ul><li>增加了全面支持 <code class=syntax>Protobuf</code> 格式（输入和输出，嵌套数据结构）。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4174 rel="external nofollow noreferrer" target=_blank>#4174</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/4493 rel="external nofollow noreferrer" target=_blank>#4493</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer" target=_blank>维塔利*巴拉诺夫</a>)</li><li>添加位图功能与Ro哮的位图。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4207 rel="external nofollow noreferrer" target=_blank>#4207</a> (<a href=https://github.com/andyyzh rel="external nofollow noreferrer" target=_blank>杨小姐</a>) <a href=https://github.com/ClickHouse/ClickHouse/pull/4568 rel="external nofollow noreferrer" target=_blank>#4568</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer" target=_blank>维塔利*巴拉诺夫</a>)</li><li>实木复合地板格式支持。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4448 rel="external nofollow noreferrer" target=_blank>#4448</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li><li>为模糊字符串比较添加了N-gram距离。 它类似于R语言中的q-gram指标。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4466 rel="external nofollow noreferrer" target=_blank>#4466</a> (<a href=https://github.com/danlark1 rel="external nofollow noreferrer" target=_blank>Danila Kutenin</a>)</li><li>结合专用聚合和保留模式中的石墨汇总规则。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4426 rel="external nofollow noreferrer" target=_blank>#4426</a> (<a href=https://github.com/Felixoid rel="external nofollow noreferrer" target=_blank>Mikhail f. Shiryaev</a>)</li><li>已添加 <code class=syntax>max_execution_speed</code> 和 <code class=syntax>max_execution_speed_bytes</code> 限制资源使用。 已添加 <code class=syntax>min_execution_speed_bytes</code> 设置以补充 <code class=syntax>min_execution_speed</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/4430 rel="external nofollow noreferrer" target=_blank>#4430</a> (<a href=https://github.com/zhang2014 rel="external nofollow noreferrer" target=_blank>张冬</a>)</li><li>实现功能 <code class=syntax>flatten</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/4555 rel="external nofollow noreferrer" target=_blank>#4555</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/4409 rel="external nofollow noreferrer" target=_blank>#4409</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>, <a href=https://github.com/kzon rel="external nofollow noreferrer" target=_blank>kzon</a>)</li><li>新增功能 <code class=syntax>arrayEnumerateDenseRanked</code> 和 <code class=syntax>arrayEnumerateUniqRanked</code> （这就像 <code class=syntax>arrayEnumerateUniq</code> 但是允许微调数组深度以查看多维数组内部）。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4475 rel="external nofollow noreferrer" target=_blank>#4475</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>) <a href=https://github.com/ClickHouse/ClickHouse/pull/4601 rel="external nofollow noreferrer" target=_blank>#4601</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>Multiple JOINS with some restrictions: no asterisks, no complex aliases in ON/WHERE/GROUP BY/… <a href=https://github.com/ClickHouse/ClickHouse/pull/4462 rel="external nofollow noreferrer" target=_blank>#4462</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li></ul><h4 id=bug-fixes-11>错误修复<a class=headerlink href=../amp/#bug-fixes-11 title="Permanent link"> </a></h4><ul><li>此版本还包含19.3和19.1中的所有错误修复。</li><li>修正了数据跳过索引的错误：插入后颗粒顺序不正确。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4407 rel="external nofollow noreferrer" target=_blank>#4407</a> (<a href=https://github.com/nikvas0 rel="external nofollow noreferrer" target=_blank>尼基塔*瓦西列夫</a>)</li><li>固定 <code class=syntax>set</code> ﾂ环板forｮ <code class=syntax>Nullable</code> 和 <code class=syntax>LowCardinality</code> 列。 在它之前, <code class=syntax>set</code> 索引与 <code class=syntax>Nullable</code> 或 <code class=syntax>LowCardinality</code> 列导致错误 <code class=syntax>Data type must be deserialized with multiple streams</code> 同时选择。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4594 rel="external nofollow noreferrer" target=_blank>#4594</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>尼古拉*科切托夫</a>)</li><li>正确设置完整的update_time <code class=syntax>executable</code> 字典更新. <a href=https://github.com/ClickHouse/ClickHouse/pull/4551 rel="external nofollow noreferrer" target=_blank>#4551</a> (<a href=https://github.com/temoon rel="external nofollow noreferrer" target=_blank>Tema Novikov</a>)</li><li>修复19.3中损坏的进度条。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4627 rel="external nofollow noreferrer" target=_blank>#4627</a> (<a href=https://github.com/filimonov rel="external nofollow noreferrer" target=_blank>filimonov</a>)</li><li>在某些情况下，修复了内存区域收缩时MemoryTracker的不一致值。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4619 rel="external nofollow noreferrer" target=_blank>#4619</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>修复了ThreadPool中未定义的行为。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4612 rel="external nofollow noreferrer" target=_blank>#4612</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>修正了一个非常罕见的崩溃的消息 <code class=syntax>mutex lock failed: Invalid argument</code> 当MergeTree表与SELECT同时删除时，可能会发生这种情况。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4608 rel="external nofollow noreferrer" target=_blank>#4608</a> (<a href=https://github.com/ztlpn rel="external nofollow noreferrer" target=_blank>Alex Zatelepin</a>)</li><li>ODBC驱动程序兼容 <code class=syntax>LowCardinality</code> 数据类型。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4381 rel="external nofollow noreferrer" target=_blank>#4381</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li><li>FreeBSD:修复程序 <code class=syntax>AIOcontextPool: Found io_event with unknown id 0</code> 错误 <a href=https://github.com/ClickHouse/ClickHouse/pull/4438 rel="external nofollow noreferrer" target=_blank>#4438</a> (<a href=https://github.com/urgordeadbeef rel="external nofollow noreferrer" target=_blank>urgordeadbeef</a>)</li><li><code class=syntax>system.part_log</code> 无论配置如何，都会创建表。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4483 rel="external nofollow noreferrer" target=_blank>#4483</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>修复未定义的行为 <code class=syntax>dictIsIn</code> 缓存字典功能。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4515 rel="external nofollow noreferrer" target=_blank>#4515</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li><li>Fixed a deadlock when a SELECT query locks the same table multiple times (e.g. from different threads or when executing multiple subqueries) and there is a concurrent DDL query. <a href=https://github.com/ClickHouse/ClickHouse/pull/4535 rel="external nofollow noreferrer" target=_blank>#4535</a> (<a href=https://github.com/ztlpn rel="external nofollow noreferrer" target=_blank>Alex Zatelepin</a>)</li><li>默认情况下禁用compile_expressions，直到我们得到自己 <code class=syntax>llvm</code> contrib并且可以测试它 <code class=syntax>clang</code> 和 <code class=syntax>asan</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/4579 rel="external nofollow noreferrer" target=_blank>#4579</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li><li>预防 <code class=syntax>std::terminate</code> 当 <code class=syntax>invalidate_query</code> 为 <code class=syntax>clickhouse</code> 外部字典源返回了错误的结果集（空或一行以上或一列以上）。 固定的问题，当 <code class=syntax>invalidate_query</code> 执行每五秒钟，无论到 <code class=syntax>lifetime</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/4583 rel="external nofollow noreferrer" target=_blank>#4583</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>避免死锁时 <code class=syntax>invalidate_query</code> 对于与字典 <code class=syntax>clickhouse</code> 资料来源涉及 <code class=syntax>system.dictionaries</code> 表或 <code class=syntax>Dictionaries</code> 数据库（罕见的情况）。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4599 rel="external nofollow noreferrer" target=_blank>#4599</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>修复了交叉连接与空在哪里。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4598 rel="external nofollow noreferrer" target=_blank>#4598</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li><li>在功能固定段错误 “replicate” 传递常量参数时。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4603 rel="external nofollow noreferrer" target=_blank>#4603</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>使用谓词优化器修复lambda函数。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4408 rel="external nofollow noreferrer" target=_blank>#4408</a> (<a href=https://github.com/zhang2014 rel="external nofollow noreferrer" target=_blank>张冬</a>)</li><li>多个联接多个修复。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4595 rel="external nofollow noreferrer" target=_blank>#4595</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li></ul><h4 id=improvements-3>改进<a class=headerlink href=../amp/#improvements-3 title="Permanent link"> </a></h4><ul><li>在右表列的连接上部分支持别名。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4412 rel="external nofollow noreferrer" target=_blank>#4412</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li><li>多个联接的结果需要在子选择中使用正确的结果名称。 将平面别名替换为result中的源名称。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4474 rel="external nofollow noreferrer" target=_blank>#4474</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li><li>改进连接语句的下推逻辑。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4387 rel="external nofollow noreferrer" target=_blank>#4387</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>伊万</a>)</li></ul><h4 id=performance-improvements-3>性能改进<a class=headerlink href=../amp/#performance-improvements-3 title="Permanent link"> </a></h4><ul><li>改进的启发式 “move to PREWHERE” 优化。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4405 rel="external nofollow noreferrer" target=_blank>#4405</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>使用适当的查找表，使用HashTable的api用于8位和16位密钥。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4536 rel="external nofollow noreferrer" target=_blank>#4536</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer" target=_blank>阿莫斯鸟</a>)</li><li>改进字符串比较的性能。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4564 rel="external nofollow noreferrer" target=_blank>#4564</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>在单独的线程中清理分布式DDL队列，以便它不会减慢处理分布式DDL任务的主循环。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4502 rel="external nofollow noreferrer" target=_blank>#4502</a> (<a href=https://github.com/ztlpn rel="external nofollow noreferrer" target=_blank>Alex Zatelepin</a>)</li><li>当 <code class=syntax>min_bytes_to_use_direct_io</code> 如果设置为1，则不是每个文件都使用O_DIRECT模式打开，因为要读取的数据大小有时被一个压缩块的大小所低估。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4526 rel="external nofollow noreferrer" target=_blank>#4526</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li></ul><h4 id=buildtestingpackaging-improvement-12>构建/测试/包装改进<a class=headerlink href=../amp/#buildtestingpackaging-improvement-12 title="Permanent link"> </a></h4><ul><li>增加了对clang-9的支持 <a href=https://github.com/ClickHouse/ClickHouse/pull/4604 rel="external nofollow noreferrer" target=_blank>#4604</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>修复错误 <code class=syntax>__asm__</code> 说明（再次) <a href=https://github.com/ClickHouse/ClickHouse/pull/4621 rel="external nofollow noreferrer" target=_blank>#4621</a> (<a href=https://github.com/podshumok rel="external nofollow noreferrer" target=_blank>Konstantin Podshumok</a>)</li><li>添加指定设置的能力 <code class=syntax>clickhouse-performance-test</code> 从命令行。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4437 rel="external nofollow noreferrer" target=_blank>#4437</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li><li>将字典测试添加到集成测试。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4477 rel="external nofollow noreferrer" target=_blank>#4477</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li><li>在网站上添加了来自基准测试的查询，以自动化性能测试。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4496 rel="external nofollow noreferrer" target=_blank>#4496</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li><code class=syntax>xxhash.h</code> 在外部lz4中不存在，因为它是一个实现细节，并且它的符号是命名空间的 <code class=syntax>XXH_NAMESPACE</code> 麦克罗 当lz4是外部的，xxHash也必须是外部的，并且依赖者必须链接到它。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4495 rel="external nofollow noreferrer" target=_blank>#4495</a> (<a href=https://github.com/orivej rel="external nofollow noreferrer" target=_blank>Origej Desh</a>)</li><li>固定的情况下，当 <code class=syntax>quantileTiming</code> 聚合函数可以用负或浮点参数调用（这修复了使用未定义的行为消毒器的模糊测试）。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4506 rel="external nofollow noreferrer" target=_blank>#4506</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>拼写错误更正。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4531 rel="external nofollow noreferrer" target=_blank>#4531</a> (<a href=https://github.com/sdk2 rel="external nofollow noreferrer" target=_blank>sdk2</a>)</li><li>在Mac上修复编译。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4371 rel="external nofollow noreferrer" target=_blank>#4371</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer" target=_blank>维塔利*巴拉诺夫</a>)</li><li>Freebsd和各种不寻常的构建配置的构建修复程序。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4444 rel="external nofollow noreferrer" target=_blank>#4444</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li></ul><h2 id=clickhouse-release-19-3>ClickHouse释放19.3<a class=headerlink href=../amp/#clickhouse-release-19-3 title="Permanent link"> </a></h2><h3 id=clickhouse-release-19-3-9-1-2019-04-02>碌莽禄,拢,010-68520682\&lt;url&gt;戮卤篓拢,010-68520682\&lt;url&gt;<a class=headerlink href=../amp/#clickhouse-release-19-3-9-1-2019-04-02 title="Permanent link"> </a></h3><h4 id=bug-fixes-12>错误修复<a class=headerlink href=../amp/#bug-fixes-12 title="Permanent link"> </a></h4><ul><li>修复崩溃 <code class=syntax>FULL/RIGHT JOIN</code> 当我们加入可为空vs不可为空时。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4855 rel="external nofollow noreferrer" target=_blank>#4855</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li><li>修复分段故障 <code class=syntax>clickhouse-copier</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/4835 rel="external nofollow noreferrer" target=_blank>#4835</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li><li>固定读取 <code class=syntax>Array(LowCardinality)</code> column在极少数情况下，当column包含一个长序列的空数组时。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4850 rel="external nofollow noreferrer" target=_blank>#4850</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>尼古拉*科切托夫</a>)</li></ul><h4 id=buildtestingpackaging-improvement-13>构建/测试/包装改进<a class=headerlink href=../amp/#buildtestingpackaging-improvement-13 title="Permanent link"> </a></h4><ul><li>添加从自定义用户启动clickhouse服务器映像的方法 <a href=https://github.com/ClickHouse/ClickHouse/pull/4753 rel="external nofollow noreferrer" target=_blank>#4753</a> (<a href=https://github.com/Felixoid rel="external nofollow noreferrer" target=_blank>Mikhail f. Shiryaev</a>)</li></ul><h3 id=clickhouse-release-19-3-7-2019-03-12>碌莽禄,拢,010-68520682\&lt;url&gt;<a class=headerlink href=../amp/#clickhouse-release-19-3-7-2019-03-12 title="Permanent link"> </a></h3><h4 id=bug-fixes-13>错误修复<a class=headerlink href=../amp/#bug-fixes-13 title="Permanent link"> </a></h4><ul><li>修正了＃3920中的错误。 此错误表现为随机缓存损坏（消息 <code class=syntax>Unknown codec family code</code>, <code class=syntax>Cannot seek through file</code>）和段错误。 这个错误最早出现在19.1版本中，并且存在于19.1.10和19.3.6之前的版本中。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4623 rel="external nofollow noreferrer" target=_blank>#4623</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li></ul><h3 id=clickhouse-release-19-3-6-2019-03-02>碌莽禄,拢,010-68520682\&lt;url&gt;戮卤篓拢,010-68520682\&lt;url&gt;<a class=headerlink href=../amp/#clickhouse-release-19-3-6-2019-03-02 title="Permanent link"> </a></h3><h4 id=bug-fixes-14>错误修复<a class=headerlink href=../amp/#bug-fixes-14 title="Permanent link"> </a></h4><ul><li>当线程池中有超过1000个线程时, <code class=syntax>std::terminate</code> 线程退出时可能发生。 <a href=https://github.com/azat rel="external nofollow noreferrer" target=_blank>Azat Khuzhin</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/4485 rel="external nofollow noreferrer" target=_blank>#4485</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/4505 rel="external nofollow noreferrer" target=_blank>#4505</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>现在可以创建 <code class=syntax>ReplicatedMergeTree*</code> 对没有默认值的列进行注释的表和对没有注释和默认值的列进行编解码的表。 还修复编解码器的比较。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4523 rel="external nofollow noreferrer" target=_blank>#4523</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li><li>修复了与数组或元组联接时的崩溃。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4552 rel="external nofollow noreferrer" target=_blank>#4552</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li><li>修复了clickhouse-复印机中的消息崩溃 <code class=syntax>ThreadStatus not created</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/4540 rel="external nofollow noreferrer" target=_blank>#4540</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li><li>如果使用分布式Ddl，则在服务器关闭时修复了挂机问题。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4472 rel="external nofollow noreferrer" target=_blank>#4472</a> (<a href=https://github.com/ztlpn rel="external nofollow noreferrer" target=_blank>Alex Zatelepin</a>)</li><li>错误的列编号打印在有关文本格式分析的列数大于10的错误消息中。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4484 rel="external nofollow noreferrer" target=_blank>#4484</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li></ul><h4 id=buildtestingpackaging-improvements-3>构建/测试/打包改进<a class=headerlink href=../amp/#buildtestingpackaging-improvements-3 title="Permanent link"> </a></h4><ul><li>固定构建与启用AVX。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4527 rel="external nofollow noreferrer" target=_blank>#4527</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>基于已知版本而不是编译它的内核启用扩展记帐和IO记帐。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4541 rel="external nofollow noreferrer" target=_blank>#4541</a> (<a href=https://github.com/nvartolomei rel="external nofollow noreferrer" target=_blank>纳瓦托洛梅</a>)</li><li>允许跳过core_dump的设置。size_limit，如果限制设置失败，则警告而不是throw。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4473 rel="external nofollow noreferrer" target=_blank>#4473</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li><li>删除了 <code class=syntax>inline</code> 标签 <code class=syntax>void readBinary(...)</code> 在 <code class=syntax>Field.cpp</code>. 也合并冗余 <code class=syntax>namespace DB</code> 块。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4530 rel="external nofollow noreferrer" target=_blank>#4530</a> (<a href=https://github.com/hczhcz rel="external nofollow noreferrer" target=_blank>hcz</a>)</li></ul><h3 id=clickhouse-release-19-3-5-2019-02-21>碌莽禄,拢,010-68520682\&lt;url&gt;<a class=headerlink href=../amp/#clickhouse-release-19-3-5-2019-02-21 title="Permanent link"> </a></h3><h4 id=bug-fixes-15>错误修复<a class=headerlink href=../amp/#bug-fixes-15 title="Permanent link"> </a></h4><ul><li>修正了大型http插入查询处理的错误。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4454 rel="external nofollow noreferrer" target=_blank>#4454</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li><li>修正了向后不兼容的旧版本，由于错误的实现 <code class=syntax>send_logs_level</code> 设置。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4445 rel="external nofollow noreferrer" target=_blank>#4445</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>修正了表函数的向后不兼容性 <code class=syntax>remote</code> 与列注释介绍. <a href=https://github.com/ClickHouse/ClickHouse/pull/4446 rel="external nofollow noreferrer" target=_blank>#4446</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li></ul><h3 id=clickhouse-release-19-3-4-2019-02-16>碌莽禄,拢,010-68520682\&lt;url&gt;<a class=headerlink href=../amp/#clickhouse-release-19-3-4-2019-02-16 title="Permanent link"> </a></h3><h4 id=improvements-4>改进<a class=headerlink href=../amp/#improvements-4 title="Permanent link"> </a></h4><ul><li>执行以下操作时，表索引大小不考虑内存限制 <code class=syntax>ATTACH TABLE</code> 查询。 避免了分离后无法连接表的可能性。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4396 rel="external nofollow noreferrer" target=_blank>#4396</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>稍微提高了从ZooKeeper接收的最大字符串和数组大小的限制。 它允许继续与增加的尺寸工作 <code class=syntax>CLIENT_JVMFLAGS=-Djute.maxbuffer=...</code> 在动物园管理员。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4398 rel="external nofollow noreferrer" target=_blank>#4398</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>允许修复被遗弃的副本，即使它已经在其队列中拥有大量的节点。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4399 rel="external nofollow noreferrer" target=_blank>#4399</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>添加一个必需的参数 <code class=syntax>SET</code> 索引（最大存储行数）。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4386 rel="external nofollow noreferrer" target=_blank>#4386</a> (<a href=https://github.com/nikvas0 rel="external nofollow noreferrer" target=_blank>尼基塔*瓦西列夫</a>)</li></ul><h4 id=bug-fixes-16>错误修复<a class=headerlink href=../amp/#bug-fixes-16 title="Permanent link"> </a></h4><ul><li>固定 <code class=syntax>WITH ROLLUP</code> 单组结果 <code class=syntax>LowCardinality</code> 钥匙 <a href=https://github.com/ClickHouse/ClickHouse/pull/4384 rel="external nofollow noreferrer" target=_blank>#4384</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>尼古拉*科切托夫</a>)</li><li>在设置索引固定错误（删除颗粒，如果它包含超过 <code class=syntax>max_rows</code> 行）。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4386 rel="external nofollow noreferrer" target=_blank>#4386</a> (<a href=https://github.com/nikvas0 rel="external nofollow noreferrer" target=_blank>尼基塔*瓦西列夫</a>)</li><li>很多的FreeBSD构建修复。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4397 rel="external nofollow noreferrer" target=_blank>#4397</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li><li>固定别名替换查询与子查询包含相同的别名（问题 <a href=https://github.com/ClickHouse/ClickHouse/issues/4110 rel="external nofollow noreferrer" target=_blank>#4110</a>). <a href=https://github.com/ClickHouse/ClickHouse/pull/4351 rel="external nofollow noreferrer" target=_blank>#4351</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li></ul><h4 id=buildtestingpackaging-improvements-4>构建/测试/打包改进<a class=headerlink href=../amp/#buildtestingpackaging-improvements-4 title="Permanent link"> </a></h4><ul><li>添加运行能力 <code class=syntax>clickhouse-server</code> 对于docker镜像中的无状态测试。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4347 rel="external nofollow noreferrer" target=_blank>#4347</a> (<a href=https://github.com/Enmk rel="external nofollow noreferrer" target=_blank>瓦西里*内姆科夫</a>)</li></ul><h3 id=clickhouse-release-19-3-3-2019-02-13>碌莽禄,拢,010-68520682\&lt;url&gt;<a class=headerlink href=../amp/#clickhouse-release-19-3-3-2019-02-13 title="Permanent link"> </a></h3><h4 id=new-features-6>新功能<a class=headerlink href=../amp/#new-features-6 title="Permanent link"> </a></h4><ul><li>添加了 <code class=syntax>KILL MUTATION</code> 允许删除由于某些原因卡住的突变的声明。 已添加 <code class=syntax>latest_failed_part</code>, <code class=syntax>latest_fail_time</code>, <code class=syntax>latest_fail_reason</code> 字段到 <code class=syntax>system.mutations</code> 表更容易排除故障。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4287 rel="external nofollow noreferrer" target=_blank>#4287</a> (<a href=https://github.com/ztlpn rel="external nofollow noreferrer" target=_blank>Alex Zatelepin</a>)</li><li>添加聚合功能 <code class=syntax>entropy</code> 计算香农熵 <a href=https://github.com/ClickHouse/ClickHouse/pull/4238 rel="external nofollow noreferrer" target=_blank>#4238</a> (<a href=https://github.com/Quid37 rel="external nofollow noreferrer" target=_blank>Quid37</a>)</li><li>添加发送查询的功能 <code class=syntax>INSERT INTO tbl VALUES (....</code> 到服务器而不拆分 <code class=syntax>query</code> 和 <code class=syntax>data</code> 零件。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4301 rel="external nofollow noreferrer" target=_blank>#4301</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li><li>通用实现 <code class=syntax>arrayWithConstant</code> 添加了功能。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4322 rel="external nofollow noreferrer" target=_blank>#4322</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>已实施 <code class=syntax>NOT BETWEEN</code> 比较运算符。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4228 rel="external nofollow noreferrer" target=_blank>#4228</a> (<a href=https://github.com/nezed rel="external nofollow noreferrer" target=_blank>Dmitry Naumov</a>)</li><li>执行 <code class=syntax>sumMapFiltered</code> 为了能够限制其值将被求和的键的数量 <code class=syntax>sumMap</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/4129 rel="external nofollow noreferrer" target=_blank>#4129</a> (<a href=https://github.com/ercolanelli-leo rel="external nofollow noreferrer" target=_blank>Léo Ercolanelli</a>)</li><li>增加了支持 <code class=syntax>Nullable</code> 类型 <code class=syntax>mysql</code> 表功能。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4198 rel="external nofollow noreferrer" target=_blank>#4198</a> (<a href=https://github.com/edonin rel="external nofollow noreferrer" target=_blank>Emmanuel Donin de Rosière</a>)</li><li>支持任意常量表达式 <code class=syntax>LIMIT</code> 条款 <a href=https://github.com/ClickHouse/ClickHouse/pull/4246 rel="external nofollow noreferrer" target=_blank>#4246</a> (<a href=https://github.com/k3box rel="external nofollow noreferrer" target=_blank>k3box</a>)</li><li>已添加 <code class=syntax>topKWeighted</code> 采用带有（无符号整数）权重的附加参数的聚合函数。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4245 rel="external nofollow noreferrer" target=_blank>#4245</a> (<a href=https://github.com/andrewgolman rel="external nofollow noreferrer" target=_blank>安德鲁*戈尔曼</a>)</li><li><code class=syntax>StorageJoin</code> 现在支持 <code class=syntax>join_any_take_last_row</code> 允许复盖同一键的现有值的设置。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3973 rel="external nofollow noreferrer" target=_blank>#3973</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer" target=_blank>阿莫斯鸟</a></li><li>添加功能 <code class=syntax>toStartOfInterval</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/4304 rel="external nofollow noreferrer" target=_blank>#4304</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer" target=_blank>维塔利*巴拉诺夫</a>)</li><li>已添加 <code class=syntax>RowBinaryWithNamesAndTypes</code> 格式。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4200 rel="external nofollow noreferrer" target=_blank>#4200</a> (<a href=https://github.com/DarkWanderer rel="external nofollow noreferrer" target=_blank>Oleg V.Kozlyuk</a>)</li><li>已添加 <code class=syntax>IPv4</code> 和 <code class=syntax>IPv6</code> 数据类型。 更有效的实现 <code class=syntax>IPv*</code> 功能。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3669 rel="external nofollow noreferrer" target=_blank>#3669</a> (<a href=https://github.com/Enmk rel="external nofollow noreferrer" target=_blank>瓦西里*内姆科夫</a>)</li><li>添加功能 <code class=syntax>toStartOfTenMinutes()</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/4298 rel="external nofollow noreferrer" target=_blank>#4298</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer" target=_blank>维塔利*巴拉诺夫</a>)</li><li>已添加 <code class=syntax>Protobuf</code> 输出格式。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4005 rel="external nofollow noreferrer" target=_blank>#4005</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/4158 rel="external nofollow noreferrer" target=_blank>#4158</a> (<a href=https://github.com/vitlibar rel="external nofollow noreferrer" target=_blank>维塔利*巴拉诺夫</a>)</li><li>增加了对数据导入（插入）HTTP接口的brotli支持。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4235 rel="external nofollow noreferrer" target=_blank>#4235</a> (<a href=https://github.com/fandyushin rel="external nofollow noreferrer" target=_blank>米哈伊尔</a>)</li><li>增加了提示，而用户做出错字的函数名称或键入命令行客户端。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4239 rel="external nofollow noreferrer" target=_blank>#4239</a> (<a href=https://github.com/danlark1 rel="external nofollow noreferrer" target=_blank>Danila Kutenin</a>)</li><li>已添加 <code class=syntax>Query-Id</code> 到服务器的HTTP响应头。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4231 rel="external nofollow noreferrer" target=_blank>#4231</a> (<a href=https://github.com/fandyushin rel="external nofollow noreferrer" target=_blank>米哈伊尔</a>)</li></ul><h4 id=experimental-features-2>实验特点<a class=headerlink href=../amp/#experimental-features-2 title="Permanent link"> </a></h4><ul><li>已添加 <code class=syntax>minmax</code> 和 <code class=syntax>set</code> MergeTree表引擎系列的数据跳过索引。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4143 rel="external nofollow noreferrer" target=_blank>#4143</a> (<a href=https://github.com/nikvas0 rel="external nofollow noreferrer" target=_blank>尼基塔*瓦西列夫</a>)</li><li>增加了转换 <code class=syntax>CROSS JOIN</code> 到 <code class=syntax>INNER JOIN</code> 如果可能的话 <a href=https://github.com/ClickHouse/ClickHouse/pull/4221 rel="external nofollow noreferrer" target=_blank>#4221</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/4266 rel="external nofollow noreferrer" target=_blank>#4266</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li></ul><h4 id=bug-fixes-17>错误修复<a class=headerlink href=../amp/#bug-fixes-17 title="Permanent link"> </a></h4><ul><li>固定 <code class=syntax>Not found column</code> 对于重复的列 <code class=syntax>JOIN ON</code> 科。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4279 rel="external nofollow noreferrer" target=_blank>#4279</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li><li>赂眉露&gt;&gt; <code class=syntax>START REPLICATED SENDS</code> 命令开始复制发送。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4229 rel="external nofollow noreferrer" target=_blank>#4229</a> (<a href=https://github.com/nvartolomei rel="external nofollow noreferrer" target=_blank>纳瓦托洛梅</a>)</li><li>固定聚合函数执行 <code class=syntax>Array(LowCardinality)</code> 争论。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4055 rel="external nofollow noreferrer" target=_blank>#4055</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>KochetovNicolai</a>)</li><li>修正了错误的行为，当做 <code class=syntax>INSERT ... SELECT ... FROM file(...)</code> 查询和文件有 <code class=syntax>CSVWithNames</code> 或 <code class=syntax>TSVWIthNames</code> 格式和第一个数据行丢失。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4297 rel="external nofollow noreferrer" target=_blank>#4297</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>如果字典不可用，则修复了字典重新加载时的崩溃。 此错误出现在19.1.6中。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4188 rel="external nofollow noreferrer" target=_blank>#4188</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li><li>固定 <code class=syntax>ALL JOIN</code> 右表中有重复项。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4184 rel="external nofollow noreferrer" target=_blank>#4184</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li><li>修正了分段故障 <code class=syntax>use_uncompressed_cache=1</code> 和异常与错误的未压缩大小。 此错误出现在19.1.6中。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4186 rel="external nofollow noreferrer" target=_blank>#4186</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li><li>固定 <code class=syntax>compile_expressions</code> 错误与大（超过int16）日期的比较。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4341 rel="external nofollow noreferrer" target=_blank>#4341</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li><li>从表函数选择时固定无限循环 <code class=syntax>numbers(0)</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/4280 rel="external nofollow noreferrer" target=_blank>#4280</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>暂时禁用谓词优化 <code class=syntax>ORDER BY</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/3890 rel="external nofollow noreferrer" target=_blank>#3890</a> (<a href=https://github.com/zhang2014 rel="external nofollow noreferrer" target=_blank>张冬</a>)</li><li>固定 <code class=syntax>Illegal instruction</code> 在旧Cpu上使用base64函数时出错。 仅当ClickHouse使用gcc-8编译时，才会重现此错误。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4275 rel="external nofollow noreferrer" target=_blank>#4275</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>固定 <code class=syntax>No message received</code> 通过TLS连接与PostgreSQL ODBC驱动程序交互时出错。 还修复了使用MySQL ODBC驱动程序时的段错误。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4170 rel="external nofollow noreferrer" target=_blank>#4170</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>修正错误的结果时 <code class=syntax>Date</code> 和 <code class=syntax>DateTime</code> 参数用于条件运算符（函数）的分支 <code class=syntax>if</code>). 增加了函数的通用案例 <code class=syntax>if</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/4243 rel="external nofollow noreferrer" target=_blank>#4243</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>ClickHouse字典现在加载内 <code class=syntax>clickhouse</code> 过程。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4166 rel="external nofollow noreferrer" target=_blank>#4166</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>修复死锁时 <code class=syntax>SELECT</code> 从一个表 <code class=syntax>File</code> 引擎被重试后 <code class=syntax>No such file or directory</code> 错误 <a href=https://github.com/ClickHouse/ClickHouse/pull/4161 rel="external nofollow noreferrer" target=_blank>#4161</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>从选择时固定的竞争条件 <code class=syntax>system.tables</code> 可能会给 <code class=syntax>table doesn't exist</code> 错误 <a href=https://github.com/ClickHouse/ClickHouse/pull/4313 rel="external nofollow noreferrer" target=_blank>#4313</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li><code class=syntax>clickhouse-client</code> 如果在交互模式下运行，则在加载命令行建议的数据时可以在退出时段错误。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4317 rel="external nofollow noreferrer" target=_blank>#4317</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>修正了一个错误，当包含突变的执行 <code class=syntax>IN</code> 操作员产生了不正确的结果。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4099 rel="external nofollow noreferrer" target=_blank>#4099</a> (<a href=https://github.com/ztlpn rel="external nofollow noreferrer" target=_blank>Alex Zatelepin</a>)</li><li>修正错误：如果有一个数据库 <code class=syntax>Dictionary</code> 引擎中，所有字典在服务器启动时强制加载，如果有来自localhost的ClickHouse源字典，则字典无法加载。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4255 rel="external nofollow noreferrer" target=_blank>#4255</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>修复了在服务器关闭时尝试再次创建系统日志时的错误。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4254 rel="external nofollow noreferrer" target=_blank>#4254</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>正确返回正确的类型和正确处理锁 <code class=syntax>joinGet</code> 功能。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4153 rel="external nofollow noreferrer" target=_blank>#4153</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer" target=_blank>阿莫斯鸟</a>)</li><li>已添加 <code class=syntax>sumMapWithOverflow</code> 功能。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4151 rel="external nofollow noreferrer" target=_blank>#4151</a> (<a href=https://github.com/ercolanelli-leo rel="external nofollow noreferrer" target=_blank>Léo Ercolanelli</a>)</li><li>固定段错误 <code class=syntax>allow_experimental_multiple_joins_emulation</code>. <a href=https://github.com/ClickHouse/ClickHouse/commit/52de2cd927f7b5257dd67e175f0a5560a48840d0 rel="external nofollow noreferrer" target=_blank>52de2c</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li><li>修正错误与不正确 <code class=syntax>Date</code> 和 <code class=syntax>DateTime</code> 比较。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4237 rel="external nofollow noreferrer" target=_blank>#4237</a> (<a href=https://github.com/valexey rel="external nofollow noreferrer" target=_blank>valexey</a>)</li><li>在未定义的行为消毒固定模糊测试：增加了参数类型检查 <code class=syntax>quantile*Weighted</code> 家庭的功能。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4145 rel="external nofollow noreferrer" target=_blank>#4145</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>修复了在删除旧数据部分时罕见的争用条件可能会失败 <code class=syntax>File not found</code> 错误 <a href=https://github.com/ClickHouse/ClickHouse/pull/4378 rel="external nofollow noreferrer" target=_blank>#4378</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>修复缺少/etc/clickhouse-server/config的安装包。xml <a href=https://github.com/ClickHouse/ClickHouse/pull/4343 rel="external nofollow noreferrer" target=_blank>#4343</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li></ul><h4 id=buildtestingpackaging-improvements-5>构建/测试/打包改进<a class=headerlink href=../amp/#buildtestingpackaging-improvements-5 title="Permanent link"> </a></h4><ul><li>Debian软件包：根据配置正确的/etc/clickhouse-server/预处理链接。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4205 rel="external nofollow noreferrer" target=_blank>#4205</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li><li>Freebsd的各种构建修复程序。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4225 rel="external nofollow noreferrer" target=_blank>#4225</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li><li>增加了在perftest中创建，填充和删除表的能力。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4220 rel="external nofollow noreferrer" target=_blank>#4220</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li><li>添加了一个脚本来检查重复的包括。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4326 rel="external nofollow noreferrer" target=_blank>#4326</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>增加了在性能测试中通过索引运行查询的能力。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4264 rel="external nofollow noreferrer" target=_blank>#4264</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li><li>建议安装带有调试符号的软件包。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4274 rel="external nofollow noreferrer" target=_blank>#4274</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>重构性能测试。 更好的记录和信号处理。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4171 rel="external nofollow noreferrer" target=_blank>#4171</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li><li>将文档添加到匿名Yandex。Metrika数据集. <a href=https://github.com/ClickHouse/ClickHouse/pull/4164 rel="external nofollow noreferrer" target=_blank>#4164</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li><li>Аdded tool for converting an old month-partitioned part to the custom-partitioned format. <a href=https://github.com/ClickHouse/ClickHouse/pull/4195 rel="external nofollow noreferrer" target=_blank>#4195</a> (<a href=https://github.com/ztlpn rel="external nofollow noreferrer" target=_blank>Alex Zatelepin</a>)</li><li>添加了有关s3中两个数据集的文档。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4144 rel="external nofollow noreferrer" target=_blank>#4144</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li><li>增加了从拉请求描述创建更新日志的脚本。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4169 rel="external nofollow noreferrer" target=_blank>#4169</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/4173 rel="external nofollow noreferrer" target=_blank>#4173</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>KochetovNicolai</a>) (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>KochetovNicolai</a>)</li><li>为ClickHouse添加了木偶模块。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4182 rel="external nofollow noreferrer" target=_blank>#4182</a> (<a href=https://github.com/MaxFedotov rel="external nofollow noreferrer" target=_blank>Maxim Fedotov</a>)</li><li>添加了一组无证函数的文档。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4168 rel="external nofollow noreferrer" target=_blank>#4168</a> (<a href=https://github.com/zhang2014 rel="external nofollow noreferrer" target=_blank>张冬</a>)</li><li>ARM构建修复。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4210 rel="external nofollow noreferrer" target=_blank>#4210</a><a href=https://github.com/ClickHouse/ClickHouse/pull/4306 rel="external nofollow noreferrer" target=_blank>#4306</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/4291 rel="external nofollow noreferrer" target=_blank>#4291</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>) (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li><li>字典测试现在能够从运行 <code class=syntax>ctest</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/4189 rel="external nofollow noreferrer" target=_blank>#4189</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li><li>现在 <code class=syntax>/etc/ssl</code> 用作带有SSL证书的默认目录。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4167 rel="external nofollow noreferrer" target=_blank>#4167</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>在开始时添加了检查SSE和AVX指令。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4234 rel="external nofollow noreferrer" target=_blank>#4234</a> (<a href=https://github.com/igron99 rel="external nofollow noreferrer" target=_blank>Igr</a>)</li><li>初始化脚本将等待服务器，直到启动。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4281 rel="external nofollow noreferrer" target=_blank>#4281</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li></ul><h4 id=backward-incompatible-changes-1>向后不兼容的更改<a class=headerlink href=../amp/#backward-incompatible-changes-1 title="Permanent link"> </a></h4><ul><li>已删除 <code class=syntax>allow_experimental_low_cardinality_type</code> 设置。 <code class=syntax>LowCardinality</code> 数据类型已准备就绪。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4323 rel="external nofollow noreferrer" target=_blank>#4323</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>根据可用内存量减少标记高速缓存大小和未压缩高速缓存大小。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4240 rel="external nofollow noreferrer" target=_blank>#4240</a> (<a href=https://github.com/k-lopatin rel="external nofollow noreferrer" target=_blank>Lopatin Konstantin</a></li><li>添加关键字 <code class=syntax>INDEX</code> 在 <code class=syntax>CREATE TABLE</code> 查询。 具有名称的列 <code class=syntax>index</code> 必须使用反引号或双引号引用: <code class=syntax>`index`</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/4143 rel="external nofollow noreferrer" target=_blank>#4143</a> (<a href=https://github.com/nikvas0 rel="external nofollow noreferrer" target=_blank>尼基塔*瓦西列夫</a>)</li><li><code class=syntax>sumMap</code> 现在提升结果类型而不是溢出。 老 <code class=syntax>sumMap</code> 行为可以通过使用获得 <code class=syntax>sumMapWithOverflow</code> 功能。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4151 rel="external nofollow noreferrer" target=_blank>#4151</a> (<a href=https://github.com/ercolanelli-leo rel="external nofollow noreferrer" target=_blank>Léo Ercolanelli</a>)</li></ul><h4 id=performance-improvements-4>性能改进<a class=headerlink href=../amp/#performance-improvements-4 title="Permanent link"> </a></h4><ul><li><code class=syntax>std::sort</code> 改为 <code class=syntax>pdqsort</code> 对于没有 <code class=syntax>LIMIT</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/4236 rel="external nofollow noreferrer" target=_blank>#4236</a> (<a href=https://github.com/kvinty rel="external nofollow noreferrer" target=_blank>Evgenii Pravda</a>)</li><li>现在服务器重用全局线程池中的线程。 这会影响某些角落情况下的性能。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4150 rel="external nofollow noreferrer" target=_blank>#4150</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li></ul><h4 id=improvements-5>改进<a class=headerlink href=../amp/#improvements-5 title="Permanent link"> </a></h4><ul><li>实现了对FreeBSD的AIO支持。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4305 rel="external nofollow noreferrer" target=_blank>#4305</a> (<a href=https://github.com/urgordeadbeef rel="external nofollow noreferrer" target=_blank>urgordeadbeef</a>)</li><li><code class=syntax>SELECT * FROM a JOIN b USING a, b</code> 现在回来 <code class=syntax>a</code> 和 <code class=syntax>b</code> 列仅从左表。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4141 rel="external nofollow noreferrer" target=_blank>#4141</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li><li>允许 <code class=syntax>-C</code> 客户端的选项作为工作 <code class=syntax>-c</code> 选项。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4232 rel="external nofollow noreferrer" target=_blank>#4232</a> (<a href=https://github.com/syominsergey rel="external nofollow noreferrer" target=_blank>syominsergey</a>)</li><li>现在选项 <code class=syntax>--password</code> 无值使用需要从标准输入的密码。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4230 rel="external nofollow noreferrer" target=_blank>#4230</a> (<a href=https://github.com/bsd-conqueror rel="external nofollow noreferrer" target=_blank>BSD_Conqueror</a>)</li><li>在包含字符串文字中添加了非转义元字符的突出显示 <code class=syntax>LIKE</code> 表达式或正则表达式。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4327 rel="external nofollow noreferrer" target=_blank>#4327</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>添加取消HTTP只读查询，如果客户端套接字消失。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4213 rel="external nofollow noreferrer" target=_blank>#4213</a> (<a href=https://github.com/nvartolomei rel="external nofollow noreferrer" target=_blank>纳瓦托洛梅</a>)</li><li>现在，服务器报告进度，以保持客户端连接活跃。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4215 rel="external nofollow noreferrer" target=_blank>#4215</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>伊万</a>)</li><li>稍微好一点的消息与优化查询的原因 <code class=syntax>optimize_throw_if_noop</code> 设置已启用。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4294 rel="external nofollow noreferrer" target=_blank>#4294</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>增加了支持 <code class=syntax>--version</code> clickhouse服务器的选项。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4251 rel="external nofollow noreferrer" target=_blank>#4251</a> (<a href=https://github.com/k-lopatin rel="external nofollow noreferrer" target=_blank>Lopatin Konstantin</a>)</li><li>已添加 <code class=syntax>--help/-h</code> 选项 <code class=syntax>clickhouse-server</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/4233 rel="external nofollow noreferrer" target=_blank>#4233</a> (<a href=https://github.com/yurriy rel="external nofollow noreferrer" target=_blank>尤里*巴拉诺夫</a>)</li><li>增加了对具有聚合函数状态结果的标量子查询的支持。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4348 rel="external nofollow noreferrer" target=_blank>#4348</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>尼古拉*科切托夫</a>)</li><li>改进服务器关闭时间并改变等待时间。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4372 rel="external nofollow noreferrer" target=_blank>#4372</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>添加了有关replicated_can_become_leader设置到系统的信息。如果副本不会尝试成为领导者，则添加日志记录。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4379 rel="external nofollow noreferrer" target=_blank>#4379</a> (<a href=https://github.com/ztlpn rel="external nofollow noreferrer" target=_blank>Alex Zatelepin</a>)</li></ul><h2 id=clickhouse-release-19-1>ClickHouse释放19.1<a class=headerlink href=../amp/#clickhouse-release-19-1 title="Permanent link"> </a></h2><h3 id=clickhouse-release-19-1-14-2019-03-14>碌莽禄,拢,010-68520682\&lt;url&gt;<a class=headerlink href=../amp/#clickhouse-release-19-1-14-2019-03-14 title="Permanent link"> </a></h3><ul><li>修正错误 <code class=syntax>Column ... queried more than once</code> 这可能发生，如果设置 <code class=syntax>asterisk_left_columns_only</code> 在使用的情况下设置为1 <code class=syntax>GLOBAL JOIN</code> 与 <code class=syntax>SELECT *</code> （罕见的情况）。 该问题在19.3及更新版本中不存在。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4692/commits/6bac7d8d11a9b0d6de0b32b53c47eb2f6f8e7062 rel="external nofollow noreferrer" target=_blank>6bac7d8d</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li></ul><h3 id=clickhouse-release-19-1-13-2019-03-12>碌莽禄,拢,010-68520682\&lt;url&gt;<a class=headerlink href=../amp/#clickhouse-release-19-1-13-2019-03-12 title="Permanent link"> </a></h3><p>此版本包含与19.3.7完全相同的补丁集。</p><h3 id=clickhouse-release-19-1-10-2019-03-03>碌莽禄,拢,010-68520682\&lt;url&gt;戮卤篓拢,010-68520682\&lt;url&gt;<a class=headerlink href=../amp/#clickhouse-release-19-1-10-2019-03-03 title="Permanent link"> </a></h3><p>此版本包含与19.3.6完全相同的补丁集。</p><h2 id=clickhouse-release-19-1-1>ClickHouse释放19.1<a class=headerlink href=../amp/#clickhouse-release-19-1-1 title="Permanent link"> </a></h2><h3 id=clickhouse-release-19-1-9-2019-02-21>碌莽禄,拢,010-68520682\&lt;url&gt;<a class=headerlink href=../amp/#clickhouse-release-19-1-9-2019-02-21 title="Permanent link"> </a></h3><h4 id=bug-fixes-18>错误修复<a class=headerlink href=../amp/#bug-fixes-18 title="Permanent link"> </a></h4><ul><li>修正了向后不兼容的旧版本，由于错误的实现 <code class=syntax>send_logs_level</code> 设置。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4445 rel="external nofollow noreferrer" target=_blank>#4445</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>修正了表函数的向后不兼容性 <code class=syntax>remote</code> 与列注释介绍. <a href=https://github.com/ClickHouse/ClickHouse/pull/4446 rel="external nofollow noreferrer" target=_blank>#4446</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li></ul><h3 id=clickhouse-release-19-1-8-2019-02-16>碌莽禄,拢,010-68520682\&lt;url&gt;<a class=headerlink href=../amp/#clickhouse-release-19-1-8-2019-02-16 title="Permanent link"> </a></h3><h4 id=bug-fixes-19>错误修复<a class=headerlink href=../amp/#bug-fixes-19 title="Permanent link"> </a></h4><ul><li>修复缺少/etc/clickhouse-server/config的安装包。xml <a href=https://github.com/ClickHouse/ClickHouse/pull/4343 rel="external nofollow noreferrer" target=_blank>#4343</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li></ul><h2 id=clickhouse-release-19-1-2>ClickHouse释放19.1<a class=headerlink href=../amp/#clickhouse-release-19-1-2 title="Permanent link"> </a></h2><h3 id=clickhouse-release-19-1-7-2019-02-15>碌莽禄,拢,010-68520682\&lt;url&gt;<a class=headerlink href=../amp/#clickhouse-release-19-1-7-2019-02-15 title="Permanent link"> </a></h3><h4 id=bug-fixes-20>错误修复<a class=headerlink href=../amp/#bug-fixes-20 title="Permanent link"> </a></h4><ul><li>正确返回正确的类型和正确处理锁 <code class=syntax>joinGet</code> 功能。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4153 rel="external nofollow noreferrer" target=_blank>#4153</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer" target=_blank>阿莫斯鸟</a>)</li><li>修复了在服务器关闭时尝试再次创建系统日志时的错误。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4254 rel="external nofollow noreferrer" target=_blank>#4254</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>修正错误：如果有一个数据库 <code class=syntax>Dictionary</code> 引擎中，所有字典在服务器启动时强制加载，如果有来自localhost的ClickHouse源字典，则字典无法加载。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4255 rel="external nofollow noreferrer" target=_blank>#4255</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>修正了一个错误，当包含突变的执行 <code class=syntax>IN</code> 操作员产生了不正确的结果。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4099 rel="external nofollow noreferrer" target=_blank>#4099</a> (<a href=https://github.com/ztlpn rel="external nofollow noreferrer" target=_blank>Alex Zatelepin</a>)</li><li><code class=syntax>clickhouse-client</code> 如果在交互模式下运行，则在加载命令行建议的数据时可以在退出时段错误。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4317 rel="external nofollow noreferrer" target=_blank>#4317</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>从选择时固定的竞争条件 <code class=syntax>system.tables</code> 可能会给 <code class=syntax>table doesn't exist</code> 错误 <a href=https://github.com/ClickHouse/ClickHouse/pull/4313 rel="external nofollow noreferrer" target=_blank>#4313</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>修复死锁时 <code class=syntax>SELECT</code> 从一个表 <code class=syntax>File</code> 引擎被重试后 <code class=syntax>No such file or directory</code> 错误 <a href=https://github.com/ClickHouse/ClickHouse/pull/4161 rel="external nofollow noreferrer" target=_blank>#4161</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>修复了一个问题：本地ClickHouse字典通过TCP加载，但应该在进程中加载。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4166 rel="external nofollow noreferrer" target=_blank>#4166</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>固定 <code class=syntax>No message received</code> 通过TLS连接与PostgreSQL ODBC驱动程序交互时出错。 还修复了使用MySQL ODBC驱动程序时的段错误。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4170 rel="external nofollow noreferrer" target=_blank>#4170</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>暂时禁用谓词优化 <code class=syntax>ORDER BY</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/3890 rel="external nofollow noreferrer" target=_blank>#3890</a> (<a href=https://github.com/zhang2014 rel="external nofollow noreferrer" target=_blank>张冬</a>)</li><li>从表函数选择时固定无限循环 <code class=syntax>numbers(0)</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/4280 rel="external nofollow noreferrer" target=_blank>#4280</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>固定 <code class=syntax>compile_expressions</code> 错误与大（超过int16）日期的比较。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4341 rel="external nofollow noreferrer" target=_blank>#4341</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li><li>修正了分段故障 <code class=syntax>uncompressed_cache=1</code> 和异常与错误的未压缩大小。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4186 rel="external nofollow noreferrer" target=_blank>#4186</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li><li>固定 <code class=syntax>ALL JOIN</code> 右表中有重复项。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4184 rel="external nofollow noreferrer" target=_blank>#4184</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li><li>修正了错误的行为，当做 <code class=syntax>INSERT ... SELECT ... FROM file(...)</code> 查询和文件有 <code class=syntax>CSVWithNames</code> 或 <code class=syntax>TSVWIthNames</code> 格式和第一个数据行丢失。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4297 rel="external nofollow noreferrer" target=_blank>#4297</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>固定聚合函数执行 <code class=syntax>Array(LowCardinality)</code> 争论。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4055 rel="external nofollow noreferrer" target=_blank>#4055</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>KochetovNicolai</a>)</li><li>Debian软件包：根据配置正确的/etc/clickhouse-server/预处理链接。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4205 rel="external nofollow noreferrer" target=_blank>#4205</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li><li>在未定义的行为消毒固定模糊测试：增加了参数类型检查 <code class=syntax>quantile*Weighted</code> 家庭的功能。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4145 rel="external nofollow noreferrer" target=_blank>#4145</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>赂眉露&gt;&gt; <code class=syntax>START REPLICATED SENDS</code> 命令开始复制发送。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4229 rel="external nofollow noreferrer" target=_blank>#4229</a> (<a href=https://github.com/nvartolomei rel="external nofollow noreferrer" target=_blank>纳瓦托洛梅</a>)</li><li>固定 <code class=syntax>Not found column</code> 对于联接部分中的重复列。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4279 rel="external nofollow noreferrer" target=_blank>#4279</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li><li>现在 <code class=syntax>/etc/ssl</code> 用作带有SSL证书的默认目录。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4167 rel="external nofollow noreferrer" target=_blank>#4167</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>如果字典不可用，则修复了字典重新加载时的崩溃。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4188 rel="external nofollow noreferrer" target=_blank>#4188</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li><li>修正错误与不正确 <code class=syntax>Date</code> 和 <code class=syntax>DateTime</code> 比较。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4237 rel="external nofollow noreferrer" target=_blank>#4237</a> (<a href=https://github.com/valexey rel="external nofollow noreferrer" target=_blank>valexey</a>)</li><li>修正错误的结果时 <code class=syntax>Date</code> 和 <code class=syntax>DateTime</code> 参数用于条件运算符（函数）的分支 <code class=syntax>if</code>). 增加了函数的通用案例 <code class=syntax>if</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/4243 rel="external nofollow noreferrer" target=_blank>#4243</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li></ul><h3 id=clickhouse-release-19-1-6-2019-01-24>碌莽禄,拢,010-68520682\&lt;url&gt;<a class=headerlink href=../amp/#clickhouse-release-19-1-6-2019-01-24 title="Permanent link"> </a></h3><h4 id=new-features-7>新功能<a class=headerlink href=../amp/#new-features-7 title="Permanent link"> </a></h4><ul><li>自定义每列压缩编解码器的表。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3899 rel="external nofollow noreferrer" target=_blank>#3899</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/4111 rel="external nofollow noreferrer" target=_blank>#4111</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>, <a href=https://github.com/zhang2014 rel="external nofollow noreferrer" target=_blank>张冬</a>, <a href=https://github.com/Sindbag rel="external nofollow noreferrer" target=_blank>阿纳托利</a>)</li><li>添加压缩编解ec <code class=syntax>Delta</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/4052 rel="external nofollow noreferrer" target=_blank>#4052</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li><li>允许 <code class=syntax>ALTER</code> 压缩编解ecs。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4054 rel="external nofollow noreferrer" target=_blank>#4054</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li><li>新增功能 <code class=syntax>left</code>, <code class=syntax>right</code>, <code class=syntax>trim</code>, <code class=syntax>ltrim</code>, <code class=syntax>rtrim</code>, <code class=syntax>timestampadd</code>, <code class=syntax>timestampsub</code> 对于SQL标准的兼容性。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3826 rel="external nofollow noreferrer" target=_blank>#3826</a> (<a href=https://github.com/blinkov rel="external nofollow noreferrer" target=_blank>伊万*布林科夫</a>)</li><li>支持写入 <code class=syntax>HDFS</code> 表和 <code class=syntax>hdfs</code> 表功能。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4084 rel="external nofollow noreferrer" target=_blank>#4084</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li><li>增加了从big haystack中搜索多个常量字符串的功能: <code class=syntax>multiPosition</code>, <code class=syntax>multiSearch</code> ,<code class=syntax>firstMatch</code> 也与 <code class=syntax>-UTF8</code>, <code class=syntax>-CaseInsensitive</code>，和 <code class=syntax>-CaseInsensitiveUTF8</code> 变体。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4053 rel="external nofollow noreferrer" target=_blank>#4053</a> (<a href=https://github.com/danlark1 rel="external nofollow noreferrer" target=_blank>Danila Kutenin</a>)</li><li>修剪未使用的碎片，如果 <code class=syntax>SELECT</code> 通过分片键查询过滤器（设置 <code class=syntax>optimize_skip_unused_shards</code>). <a href=https://github.com/ClickHouse/ClickHouse/pull/3851 rel="external nofollow noreferrer" target=_blank>#3851</a> (<a href=https://github.com/kanterov rel="external nofollow noreferrer" target=_blank>Gleb Kanterov</a>, <a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>伊万</a>)</li><li>允许 <code class=syntax>Kafka</code> 引擎忽略每个块的解析错误数。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4094 rel="external nofollow noreferrer" target=_blank>#4094</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>伊万</a>)</li><li>增加了对 <code class=syntax>CatBoost</code> 多类模型评估。 功能 <code class=syntax>modelEvaluate</code> 返回带有多类模型的每类原始预测的元组。 <code class=syntax>libcatboostmodel.so</code> 应建立与 <a href=https://github.com/catboost/catboost/pull/607 rel="external nofollow noreferrer" target=_blank>#607</a>. <a href=https://github.com/ClickHouse/ClickHouse/pull/3959 rel="external nofollow noreferrer" target=_blank>#3959</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>KochetovNicolai</a>)</li><li>新增功能 <code class=syntax>filesystemAvailable</code>, <code class=syntax>filesystemFree</code>, <code class=syntax>filesystemCapacity</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/4097 rel="external nofollow noreferrer" target=_blank>#4097</a> (<a href=https://github.com/bgranvea rel="external nofollow noreferrer" target=_blank>Boris Granveaud</a>)</li><li>添加了哈希函数 <code class=syntax>xxHash64</code> 和 <code class=syntax>xxHash32</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/3905 rel="external nofollow noreferrer" target=_blank>#3905</a> (<a href=https://github.com/filimonov rel="external nofollow noreferrer" target=_blank>filimonov</a>)</li><li>已添加 <code class=syntax>gccMurmurHash</code> 散列函数（GCC风味杂音散列），它使用相同的散列种子 <a href=https://github.com/gcc-mirror/gcc/blob/41d6b10e96a1de98e90a7c0378437c3255814b16/libstdc%2B%2B-v3/include/bits/functional_hash.h#L191 rel="external nofollow noreferrer" target=_blank>海湾合作委员会</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/4000 rel="external nofollow noreferrer" target=_blank>#4000</a> (<a href=https://github.com/sundy-li rel="external nofollow noreferrer" target=_blank>sundyli</a>)</li><li>添加了哈希函数 <code class=syntax>javaHash</code>, <code class=syntax>hiveHash</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/3811 rel="external nofollow noreferrer" target=_blank>#3811</a> (<a href=https://github.com/shangshujie365 rel="external nofollow noreferrer" target=_blank>上书结365</a>)</li><li>添加表功能 <code class=syntax>remoteSecure</code>. 函数的工作原理为 <code class=syntax>remote</code>，但使用安全连接。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4088 rel="external nofollow noreferrer" target=_blank>#4088</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li></ul><h4 id=experimental-features-3>实验特点<a class=headerlink href=../amp/#experimental-features-3 title="Permanent link"> </a></h4><ul><li>添加了多个联接仿真 (<code class=syntax>allow_experimental_multiple_joins_emulation</code> 设置）。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3946 rel="external nofollow noreferrer" target=_blank>#3946</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li></ul><h4 id=bug-fixes-21>错误修复<a class=headerlink href=../amp/#bug-fixes-21 title="Permanent link"> </a></h4><ul><li>赂眉露&gt;&gt; <code class=syntax>compiled_expression_cache_size</code> 默认情况下设置有限，以降低内存消耗。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4041 rel="external nofollow noreferrer" target=_blank>#4041</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li><li>修复导致执行更改复制表的线程和从ZooKeeper更新配置的线程中挂断的错误。 <a href=https://github.com/ClickHouse/ClickHouse/issues/2947 rel="external nofollow noreferrer" target=_blank>#2947</a> <a href=https://github.com/ClickHouse/ClickHouse/issues/3891 rel="external nofollow noreferrer" target=_blank>#3891</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/3934 rel="external nofollow noreferrer" target=_blank>#3934</a> (<a href=https://github.com/ztlpn rel="external nofollow noreferrer" target=_blank>Alex Zatelepin</a>)</li><li>修复了执行分布式ALTER任务时的争用条件。 争用条件导致多个副本试图执行任务和所有副本，除了一个失败与ZooKeeper错误。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3904 rel="external nofollow noreferrer" target=_blank>#3904</a> (<a href=https://github.com/ztlpn rel="external nofollow noreferrer" target=_blank>Alex Zatelepin</a>)</li><li>修复错误时 <code class=syntax>from_zk</code> 在对ZooKeeper的请求超时后，配置元素没有刷新。 <a href=https://github.com/ClickHouse/ClickHouse/issues/2947 rel="external nofollow noreferrer" target=_blank>#2947</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/3947 rel="external nofollow noreferrer" target=_blank>#3947</a> (<a href=https://github.com/ztlpn rel="external nofollow noreferrer" target=_blank>Alex Zatelepin</a>)</li><li>修复IPv4子网掩码错误前缀的错误。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3945 rel="external nofollow noreferrer" target=_blank>#3945</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li><li>固定崩溃 (<code class=syntax>std::terminate</code>）在极少数情况下，由于资源耗尽而无法创建新线程。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3956 rel="external nofollow noreferrer" target=_blank>#3956</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>修正错误时 <code class=syntax>remote</code> 表函数执行时，错误的限制被用于 <code class=syntax>getStructureOfRemoteTable</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/4009 rel="external nofollow noreferrer" target=_blank>#4009</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li><li>修复netlink套接字的泄漏。 它们被放置在一个池中，在那里它们永远不会被删除，并且当所有当前套接字都在使用时，在新线程开始时创建了新的套接字。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4017 rel="external nofollow noreferrer" target=_blank>#4017</a> (<a href=https://github.com/ztlpn rel="external nofollow noreferrer" target=_blank>Alex Zatelepin</a>)</li><li>修复关闭错误 <code class=syntax>/proc/self/fd</code> 目录早于所有fds被读取 <code class=syntax>/proc</code> 分叉后 <code class=syntax>odbc-bridge</code> 子进程。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4120 rel="external nofollow noreferrer" target=_blank>#4120</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li><li>在主键中使用字符串的情况下，固定字符串到UInt单调转换。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3870 rel="external nofollow noreferrer" target=_blank>#3870</a> (<a href=https://github.com/zhang2014 rel="external nofollow noreferrer" target=_blank>张冬</a>)</li><li>整数转换函数单调性计算中的固定误差。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3921 rel="external nofollow noreferrer" target=_blank>#3921</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>修复段错误 <code class=syntax>arrayEnumerateUniq</code>, <code class=syntax>arrayEnumerateDense</code> 函数在一些无效的参数的情况下。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3909 rel="external nofollow noreferrer" target=_blank>#3909</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>在StorageMerge修复UB。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3910 rel="external nofollow noreferrer" target=_blank>#3910</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer" target=_blank>阿莫斯鸟</a>)</li><li>修正函数中的段错误 <code class=syntax>addDays</code>, <code class=syntax>subtractDays</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/3913 rel="external nofollow noreferrer" target=_blank>#3913</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>修正错误：功能 <code class=syntax>round</code>, <code class=syntax>floor</code>, <code class=syntax>trunc</code>, <code class=syntax>ceil</code> 在整数参数和大负比例执行时可能会返回虚假结果。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3914 rel="external nofollow noreferrer" target=_blank>#3914</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>修正了一个错误引起的 ‘kill query sync’ 从而导致核心转储。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3916 rel="external nofollow noreferrer" target=_blank>#3916</a> (<a href=https://github.com/fancyqlx rel="external nofollow noreferrer" target=_blank>muVulDeePecker</a>)</li><li>修复空复制队列后延迟较长的bug。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3928 rel="external nofollow noreferrer" target=_blank>#3928</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/3932 rel="external nofollow noreferrer" target=_blank>#3932</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li><li>修复了插入到表中的过多内存使用情况 <code class=syntax>LowCardinality</code> 主键。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3955 rel="external nofollow noreferrer" target=_blank>#3955</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>KochetovNicolai</a>)</li><li>固定 <code class=syntax>LowCardinality</code> 序列化 <code class=syntax>Native</code> 在空数组的情况下格式化。 <a href=https://github.com/ClickHouse/ClickHouse/issues/3907 rel="external nofollow noreferrer" target=_blank>#3907</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/4011 rel="external nofollow noreferrer" target=_blank>#4011</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>KochetovNicolai</a>)</li><li>固定不正确的结果，而使用distinct通过单LowCardinality数字列。 <a href=https://github.com/ClickHouse/ClickHouse/issues/3895 rel="external nofollow noreferrer" target=_blank>#3895</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/4012 rel="external nofollow noreferrer" target=_blank>#4012</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>KochetovNicolai</a>)</li><li>固定专门的聚合与LowCardinality键（以防万一 <code class=syntax>compile</code> 设置已启用）。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3886 rel="external nofollow noreferrer" target=_blank>#3886</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>KochetovNicolai</a>)</li><li>修复复制表查询的用户和密码转发。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3957 rel="external nofollow noreferrer" target=_blank>#3957</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>) (<a href=https://github.com/nicelulu rel="external nofollow noreferrer" target=_blank>小路</a>)</li><li>修复了在重新加载字典时在字典数据库中列出表时可能发生的非常罕见的争用条件。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3970 rel="external nofollow noreferrer" target=_blank>#3970</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>修正了与ROLLUP或CUBE一起使用时的错误结果。 <a href=https://github.com/ClickHouse/ClickHouse/issues/3756 rel="external nofollow noreferrer" target=_blank>#3756</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/3837 rel="external nofollow noreferrer" target=_blank>#3837</a> (<a href=https://github.com/reflection rel="external nofollow noreferrer" target=_blank>周三</a>)</li><li>用于查询的固定列别名 <code class=syntax>JOIN ON</code> 语法和分布式表。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3980 rel="external nofollow noreferrer" target=_blank>#3980</a> (<a href=https://github.com/zhang2014 rel="external nofollow noreferrer" target=_blank>张冬</a>)</li><li>在内部实现固定的错误 <code class=syntax>quantileTDigest</code> （由阿尔乔姆Vakhrushev发现）。 这个错误从来没有发生在ClickHouse中，只有那些直接使用ClickHouse代码库作为库的人才有关。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3935 rel="external nofollow noreferrer" target=_blank>#3935</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li></ul><h4 id=improvements-6>改进<a class=headerlink href=../amp/#improvements-6 title="Permanent link"> </a></h4><ul><li>支持 <code class=syntax>IF NOT EXISTS</code> 在 <code class=syntax>ALTER TABLE ADD COLUMN</code> 发言以及 <code class=syntax>IF EXISTS</code> 在 <code class=syntax>DROP/MODIFY/CLEAR/COMMENT COLUMN</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/3900 rel="external nofollow noreferrer" target=_blank>#3900</a> (<a href=https://github.com/bgranvea rel="external nofollow noreferrer" target=_blank>Boris Granveaud</a>)</li><li>功能 <code class=syntax>parseDateTimeBestEffort</code>:支持格式 <code class=syntax>DD.MM.YYYY</code>, <code class=syntax>DD.MM.YY</code>, <code class=syntax>DD-MM-YYYY</code>, <code class=syntax>DD-Mon-YYYY</code>, <code class=syntax>DD/Month/YYYY</code> 和相似。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3922 rel="external nofollow noreferrer" target=_blank>#3922</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li><code class=syntax>CapnProtoInputStream</code> 现在支持锯齿结构。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4063 rel="external nofollow noreferrer" target=_blank>#4063</a> (<a href=https://github.com/Miniwoffer rel="external nofollow noreferrer" target=_blank>Odin Hultgren Van Der Horst</a>)</li><li>可用性改进：增加了从数据目录的所有者启动服务器进程的检查。 如果数据属于非root用户，则不允许从root用户启动服务器。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3785 rel="external nofollow noreferrer" target=_blank>#3785</a> (<a href=https://github.com/sergey-v-galtsev rel="external nofollow noreferrer" target=_blank>谢尔盖-v-加尔采夫</a>)</li><li>在分析具有联接的查询期间检查所需列的更好的逻辑。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3930 rel="external nofollow noreferrer" target=_blank>#3930</a> (<a href=https://github.com/4ertus2 rel="external nofollow noreferrer" target=_blank>Artem Zuikov</a>)</li><li>减少在单个服务器中有大量分布式表的情况下的连接数。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3726 rel="external nofollow noreferrer" target=_blank>#3726</a> (<a href=https://github.com/zhang2014 rel="external nofollow noreferrer" target=_blank>张冬</a>)</li><li>支持的总计行 <code class=syntax>WITH TOTALS</code> 查询ODBC驱动程序。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3836 rel="external nofollow noreferrer" target=_blank>#3836</a> (<a href=https://github.com/nightweb rel="external nofollow noreferrer" target=_blank>Maksim Koritckiy</a>)</li><li>允许使用 <code class=syntax>Enum</code>s为if函数内的整数。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3875 rel="external nofollow noreferrer" target=_blank>#3875</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>伊万</a>)</li><li>已添加 <code class=syntax>low_cardinality_allow_in_native_format</code> 设置。 如果禁用，请不要使用 <code class=syntax>LowCadrinality</code> 输入 <code class=syntax>Native</code> 格式。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3879 rel="external nofollow noreferrer" target=_blank>#3879</a> (<a href=https://github.com/KochetovNicolai rel="external nofollow noreferrer" target=_blank>KochetovNicolai</a>)</li><li>从编译表达式缓存中删除了一些冗余对象以降低内存使用率。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4042 rel="external nofollow noreferrer" target=_blank>#4042</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li><li>添加检查 <code class=syntax>SET send_logs_level = 'value'</code> 查询接受适当的值。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3873 rel="external nofollow noreferrer" target=_blank>#3873</a> (<a href=https://github.com/s-mx rel="external nofollow noreferrer" target=_blank>Sabyanin马克西姆</a>)</li><li>固定数据类型检查类型转换功能。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3896 rel="external nofollow noreferrer" target=_blank>#3896</a> (<a href=https://github.com/zhang2014 rel="external nofollow noreferrer" target=_blank>张冬</a>)</li></ul><h4 id=performance-improvements-5>性能改进<a class=headerlink href=../amp/#performance-improvements-5 title="Permanent link"> </a></h4><ul><li>添加MergeTree设置 <code class=syntax>use_minimalistic_part_header_in_zookeeper</code>. 如果启用，复制的表将在单个零件znode中存储紧凑零件元数据。 这可以显着减少ZooKeeper快照大小（特别是如果表有很多列）。 请注意，启用此设置后，您将无法降级到不支持它的版本。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3960 rel="external nofollow noreferrer" target=_blank>#3960</a> (<a href=https://github.com/ztlpn rel="external nofollow noreferrer" target=_blank>Alex Zatelepin</a>)</li><li>为函数添加基于DFA的实现 <code class=syntax>sequenceMatch</code> 和 <code class=syntax>sequenceCount</code> 以防模式不包含时间。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4004 rel="external nofollow noreferrer" target=_blank>#4004</a> (<a href=https://github.com/ercolanelli-leo rel="external nofollow noreferrer" target=_blank>Léo Ercolanelli</a>)</li><li>整数序列化的性能改进。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3968 rel="external nofollow noreferrer" target=_blank>#3968</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer" target=_blank>阿莫斯鸟</a>)</li><li>零左填充PODArray，使-1元素始终有效并归零。 它用于无分支计算偏移量。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3920 rel="external nofollow noreferrer" target=_blank>#3920</a> (<a href=https://github.com/amosbird rel="external nofollow noreferrer" target=_blank>阿莫斯鸟</a>)</li><li>还原 <code class=syntax>jemalloc</code> 版本导致性能下降。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4018 rel="external nofollow noreferrer" target=_blank>#4018</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li></ul><h4 id=backward-incompatible-changes-2>向后不兼容的更改<a class=headerlink href=../amp/#backward-incompatible-changes-2 title="Permanent link"> </a></h4><ul><li>删除无证功能 <code class=syntax>ALTER MODIFY PRIMARY KEY</code> 因为它被 <code class=syntax>ALTER MODIFY ORDER BY</code> 指挥部 <a href=https://github.com/ClickHouse/ClickHouse/pull/3887 rel="external nofollow noreferrer" target=_blank>#3887</a> (<a href=https://github.com/ztlpn rel="external nofollow noreferrer" target=_blank>Alex Zatelepin</a>)</li><li>删除功能 <code class=syntax>shardByHash</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/3833 rel="external nofollow noreferrer" target=_blank>#3833</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>禁止使用具有结果类型的标量子查询 <code class=syntax>AggregateFunction</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/3865 rel="external nofollow noreferrer" target=_blank>#3865</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>伊万</a>)</li></ul><h4 id=buildtestingpackaging-improvements-6>构建/测试/打包改进<a class=headerlink href=../amp/#buildtestingpackaging-improvements-6 title="Permanent link"> </a></h4><ul><li>增加了对PowerPC的支持 (<code class=syntax>ppc64le</code>）建设。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4132 rel="external nofollow noreferrer" target=_blank>#4132</a> (<a href=https://github.com/danlark1 rel="external nofollow noreferrer" target=_blank>Danila Kutenin</a>)</li><li>有状态功能测试在公共可用数据集上运行。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3969 rel="external nofollow noreferrer" target=_blank>#3969</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>修复了服务器无法启动时的错误 <code class=syntax>bash: /usr/bin/clickhouse-extract-from-config: Operation not permitted</code> Docker或systemd-nspawn中的消息。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4136 rel="external nofollow noreferrer" target=_blank>#4136</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>更新 <code class=syntax>rdkafka</code> 库v1.0.0-RC5。 使用cppkafka而不是原始的C接口。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4025 rel="external nofollow noreferrer" target=_blank>#4025</a> (<a href=https://github.com/abyss7 rel="external nofollow noreferrer" target=_blank>伊万</a>)</li><li>更新 <code class=syntax>mariadb-client</code> 图书馆. 修复了UBSan发现的问题之一。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3924 rel="external nofollow noreferrer" target=_blank>#3924</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>UBSan版本的一些修复。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3926 rel="external nofollow noreferrer" target=_blank>#3926</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/3021 rel="external nofollow noreferrer" target=_blank>#3021</a> <a href=https://github.com/ClickHouse/ClickHouse/pull/3948 rel="external nofollow noreferrer" target=_blank>#3948</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>增加了使用UBSan构建的每次提交运行的测试。</li><li>增加了PVS-Studio静态分析器的每次提交运行。</li><li>修复了PVS-Studio发现的错误。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4013 rel="external nofollow noreferrer" target=_blank>#4013</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>修正了glibc兼容性问题。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4100 rel="external nofollow noreferrer" target=_blank>#4100</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>将Docker映像移动到18.10并为glibc&gt;=2.28添加兼容性文件 <a href=https://github.com/ClickHouse/ClickHouse/pull/3965 rel="external nofollow noreferrer" target=_blank>#3965</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li><li>如果用户不想在服务器码头镜像中播放目录，请添加env变量。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3967 rel="external nofollow noreferrer" target=_blank>#3967</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li><li>启用了大多数来自警告 <code class=syntax>-Weverything</code> 在叮当声。 已启用 <code class=syntax>-Wpedantic</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/3986 rel="external nofollow noreferrer" target=_blank>#3986</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>增加了一些只在clang8中可用的警告。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3993 rel="external nofollow noreferrer" target=_blank>#3993</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>链接到 <code class=syntax>libLLVM</code> 在使用共享链接时，而不是单独的LLVM库。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3989 rel="external nofollow noreferrer" target=_blank>#3989</a> (<a href=https://github.com/orivej rel="external nofollow noreferrer" target=_blank>Origej Desh</a>)</li><li>为测试图像添加了消毒变量。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4072 rel="external nofollow noreferrer" target=_blank>#4072</a> (<a href=https://github.com/alesapin rel="external nofollow noreferrer" target=_blank>阿利沙平</a>)</li><li><code class=syntax>clickhouse-server</code> debian软件包会推荐 <code class=syntax>libcap2-bin</code> 使用包 <code class=syntax>setcap</code> 设置功能的工具。 这是可选的。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4093 rel="external nofollow noreferrer" target=_blank>#4093</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>改进的编译时间，固定包括。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3898 rel="external nofollow noreferrer" target=_blank>#3898</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li><li>添加了哈希函数的性能测试。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3918 rel="external nofollow noreferrer" target=_blank>#3918</a> (<a href=https://github.com/filimonov rel="external nofollow noreferrer" target=_blank>filimonov</a>)</li><li>固定循环库依赖。 <a href=https://github.com/ClickHouse/ClickHouse/pull/3958 rel="external nofollow noreferrer" target=_blank>#3958</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li><li>改进的编译与低可用内存。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4030 rel="external nofollow noreferrer" target=_blank>#4030</a> (<a href=https://github.com/proller rel="external nofollow noreferrer" target=_blank>proller</a>)</li><li>添加了测试脚本，以重现性能下降 <code class=syntax>jemalloc</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/4036 rel="external nofollow noreferrer" target=_blank>#4036</a> (<a href=https://github.com/alexey-milovidov rel="external nofollow noreferrer" target=_blank>阿列克谢-米洛维多夫</a>)</li><li>修正了在下面的注释和字符串文字拼写错误 <code class=syntax>dbms</code>. <a href=https://github.com/ClickHouse/ClickHouse/pull/4122 rel="external nofollow noreferrer" target=_blank>#4122</a> (<a href=https://github.com/maiha rel="external nofollow noreferrer" target=_blank>maiha</a>)</li><li>修正了错别字的评论。 <a href=https://github.com/ClickHouse/ClickHouse/pull/4089 rel="external nofollow noreferrer" target=_blank>#4089</a> (<a href=https://github.com/kvinty rel="external nofollow noreferrer" target=_blank>Evgenii Pravda</a>)</li></ul><h2 id=changelog-for-2018><a href=../../2018/amp/#clickhouse-release-18-16>2018年的更新日志</a><a class=headerlink href=../amp/#changelog-for-2018 title="Permanent link"> </a></h2>
        </div>
      </div>
      <div class="row">
        <div class="col">
          
<div class="alert alert-light my-3">
  <p class="float-right mb-0">评分: RATING_VALUE - RATING_COUNT 所得票数</p>
  <span class="alert-heading display-6">文章评级</span>
  <div id="rating-stars" class="display-6 mb-0"
     
  >RATING_STARS</div>
</div>

<div id="content-footer" class="text-muted pt-3 mb-5">
    <div class="float-md-right">©2016–2020 Yandex LLC</div>
    <div>建于 <a href="https://github.com/ClickHouse/ClickHouse/commit/782f2179ce4ad0b9a9c898a5f32557555b59e4d0" rel="external nofollow noreferrer" target="_blank" class="text-reset">782f2179ce</a>, 发表于 <span title="2020-04-08T17:22:25+03:00">2020-04-08</span>, 修改于 <span title="2020-05-15T07:34:54+03:00">2020-05-15</span>
    
    </div>
</div>

        </div>
      </div>
      <div id="to-full-website" class="row fixed-bottom text-center bg-white py-3">
        <div class="col">
          <a class="btn btn-lg btn-outline-orange" href="https://clickhouse.tech/docs/zh/whats-new/changelog/2019/">To full website</a>
        </div>
      </div>
    </div>
    <amp-analytics type="metrika">
      <script type="application/json">{
"vars": {
  "counterId": "18343495",
  "triggers": {
    "notBounce": {
      "on": "timer",
      "timerSpec": {
        "immediate": false,
        "interval": 15,
        "maxTimerLength": 16
      },
      "request": "notBounce"
    }
  }
}
}</script>
  </amp-analytics>
  </body>
</html>
