










    



    



    



    
    






    <!doctype html>
<html ⚡ lang="es">
  <head>
    <meta charset="utf-8">
    <script async src="https://cdn.ampproject.org/v0.js"></script>
    <title>Cómo ejecutar pruebas de ClickHouse | Documentación de ClickHouse</title>
    <link rel="canonical" href="https://clickhouse.tech/docs/es/development/tests/" />
    <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">
    
<script type="application/ld+json">[{
"@context": "http://schema.org",
"@type": "TechArticle",
"headline": "Cómo ejecutar pruebas de ClickHouse | Documentación de ClickHouse",
"mainEntityOfPage": "https://clickhouse.tech/docs/es/development/tests/",

"datePublished": "2020-03-21T07:11:51+03:00",
"dateModified": "2020-05-15T07:34:54+03:00",

"image": "https://clickhouse.tech/images/logo-209x60.png",
"author": {
  "@type": "Project",
  "name": "ClickHouse"
},
"publisher": {
  "@type": "Organization",
  "name": "Yandex LLC",
  "logo": {
    "@type": "ImageObject",
    "url": "https://clickhouse.tech/images/yandex.png",
    "width": 163,
    "height": 60
  }
}}, {
"@context": "http://schema.org",
"@type": "Episode",
"name": "Cómo ejecutar pruebas de ClickHouse | Documentación de ClickHouse",
"aggregateRating": {
  "@type": "AggregateRating",
  "ratingValue": RATING_VALUE,
  "ratingCount": RATING_COUNT
}
}]</script>

    
    <style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>
    <style amp-custom>:root{--blue:#007bff;--indigo:#6610f2;--purple:#6f42c1;--pink:#e83e8c;--red:#dc3545;--orange:#fd7e14;--yellow:#ffc107;--green:#28a745;--teal:#20c997;--cyan:#17a2b8;--white:#fff;--gray:#6c757d;--gray-dark:#343a40;--primary:#007bff;--secondary:#6c757d;--success:#28a745;--info:#17a2b8;--warning:#ffc107;--danger:#dc3545;--light:#f8f9fa;--dark:#343a40;--breakpoint-xs:0;--breakpoint-sm:576px;--breakpoint-md:768px;--breakpoint-lg:992px;--breakpoint-xl:1200px;--font-family-sans-serif:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";--font-family-monospace:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace}*,::after,::before{box-sizing:border-box}html{font-family:sans-serif;line-height:1.15;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent}footer{display:block}body{margin:0;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-size:1rem;font-weight:400;line-height:1.5;color:#212529;text-align:left;background-color:#fff}[tabindex="-1"]:focus:not(:focus-visible){outline:0}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:.5rem}p{margin-top:0;margin-bottom:1rem}ul{margin-top:0;margin-bottom:1rem}ul ul{margin-bottom:0}b,strong{font-weight:bolder}a{color:#007bff;text-decoration:none;background-color:transparent}a:hover{color:#0056b3;text-decoration:underline}a:not([href]){color:inherit;text-decoration:none}a:not([href]):hover{color:inherit;text-decoration:none}code,pre{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:1em}pre{margin-top:0;margin-bottom:1rem;overflow:auto}img{vertical-align:middle;border-style:none}svg{overflow:hidden;vertical-align:middle}select{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}select{text-transform:none}select{word-wrap:normal}[type=button],[type=reset],[type=submit]{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled){cursor:pointer}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner{padding:0;border-style:none}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:none}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}[hidden]{display:none}.h1,.h2,.h3,.h4,.h5,.h6,h1,h2,h3,h4,h5,h6{margin-bottom:.5rem;font-weight:500;line-height:1.2}.h1,h1{font-size:2.5rem}.h2,h2{font-size:2rem}.h3,h3{font-size:1.75rem}.h4,h4{font-size:1.5rem}.h5,h5{font-size:1.25rem}.h6,h6{font-size:1rem}.lead{font-size:1.25rem;font-weight:300}.display-1{font-size:6rem;font-weight:300;line-height:1.2}.display-2{font-size:5.5rem;font-weight:300;line-height:1.2}.display-3{font-size:4.5rem;font-weight:300;line-height:1.2}.display-4{font-size:3.5rem;font-weight:300;line-height:1.2}.img-fluid{max-width:100%;height:auto}code{font-size:87.5%;color:#e83e8c;word-wrap:break-word}a>code{color:inherit}pre{display:block;font-size:87.5%;color:#212529}pre code{font-size:inherit;color:inherit;word-break:normal}.container{width:100%;padding-right:15px;padding-left:15px;margin-right:auto;margin-left:auto}@media(min-width:576px){.container{max-width:540px}}@media(min-width:768px){.container{max-width:720px}}@media(min-width:992px){.container{max-width:960px}}@media(min-width:1200px){.container{max-width:1140px}}.container-fluid,.container-lg,.container-md{width:100%;padding-right:15px;padding-left:15px;margin-right:auto;margin-left:auto}@media(min-width:576px){.container{max-width:540px}}@media(min-width:768px){.container,.container-md{max-width:720px}}@media(min-width:992px){.container,.container-lg,.container-md{max-width:960px}}@media(min-width:1200px){.container,.container-lg,.container-md{max-width:1140px}}.row{display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-right:-15px;margin-left:-15px}.col,.col-1,.col-10,.col-11,.col-12,.col-2,.col-3,.col-4,.col-5,.col-6,.col-7,.col-8,.col-9,.col-lg,.col-lg-1,.col-lg-10,.col-lg-11,.col-lg-12,.col-lg-2,.col-lg-3,.col-lg-4,.col-lg-5,.col-lg-6,.col-lg-7,.col-lg-8,.col-lg-9,.col-md,.col-md-1,.col-md-10,.col-md-11,.col-md-12,.col-md-2,.col-md-3,.col-md-4,.col-md-5,.col-md-6,.col-md-7,.col-md-8,.col-md-9{position:relative;width:100%;padding-right:15px;padding-left:15px}.col{-ms-flex-preferred-size:0;flex-basis:0;-ms-flex-positive:1;flex-grow:1;max-width:100%}.col-1{-ms-flex:0 0 8.333333%;flex:0 0 8.333333%;max-width:8.333333%}.col-2{-ms-flex:0 0 16.666667%;flex:0 0 16.666667%;max-width:16.666667%}.col-3{-ms-flex:0 0 25%;flex:0 0 25%;max-width:25%}.col-4{-ms-flex:0 0 33.333333%;flex:0 0 33.333333%;max-width:33.333333%}.col-5{-ms-flex:0 0 41.666667%;flex:0 0 41.666667%;max-width:41.666667%}.col-6{-ms-flex:0 0 50%;flex:0 0 50%;max-width:50%}.col-7{-ms-flex:0 0 58.333333%;flex:0 0 58.333333%;max-width:58.333333%}.col-8{-ms-flex:0 0 66.666667%;flex:0 0 66.666667%;max-width:66.666667%}.col-9{-ms-flex:0 0 75%;flex:0 0 75%;max-width:75%}.col-10{-ms-flex:0 0 83.333333%;flex:0 0 83.333333%;max-width:83.333333%}.col-11{-ms-flex:0 0 91.666667%;flex:0 0 91.666667%;max-width:91.666667%}.col-12{-ms-flex:0 0 100%;flex:0 0 100%;max-width:100%}.order-0{-ms-flex-order:0;order:0}.order-1{-ms-flex-order:1;order:1}.order-2{-ms-flex-order:2;order:2}.order-3{-ms-flex-order:3;order:3}.order-4{-ms-flex-order:4;order:4}.order-5{-ms-flex-order:5;order:5}.order-6{-ms-flex-order:6;order:6}.order-7{-ms-flex-order:7;order:7}.order-8{-ms-flex-order:8;order:8}.order-9{-ms-flex-order:9;order:9}.order-10{-ms-flex-order:10;order:10}.order-11{-ms-flex-order:11;order:11}.order-12{-ms-flex-order:12;order:12}@media(min-width:768px){.col-md{-ms-flex-preferred-size:0;flex-basis:0;-ms-flex-positive:1;flex-grow:1;max-width:100%}.col-md-1{-ms-flex:0 0 8.333333%;flex:0 0 8.333333%;max-width:8.333333%}.col-md-2{-ms-flex:0 0 16.666667%;flex:0 0 16.666667%;max-width:16.666667%}.col-md-3{-ms-flex:0 0 25%;flex:0 0 25%;max-width:25%}.col-md-4{-ms-flex:0 0 33.333333%;flex:0 0 33.333333%;max-width:33.333333%}.col-md-5{-ms-flex:0 0 41.666667%;flex:0 0 41.666667%;max-width:41.666667%}.col-md-6{-ms-flex:0 0 50%;flex:0 0 50%;max-width:50%}.col-md-7{-ms-flex:0 0 58.333333%;flex:0 0 58.333333%;max-width:58.333333%}.col-md-8{-ms-flex:0 0 66.666667%;flex:0 0 66.666667%;max-width:66.666667%}.col-md-9{-ms-flex:0 0 75%;flex:0 0 75%;max-width:75%}.col-md-10{-ms-flex:0 0 83.333333%;flex:0 0 83.333333%;max-width:83.333333%}.col-md-11{-ms-flex:0 0 91.666667%;flex:0 0 91.666667%;max-width:91.666667%}.col-md-12{-ms-flex:0 0 100%;flex:0 0 100%;max-width:100%}.order-md-0{-ms-flex-order:0;order:0}.order-md-1{-ms-flex-order:1;order:1}.order-md-2{-ms-flex-order:2;order:2}.order-md-3{-ms-flex-order:3;order:3}.order-md-4{-ms-flex-order:4;order:4}.order-md-5{-ms-flex-order:5;order:5}.order-md-6{-ms-flex-order:6;order:6}.order-md-7{-ms-flex-order:7;order:7}.order-md-8{-ms-flex-order:8;order:8}.order-md-9{-ms-flex-order:9;order:9}.order-md-10{-ms-flex-order:10;order:10}.order-md-11{-ms-flex-order:11;order:11}.order-md-12{-ms-flex-order:12;order:12}}@media(min-width:992px){.col-lg{-ms-flex-preferred-size:0;flex-basis:0;-ms-flex-positive:1;flex-grow:1;max-width:100%}.col-lg-1{-ms-flex:0 0 8.333333%;flex:0 0 8.333333%;max-width:8.333333%}.col-lg-2{-ms-flex:0 0 16.666667%;flex:0 0 16.666667%;max-width:16.666667%}.col-lg-3{-ms-flex:0 0 25%;flex:0 0 25%;max-width:25%}.col-lg-4{-ms-flex:0 0 33.333333%;flex:0 0 33.333333%;max-width:33.333333%}.col-lg-5{-ms-flex:0 0 41.666667%;flex:0 0 41.666667%;max-width:41.666667%}.col-lg-6{-ms-flex:0 0 50%;flex:0 0 50%;max-width:50%}.col-lg-7{-ms-flex:0 0 58.333333%;flex:0 0 58.333333%;max-width:58.333333%}.col-lg-8{-ms-flex:0 0 66.666667%;flex:0 0 66.666667%;max-width:66.666667%}.col-lg-9{-ms-flex:0 0 75%;flex:0 0 75%;max-width:75%}.col-lg-10{-ms-flex:0 0 83.333333%;flex:0 0 83.333333%;max-width:83.333333%}.col-lg-11{-ms-flex:0 0 91.666667%;flex:0 0 91.666667%;max-width:91.666667%}.col-lg-12{-ms-flex:0 0 100%;flex:0 0 100%;max-width:100%}.order-lg-0{-ms-flex-order:0;order:0}.order-lg-1{-ms-flex-order:1;order:1}.order-lg-2{-ms-flex-order:2;order:2}.order-lg-3{-ms-flex-order:3;order:3}.order-lg-4{-ms-flex-order:4;order:4}.order-lg-5{-ms-flex-order:5;order:5}.order-lg-6{-ms-flex-order:6;order:6}.order-lg-7{-ms-flex-order:7;order:7}.order-lg-8{-ms-flex-order:8;order:8}.order-lg-9{-ms-flex-order:9;order:9}.order-lg-10{-ms-flex-order:10;order:10}.order-lg-11{-ms-flex-order:11;order:11}.order-lg-12{-ms-flex-order:12;order:12}}.btn{display:inline-block;font-weight:400;color:#212529;text-align:center;vertical-align:middle;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-color:transparent;border:1px solid transparent;padding:.375rem .75rem;font-size:1rem;line-height:1.5;border-radius:.25rem;transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out}@media(prefers-reduced-motion:reduce){.btn{transition:none}}.btn:hover{color:#212529;text-decoration:none}.btn:focus{outline:0;box-shadow:0 0 0 .2rem rgba(0,123,255,.25)}.btn:disabled{opacity:.65}.btn-primary{color:#fff;background-color:#007bff;border-color:#007bff}.btn-primary:hover{color:#fff;background-color:#0069d9;border-color:#0062cc}.btn-primary:focus{color:#fff;background-color:#0069d9;border-color:#0062cc;box-shadow:0 0 0 .2rem rgba(38,143,255,.5)}.btn-primary:disabled{color:#fff;background-color:#007bff;border-color:#007bff}.btn-light{color:#212529;background-color:#f8f9fa;border-color:#f8f9fa}.btn-light:hover{color:#212529;background-color:#e2e6ea;border-color:#dae0e5}.btn-light:focus{color:#212529;background-color:#e2e6ea;border-color:#dae0e5;box-shadow:0 0 0 .2rem rgba(216,217,219,.5)}.btn-light:disabled{color:#212529;background-color:#f8f9fa;border-color:#f8f9fa}.btn-dark{color:#fff;background-color:#343a40;border-color:#343a40}.btn-dark:hover{color:#fff;background-color:#23272b;border-color:#1d2124}.btn-dark:focus{color:#fff;background-color:#23272b;border-color:#1d2124;box-shadow:0 0 0 .2rem rgba(82,88,93,.5)}.btn-dark:disabled{color:#fff;background-color:#343a40;border-color:#343a40}.btn-outline-primary{color:#007bff;border-color:#007bff}.btn-outline-primary:hover{color:#fff;background-color:#007bff;border-color:#007bff}.btn-outline-primary:focus{box-shadow:0 0 0 .2rem rgba(0,123,255,.5)}.btn-outline-primary:disabled{color:#007bff;background-color:transparent}.btn-outline-light{color:#f8f9fa;border-color:#f8f9fa}.btn-outline-light:hover{color:#212529;background-color:#f8f9fa;border-color:#f8f9fa}.btn-outline-light:focus{box-shadow:0 0 0 .2rem rgba(248,249,250,.5)}.btn-outline-light:disabled{color:#f8f9fa;background-color:transparent}.btn-outline-dark{color:#343a40;border-color:#343a40}.btn-outline-dark:hover{color:#fff;background-color:#343a40;border-color:#343a40}.btn-outline-dark:focus{box-shadow:0 0 0 .2rem rgba(52,58,64,.5)}.btn-outline-dark:disabled{color:#343a40;background-color:transparent}.btn-link{font-weight:400;color:#007bff;text-decoration:none}.btn-link:hover{color:#0056b3;text-decoration:underline}.btn-link:focus{text-decoration:underline;box-shadow:none}.btn-link:disabled{color:#6c757d;pointer-events:none}.btn-group-lg>.btn,.btn-lg{padding:.5rem 1rem;font-size:1.25rem;line-height:1.5;border-radius:.3rem}.btn-block{display:block;width:100%}.btn-block+.btn-block{margin-top:.5rem}.btn-group{position:relative;display:-ms-inline-flexbox;display:inline-flex;vertical-align:middle}.btn-group>.btn{position:relative;-ms-flex:1 1 auto;flex:1 1 auto}.btn-group>.btn:hover{z-index:1}.btn-group>.btn:active,.btn-group>.btn:focus{z-index:1}.btn-group>.btn-group:not(:first-child),.btn-group>.btn:not(:first-child){margin-left:-1px}.btn-group>.btn-group:not(:last-child)>.btn{border-top-right-radius:0;border-bottom-right-radius:0}.btn-group>.btn-group:not(:first-child)>.btn,.btn-group>.btn:not(:first-child){border-top-left-radius:0;border-bottom-left-radius:0}.custom-control{position:relative;display:block;min-height:1.5rem;padding-left:1.5rem}.custom-control-inline{display:-ms-inline-flexbox;display:inline-flex;margin-right:1rem}.custom-select{display:inline-block;width:100%;height:calc(1.5em+.75rem+2px);padding:.375rem 1.75rem .375rem .75rem;font-size:1rem;font-weight:400;line-height:1.5;color:#495057;vertical-align:middle;background:#fff url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='4' height='5' viewBox='0 0 4 5'%3e%3cpath fill='%23343a40' d='M2 0L0 2h4zm0 5L0 3h4z'/%3e%3c/svg%3e") no-repeat right .75rem center/8px 10px;border:1px solid #ced4da;border-radius:.25rem;-webkit-appearance:none;-moz-appearance:none;appearance:none}.custom-select:focus{border-color:#80bdff;outline:0;box-shadow:0 0 0 .2rem rgba(0,123,255,.25)}.custom-select:focus::-ms-value{color:#495057;background-color:#fff}.custom-select[multiple],.custom-select[size]:not([size="1"]){height:auto;padding-right:.75rem;background-image:none}.custom-select:disabled{color:#6c757d;background-color:#e9ecef}.custom-select::-ms-expand{display:none}.custom-select:-moz-focusring{color:transparent;text-shadow:0 0 0 #495057}.custom-select-lg{height:calc(1.5em+1rem+2px);padding-top:.5rem;padding-bottom:.5rem;padding-left:1rem;font-size:1.25rem}.custom-file{position:relative;display:inline-block;width:100%;height:calc(1.5em+.75rem+2px);margin-bottom:0}.custom-select{transition:background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out}@media(prefers-reduced-motion:reduce){.custom-select{transition:none}}.alert{position:relative;padding:.75rem 1.25rem;margin-bottom:1rem;border:1px solid transparent;border-radius:.25rem}.alert-heading{color:inherit}.alert-link{font-weight:700}.alert-primary{color:#004085;background-color:#cce5ff;border-color:#b8daff}.alert-primary .alert-link{color:#002752}.alert-light{color:#818182;background-color:#fefefe;border-color:#fdfdfe}.alert-light .alert-link{color:#686868}.alert-dark{color:#1b1e21;background-color:#d6d8d9;border-color:#c6c8ca}.alert-dark .alert-link{color:#040505}@-webkit-keyframes progress-bar-stripes{from{background-position:1rem 0}to{background-position:0 0}}@keyframes progress-bar-stripes{from{background-position:1rem 0}to{background-position:0 0}}@-webkit-keyframes spinner-border{to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes spinner-border{to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-webkit-keyframes spinner-grow{0%{-webkit-transform:scale(0);transform:scale(0)}50%{opacity:1}}@keyframes spinner-grow{0%{-webkit-transform:scale(0);transform:scale(0)}50%{opacity:1}}.bg-primary{background-color:#007bff}a.bg-primary:focus,a.bg-primary:hover{background-color:#0062cc}.bg-light{background-color:#f8f9fa}a.bg-light:focus,a.bg-light:hover{background-color:#dae0e5}.bg-dark{background-color:#343a40}a.bg-dark:focus,a.bg-dark:hover{background-color:#1d2124}.bg-white{background-color:#fff}.d-none{display:none}.d-inline{display:inline}.d-inline-block{display:inline-block}.d-block{display:block}@media(min-width:768px){.d-md-none{display:none}.d-md-inline{display:inline}.d-md-inline-block{display:inline-block}.d-md-block{display:block}}@media(min-width:992px){.d-lg-none{display:none}.d-lg-inline{display:inline}.d-lg-inline-block{display:inline-block}.d-lg-block{display:block}}.float-right{float:right}.float-none{float:none}@media(min-width:768px){.float-md-right{float:right}.float-md-none{float:none}}@media(min-width:992px){.float-lg-right{float:right}.float-lg-none{float:none}}.fixed-top{position:fixed;top:0;right:0;left:0;z-index:1030}.fixed-bottom{position:fixed;right:0;bottom:0;left:0;z-index:1030}.h-25{height:25%}.h-50{height:50%}.h-75{height:75%}.h-100{height:100%}.m-0{margin:0}.my-0{margin-top:0}.mr-0{margin-right:0}.mb-0,.my-0{margin-bottom:0}.m-1{margin:.25rem}.my-1{margin-top:.25rem}.mr-1{margin-right:.25rem}.mb-1,.my-1{margin-bottom:.25rem}.m-2{margin:.5rem}.my-2{margin-top:.5rem}.mr-2{margin-right:.5rem}.mb-2,.my-2{margin-bottom:.5rem}.m-3{margin:1rem}.my-3{margin-top:1rem}.mr-3{margin-right:1rem}.mb-3,.my-3{margin-bottom:1rem}.m-4{margin:1.5rem}.my-4{margin-top:1.5rem}.mr-4{margin-right:1.5rem}.mb-4,.my-4{margin-bottom:1.5rem}.m-5{margin:3rem}.my-5{margin-top:3rem}.mr-5{margin-right:3rem}.mb-5,.my-5{margin-bottom:3rem}.p-0{padding:0}.pt-0,.py-0{padding-top:0}.pr-0{padding-right:0}.pb-0,.py-0{padding-bottom:0}.pl-0{padding-left:0}.p-1{padding:.25rem}.pt-1,.py-1{padding-top:.25rem}.pr-1{padding-right:.25rem}.pb-1,.py-1{padding-bottom:.25rem}.pl-1{padding-left:.25rem}.p-2{padding:.5rem}.pt-2,.py-2{padding-top:.5rem}.pr-2{padding-right:.5rem}.pb-2,.py-2{padding-bottom:.5rem}.pl-2{padding-left:.5rem}.p-3{padding:1rem}.pt-3,.py-3{padding-top:1rem}.pr-3{padding-right:1rem}.pb-3,.py-3{padding-bottom:1rem}.pl-3{padding-left:1rem}.p-4{padding:1.5rem}.pt-4,.py-4{padding-top:1.5rem}.pr-4{padding-right:1.5rem}.pb-4,.py-4{padding-bottom:1.5rem}.pl-4{padding-left:1.5rem}.p-5{padding:3rem}.pt-5,.py-5{padding-top:3rem}.pr-5{padding-right:3rem}.pb-5,.py-5{padding-bottom:3rem}.pl-5{padding-left:3rem}.m-n1{margin:-.25rem}.my-n1{margin-top:-.25rem}.mr-n1{margin-right:-.25rem}.mb-n1,.my-n1{margin-bottom:-.25rem}.m-n2{margin:-.5rem}.my-n2{margin-top:-.5rem}.mr-n2{margin-right:-.5rem}.mb-n2,.my-n2{margin-bottom:-.5rem}.m-n3{margin:-1rem}.my-n3{margin-top:-1rem}.mr-n3{margin-right:-1rem}.mb-n3,.my-n3{margin-bottom:-1rem}.m-n4{margin:-1.5rem}.my-n4{margin-top:-1.5rem}.mr-n4{margin-right:-1.5rem}.mb-n4,.my-n4{margin-bottom:-1.5rem}.m-n5{margin:-3rem}.my-n5{margin-top:-3rem}.mr-n5{margin-right:-3rem}.mb-n5,.my-n5{margin-bottom:-3rem}@media(min-width:768px){.m-md-0{margin:0}.my-md-0{margin-top:0}.mr-md-0{margin-right:0}.mb-md-0,.my-md-0{margin-bottom:0}.m-md-1{margin:.25rem}.my-md-1{margin-top:.25rem}.mr-md-1{margin-right:.25rem}.mb-md-1,.my-md-1{margin-bottom:.25rem}.m-md-2{margin:.5rem}.my-md-2{margin-top:.5rem}.mr-md-2{margin-right:.5rem}.mb-md-2,.my-md-2{margin-bottom:.5rem}.m-md-3{margin:1rem}.my-md-3{margin-top:1rem}.mr-md-3{margin-right:1rem}.mb-md-3,.my-md-3{margin-bottom:1rem}.m-md-4{margin:1.5rem}.my-md-4{margin-top:1.5rem}.mr-md-4{margin-right:1.5rem}.mb-md-4,.my-md-4{margin-bottom:1.5rem}.m-md-5{margin:3rem}.my-md-5{margin-top:3rem}.mr-md-5{margin-right:3rem}.mb-md-5,.my-md-5{margin-bottom:3rem}.p-md-0{padding:0}.pt-md-0,.py-md-0{padding-top:0}.pr-md-0{padding-right:0}.pb-md-0,.py-md-0{padding-bottom:0}.pl-md-0{padding-left:0}.p-md-1{padding:.25rem}.pt-md-1,.py-md-1{padding-top:.25rem}.pr-md-1{padding-right:.25rem}.pb-md-1,.py-md-1{padding-bottom:.25rem}.pl-md-1{padding-left:.25rem}.p-md-2{padding:.5rem}.pt-md-2,.py-md-2{padding-top:.5rem}.pr-md-2{padding-right:.5rem}.pb-md-2,.py-md-2{padding-bottom:.5rem}.pl-md-2{padding-left:.5rem}.p-md-3{padding:1rem}.pt-md-3,.py-md-3{padding-top:1rem}.pr-md-3{padding-right:1rem}.pb-md-3,.py-md-3{padding-bottom:1rem}.pl-md-3{padding-left:1rem}.p-md-4{padding:1.5rem}.pt-md-4,.py-md-4{padding-top:1.5rem}.pr-md-4{padding-right:1.5rem}.pb-md-4,.py-md-4{padding-bottom:1.5rem}.pl-md-4{padding-left:1.5rem}.p-md-5{padding:3rem}.pt-md-5,.py-md-5{padding-top:3rem}.pr-md-5{padding-right:3rem}.pb-md-5,.py-md-5{padding-bottom:3rem}.pl-md-5{padding-left:3rem}.m-md-n1{margin:-.25rem}.my-md-n1{margin-top:-.25rem}.mr-md-n1{margin-right:-.25rem}.mb-md-n1,.my-md-n1{margin-bottom:-.25rem}.m-md-n2{margin:-.5rem}.my-md-n2{margin-top:-.5rem}.mr-md-n2{margin-right:-.5rem}.mb-md-n2,.my-md-n2{margin-bottom:-.5rem}.m-md-n3{margin:-1rem}.my-md-n3{margin-top:-1rem}.mr-md-n3{margin-right:-1rem}.mb-md-n3,.my-md-n3{margin-bottom:-1rem}.m-md-n4{margin:-1.5rem}.my-md-n4{margin-top:-1.5rem}.mr-md-n4{margin-right:-1.5rem}.mb-md-n4,.my-md-n4{margin-bottom:-1.5rem}.m-md-n5{margin:-3rem}.my-md-n5{margin-top:-3rem}.mr-md-n5{margin-right:-3rem}.mb-md-n5,.my-md-n5{margin-bottom:-3rem}}@media(min-width:992px){.m-lg-0{margin:0}.my-lg-0{margin-top:0}.mr-lg-0{margin-right:0}.mb-lg-0,.my-lg-0{margin-bottom:0}.m-lg-1{margin:.25rem}.my-lg-1{margin-top:.25rem}.mr-lg-1{margin-right:.25rem}.mb-lg-1,.my-lg-1{margin-bottom:.25rem}.m-lg-2{margin:.5rem}.my-lg-2{margin-top:.5rem}.mr-lg-2{margin-right:.5rem}.mb-lg-2,.my-lg-2{margin-bottom:.5rem}.m-lg-3{margin:1rem}.my-lg-3{margin-top:1rem}.mr-lg-3{margin-right:1rem}.mb-lg-3,.my-lg-3{margin-bottom:1rem}.m-lg-4{margin:1.5rem}.my-lg-4{margin-top:1.5rem}.mr-lg-4{margin-right:1.5rem}.mb-lg-4,.my-lg-4{margin-bottom:1.5rem}.m-lg-5{margin:3rem}.my-lg-5{margin-top:3rem}.mr-lg-5{margin-right:3rem}.mb-lg-5,.my-lg-5{margin-bottom:3rem}.p-lg-0{padding:0}.pt-lg-0,.py-lg-0{padding-top:0}.pr-lg-0{padding-right:0}.pb-lg-0,.py-lg-0{padding-bottom:0}.pl-lg-0{padding-left:0}.p-lg-1{padding:.25rem}.pt-lg-1,.py-lg-1{padding-top:.25rem}.pr-lg-1{padding-right:.25rem}.pb-lg-1,.py-lg-1{padding-bottom:.25rem}.pl-lg-1{padding-left:.25rem}.p-lg-2{padding:.5rem}.pt-lg-2,.py-lg-2{padding-top:.5rem}.pr-lg-2{padding-right:.5rem}.pb-lg-2,.py-lg-2{padding-bottom:.5rem}.pl-lg-2{padding-left:.5rem}.p-lg-3{padding:1rem}.pt-lg-3,.py-lg-3{padding-top:1rem}.pr-lg-3{padding-right:1rem}.pb-lg-3,.py-lg-3{padding-bottom:1rem}.pl-lg-3{padding-left:1rem}.p-lg-4{padding:1.5rem}.pt-lg-4,.py-lg-4{padding-top:1.5rem}.pr-lg-4{padding-right:1.5rem}.pb-lg-4,.py-lg-4{padding-bottom:1.5rem}.pl-lg-4{padding-left:1.5rem}.p-lg-5{padding:3rem}.pt-lg-5,.py-lg-5{padding-top:3rem}.pr-lg-5{padding-right:3rem}.pb-lg-5,.py-lg-5{padding-bottom:3rem}.pl-lg-5{padding-left:3rem}.m-lg-n1{margin:-.25rem}.my-lg-n1{margin-top:-.25rem}.mr-lg-n1{margin-right:-.25rem}.mb-lg-n1,.my-lg-n1{margin-bottom:-.25rem}.m-lg-n2{margin:-.5rem}.my-lg-n2{margin-top:-.5rem}.mr-lg-n2{margin-right:-.5rem}.mb-lg-n2,.my-lg-n2{margin-bottom:-.5rem}.m-lg-n3{margin:-1rem}.my-lg-n3{margin-top:-1rem}.mr-lg-n3{margin-right:-1rem}.mb-lg-n3,.my-lg-n3{margin-bottom:-1rem}.m-lg-n4{margin:-1.5rem}.my-lg-n4{margin-top:-1.5rem}.mr-lg-n4{margin-right:-1.5rem}.mb-lg-n4,.my-lg-n4{margin-bottom:-1.5rem}.m-lg-n5{margin:-3rem}.my-lg-n5{margin-top:-3rem}.mr-lg-n5{margin-right:-3rem}.mb-lg-n5,.my-lg-n5{margin-bottom:-3rem}}.text-right{text-align:right}.text-center{text-align:center}@media(min-width:768px){.text-md-right{text-align:right}.text-md-center{text-align:center}}@media(min-width:992px){.text-lg-right{text-align:right}.text-lg-center{text-align:center}}.text-white{color:#fff}.text-primary{color:#007bff}a.text-primary:focus,a.text-primary:hover{color:#0056b3}.text-light{color:#f8f9fa}a.text-light:focus,a.text-light:hover{color:#cbd3da}.text-dark{color:#343a40}a.text-dark:focus,a.text-dark:hover{color:#121416}.text-body{color:#212529}.text-muted{color:#6c757d}.text-black-50{color:rgba(0,0,0,.5)}.text-white-50{color:rgba(255,255,255,.5)}.text-hide{font:0/0 a;color:transparent;text-shadow:none;background-color:transparent;border:0}.text-decoration-none{text-decoration:none}.text-reset{color:inherit}.visible{visibility:visible}@media print{*,::after,::before{text-shadow:none;box-shadow:none}a:not(.btn){text-decoration:underline}pre{white-space:pre-wrap}pre{border:1px solid #adb5bd;page-break-inside:avoid}img{page-break-inside:avoid}h2,h3,p{orphans:3;widows:3}h2,h3{page-break-after:avoid}@page{size:a3}body{min-width:992px}.container{min-width:992px}}@-webkit-keyframes sbx-reset-in{0%{-webkit-transform:translate3d(-20%,0,0);transform:translate3d(-20%,0,0);opacity:0}100%{-webkit-transform:none;transform:none;opacity:1}}@keyframes sbx-reset-in{0%{-webkit-transform:translate3d(-20%,0,0);transform:translate3d(-20%,0,0);opacity:0}100%{-webkit-transform:none;transform:none;opacity:1}}body{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Noto Sans","Helvetica Neue",Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji"}a:link,a:visited{color:#f14600;text-decoration:none}a:active,a:hover{text-decoration:underline}.btn:disabled{cursor:default;opacity:.4}#logo-text{width:180px;margin-left:12px}.display-5{font-size:2rem;font-weight:300;line-height:1.2}.display-6{font-size:1.75rem;font-weight:300;line-height:1.2}.bg-dark-alt,.bg-dark-alt:focus{background:#36363f}.bg-orange,.bg-orange:focus{background:#f14600}.text-dark-alt{color:#36363f}.btn-dark-alt{background:#36363f}.btn-dark-alt:focus{background:#36363f}.btn-outline-orange{border-color:#f14600;color:#f14600}.btn-orange,.btn-outline-orange:hover{background:#f14600;color:#fff}.btn:active,.btn:hover{text-decoration:none}.text-red{color:#ff3939}.text-orange{color:#f14600}.headerlink{text-decoration:none;margin-left:.5rem}body[data-spy] #content{overflow-x:scroll}#content code{color:#111;background:#eee}#content pre{background:#eee;padding:1rem}@media print{body{min-width:0}code,h1,h2,h3,h4,h5,h6,img,li,p,pre{page-break-inside:avoid}}@media(prefers-color-scheme:dark){#to-full-website,body.amp,body.blog,body[data-spy]{background:#1c1c1c;color:#efefef}.invert-dark{filter:invert(100%)}#content code,#content pre{background:#444;color:#eee}}.syntax{background:#f8f9fa;color:#2f1e2e}.syntax .c{color:#8d8687}.syntax .k{color:#815ba4}.syntax .l{color:#f99b15}.syntax .n{color:#2f1e2e}.syntax .o{color:#5bc4bf}.syntax .p{color:#2f1e2e}.syntax .cp{color:#8d8687}.syntax .c1{color:#8d8687}.syntax .ld{color:#48b685}.syntax .m{color:#f99b15}.syntax .s{color:#48b685}.syntax .no{color:#ef6155}.syntax .py{color:#2f1e2e}.syntax .mi{color:#f99b15}.syntax .mo{color:#f99b15}.syntax .s2{color:#48b685}.syntax .se{color:#f99b15}.syntax .sh{color:#48b685}.syntax .si{color:#f99b15}.syntax .s1{color:#48b685}@media(prefers-color-scheme:dark){.syntax .k{color:#c78cff}.syntax .ld{color:#64ffbb}.syntax .s{color:#64ffbb}.syntax .s2{color:#64ffbb}.syntax .sh{color:#64ffbb}.syntax .s1{color:#64ffbb}.syntax .c{color:#64ffbb}.syntax .n{color:#f8f9fa}.syntax .p{color:#f8f9fa}.syntax .py{color:#f8f9fa}}</style>
    <script async custom-element="amp-analytics" src="https://cdn.ampproject.org/v0/amp-analytics-0.1.js"></script>
    <script async custom-element="amp-iframe" src="https://cdn.ampproject.org/v0/amp-iframe-0.1.js"></script>
  </head>
  <body class="amp" dir="ltr">
    <div class="container-fluid container-lg pb-5">
      <div class="row pt-3 mb-3">
        <div class="col">
          <a href="/" class="text-decoration-none">
            <amp-img class="d-inline-block mr-3" layout="fixed" width="40" height="36" src="/images/logo.svg" alt="ClickHouse logo" title="ClickHouse logo"></amp-img><amp-img class="invert-dark d-inline-block" layout="fixed" width="238" height="36" src="/images/clickhouse-black.svg" alt="ClickHouse" title="ClickHouse"></amp-img>
          </a>
        </div>
      </div>
      <div class="row">
        <div id="content" class="col">
          
    <div class="alert alert-primary" role="alert">
      <p class="display-5 mb-2">Ayuda quería!</p>
      <p class="lead">El siguiente contenido de esta página de documentación ha sido traducido por máquina. Pero a diferencia de otros sitios web, no se hace sobre la marcha. Este texto traducido vive en el repositorio de GitHub junto con la base de código principal de ClickHouse y espera a que otros hablantes nativos lo hagan más legible por humanos. <a href="/docs/en/development/tests/" class="alert-link">También puede usar la versión original en inglés como referencia.</a></p>
      <p class="lead">
          <a class="btn btn-lg btn-primary text-white" href="https://github.com/ClickHouse/ClickHouse/edit/master/docs/es/development/tests.md" target="_blank" rel="external nofollow noreferrer">
              Ayuda a la documentación de ClickHouse editando esta página
          </a>
      </p>
    </div>

          <h1 id=clickhouse-testing>Pruebas de ClickHouse<a class=headerlink href=../amp/#clickhouse-testing title="Permanent link"> </a></h1><h2 id=functional-tests>Pruebas funcionales<a class=headerlink href=../amp/#functional-tests title="Permanent link"> </a></h2><p>Las pruebas funcionales son las más simples y cómodas de usar. La mayoría de las características de ClickHouse se pueden probar con pruebas funcionales y son obligatorias para cada cambio en el código de ClickHouse que se puede probar de esa manera.</p><p>Cada prueba funcional envía una o varias consultas al servidor ClickHouse en ejecución y compara el resultado con la referencia.</p><p>Las pruebas se encuentran en <code class=syntax>queries</code> directorio. Hay dos subdirectorios: <code class=syntax>stateless</code> y <code class=syntax>stateful</code>. Las pruebas sin estado ejecutan consultas sin datos de prueba precargados: a menudo crean pequeños conjuntos de datos sintéticos sobre la marcha, dentro de la prueba misma. Las pruebas estatales requieren datos de prueba precargados de Yandex.Métrica y no está disponible para el público en general. Tendemos a usar sólo <code class=syntax>stateless</code> pruebas y evitar la adición de nuevos <code class=syntax>stateful</code> prueba.</p><p>Cada prueba puede ser de dos tipos: <code class=syntax>.sql</code> y <code class=syntax>.sh</code>. <code class=syntax>.sql</code> test es el script SQL simple que se canaliza a <code class=syntax>clickhouse-client --multiquery --testmode</code>. <code class=syntax>.sh</code> test es un script que se ejecuta por sí mismo.</p><p>Para ejecutar todas las pruebas, use <code class=syntax>clickhouse-test</code> herramienta. Mira <code class=syntax>--help</code> para la lista de posibles opciones. Simplemente puede ejecutar todas las pruebas o ejecutar un subconjunto de pruebas filtradas por subcadena en el nombre de la prueba: <code class=syntax>./clickhouse-test substring</code>.</p><p>La forma más sencilla de invocar pruebas funcionales es copiar <code class=syntax>clickhouse-client</code> a <code class=syntax>/usr/bin/</code>, ejecutar <code class=syntax>clickhouse-server</code> y luego ejecutar <code class=syntax>./clickhouse-test</code> de su propio directorio.</p><p>Para agregar una nueva prueba, cree un <code class=syntax>.sql</code> o <code class=syntax>.sh</code> archivo en <code class=syntax>queries/0_stateless</code> directorio, compruébelo manualmente y luego genere <code class=syntax>.reference</code> archivo de la siguiente manera: <code class=syntax>clickhouse-client -n --testmode &lt; 00000_test.sql &gt; 00000_test.reference</code> o <code class=syntax>./00000_test.sh &gt; ./00000_test.reference</code>.</p><p>Las pruebas deben usar (crear, soltar, etc.) solo tablas en <code class=syntax>test</code> base de datos que se supone que se crea de antemano; también las pruebas pueden usar tablas temporales.</p><p>Si desea utilizar consultas distribuidas en pruebas funcionales, puede aprovechar <code class=syntax>remote</code> función de la tabla con <code class=syntax>127.0.0.{1..2}</code> direcciones para que el servidor se consulte; o puede usar clústeres de prueba predefinidos en el archivo de configuración del servidor como <code class=syntax>test_shard_localhost</code>.</p><p>Algunas pruebas están marcadas con <code class=syntax>zookeeper</code>, <code class=syntax>shard</code> o <code class=syntax>long</code> en sus nombres.<br><code class=syntax>zookeeper</code> es para pruebas que están usando ZooKeeper. <code class=syntax>shard</code> es para pruebas que<br> requiere servidor para escuchar <code class=syntax>127.0.0.*</code>; <code class=syntax>distributed</code> o <code class=syntax>global</code> tienen el mismo<br> significado. <code class=syntax>long</code> es para pruebas que duran un poco más de un segundo. Usted puede<br> deshabilitar estos grupos de pruebas utilizando <code class=syntax>--no-zookeeper</code>, <code class=syntax>--no-shard</code> y<br><code class=syntax>--no-long</code> opciones, respectivamente.</p><h2 id=known-bugs>Bugs Conocidos<a class=headerlink href=../amp/#known-bugs title="Permanent link"> </a></h2><p>Si conocemos algunos errores que se pueden reproducir fácilmente mediante pruebas funcionales, colocamos pruebas funcionales preparadas en <code class=syntax>tests/queries/bugs</code> directorio. Estas pruebas se moverán a <code class=syntax>tests/queries/0_stateless</code> cuando se corrigen errores.</p><h2 id=integration-tests>Pruebas de integración<a class=headerlink href=../amp/#integration-tests title="Permanent link"> </a></h2><p>Las pruebas de integración permiten probar ClickHouse en la configuración agrupada y la interacción de ClickHouse con otros servidores como MySQL, Postgres, MongoDB. Son útiles para emular divisiones de red, caídas de paquetes, etc. Estas pruebas se ejecutan bajo Docker y crean múltiples contenedores con varios software.</p><p>Ver <code class=syntax>tests/integration/README.md</code> sobre cómo ejecutar estas pruebas.</p><p>Tenga en cuenta que la integración de ClickHouse con controladores de terceros no se ha probado. Además, actualmente no tenemos pruebas de integración con nuestros controladores JDBC y ODBC.</p><h2 id=unit-tests>Pruebas unitarias<a class=headerlink href=../amp/#unit-tests title="Permanent link"> </a></h2><p>Las pruebas unitarias son útiles cuando desea probar no ClickHouse como un todo, sino una sola biblioteca o clase aislada. Puede habilitar o deshabilitar la compilación de pruebas con <code class=syntax>ENABLE_TESTS</code> Opción CMake. Las pruebas unitarias (y otros programas de prueba) se encuentran en <code class=syntax>tests</code> subdirectorios en todo el código. Para ejecutar pruebas unitarias, escriba <code class=syntax>ninja test</code>. Algunas pruebas usan <code class=syntax>gtest</code>, pero algunos son solo programas que devuelven un código de salida distinto de cero en caso de fallo de prueba.</p><p>No es necesariamente tener pruebas unitarias si el código ya está cubierto por pruebas funcionales (y las pruebas funcionales suelen ser mucho más simples de usar).</p><h2 id=performance-tests>Pruebas de rendimiento<a class=headerlink href=../amp/#performance-tests title="Permanent link"> </a></h2><p>Las pruebas de rendimiento permiten medir y comparar el rendimiento de alguna parte aislada de ClickHouse en consultas sintéticas. Las pruebas se encuentran en <code class=syntax>tests/performance</code>. Cada prueba está representada por <code class=syntax>.xml</code> archivo con la descripción del caso de prueba. Las pruebas se ejecutan con <code class=syntax>clickhouse performance-test</code> herramienta (que está incrustada en <code class=syntax>clickhouse</code> binario). Ver <code class=syntax>--help</code> para la invocación.</p><p>Cada prueba ejecuta una o varias consultas (posiblemente con combinaciones de parámetros) en un bucle con algunas condiciones para detener (como “maximum execution speed is not changing in three seconds”) y medir algunas métricas sobre el rendimiento de las consultas (como “maximum execution speed”). Algunas pruebas pueden contener condiciones previas en el conjunto de datos de pruebas precargado.</p><p>Si desea mejorar el rendimiento de ClickHouse en algún escenario, y si se pueden observar mejoras en consultas simples, se recomienda encarecidamente escribir una prueba de rendimiento. Siempre tiene sentido usar <code class=syntax>perf top</code> u otras herramientas de perf durante sus pruebas.</p><h2 id=test-tools-and-scripts>Herramientas de prueba y secuencias de comandos<a class=headerlink href=../amp/#test-tools-and-scripts title="Permanent link"> </a></h2><p>Algunos programas en <code class=syntax>tests</code> directorio no son pruebas preparadas, pero son herramientas de prueba. Por ejemplo, para <code class=syntax>Lexer</code> hay una herramienta <code class=syntax>src/Parsers/tests/lexer</code> que solo hacen la tokenización de stdin y escriben el resultado coloreado en stdout. Puede usar este tipo de herramientas como ejemplos de código y para exploración y pruebas manuales.</p><p>También puede colocar un par de archivos <code class=syntax>.sh</code> y <code class=syntax>.reference</code> junto con la herramienta para ejecutarlo en alguna entrada predefinida, entonces el resultado del script se puede comparar con <code class=syntax>.reference</code> file. Este tipo de pruebas no están automatizadas.</p><h2 id=miscellaneous-tests>Pruebas diversas<a class=headerlink href=../amp/#miscellaneous-tests title="Permanent link"> </a></h2><p>Hay pruebas para diccionarios externos ubicados en <code class=syntax>tests/external_dictionaries</code> y para modelos aprendidos a máquina en <code class=syntax>tests/external_models</code>. Estas pruebas no se actualizan y deben transferirse a pruebas de integración.</p><p>Hay una prueba separada para inserciones de quórum. Esta prueba ejecuta el clúster ClickHouse en servidores separados y emula varios casos de fallas: división de red, caída de paquetes (entre nodos ClickHouse, entre ClickHouse y ZooKeeper, entre el servidor ClickHouse y el cliente, etc.), <code class=syntax>kill -9</code>, <code class=syntax>kill -STOP</code> y <code class=syntax>kill -CONT</code> , como <a href=https://aphyr.com/tags/Jepsen rel="external nofollow noreferrer" target=_blank>Jepsen</a>. A continuación, la prueba comprueba que todas las inserciones reconocidas se escribieron y todas las inserciones rechazadas no.</p><p>La prueba de quórum fue escrita por un equipo separado antes de que ClickHouse fuera de código abierto. Este equipo ya no trabaja con ClickHouse. La prueba fue escrita accidentalmente en Java. Por estas razones, la prueba de quórum debe reescribirse y trasladarse a pruebas de integración.</p><h2 id=manual-testing>Pruebas manuales<a class=headerlink href=../amp/#manual-testing title="Permanent link"> </a></h2><p>Cuando desarrolla una nueva característica, es razonable probarla también manualmente. Puede hacerlo con los siguientes pasos:</p><p>Construir ClickHouse. Ejecute ClickHouse desde el terminal: cambie el directorio a <code class=syntax>programs/clickhouse-server</code> y ejecutarlo con <code class=syntax>./clickhouse-server</code>. Se utilizará la configuración (<code class=syntax>config.xml</code>, <code class=syntax>users.xml</code> y archivos dentro de <code class=syntax>config.d</code> y <code class=syntax>users.d</code> directorios) desde el directorio actual de forma predeterminada. Para conectarse al servidor ClickHouse, ejecute <code class=syntax>programs/clickhouse-client/clickhouse-client</code>.</p><p>Tenga en cuenta que todas las herramientas de clickhouse (servidor, cliente, etc.) son solo enlaces simbólicos a un único binario llamado <code class=syntax>clickhouse</code>. Puede encontrar este binario en <code class=syntax>programs/clickhouse</code>. Todas las herramientas también se pueden invocar como <code class=syntax>clickhouse tool</code> en lugar de <code class=syntax>clickhouse-tool</code>.</p><p>Alternativamente, puede instalar el paquete ClickHouse: ya sea una versión estable del repositorio de Yandex o puede crear un paquete para usted con <code class=syntax>./release</code> en la raíz de fuentes de ClickHouse. Luego inicie el servidor con <code class=syntax>sudo service clickhouse-server start</code> (o detener para detener el servidor). Busque registros en <code class=syntax>/etc/clickhouse-server/clickhouse-server.log</code>.</p><p>Cuando ClickHouse ya está instalado en su sistema, puede crear un nuevo <code class=syntax>clickhouse</code> binario y reemplazar el binario existente:</p><div class=codehilite><pre><span></span><code class=syntax>$ sudo service clickhouse-server stop
$ sudo cp ./clickhouse /usr/bin/
$ sudo service clickhouse-server start
</code></pre></div><p>También puede detener el servidor de clickhouse del sistema y ejecutar el suyo propio con la misma configuración pero con el registro en la terminal:</p><div class=codehilite><pre><span></span><code class=syntax>$ sudo service clickhouse-server stop
$ sudo -u clickhouse /usr/bin/clickhouse server --config-file /etc/clickhouse-server/config.xml
</code></pre></div><p>Ejemplo con gdb:</p><div class=codehilite><pre><span></span><code class=syntax>$ sudo -u clickhouse gdb --args /usr/bin/clickhouse server --config-file /etc/clickhouse-server/config.xml
</code></pre></div><p>Si el servidor de clickhouse del sistema ya se está ejecutando y no desea detenerlo, puede cambiar los números de <code class=syntax>config.xml</code> (o anularlos en un archivo en <code class=syntax>config.d</code> directorio), proporcione la ruta de datos adecuada y ejecútela.</p><p><code class=syntax>clickhouse</code> binary casi no tiene dependencias y funciona en una amplia gama de distribuciones de Linux. Para probar rápidamente y sucio sus cambios en un servidor, simplemente puede <code class=syntax>scp</code> su fresco construido <code class=syntax>clickhouse</code> binario a su servidor y luego ejecútelo como en los ejemplos anteriores.</p><h2 id=testing-environment>Entorno de prueba<a class=headerlink href=../amp/#testing-environment title="Permanent link"> </a></h2><p>Antes de publicar la versión como estable, la implementamos en el entorno de prueba. El entorno de prueba es un clúster que procesa 1/39 parte de <a href=https://metrica.yandex.com/ rel="external nofollow noreferrer" target=_blank>El Yandex.Métrica</a> datos. Compartimos nuestro entorno de pruebas con Yandex.Equipo de Metrica. ClickHouse se actualiza sin tiempo de inactividad sobre los datos existentes. Nos fijamos en un primer momento que los datos se procesan con éxito sin retraso de tiempo real, la replicación continúan trabajando y no hay problemas visibles para Yandex.Equipo de Metrica. La primera comprobación se puede hacer de la siguiente manera:</p><div class=codehilite><pre><span></span><code class=syntax><span class=k>SELECT</span> <span class=n>hostName</span><span class=p>()</span> <span class=k>AS</span> <span class=n>h</span><span class=p>,</span> <span class=k>any</span><span class=p>(</span><span class=k>version</span><span class=p>()),</span> <span class=k>any</span><span class=p>(</span><span class=n>uptime</span><span class=p>()),</span> <span class=k>max</span><span class=p>(</span><span class=n>UTCEventTime</span><span class=p>),</span> <span class=k>count</span><span class=p>()</span> <span class=k>FROM</span> <span class=n>remote</span><span class=p>(</span><span class=s1>'example01-01-{1..3}t'</span><span class=p>,</span> <span class=n>merge</span><span class=p>,</span> <span class=n>hits</span><span class=p>)</span> <span class=k>WHERE</span> <span class=n>EventDate</span> <span class=o>&gt;=</span> <span class=n>today</span><span class=p>()</span> <span class=o>-</span> <span class=mi>2</span> <span class=k>GROUP</span> <span class=k>BY</span> <span class=n>h</span> <span class=k>ORDER</span> <span class=k>BY</span> <span class=n>h</span><span class=p>;</span>
</code></pre></div><p>En algunos casos también implementamos en el entorno de prueba de nuestros equipos de amigos en Yandex: Market, Cloud, etc. También tenemos algunos servidores de hardware que se utilizan con fines de desarrollo.</p><h2 id=load-testing>Pruebas de carga<a class=headerlink href=../amp/#load-testing title="Permanent link"> </a></h2><p>Después de implementar en el entorno de prueba, ejecutamos pruebas de carga con consultas del clúster de producción. Esto se hace manualmente.</p><p>Asegúrese de que ha habilitado <code class=syntax>query_log</code> en su clúster de producción.</p><p>Recopilar el registro de consultas para un día o más:</p><div class=codehilite><pre><span></span><code class=syntax>$ clickhouse-client --query<span class=o>=</span><span class=s2>"SELECT DISTINCT query FROM system.query_log WHERE event_date = today() AND query LIKE '%ym:%' AND query NOT LIKE '%system.query_log%' AND type = 2 AND is_initial_query"</span> &gt; queries.tsv
</code></pre></div><p>Este es un ejemplo complicado. <code class=syntax>type = 2</code> filtrará las consultas que se ejecutan correctamente. <code class=syntax>query LIKE '%ym:%'</code> es seleccionar consultas relevantes de Yandex.Métrica. <code class=syntax>is_initial_query</code> es seleccionar solo las consultas iniciadas por el cliente, no por ClickHouse (como partes del procesamiento de consultas distribuidas).</p><p><code class=syntax>scp</code> este registro en su clúster de prueba y ejecútelo de la siguiente manera:</p><div class=codehilite><pre><span></span><code class=syntax>$ clickhouse benchmark --concurrency <span class=m>16</span> &lt; queries.tsv
</code></pre></div><p>(probablemente también desee especificar un <code class=syntax>--user</code>)</p><p>Luego déjalo por una noche o un fin de semana e ir a tomar un descanso.</p><p>Usted debe comprobar que <code class=syntax>clickhouse-server</code> no se bloquea, la huella de memoria está limitada y el rendimiento no se degrada con el tiempo.</p><p>Los tiempos de ejecución de consultas precisos no se registran y no se comparan debido a la alta variabilidad de las consultas y el entorno.</p><h2 id=build-tests>Pruebas de construcción<a class=headerlink href=../amp/#build-tests title="Permanent link"> </a></h2><p>Las pruebas de compilación permiten verificar que la compilación no esté rota en varias configuraciones alternativas y en algunos sistemas extranjeros. Las pruebas se encuentran en <code class=syntax>ci</code> directorio. Ejecutan compilación desde la fuente dentro de Docker, Vagrant y, a veces, con <code class=syntax>qemu-user-static</code> dentro de Docker. Estas pruebas están en desarrollo y las ejecuciones de pruebas no están automatizadas.</p><p>Motivación:</p><p>Normalmente lanzamos y ejecutamos todas las pruebas en una sola variante de compilación ClickHouse. Pero hay variantes de construcción alternativas que no se prueban a fondo. Ejemplos:</p><ul><li>construir en FreeBSD;</li><li>construir en Debian con bibliotecas de paquetes del sistema;</li><li>construir con enlaces compartidos de bibliotecas;</li><li>construir en la plataforma AArch64;</li><li>construir en la plataforma PowerPc.</li></ul><p>Por ejemplo, construir con paquetes del sistema es una mala práctica, porque no podemos garantizar qué versión exacta de paquetes tendrá un sistema. Pero esto es realmente necesario para los mantenedores de Debian. Por esta razón, al menos tenemos que admitir esta variante de construcción. Otro ejemplo: la vinculación compartida es una fuente común de problemas, pero es necesaria para algunos entusiastas.</p><p>Aunque no podemos ejecutar todas las pruebas en todas las variantes de compilaciones, queremos verificar al menos que varias variantes de compilación no estén rotas. Para este propósito utilizamos pruebas de construcción.</p><h2 id=testing-for-protocol-compatibility>Pruebas de Compatibilidad de protocolos<a class=headerlink href=../amp/#testing-for-protocol-compatibility title="Permanent link"> </a></h2><p>Cuando ampliamos el protocolo de red ClickHouse, probamos manualmente que el antiguo clickhouse-client funciona con el nuevo clickhouse-server y el nuevo clickhouse-client funciona con el antiguo clickhouse-server (simplemente ejecutando binarios de los paquetes correspondientes).</p><h2 id=help-from-the-compiler>Ayuda del compilador<a class=headerlink href=../amp/#help-from-the-compiler title="Permanent link"> </a></h2><p>Código principal de ClickHouse (que se encuentra en <code class=syntax>dbms</code> directorio) se construye con <code class=syntax>-Wall -Wextra -Werror</code> y con algunas advertencias habilitadas adicionales. Aunque estas opciones no están habilitadas para bibliotecas de terceros.</p><p>Clang tiene advertencias aún más útiles: puedes buscarlas con <code class=syntax>-Weverything</code> y elige algo para la compilación predeterminada.</p><p>Para las compilaciones de producción, se usa gcc (todavía genera un código ligeramente más eficiente que clang). Para el desarrollo, el clang suele ser más conveniente de usar. Puede construir en su propia máquina con el modo de depuración (para ahorrar batería de su computadora portátil), pero tenga en cuenta que el compilador puede generar más advertencias con <code class=syntax>-O3</code> debido a un mejor flujo de control y análisis entre procedimientos. Al construir con clang, <code class=syntax>libc++</code> se utiliza en lugar de <code class=syntax>libstdc++</code> y al construir con el modo de depuración, la versión de depuración de <code class=syntax>libc++</code> se utiliza que permite detectar más errores en tiempo de ejecución.</p><h2 id=sanitizers>Desinfectantes<a class=headerlink href=../amp/#sanitizers title="Permanent link"> </a></h2><p><strong>Dirección desinfectante</strong>.<br> Ejecutamos pruebas funcionales y de integración bajo ASan por compromiso.</p><p><strong>Valgrind (Memcheck)</strong>.<br> Realizamos pruebas funcionales bajo Valgrind durante la noche. Se tarda varias horas. Actualmente hay un falso positivo conocido en <code class=syntax>re2</code> biblioteca, ver <a href=https://research.swtch.com/sparse rel="external nofollow noreferrer" target=_blank>este artículo</a>.</p><p><strong>Desinfectante de comportamiento indefinido.</strong><br> Ejecutamos pruebas funcionales y de integración bajo ASan por compromiso.</p><p><strong>Desinfectante de hilo</strong>.<br> Ejecutamos pruebas funcionales bajo TSan por compromiso. Todavía no ejecutamos pruebas de integración bajo TSan por compromiso.</p><p><strong>Desinfectante de memoria</strong>.<br> Actualmente todavía no usamos MSan.</p><p><strong>Asignador de depuración.</strong><br> Versión de depuración de <code class=syntax>jemalloc</code> se utiliza para la compilación de depuración.</p><h2 id=fuzzing>Fuzzing<a class=headerlink href=../amp/#fuzzing title="Permanent link"> </a></h2><p>ClickHouse fuzzing se implementa tanto usando <a href=https://llvm.org/docs/LibFuzzer.html rel="external nofollow noreferrer" target=_blank>LibFuzzer</a> y consultas SQL aleatorias.<br> Todas las pruebas de fuzz deben realizarse con desinfectantes (Dirección y Undefined).</p><p>LibFuzzer se usa para pruebas de fuzz aisladas del código de la biblioteca. Fuzzers se implementan como parte del código de prueba y tienen “_fuzzer” nombre postfixes.<br> El ejemplo de Fuzzer se puede encontrar en <code class=syntax>src/Parsers/tests/lexer_fuzzer.cpp</code>. Las configuraciones, diccionarios y corpus específicos de LibFuzzer se almacenan en <code class=syntax>tests/fuzz</code>.<br> Le recomendamos que escriba pruebas fuzz para cada funcionalidad que maneje la entrada del usuario.</p><p>Fuzzers no se construyen de forma predeterminada. Para construir fuzzers ambos <code class=syntax>-DENABLE_FUZZING=1</code> y <code class=syntax>-DENABLE_TESTS=1</code> se deben establecer opciones.<br> Recomendamos deshabilitar Jemalloc mientras se construyen fuzzers. Configuración utilizada para integrar<br> Google OSS-Fuzz se puede encontrar en <code class=syntax>docker/fuzz</code>.</p><p>También usamos una prueba de fuzz simple para generar consultas SQL aleatorias y verificar que el servidor no muera al ejecutarlas.<br> Lo puedes encontrar en <code class=syntax>00746_sql_fuzzy.pl</code>. Esta prueba debe ejecutarse de forma continua (de la noche a la mañana y más).</p><h2 id=security-audit>Auditoría de seguridad<a class=headerlink href=../amp/#security-audit title="Permanent link"> </a></h2><p>La gente de Yandex Security Team hace una visión general básica de las capacidades de ClickHouse desde el punto de vista de la seguridad.</p><h2 id=static-analyzers>Analizadores estáticos<a class=headerlink href=../amp/#static-analyzers title="Permanent link"> </a></h2><p>Corremos <code class=syntax>PVS-Studio</code> por compromiso. Hemos evaluado <code class=syntax>clang-tidy</code>, <code class=syntax>Coverity</code>, <code class=syntax>cppcheck</code>, <code class=syntax>PVS-Studio</code>, <code class=syntax>tscancode</code>. Encontrará instrucciones de uso en <code class=syntax>tests/instructions/</code> directorio. También puedes leer <a href=https://habr.com/company/yandex/blog/342018/ rel="external nofollow noreferrer" target=_blank>el artículo en ruso</a>.</p><p>Si usted usa <code class=syntax>CLion</code> como IDE, puede aprovechar algunos <code class=syntax>clang-tidy</code> comprueba fuera de la caja.</p><h2 id=hardening>Endurecer<a class=headerlink href=../amp/#hardening title="Permanent link"> </a></h2><p><code class=syntax>FORTIFY_SOURCE</code> se utiliza de forma predeterminada. Es casi inútil, pero todavía tiene sentido en casos raros y no lo desactivamos.</p><h2 id=code-style>Estilo de código<a class=headerlink href=../amp/#code-style title="Permanent link"> </a></h2><p>Se describen las reglas de estilo de código <a href=https://clickhouse.tech/docs/en/development/style/ target=_blank>aqui</a>.</p><p>Para comprobar si hay algunas violaciones de estilo comunes, puede usar <code class=syntax>utils/check-style</code> script.</p><p>Para forzar el estilo adecuado de su código, puede usar <code class=syntax>clang-format</code>. File <code class=syntax>.clang-format</code> se encuentra en la raíz de las fuentes. Se corresponde principalmente con nuestro estilo de código real. Pero no se recomienda aplicar <code class=syntax>clang-format</code> a los archivos existentes porque empeora el formato. Usted puede utilizar <code class=syntax>clang-format-diff</code> herramienta que puede encontrar en el repositorio de origen clang.</p><p>Alternativamente, puede intentar <code class=syntax>uncrustify</code> herramienta para reformatear su código. La configuración está en <code class=syntax>uncrustify.cfg</code> en la raíz de las fuentes. Es menos probado que <code class=syntax>clang-format</code>.</p><p><code class=syntax>CLion</code> tiene su propio formateador de código que debe ajustarse para nuestro estilo de código.</p><h2 id=metrica-b2b-tests>Pruebas Metrica B2B<a class=headerlink href=../amp/#metrica-b2b-tests title="Permanent link"> </a></h2><p>Cada lanzamiento de ClickHouse se prueba con los motores Yandex Metrica y AppMetrica. Las pruebas y las versiones estables de ClickHouse se implementan en máquinas virtuales y se ejecutan con una copia pequeña del motor Metrica que procesa una muestra fija de datos de entrada. A continuación, los resultados de dos instancias del motor Metrica se comparan juntos.</p><p>Estas pruebas son automatizadas por un equipo separado. Debido a la gran cantidad de piezas móviles, las pruebas fallan la mayor parte del tiempo por razones completamente no relacionadas, que son muy difíciles de descubrir. Lo más probable es que estas pruebas tengan un valor negativo para nosotros. Sin embargo, se demostró que estas pruebas son útiles en aproximadamente una o dos veces de cada cientos.</p><h2 id=test-coverage>Cobertura de prueba<a class=headerlink href=../amp/#test-coverage title="Permanent link"> </a></h2><p>A partir de julio de 2018, no realizamos un seguimiento de la cobertura de las pruebas.</p><h2 id=test-automation>Automatización de pruebas<a class=headerlink href=../amp/#test-automation title="Permanent link"> </a></h2><p>Realizamos pruebas con el CI interno de Yandex y el sistema de automatización de trabajos llamado “Sandbox”.</p><p>Los trabajos de compilación y las pruebas se ejecutan en Sandbox por confirmación. Los paquetes resultantes y los resultados de las pruebas se publican en GitHub y se pueden descargar mediante enlaces directos. Los artefactos se almacenan eternamente. Cuando envías una solicitud de extracción en GitHub, la etiquetamos como “can be tested” y nuestro sistema CI construirá paquetes ClickHouse (liberación, depuración, con desinfectante de direcciones, etc.) para usted.</p><p>No usamos Travis CI debido al límite de tiempo y potencia computacional.<br> No usamos Jenkins. Se usó antes y ahora estamos felices de no estar usando Jenkins.</p><p><a href=https://clickhouse.tech/docs/en/development/tests/ target=_blank>Artículo Original</a> <!--hide--></p>
        </div>
      </div>
      <div class="row">
        <div class="col">
          
<div class="alert alert-light my-3">
  <p class="float-right mb-0">Clasificación: RATING_VALUE - RATING_COUNT voto</p>
  <span class="alert-heading display-6">Clasificación del artículo</span>
  <div id="rating-stars" class="display-6 mb-0"
     
  >RATING_STARS</div>
</div>

<div id="content-footer" class="text-muted pt-3 mb-5">
    <div class="float-md-right">©2016–2020 Yandex LLC</div>
    <div>Construido a partir de <a href="https://github.com/ClickHouse/ClickHouse/commit/782f2179ce4ad0b9a9c898a5f32557555b59e4d0" rel="external nofollow noreferrer" target="_blank" class="text-reset">782f2179ce</a>, publicado en <span title="2020-03-21T07:11:51+03:00">2020-03-21</span>, modificado en <span title="2020-05-15T07:34:54+03:00">2020-05-15</span>
    
    </div>
</div>

        </div>
      </div>
      <div id="to-full-website" class="row fixed-bottom text-center bg-white py-3">
        <div class="col">
          <a class="btn btn-lg btn-outline-orange" href="https://clickhouse.tech/docs/es/development/tests/">To full website</a>
        </div>
      </div>
    </div>
    <amp-analytics type="metrika">
      <script type="application/json">{
"vars": {
  "counterId": "18343495",
  "triggers": {
    "notBounce": {
      "on": "timer",
      "timerSpec": {
        "immediate": false,
        "interval": 15,
        "maxTimerLength": 16
      },
      "request": "notBounce"
    }
  }
}
}</script>
  </amp-analytics>
  </body>
</html>
